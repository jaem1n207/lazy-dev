[
  {
    "route": "https://lazy-dev.netlify.app/shorts/check-object-is-empty/",
    "data": {
      "%EC%83%81%EC%86%8D%EB%90%9C-%EC%86%8D%EC%84%B1%EC%9D%B4-%EC%9E%88%EB%8A%94-%EA%B0%9D%EC%B2%B4-%EB%8B%A4%EB%A3%B0-%EB%95%8C#상속된 속성이 있는 객체 다룰 때": "<p><code class=\"language-text\">Object.keys</code> 메서드와 <code class=\"language-text\">for…in</code> 루프를 활용해 자바스크립트에서 객체가 비어 있는지 확인하는 방법에\n대해 살펴보겠습니다.</p>\n<p>자바스크립트에서 객체는 다른 객체로부터 속성을 상속받아 프로토타입 체인을 생성할 수 있습니다.\n<strong><code class=\"language-text\">for...in</code></strong> 반복문을 사용하여 객체의 속성을 반복할 때, 객체 자체의 속성 뿐만 아니라 프로토타입\n체인에서 상속받은 속성도 열거합니다. 이러한 방법을 통해 상속받은 속성이 있는 객체를 다루는 경우에\n어떻게 이 방법들을 사용할 수 있는지 자세히 알아보겠습니다.</p>\n<p>이를 이해하면 데이터 구조를 처리하고 코드의 가독성을 향상시킬 때 도움이 됩니다. 각 방법의 원리와\n적절한 사용 사례를 이해하기 위해 간단하게 알아보도록 하겠습니다.</p>\n<h2 id=\"상속된-속성이-있는-객체-다룰-때\" style=\"position:relative;\"><a href=\"#%EC%83%81%EC%86%8D%EB%90%9C-%EC%86%8D%EC%84%B1%EC%9D%B4-%EC%9E%88%EB%8A%94-%EA%B0%9D%EC%B2%B4-%EB%8B%A4%EB%A3%B0-%EB%95%8C\" aria-label=\"상속된 속성이 있는 객체 다룰 때 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>상속된 속성이 있는 객체 다룰 때</h2>\n<p>프로토타입 객체와 이 프로토타입에서 속성을 상속받는 다른 객체가 있다고 가정해 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n  inheritedProp2<span class=\"token operator\">:</span> <span class=\"token string\">'value2'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp1 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue1'</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp2 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue2'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"objectkeys-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 활용</h3>\n<p><code class=\"language-text\">Object.keys</code> 를 사용해 <code class=\"language-text\">obj</code> 의 키를 얻으면 상속받은 것이 아닌 자체 속성만 반환됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['ownProp1', 'ownProp2']</span></code></pre></div>\n<h3 id=\"forin-루프-활용\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for…in 루프 활용</h3>\n<p>반면에 <code class=\"language-text\">for…in</code> 루프를 사용하면 자체 속성뿐만 아니라 상속받은 속성도 모두 반복합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2', 'inheritedProp1', 'inheritedProp2'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"hasownproperty와-함께-forin-루프-활용\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"hasownproperty와 함께 forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for…in 루프 활용</h3>\n<p>상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을 둘 수 있도록 <code class=\"language-text\">for...in</code> 루프 내에서\n<code class=\"language-text\">hasOwnProperty</code> 메서드를 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"objectkeys-메서드-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 메서드 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 메서드 활용</h2>\n<p><code class=\"language-text\">Object.keys</code> 메서드는 객체의 모든 열거 가능한 속성을 나열하여 배열로 반환하는 데 유용합니다. 이\n방법을 사용하면 객체에 포함된 키의 수를 기준으로 빈 객체를 쉽게 확인할 수 있습니다. 이 방법을 사용한\n코드는 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isEmptyUsingObjectKeys <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<p>이 방법은 매우 간단하며 높은 가독성을 제공합니다.</p>\n<h3 id=\"적절한-사용-사례\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80\" aria-label=\"적절한 사용 사례 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>작은 객체: 객체의 모든 속성을 반복하여 key 배열을 구축한 다음, 이 배열의 길이를 확인하여 객체가\n비어 있는지 확인합니다. 따라서 큰 객체에 대해선 사용하지 않는 게 좋습니다.</li>\n<li>코드 단순화: 최적화보다 가독성이 우선일 때 사용할 때 좋은 선택지입니다.</li>\n</ul>\n<h2 id=\"forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for...in 루프 활용</h2>\n<p>반면에 <code class=\"language-text\">for...in</code> 루프는 <strong>프로토타입 체인을 통해 상속받은 것을 포함</strong>하여 객체의 모든 열거 가능한\n속성을 순환합니다. 이를 통해 상속된 속성이 있는 객체를 다룰 때, 이 방법이 더욱 유연할 수 있습니다.\n<code class=\"language-text\">for...in</code> 루프를 사용하여 작성한 함수는 다음과 같습니다:</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForIn <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<ul>\n<li>상속: <code class=\"language-text\">Object.keys</code> 와 달리 프로토타입 체인을 따라 속성을 확인할 수 있습니다.</li>\n<li>유연성: 속성이 발견되면 루프를 조기에 끊을 수 있으므로 큰 객체에서 일찍 일치하는 경우 성능 이점을\n제공할 수 있습니다.</li>\n</ul>\n<h3 id=\"적절한-사용-사례-1\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80-1\" aria-label=\"적절한 사용 사례 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>큰 객체: 속성을 찾는 즉시 일찍 종료될 수 있습니다(조기에 브레이크가 발생할 수 있는 경우). 때문에\n비어 있지 않은 큰 객체에 대해 <code class=\"language-text\">Object.keys</code> 메서드보다 잠재적으로 빠르게 수행될 수 있습니다.</li>\n<li>상속: 객체가 프로토타입에서 상속받은 모든 속성을 알고 싶을 때 유용합니다. 다만 주의할 점은 객체에\n깊은 프로토타입 체인이 있는 경우 결과에 복잡성이 추가될 수 있습니다. 많은 속성을 나열하게 되어\n객체에 직접 속하는 속성을 분리하기가 더 어려워집니다.</li>\n</ul>\n<h2 id=\"hasownproperty와-함께-forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"hasownproperty와 함께 forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for...in 루프 활용</h2>\n<p><code class=\"language-text\">for…in</code> 루프를 사용하면서, 프로토타입 체인에서 상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을\n두도록 할 수 있습니다. <code class=\"language-text\">for…in</code> 루프 내에서 <code class=\"language-text\">Object.prototype.hasOwnProperty</code> 메서드를 함께 사용하면\n됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForInWithHasOwnProperty <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code></pre></div>\n<p>프로토타입 체인에서 속성을 제외하기 위해서 <code class=\"language-text\">hasOwnProperty</code> 검사가 필요하므로 약간 복잡해 보일 수\n있습니다. 마찬가지로 큰 객체를 처리할 때 유용합니다.</p>\n<h2 id=\"벤치마크\" style=\"position:relative;\"><a href=\"#%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>벤치마크</h2>\n<p>우선 테스트 할 데이터로 작은 객체 하나, 큰 객체 하나를 준비 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> smallObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  b<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  c<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  d<span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n  e<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n  f<span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n  g<span class=\"token operator\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span>\n  h<span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n  i<span class=\"token operator\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span>\n  j<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100_000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>largeObject<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>아래 사진은 <code class=\"language-text\">measure()</code> 메서드를 사용해서 성능 측정을 한 결과입니다. JavaScript 엔진 최적화,\n시스템의 기타 백그라운드 작업 등 다양한 요소로 인해 <code class=\"language-text\">measure()</code> 또는 <code class=\"language-text\">console.time</code>을 사용한 측정은\n항상 정확한 결과를 제공하지 않으므로 참고만 하면 될 것 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 867px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2klEQVR42m1SiW6bQBDlP1qz987sxbE2YA4TO3LsRu3/f0+HJE4aqdLT6A2C3XdQHE/Xdfnd58s+P4WYlUWeal7Voqp5TNJ5QK98YCEacOAiQI5xirHX4Ao8nl1/juNrbM/S1TulGBNf4HLHZcklY9t8g9gxRiBSYO59N7XLy7C+Vv3EtKEPNghFKGn+szIhSyG51FIDl6boj2tTt94FdB7RG/A8ViJVPESB3tITDMQVOIsBoPFuSGlscoc+FvXp7vcDD75UupSaTmXafkAZoQxXhuTwNy6kkQqFhO01oQroFxhOcX5phiukTE7I3qdh9m74QTbDnO84eea0Fjl3XTd3++k4PjXtgTLkPgjSHCJ3XpBacBI9Q68NkiljqhTHNs/gQtGMl76/te1zVc2katNJbdERgNyCMKC0pckMSG0pJ6mcsclCorXAYbXDjMsV8yJjU5LV8rOqj3q+98R/MvajJOWiSPlQH4Z9t07Lve1GaYEb2C6naezbbZa40O8ctQ4WE0WtLRbDdFvGX93+kqpOG7t5Don+rc05VQVeoyeurDPbWjvXx3hMVaYWSfbZHdZ4vGEcmbI79kj7K+Hvsilt9kg79lMcT3m9j+c/TT9zqR4/03+hH9jWvy5ZeWK+dy2iAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"for...in vs object.keys performance measure\"\n        title=\"\"\n        src=\"/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png\"\n        srcset=\"/static/1694158211928.0957151190746/63868/forIn-objectKeys-benchmark.png 250w,\n/static/1694158211928.0957151190746/0b533/forIn-objectKeys-benchmark.png 500w,\n/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png 867w\"\n        sizes=\"(max-width: 867px) 100vw, 867px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Object.keys()</th>\n<th>for…in Loop</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>small</td>\n<td>0.09s</td>\n<td>0s</td>\n</tr>\n<tr>\n<td>large</td>\n<td>1.89s</td>\n<td>1.6s</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>상속된 속성의 맥락에서 각 메서드를 적절하게 사용하는 방법을 이해하면 객체에 대해 미묘하고 효과적인\n접근 방식이 가능합니다. <strong>상속된 속성이 있는 객체를 처리하냐</strong>에 따라 <code class=\"language-text\">Object.keys</code> 또는 <code class=\"language-text\">for…in</code>\n루프를 사용하면 되겠습니다. 이 부분을 제외하면 <code class=\"language-text\">Object.keys</code> 메서드는 일반적으로 더 읽기 쉽고, 특히\n작은 객체에서 사용하면 좋습니다. <code class=\"language-text\">for...in</code> 루프는 큰 객체의 경우 선택사항이 될 수 있습니다.</p>\n<p>이런 측면에선 어느 게 더 빠른가에 대해서는 중요하지 않습니다. 벤치마크를 통해 볼 수 있듯 속도에 있어\n성능 차이가 크지 않습니다. 여기에 최적화를 위해 시간을 쏟아부어도 얻는 효과는 크지 않다는 것이죠.\n그리고 Donald Knuth가 말했듯이\n<code class=\"language-text\">약 97%의 경우 작은 효율성은 잊어야 하며 성급한 최적화는 모든 악의 근원</code>입니다. 중요한 것은 필요한\n코드를 최적화 해야 하는 것입니다. 데이터 모델을 잘 설계했다면 데이터 모델로 인해 문제가 발생할\n가능성은 거의 없습니다. 문제를 발견하면 코드를 프로파일링하고 원인을 찾고 그때 최적화해도 됩니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\">MDN:Object.keys()</a></li>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/for...in\">MDN:for…in</a></li>\n</ul>",
      "objectkeys-%ED%99%9C%EC%9A%A9#Object.keys 활용": "<p><code class=\"language-text\">Object.keys</code> 메서드와 <code class=\"language-text\">for…in</code> 루프를 활용해 자바스크립트에서 객체가 비어 있는지 확인하는 방법에\n대해 살펴보겠습니다.</p>\n<p>자바스크립트에서 객체는 다른 객체로부터 속성을 상속받아 프로토타입 체인을 생성할 수 있습니다.\n<strong><code class=\"language-text\">for...in</code></strong> 반복문을 사용하여 객체의 속성을 반복할 때, 객체 자체의 속성 뿐만 아니라 프로토타입\n체인에서 상속받은 속성도 열거합니다. 이러한 방법을 통해 상속받은 속성이 있는 객체를 다루는 경우에\n어떻게 이 방법들을 사용할 수 있는지 자세히 알아보겠습니다.</p>\n<p>이를 이해하면 데이터 구조를 처리하고 코드의 가독성을 향상시킬 때 도움이 됩니다. 각 방법의 원리와\n적절한 사용 사례를 이해하기 위해 간단하게 알아보도록 하겠습니다.</p>\n<h2 id=\"상속된-속성이-있는-객체-다룰-때\" style=\"position:relative;\"><a href=\"#%EC%83%81%EC%86%8D%EB%90%9C-%EC%86%8D%EC%84%B1%EC%9D%B4-%EC%9E%88%EB%8A%94-%EA%B0%9D%EC%B2%B4-%EB%8B%A4%EB%A3%B0-%EB%95%8C\" aria-label=\"상속된 속성이 있는 객체 다룰 때 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>상속된 속성이 있는 객체 다룰 때</h2>\n<p>프로토타입 객체와 이 프로토타입에서 속성을 상속받는 다른 객체가 있다고 가정해 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n  inheritedProp2<span class=\"token operator\">:</span> <span class=\"token string\">'value2'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp1 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue1'</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp2 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue2'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"objectkeys-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 활용</h3>\n<p><code class=\"language-text\">Object.keys</code> 를 사용해 <code class=\"language-text\">obj</code> 의 키를 얻으면 상속받은 것이 아닌 자체 속성만 반환됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['ownProp1', 'ownProp2']</span></code></pre></div>\n<h3 id=\"forin-루프-활용\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for…in 루프 활용</h3>\n<p>반면에 <code class=\"language-text\">for…in</code> 루프를 사용하면 자체 속성뿐만 아니라 상속받은 속성도 모두 반복합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2', 'inheritedProp1', 'inheritedProp2'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"hasownproperty와-함께-forin-루프-활용\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"hasownproperty와 함께 forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for…in 루프 활용</h3>\n<p>상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을 둘 수 있도록 <code class=\"language-text\">for...in</code> 루프 내에서\n<code class=\"language-text\">hasOwnProperty</code> 메서드를 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"objectkeys-메서드-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 메서드 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 메서드 활용</h2>\n<p><code class=\"language-text\">Object.keys</code> 메서드는 객체의 모든 열거 가능한 속성을 나열하여 배열로 반환하는 데 유용합니다. 이\n방법을 사용하면 객체에 포함된 키의 수를 기준으로 빈 객체를 쉽게 확인할 수 있습니다. 이 방법을 사용한\n코드는 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isEmptyUsingObjectKeys <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<p>이 방법은 매우 간단하며 높은 가독성을 제공합니다.</p>\n<h3 id=\"적절한-사용-사례\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80\" aria-label=\"적절한 사용 사례 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>작은 객체: 객체의 모든 속성을 반복하여 key 배열을 구축한 다음, 이 배열의 길이를 확인하여 객체가\n비어 있는지 확인합니다. 따라서 큰 객체에 대해선 사용하지 않는 게 좋습니다.</li>\n<li>코드 단순화: 최적화보다 가독성이 우선일 때 사용할 때 좋은 선택지입니다.</li>\n</ul>\n<h2 id=\"forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for...in 루프 활용</h2>\n<p>반면에 <code class=\"language-text\">for...in</code> 루프는 <strong>프로토타입 체인을 통해 상속받은 것을 포함</strong>하여 객체의 모든 열거 가능한\n속성을 순환합니다. 이를 통해 상속된 속성이 있는 객체를 다룰 때, 이 방법이 더욱 유연할 수 있습니다.\n<code class=\"language-text\">for...in</code> 루프를 사용하여 작성한 함수는 다음과 같습니다:</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForIn <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<ul>\n<li>상속: <code class=\"language-text\">Object.keys</code> 와 달리 프로토타입 체인을 따라 속성을 확인할 수 있습니다.</li>\n<li>유연성: 속성이 발견되면 루프를 조기에 끊을 수 있으므로 큰 객체에서 일찍 일치하는 경우 성능 이점을\n제공할 수 있습니다.</li>\n</ul>\n<h3 id=\"적절한-사용-사례-1\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80-1\" aria-label=\"적절한 사용 사례 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>큰 객체: 속성을 찾는 즉시 일찍 종료될 수 있습니다(조기에 브레이크가 발생할 수 있는 경우). 때문에\n비어 있지 않은 큰 객체에 대해 <code class=\"language-text\">Object.keys</code> 메서드보다 잠재적으로 빠르게 수행될 수 있습니다.</li>\n<li>상속: 객체가 프로토타입에서 상속받은 모든 속성을 알고 싶을 때 유용합니다. 다만 주의할 점은 객체에\n깊은 프로토타입 체인이 있는 경우 결과에 복잡성이 추가될 수 있습니다. 많은 속성을 나열하게 되어\n객체에 직접 속하는 속성을 분리하기가 더 어려워집니다.</li>\n</ul>\n<h2 id=\"hasownproperty와-함께-forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"hasownproperty와 함께 forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for...in 루프 활용</h2>\n<p><code class=\"language-text\">for…in</code> 루프를 사용하면서, 프로토타입 체인에서 상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을\n두도록 할 수 있습니다. <code class=\"language-text\">for…in</code> 루프 내에서 <code class=\"language-text\">Object.prototype.hasOwnProperty</code> 메서드를 함께 사용하면\n됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForInWithHasOwnProperty <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code></pre></div>\n<p>프로토타입 체인에서 속성을 제외하기 위해서 <code class=\"language-text\">hasOwnProperty</code> 검사가 필요하므로 약간 복잡해 보일 수\n있습니다. 마찬가지로 큰 객체를 처리할 때 유용합니다.</p>\n<h2 id=\"벤치마크\" style=\"position:relative;\"><a href=\"#%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>벤치마크</h2>\n<p>우선 테스트 할 데이터로 작은 객체 하나, 큰 객체 하나를 준비 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> smallObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  b<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  c<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  d<span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n  e<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n  f<span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n  g<span class=\"token operator\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span>\n  h<span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n  i<span class=\"token operator\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span>\n  j<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100_000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>largeObject<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>아래 사진은 <code class=\"language-text\">measure()</code> 메서드를 사용해서 성능 측정을 한 결과입니다. JavaScript 엔진 최적화,\n시스템의 기타 백그라운드 작업 등 다양한 요소로 인해 <code class=\"language-text\">measure()</code> 또는 <code class=\"language-text\">console.time</code>을 사용한 측정은\n항상 정확한 결과를 제공하지 않으므로 참고만 하면 될 것 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 867px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2klEQVR42m1SiW6bQBDlP1qz987sxbE2YA4TO3LsRu3/f0+HJE4aqdLT6A2C3XdQHE/Xdfnd58s+P4WYlUWeal7Voqp5TNJ5QK98YCEacOAiQI5xirHX4Ao8nl1/juNrbM/S1TulGBNf4HLHZcklY9t8g9gxRiBSYO59N7XLy7C+Vv3EtKEPNghFKGn+szIhSyG51FIDl6boj2tTt94FdB7RG/A8ViJVPESB3tITDMQVOIsBoPFuSGlscoc+FvXp7vcDD75UupSaTmXafkAZoQxXhuTwNy6kkQqFhO01oQroFxhOcX5phiukTE7I3qdh9m74QTbDnO84eea0Fjl3XTd3++k4PjXtgTLkPgjSHCJ3XpBacBI9Q68NkiljqhTHNs/gQtGMl76/te1zVc2katNJbdERgNyCMKC0pckMSG0pJ6mcsclCorXAYbXDjMsV8yJjU5LV8rOqj3q+98R/MvajJOWiSPlQH4Z9t07Lve1GaYEb2C6naezbbZa40O8ctQ4WE0WtLRbDdFvGX93+kqpOG7t5Don+rc05VQVeoyeurDPbWjvXx3hMVaYWSfbZHdZ4vGEcmbI79kj7K+Hvsilt9kg79lMcT3m9j+c/TT9zqR4/03+hH9jWvy5ZeWK+dy2iAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"for...in vs object.keys performance measure\"\n        title=\"\"\n        src=\"/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png\"\n        srcset=\"/static/1694158211928.0957151190746/63868/forIn-objectKeys-benchmark.png 250w,\n/static/1694158211928.0957151190746/0b533/forIn-objectKeys-benchmark.png 500w,\n/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png 867w\"\n        sizes=\"(max-width: 867px) 100vw, 867px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Object.keys()</th>\n<th>for…in Loop</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>small</td>\n<td>0.09s</td>\n<td>0s</td>\n</tr>\n<tr>\n<td>large</td>\n<td>1.89s</td>\n<td>1.6s</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>상속된 속성의 맥락에서 각 메서드를 적절하게 사용하는 방법을 이해하면 객체에 대해 미묘하고 효과적인\n접근 방식이 가능합니다. <strong>상속된 속성이 있는 객체를 처리하냐</strong>에 따라 <code class=\"language-text\">Object.keys</code> 또는 <code class=\"language-text\">for…in</code>\n루프를 사용하면 되겠습니다. 이 부분을 제외하면 <code class=\"language-text\">Object.keys</code> 메서드는 일반적으로 더 읽기 쉽고, 특히\n작은 객체에서 사용하면 좋습니다. <code class=\"language-text\">for...in</code> 루프는 큰 객체의 경우 선택사항이 될 수 있습니다.</p>\n<p>이런 측면에선 어느 게 더 빠른가에 대해서는 중요하지 않습니다. 벤치마크를 통해 볼 수 있듯 속도에 있어\n성능 차이가 크지 않습니다. 여기에 최적화를 위해 시간을 쏟아부어도 얻는 효과는 크지 않다는 것이죠.\n그리고 Donald Knuth가 말했듯이\n<code class=\"language-text\">약 97%의 경우 작은 효율성은 잊어야 하며 성급한 최적화는 모든 악의 근원</code>입니다. 중요한 것은 필요한\n코드를 최적화 해야 하는 것입니다. 데이터 모델을 잘 설계했다면 데이터 모델로 인해 문제가 발생할\n가능성은 거의 없습니다. 문제를 발견하면 코드를 프로파일링하고 원인을 찾고 그때 최적화해도 됩니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\">MDN:Object.keys()</a></li>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/for...in\">MDN:for…in</a></li>\n</ul>",
      "forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9#for…in 루프 활용": "<p><code class=\"language-text\">Object.keys</code> 메서드와 <code class=\"language-text\">for…in</code> 루프를 활용해 자바스크립트에서 객체가 비어 있는지 확인하는 방법에\n대해 살펴보겠습니다.</p>\n<p>자바스크립트에서 객체는 다른 객체로부터 속성을 상속받아 프로토타입 체인을 생성할 수 있습니다.\n<strong><code class=\"language-text\">for...in</code></strong> 반복문을 사용하여 객체의 속성을 반복할 때, 객체 자체의 속성 뿐만 아니라 프로토타입\n체인에서 상속받은 속성도 열거합니다. 이러한 방법을 통해 상속받은 속성이 있는 객체를 다루는 경우에\n어떻게 이 방법들을 사용할 수 있는지 자세히 알아보겠습니다.</p>\n<p>이를 이해하면 데이터 구조를 처리하고 코드의 가독성을 향상시킬 때 도움이 됩니다. 각 방법의 원리와\n적절한 사용 사례를 이해하기 위해 간단하게 알아보도록 하겠습니다.</p>\n<h2 id=\"상속된-속성이-있는-객체-다룰-때\" style=\"position:relative;\"><a href=\"#%EC%83%81%EC%86%8D%EB%90%9C-%EC%86%8D%EC%84%B1%EC%9D%B4-%EC%9E%88%EB%8A%94-%EA%B0%9D%EC%B2%B4-%EB%8B%A4%EB%A3%B0-%EB%95%8C\" aria-label=\"상속된 속성이 있는 객체 다룰 때 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>상속된 속성이 있는 객체 다룰 때</h2>\n<p>프로토타입 객체와 이 프로토타입에서 속성을 상속받는 다른 객체가 있다고 가정해 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n  inheritedProp2<span class=\"token operator\">:</span> <span class=\"token string\">'value2'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp1 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue1'</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp2 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue2'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"objectkeys-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 활용</h3>\n<p><code class=\"language-text\">Object.keys</code> 를 사용해 <code class=\"language-text\">obj</code> 의 키를 얻으면 상속받은 것이 아닌 자체 속성만 반환됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['ownProp1', 'ownProp2']</span></code></pre></div>\n<h3 id=\"forin-루프-활용\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for…in 루프 활용</h3>\n<p>반면에 <code class=\"language-text\">for…in</code> 루프를 사용하면 자체 속성뿐만 아니라 상속받은 속성도 모두 반복합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2', 'inheritedProp1', 'inheritedProp2'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"hasownproperty와-함께-forin-루프-활용\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"hasownproperty와 함께 forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for…in 루프 활용</h3>\n<p>상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을 둘 수 있도록 <code class=\"language-text\">for...in</code> 루프 내에서\n<code class=\"language-text\">hasOwnProperty</code> 메서드를 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"objectkeys-메서드-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 메서드 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 메서드 활용</h2>\n<p><code class=\"language-text\">Object.keys</code> 메서드는 객체의 모든 열거 가능한 속성을 나열하여 배열로 반환하는 데 유용합니다. 이\n방법을 사용하면 객체에 포함된 키의 수를 기준으로 빈 객체를 쉽게 확인할 수 있습니다. 이 방법을 사용한\n코드는 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isEmptyUsingObjectKeys <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<p>이 방법은 매우 간단하며 높은 가독성을 제공합니다.</p>\n<h3 id=\"적절한-사용-사례\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80\" aria-label=\"적절한 사용 사례 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>작은 객체: 객체의 모든 속성을 반복하여 key 배열을 구축한 다음, 이 배열의 길이를 확인하여 객체가\n비어 있는지 확인합니다. 따라서 큰 객체에 대해선 사용하지 않는 게 좋습니다.</li>\n<li>코드 단순화: 최적화보다 가독성이 우선일 때 사용할 때 좋은 선택지입니다.</li>\n</ul>\n<h2 id=\"forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for...in 루프 활용</h2>\n<p>반면에 <code class=\"language-text\">for...in</code> 루프는 <strong>프로토타입 체인을 통해 상속받은 것을 포함</strong>하여 객체의 모든 열거 가능한\n속성을 순환합니다. 이를 통해 상속된 속성이 있는 객체를 다룰 때, 이 방법이 더욱 유연할 수 있습니다.\n<code class=\"language-text\">for...in</code> 루프를 사용하여 작성한 함수는 다음과 같습니다:</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForIn <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<ul>\n<li>상속: <code class=\"language-text\">Object.keys</code> 와 달리 프로토타입 체인을 따라 속성을 확인할 수 있습니다.</li>\n<li>유연성: 속성이 발견되면 루프를 조기에 끊을 수 있으므로 큰 객체에서 일찍 일치하는 경우 성능 이점을\n제공할 수 있습니다.</li>\n</ul>\n<h3 id=\"적절한-사용-사례-1\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80-1\" aria-label=\"적절한 사용 사례 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>큰 객체: 속성을 찾는 즉시 일찍 종료될 수 있습니다(조기에 브레이크가 발생할 수 있는 경우). 때문에\n비어 있지 않은 큰 객체에 대해 <code class=\"language-text\">Object.keys</code> 메서드보다 잠재적으로 빠르게 수행될 수 있습니다.</li>\n<li>상속: 객체가 프로토타입에서 상속받은 모든 속성을 알고 싶을 때 유용합니다. 다만 주의할 점은 객체에\n깊은 프로토타입 체인이 있는 경우 결과에 복잡성이 추가될 수 있습니다. 많은 속성을 나열하게 되어\n객체에 직접 속하는 속성을 분리하기가 더 어려워집니다.</li>\n</ul>\n<h2 id=\"hasownproperty와-함께-forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"hasownproperty와 함께 forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for...in 루프 활용</h2>\n<p><code class=\"language-text\">for…in</code> 루프를 사용하면서, 프로토타입 체인에서 상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을\n두도록 할 수 있습니다. <code class=\"language-text\">for…in</code> 루프 내에서 <code class=\"language-text\">Object.prototype.hasOwnProperty</code> 메서드를 함께 사용하면\n됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForInWithHasOwnProperty <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code></pre></div>\n<p>프로토타입 체인에서 속성을 제외하기 위해서 <code class=\"language-text\">hasOwnProperty</code> 검사가 필요하므로 약간 복잡해 보일 수\n있습니다. 마찬가지로 큰 객체를 처리할 때 유용합니다.</p>\n<h2 id=\"벤치마크\" style=\"position:relative;\"><a href=\"#%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>벤치마크</h2>\n<p>우선 테스트 할 데이터로 작은 객체 하나, 큰 객체 하나를 준비 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> smallObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  b<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  c<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  d<span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n  e<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n  f<span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n  g<span class=\"token operator\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span>\n  h<span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n  i<span class=\"token operator\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span>\n  j<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100_000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>largeObject<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>아래 사진은 <code class=\"language-text\">measure()</code> 메서드를 사용해서 성능 측정을 한 결과입니다. JavaScript 엔진 최적화,\n시스템의 기타 백그라운드 작업 등 다양한 요소로 인해 <code class=\"language-text\">measure()</code> 또는 <code class=\"language-text\">console.time</code>을 사용한 측정은\n항상 정확한 결과를 제공하지 않으므로 참고만 하면 될 것 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 867px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2klEQVR42m1SiW6bQBDlP1qz987sxbE2YA4TO3LsRu3/f0+HJE4aqdLT6A2C3XdQHE/Xdfnd58s+P4WYlUWeal7Voqp5TNJ5QK98YCEacOAiQI5xirHX4Ao8nl1/juNrbM/S1TulGBNf4HLHZcklY9t8g9gxRiBSYO59N7XLy7C+Vv3EtKEPNghFKGn+szIhSyG51FIDl6boj2tTt94FdB7RG/A8ViJVPESB3tITDMQVOIsBoPFuSGlscoc+FvXp7vcDD75UupSaTmXafkAZoQxXhuTwNy6kkQqFhO01oQroFxhOcX5phiukTE7I3qdh9m74QTbDnO84eea0Fjl3XTd3++k4PjXtgTLkPgjSHCJ3XpBacBI9Q68NkiljqhTHNs/gQtGMl76/te1zVc2katNJbdERgNyCMKC0pckMSG0pJ6mcsclCorXAYbXDjMsV8yJjU5LV8rOqj3q+98R/MvajJOWiSPlQH4Z9t07Lve1GaYEb2C6naezbbZa40O8ctQ4WE0WtLRbDdFvGX93+kqpOG7t5Don+rc05VQVeoyeurDPbWjvXx3hMVaYWSfbZHdZ4vGEcmbI79kj7K+Hvsilt9kg79lMcT3m9j+c/TT9zqR4/03+hH9jWvy5ZeWK+dy2iAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"for...in vs object.keys performance measure\"\n        title=\"\"\n        src=\"/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png\"\n        srcset=\"/static/1694158211928.0957151190746/63868/forIn-objectKeys-benchmark.png 250w,\n/static/1694158211928.0957151190746/0b533/forIn-objectKeys-benchmark.png 500w,\n/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png 867w\"\n        sizes=\"(max-width: 867px) 100vw, 867px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Object.keys()</th>\n<th>for…in Loop</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>small</td>\n<td>0.09s</td>\n<td>0s</td>\n</tr>\n<tr>\n<td>large</td>\n<td>1.89s</td>\n<td>1.6s</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>상속된 속성의 맥락에서 각 메서드를 적절하게 사용하는 방법을 이해하면 객체에 대해 미묘하고 효과적인\n접근 방식이 가능합니다. <strong>상속된 속성이 있는 객체를 처리하냐</strong>에 따라 <code class=\"language-text\">Object.keys</code> 또는 <code class=\"language-text\">for…in</code>\n루프를 사용하면 되겠습니다. 이 부분을 제외하면 <code class=\"language-text\">Object.keys</code> 메서드는 일반적으로 더 읽기 쉽고, 특히\n작은 객체에서 사용하면 좋습니다. <code class=\"language-text\">for...in</code> 루프는 큰 객체의 경우 선택사항이 될 수 있습니다.</p>\n<p>이런 측면에선 어느 게 더 빠른가에 대해서는 중요하지 않습니다. 벤치마크를 통해 볼 수 있듯 속도에 있어\n성능 차이가 크지 않습니다. 여기에 최적화를 위해 시간을 쏟아부어도 얻는 효과는 크지 않다는 것이죠.\n그리고 Donald Knuth가 말했듯이\n<code class=\"language-text\">약 97%의 경우 작은 효율성은 잊어야 하며 성급한 최적화는 모든 악의 근원</code>입니다. 중요한 것은 필요한\n코드를 최적화 해야 하는 것입니다. 데이터 모델을 잘 설계했다면 데이터 모델로 인해 문제가 발생할\n가능성은 거의 없습니다. 문제를 발견하면 코드를 프로파일링하고 원인을 찾고 그때 최적화해도 됩니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\">MDN:Object.keys()</a></li>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/for...in\">MDN:for…in</a></li>\n</ul>",
      "hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9#hasOwnProperty와 함께 for…in 루프 활용": "<p><code class=\"language-text\">Object.keys</code> 메서드와 <code class=\"language-text\">for…in</code> 루프를 활용해 자바스크립트에서 객체가 비어 있는지 확인하는 방법에\n대해 살펴보겠습니다.</p>\n<p>자바스크립트에서 객체는 다른 객체로부터 속성을 상속받아 프로토타입 체인을 생성할 수 있습니다.\n<strong><code class=\"language-text\">for...in</code></strong> 반복문을 사용하여 객체의 속성을 반복할 때, 객체 자체의 속성 뿐만 아니라 프로토타입\n체인에서 상속받은 속성도 열거합니다. 이러한 방법을 통해 상속받은 속성이 있는 객체를 다루는 경우에\n어떻게 이 방법들을 사용할 수 있는지 자세히 알아보겠습니다.</p>\n<p>이를 이해하면 데이터 구조를 처리하고 코드의 가독성을 향상시킬 때 도움이 됩니다. 각 방법의 원리와\n적절한 사용 사례를 이해하기 위해 간단하게 알아보도록 하겠습니다.</p>\n<h2 id=\"상속된-속성이-있는-객체-다룰-때\" style=\"position:relative;\"><a href=\"#%EC%83%81%EC%86%8D%EB%90%9C-%EC%86%8D%EC%84%B1%EC%9D%B4-%EC%9E%88%EB%8A%94-%EA%B0%9D%EC%B2%B4-%EB%8B%A4%EB%A3%B0-%EB%95%8C\" aria-label=\"상속된 속성이 있는 객체 다룰 때 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>상속된 속성이 있는 객체 다룰 때</h2>\n<p>프로토타입 객체와 이 프로토타입에서 속성을 상속받는 다른 객체가 있다고 가정해 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n  inheritedProp2<span class=\"token operator\">:</span> <span class=\"token string\">'value2'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp1 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue1'</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp2 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue2'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"objectkeys-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 활용</h3>\n<p><code class=\"language-text\">Object.keys</code> 를 사용해 <code class=\"language-text\">obj</code> 의 키를 얻으면 상속받은 것이 아닌 자체 속성만 반환됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['ownProp1', 'ownProp2']</span></code></pre></div>\n<h3 id=\"forin-루프-활용\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for…in 루프 활용</h3>\n<p>반면에 <code class=\"language-text\">for…in</code> 루프를 사용하면 자체 속성뿐만 아니라 상속받은 속성도 모두 반복합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2', 'inheritedProp1', 'inheritedProp2'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"hasownproperty와-함께-forin-루프-활용\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"hasownproperty와 함께 forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for…in 루프 활용</h3>\n<p>상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을 둘 수 있도록 <code class=\"language-text\">for...in</code> 루프 내에서\n<code class=\"language-text\">hasOwnProperty</code> 메서드를 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"objectkeys-메서드-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 메서드 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 메서드 활용</h2>\n<p><code class=\"language-text\">Object.keys</code> 메서드는 객체의 모든 열거 가능한 속성을 나열하여 배열로 반환하는 데 유용합니다. 이\n방법을 사용하면 객체에 포함된 키의 수를 기준으로 빈 객체를 쉽게 확인할 수 있습니다. 이 방법을 사용한\n코드는 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isEmptyUsingObjectKeys <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<p>이 방법은 매우 간단하며 높은 가독성을 제공합니다.</p>\n<h3 id=\"적절한-사용-사례\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80\" aria-label=\"적절한 사용 사례 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>작은 객체: 객체의 모든 속성을 반복하여 key 배열을 구축한 다음, 이 배열의 길이를 확인하여 객체가\n비어 있는지 확인합니다. 따라서 큰 객체에 대해선 사용하지 않는 게 좋습니다.</li>\n<li>코드 단순화: 최적화보다 가독성이 우선일 때 사용할 때 좋은 선택지입니다.</li>\n</ul>\n<h2 id=\"forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for...in 루프 활용</h2>\n<p>반면에 <code class=\"language-text\">for...in</code> 루프는 <strong>프로토타입 체인을 통해 상속받은 것을 포함</strong>하여 객체의 모든 열거 가능한\n속성을 순환합니다. 이를 통해 상속된 속성이 있는 객체를 다룰 때, 이 방법이 더욱 유연할 수 있습니다.\n<code class=\"language-text\">for...in</code> 루프를 사용하여 작성한 함수는 다음과 같습니다:</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForIn <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<ul>\n<li>상속: <code class=\"language-text\">Object.keys</code> 와 달리 프로토타입 체인을 따라 속성을 확인할 수 있습니다.</li>\n<li>유연성: 속성이 발견되면 루프를 조기에 끊을 수 있으므로 큰 객체에서 일찍 일치하는 경우 성능 이점을\n제공할 수 있습니다.</li>\n</ul>\n<h3 id=\"적절한-사용-사례-1\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80-1\" aria-label=\"적절한 사용 사례 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>큰 객체: 속성을 찾는 즉시 일찍 종료될 수 있습니다(조기에 브레이크가 발생할 수 있는 경우). 때문에\n비어 있지 않은 큰 객체에 대해 <code class=\"language-text\">Object.keys</code> 메서드보다 잠재적으로 빠르게 수행될 수 있습니다.</li>\n<li>상속: 객체가 프로토타입에서 상속받은 모든 속성을 알고 싶을 때 유용합니다. 다만 주의할 점은 객체에\n깊은 프로토타입 체인이 있는 경우 결과에 복잡성이 추가될 수 있습니다. 많은 속성을 나열하게 되어\n객체에 직접 속하는 속성을 분리하기가 더 어려워집니다.</li>\n</ul>\n<h2 id=\"hasownproperty와-함께-forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"hasownproperty와 함께 forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for...in 루프 활용</h2>\n<p><code class=\"language-text\">for…in</code> 루프를 사용하면서, 프로토타입 체인에서 상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을\n두도록 할 수 있습니다. <code class=\"language-text\">for…in</code> 루프 내에서 <code class=\"language-text\">Object.prototype.hasOwnProperty</code> 메서드를 함께 사용하면\n됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForInWithHasOwnProperty <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code></pre></div>\n<p>프로토타입 체인에서 속성을 제외하기 위해서 <code class=\"language-text\">hasOwnProperty</code> 검사가 필요하므로 약간 복잡해 보일 수\n있습니다. 마찬가지로 큰 객체를 처리할 때 유용합니다.</p>\n<h2 id=\"벤치마크\" style=\"position:relative;\"><a href=\"#%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>벤치마크</h2>\n<p>우선 테스트 할 데이터로 작은 객체 하나, 큰 객체 하나를 준비 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> smallObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  b<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  c<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  d<span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n  e<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n  f<span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n  g<span class=\"token operator\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span>\n  h<span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n  i<span class=\"token operator\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span>\n  j<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100_000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>largeObject<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>아래 사진은 <code class=\"language-text\">measure()</code> 메서드를 사용해서 성능 측정을 한 결과입니다. JavaScript 엔진 최적화,\n시스템의 기타 백그라운드 작업 등 다양한 요소로 인해 <code class=\"language-text\">measure()</code> 또는 <code class=\"language-text\">console.time</code>을 사용한 측정은\n항상 정확한 결과를 제공하지 않으므로 참고만 하면 될 것 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 867px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2klEQVR42m1SiW6bQBDlP1qz987sxbE2YA4TO3LsRu3/f0+HJE4aqdLT6A2C3XdQHE/Xdfnd58s+P4WYlUWeal7Voqp5TNJ5QK98YCEacOAiQI5xirHX4Ao8nl1/juNrbM/S1TulGBNf4HLHZcklY9t8g9gxRiBSYO59N7XLy7C+Vv3EtKEPNghFKGn+szIhSyG51FIDl6boj2tTt94FdB7RG/A8ViJVPESB3tITDMQVOIsBoPFuSGlscoc+FvXp7vcDD75UupSaTmXafkAZoQxXhuTwNy6kkQqFhO01oQroFxhOcX5phiukTE7I3qdh9m74QTbDnO84eea0Fjl3XTd3++k4PjXtgTLkPgjSHCJ3XpBacBI9Q68NkiljqhTHNs/gQtGMl76/te1zVc2katNJbdERgNyCMKC0pckMSG0pJ6mcsclCorXAYbXDjMsV8yJjU5LV8rOqj3q+98R/MvajJOWiSPlQH4Z9t07Lve1GaYEb2C6naezbbZa40O8ctQ4WE0WtLRbDdFvGX93+kqpOG7t5Don+rc05VQVeoyeurDPbWjvXx3hMVaYWSfbZHdZ4vGEcmbI79kj7K+Hvsilt9kg79lMcT3m9j+c/TT9zqR4/03+hH9jWvy5ZeWK+dy2iAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"for...in vs object.keys performance measure\"\n        title=\"\"\n        src=\"/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png\"\n        srcset=\"/static/1694158211928.0957151190746/63868/forIn-objectKeys-benchmark.png 250w,\n/static/1694158211928.0957151190746/0b533/forIn-objectKeys-benchmark.png 500w,\n/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png 867w\"\n        sizes=\"(max-width: 867px) 100vw, 867px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Object.keys()</th>\n<th>for…in Loop</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>small</td>\n<td>0.09s</td>\n<td>0s</td>\n</tr>\n<tr>\n<td>large</td>\n<td>1.89s</td>\n<td>1.6s</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>상속된 속성의 맥락에서 각 메서드를 적절하게 사용하는 방법을 이해하면 객체에 대해 미묘하고 효과적인\n접근 방식이 가능합니다. <strong>상속된 속성이 있는 객체를 처리하냐</strong>에 따라 <code class=\"language-text\">Object.keys</code> 또는 <code class=\"language-text\">for…in</code>\n루프를 사용하면 되겠습니다. 이 부분을 제외하면 <code class=\"language-text\">Object.keys</code> 메서드는 일반적으로 더 읽기 쉽고, 특히\n작은 객체에서 사용하면 좋습니다. <code class=\"language-text\">for...in</code> 루프는 큰 객체의 경우 선택사항이 될 수 있습니다.</p>\n<p>이런 측면에선 어느 게 더 빠른가에 대해서는 중요하지 않습니다. 벤치마크를 통해 볼 수 있듯 속도에 있어\n성능 차이가 크지 않습니다. 여기에 최적화를 위해 시간을 쏟아부어도 얻는 효과는 크지 않다는 것이죠.\n그리고 Donald Knuth가 말했듯이\n<code class=\"language-text\">약 97%의 경우 작은 효율성은 잊어야 하며 성급한 최적화는 모든 악의 근원</code>입니다. 중요한 것은 필요한\n코드를 최적화 해야 하는 것입니다. 데이터 모델을 잘 설계했다면 데이터 모델로 인해 문제가 발생할\n가능성은 거의 없습니다. 문제를 발견하면 코드를 프로파일링하고 원인을 찾고 그때 최적화해도 됩니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\">MDN:Object.keys()</a></li>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/for...in\">MDN:for…in</a></li>\n</ul>",
      "objectkeys-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%99%9C%EC%9A%A9#Object.keys 메서드 활용": "<p><code class=\"language-text\">Object.keys</code> 메서드와 <code class=\"language-text\">for…in</code> 루프를 활용해 자바스크립트에서 객체가 비어 있는지 확인하는 방법에\n대해 살펴보겠습니다.</p>\n<p>자바스크립트에서 객체는 다른 객체로부터 속성을 상속받아 프로토타입 체인을 생성할 수 있습니다.\n<strong><code class=\"language-text\">for...in</code></strong> 반복문을 사용하여 객체의 속성을 반복할 때, 객체 자체의 속성 뿐만 아니라 프로토타입\n체인에서 상속받은 속성도 열거합니다. 이러한 방법을 통해 상속받은 속성이 있는 객체를 다루는 경우에\n어떻게 이 방법들을 사용할 수 있는지 자세히 알아보겠습니다.</p>\n<p>이를 이해하면 데이터 구조를 처리하고 코드의 가독성을 향상시킬 때 도움이 됩니다. 각 방법의 원리와\n적절한 사용 사례를 이해하기 위해 간단하게 알아보도록 하겠습니다.</p>\n<h2 id=\"상속된-속성이-있는-객체-다룰-때\" style=\"position:relative;\"><a href=\"#%EC%83%81%EC%86%8D%EB%90%9C-%EC%86%8D%EC%84%B1%EC%9D%B4-%EC%9E%88%EB%8A%94-%EA%B0%9D%EC%B2%B4-%EB%8B%A4%EB%A3%B0-%EB%95%8C\" aria-label=\"상속된 속성이 있는 객체 다룰 때 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>상속된 속성이 있는 객체 다룰 때</h2>\n<p>프로토타입 객체와 이 프로토타입에서 속성을 상속받는 다른 객체가 있다고 가정해 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n  inheritedProp2<span class=\"token operator\">:</span> <span class=\"token string\">'value2'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp1 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue1'</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp2 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue2'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"objectkeys-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 활용</h3>\n<p><code class=\"language-text\">Object.keys</code> 를 사용해 <code class=\"language-text\">obj</code> 의 키를 얻으면 상속받은 것이 아닌 자체 속성만 반환됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['ownProp1', 'ownProp2']</span></code></pre></div>\n<h3 id=\"forin-루프-활용\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for…in 루프 활용</h3>\n<p>반면에 <code class=\"language-text\">for…in</code> 루프를 사용하면 자체 속성뿐만 아니라 상속받은 속성도 모두 반복합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2', 'inheritedProp1', 'inheritedProp2'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"hasownproperty와-함께-forin-루프-활용\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"hasownproperty와 함께 forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for…in 루프 활용</h3>\n<p>상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을 둘 수 있도록 <code class=\"language-text\">for...in</code> 루프 내에서\n<code class=\"language-text\">hasOwnProperty</code> 메서드를 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"objectkeys-메서드-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 메서드 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 메서드 활용</h2>\n<p><code class=\"language-text\">Object.keys</code> 메서드는 객체의 모든 열거 가능한 속성을 나열하여 배열로 반환하는 데 유용합니다. 이\n방법을 사용하면 객체에 포함된 키의 수를 기준으로 빈 객체를 쉽게 확인할 수 있습니다. 이 방법을 사용한\n코드는 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isEmptyUsingObjectKeys <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<p>이 방법은 매우 간단하며 높은 가독성을 제공합니다.</p>\n<h3 id=\"적절한-사용-사례\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80\" aria-label=\"적절한 사용 사례 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>작은 객체: 객체의 모든 속성을 반복하여 key 배열을 구축한 다음, 이 배열의 길이를 확인하여 객체가\n비어 있는지 확인합니다. 따라서 큰 객체에 대해선 사용하지 않는 게 좋습니다.</li>\n<li>코드 단순화: 최적화보다 가독성이 우선일 때 사용할 때 좋은 선택지입니다.</li>\n</ul>\n<h2 id=\"forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for...in 루프 활용</h2>\n<p>반면에 <code class=\"language-text\">for...in</code> 루프는 <strong>프로토타입 체인을 통해 상속받은 것을 포함</strong>하여 객체의 모든 열거 가능한\n속성을 순환합니다. 이를 통해 상속된 속성이 있는 객체를 다룰 때, 이 방법이 더욱 유연할 수 있습니다.\n<code class=\"language-text\">for...in</code> 루프를 사용하여 작성한 함수는 다음과 같습니다:</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForIn <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<ul>\n<li>상속: <code class=\"language-text\">Object.keys</code> 와 달리 프로토타입 체인을 따라 속성을 확인할 수 있습니다.</li>\n<li>유연성: 속성이 발견되면 루프를 조기에 끊을 수 있으므로 큰 객체에서 일찍 일치하는 경우 성능 이점을\n제공할 수 있습니다.</li>\n</ul>\n<h3 id=\"적절한-사용-사례-1\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80-1\" aria-label=\"적절한 사용 사례 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>큰 객체: 속성을 찾는 즉시 일찍 종료될 수 있습니다(조기에 브레이크가 발생할 수 있는 경우). 때문에\n비어 있지 않은 큰 객체에 대해 <code class=\"language-text\">Object.keys</code> 메서드보다 잠재적으로 빠르게 수행될 수 있습니다.</li>\n<li>상속: 객체가 프로토타입에서 상속받은 모든 속성을 알고 싶을 때 유용합니다. 다만 주의할 점은 객체에\n깊은 프로토타입 체인이 있는 경우 결과에 복잡성이 추가될 수 있습니다. 많은 속성을 나열하게 되어\n객체에 직접 속하는 속성을 분리하기가 더 어려워집니다.</li>\n</ul>\n<h2 id=\"hasownproperty와-함께-forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"hasownproperty와 함께 forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for...in 루프 활용</h2>\n<p><code class=\"language-text\">for…in</code> 루프를 사용하면서, 프로토타입 체인에서 상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을\n두도록 할 수 있습니다. <code class=\"language-text\">for…in</code> 루프 내에서 <code class=\"language-text\">Object.prototype.hasOwnProperty</code> 메서드를 함께 사용하면\n됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForInWithHasOwnProperty <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code></pre></div>\n<p>프로토타입 체인에서 속성을 제외하기 위해서 <code class=\"language-text\">hasOwnProperty</code> 검사가 필요하므로 약간 복잡해 보일 수\n있습니다. 마찬가지로 큰 객체를 처리할 때 유용합니다.</p>\n<h2 id=\"벤치마크\" style=\"position:relative;\"><a href=\"#%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>벤치마크</h2>\n<p>우선 테스트 할 데이터로 작은 객체 하나, 큰 객체 하나를 준비 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> smallObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  b<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  c<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  d<span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n  e<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n  f<span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n  g<span class=\"token operator\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span>\n  h<span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n  i<span class=\"token operator\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span>\n  j<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100_000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>largeObject<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>아래 사진은 <code class=\"language-text\">measure()</code> 메서드를 사용해서 성능 측정을 한 결과입니다. JavaScript 엔진 최적화,\n시스템의 기타 백그라운드 작업 등 다양한 요소로 인해 <code class=\"language-text\">measure()</code> 또는 <code class=\"language-text\">console.time</code>을 사용한 측정은\n항상 정확한 결과를 제공하지 않으므로 참고만 하면 될 것 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 867px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2klEQVR42m1SiW6bQBDlP1qz987sxbE2YA4TO3LsRu3/f0+HJE4aqdLT6A2C3XdQHE/Xdfnd58s+P4WYlUWeal7Voqp5TNJ5QK98YCEacOAiQI5xirHX4Ao8nl1/juNrbM/S1TulGBNf4HLHZcklY9t8g9gxRiBSYO59N7XLy7C+Vv3EtKEPNghFKGn+szIhSyG51FIDl6boj2tTt94FdB7RG/A8ViJVPESB3tITDMQVOIsBoPFuSGlscoc+FvXp7vcDD75UupSaTmXafkAZoQxXhuTwNy6kkQqFhO01oQroFxhOcX5phiukTE7I3qdh9m74QTbDnO84eea0Fjl3XTd3++k4PjXtgTLkPgjSHCJ3XpBacBI9Q68NkiljqhTHNs/gQtGMl76/te1zVc2katNJbdERgNyCMKC0pckMSG0pJ6mcsclCorXAYbXDjMsV8yJjU5LV8rOqj3q+98R/MvajJOWiSPlQH4Z9t07Lve1GaYEb2C6naezbbZa40O8ctQ4WE0WtLRbDdFvGX93+kqpOG7t5Don+rc05VQVeoyeurDPbWjvXx3hMVaYWSfbZHdZ4vGEcmbI79kj7K+Hvsilt9kg79lMcT3m9j+c/TT9zqR4/03+hH9jWvy5ZeWK+dy2iAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"for...in vs object.keys performance measure\"\n        title=\"\"\n        src=\"/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png\"\n        srcset=\"/static/1694158211928.0957151190746/63868/forIn-objectKeys-benchmark.png 250w,\n/static/1694158211928.0957151190746/0b533/forIn-objectKeys-benchmark.png 500w,\n/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png 867w\"\n        sizes=\"(max-width: 867px) 100vw, 867px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Object.keys()</th>\n<th>for…in Loop</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>small</td>\n<td>0.09s</td>\n<td>0s</td>\n</tr>\n<tr>\n<td>large</td>\n<td>1.89s</td>\n<td>1.6s</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>상속된 속성의 맥락에서 각 메서드를 적절하게 사용하는 방법을 이해하면 객체에 대해 미묘하고 효과적인\n접근 방식이 가능합니다. <strong>상속된 속성이 있는 객체를 처리하냐</strong>에 따라 <code class=\"language-text\">Object.keys</code> 또는 <code class=\"language-text\">for…in</code>\n루프를 사용하면 되겠습니다. 이 부분을 제외하면 <code class=\"language-text\">Object.keys</code> 메서드는 일반적으로 더 읽기 쉽고, 특히\n작은 객체에서 사용하면 좋습니다. <code class=\"language-text\">for...in</code> 루프는 큰 객체의 경우 선택사항이 될 수 있습니다.</p>\n<p>이런 측면에선 어느 게 더 빠른가에 대해서는 중요하지 않습니다. 벤치마크를 통해 볼 수 있듯 속도에 있어\n성능 차이가 크지 않습니다. 여기에 최적화를 위해 시간을 쏟아부어도 얻는 효과는 크지 않다는 것이죠.\n그리고 Donald Knuth가 말했듯이\n<code class=\"language-text\">약 97%의 경우 작은 효율성은 잊어야 하며 성급한 최적화는 모든 악의 근원</code>입니다. 중요한 것은 필요한\n코드를 최적화 해야 하는 것입니다. 데이터 모델을 잘 설계했다면 데이터 모델로 인해 문제가 발생할\n가능성은 거의 없습니다. 문제를 발견하면 코드를 프로파일링하고 원인을 찾고 그때 최적화해도 됩니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\">MDN:Object.keys()</a></li>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/for...in\">MDN:for…in</a></li>\n</ul>",
      "%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80#적절한 사용 사례": "<p><code class=\"language-text\">Object.keys</code> 메서드와 <code class=\"language-text\">for…in</code> 루프를 활용해 자바스크립트에서 객체가 비어 있는지 확인하는 방법에\n대해 살펴보겠습니다.</p>\n<p>자바스크립트에서 객체는 다른 객체로부터 속성을 상속받아 프로토타입 체인을 생성할 수 있습니다.\n<strong><code class=\"language-text\">for...in</code></strong> 반복문을 사용하여 객체의 속성을 반복할 때, 객체 자체의 속성 뿐만 아니라 프로토타입\n체인에서 상속받은 속성도 열거합니다. 이러한 방법을 통해 상속받은 속성이 있는 객체를 다루는 경우에\n어떻게 이 방법들을 사용할 수 있는지 자세히 알아보겠습니다.</p>\n<p>이를 이해하면 데이터 구조를 처리하고 코드의 가독성을 향상시킬 때 도움이 됩니다. 각 방법의 원리와\n적절한 사용 사례를 이해하기 위해 간단하게 알아보도록 하겠습니다.</p>\n<h2 id=\"상속된-속성이-있는-객체-다룰-때\" style=\"position:relative;\"><a href=\"#%EC%83%81%EC%86%8D%EB%90%9C-%EC%86%8D%EC%84%B1%EC%9D%B4-%EC%9E%88%EB%8A%94-%EA%B0%9D%EC%B2%B4-%EB%8B%A4%EB%A3%B0-%EB%95%8C\" aria-label=\"상속된 속성이 있는 객체 다룰 때 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>상속된 속성이 있는 객체 다룰 때</h2>\n<p>프로토타입 객체와 이 프로토타입에서 속성을 상속받는 다른 객체가 있다고 가정해 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n  inheritedProp2<span class=\"token operator\">:</span> <span class=\"token string\">'value2'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp1 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue1'</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp2 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue2'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"objectkeys-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 활용</h3>\n<p><code class=\"language-text\">Object.keys</code> 를 사용해 <code class=\"language-text\">obj</code> 의 키를 얻으면 상속받은 것이 아닌 자체 속성만 반환됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['ownProp1', 'ownProp2']</span></code></pre></div>\n<h3 id=\"forin-루프-활용\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for…in 루프 활용</h3>\n<p>반면에 <code class=\"language-text\">for…in</code> 루프를 사용하면 자체 속성뿐만 아니라 상속받은 속성도 모두 반복합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2', 'inheritedProp1', 'inheritedProp2'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"hasownproperty와-함께-forin-루프-활용\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"hasownproperty와 함께 forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for…in 루프 활용</h3>\n<p>상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을 둘 수 있도록 <code class=\"language-text\">for...in</code> 루프 내에서\n<code class=\"language-text\">hasOwnProperty</code> 메서드를 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"objectkeys-메서드-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 메서드 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 메서드 활용</h2>\n<p><code class=\"language-text\">Object.keys</code> 메서드는 객체의 모든 열거 가능한 속성을 나열하여 배열로 반환하는 데 유용합니다. 이\n방법을 사용하면 객체에 포함된 키의 수를 기준으로 빈 객체를 쉽게 확인할 수 있습니다. 이 방법을 사용한\n코드는 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isEmptyUsingObjectKeys <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<p>이 방법은 매우 간단하며 높은 가독성을 제공합니다.</p>\n<h3 id=\"적절한-사용-사례\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80\" aria-label=\"적절한 사용 사례 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>작은 객체: 객체의 모든 속성을 반복하여 key 배열을 구축한 다음, 이 배열의 길이를 확인하여 객체가\n비어 있는지 확인합니다. 따라서 큰 객체에 대해선 사용하지 않는 게 좋습니다.</li>\n<li>코드 단순화: 최적화보다 가독성이 우선일 때 사용할 때 좋은 선택지입니다.</li>\n</ul>\n<h2 id=\"forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for...in 루프 활용</h2>\n<p>반면에 <code class=\"language-text\">for...in</code> 루프는 <strong>프로토타입 체인을 통해 상속받은 것을 포함</strong>하여 객체의 모든 열거 가능한\n속성을 순환합니다. 이를 통해 상속된 속성이 있는 객체를 다룰 때, 이 방법이 더욱 유연할 수 있습니다.\n<code class=\"language-text\">for...in</code> 루프를 사용하여 작성한 함수는 다음과 같습니다:</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForIn <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<ul>\n<li>상속: <code class=\"language-text\">Object.keys</code> 와 달리 프로토타입 체인을 따라 속성을 확인할 수 있습니다.</li>\n<li>유연성: 속성이 발견되면 루프를 조기에 끊을 수 있으므로 큰 객체에서 일찍 일치하는 경우 성능 이점을\n제공할 수 있습니다.</li>\n</ul>\n<h3 id=\"적절한-사용-사례-1\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80-1\" aria-label=\"적절한 사용 사례 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>큰 객체: 속성을 찾는 즉시 일찍 종료될 수 있습니다(조기에 브레이크가 발생할 수 있는 경우). 때문에\n비어 있지 않은 큰 객체에 대해 <code class=\"language-text\">Object.keys</code> 메서드보다 잠재적으로 빠르게 수행될 수 있습니다.</li>\n<li>상속: 객체가 프로토타입에서 상속받은 모든 속성을 알고 싶을 때 유용합니다. 다만 주의할 점은 객체에\n깊은 프로토타입 체인이 있는 경우 결과에 복잡성이 추가될 수 있습니다. 많은 속성을 나열하게 되어\n객체에 직접 속하는 속성을 분리하기가 더 어려워집니다.</li>\n</ul>\n<h2 id=\"hasownproperty와-함께-forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"hasownproperty와 함께 forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for...in 루프 활용</h2>\n<p><code class=\"language-text\">for…in</code> 루프를 사용하면서, 프로토타입 체인에서 상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을\n두도록 할 수 있습니다. <code class=\"language-text\">for…in</code> 루프 내에서 <code class=\"language-text\">Object.prototype.hasOwnProperty</code> 메서드를 함께 사용하면\n됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForInWithHasOwnProperty <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code></pre></div>\n<p>프로토타입 체인에서 속성을 제외하기 위해서 <code class=\"language-text\">hasOwnProperty</code> 검사가 필요하므로 약간 복잡해 보일 수\n있습니다. 마찬가지로 큰 객체를 처리할 때 유용합니다.</p>\n<h2 id=\"벤치마크\" style=\"position:relative;\"><a href=\"#%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>벤치마크</h2>\n<p>우선 테스트 할 데이터로 작은 객체 하나, 큰 객체 하나를 준비 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> smallObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  b<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  c<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  d<span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n  e<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n  f<span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n  g<span class=\"token operator\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span>\n  h<span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n  i<span class=\"token operator\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span>\n  j<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100_000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>largeObject<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>아래 사진은 <code class=\"language-text\">measure()</code> 메서드를 사용해서 성능 측정을 한 결과입니다. JavaScript 엔진 최적화,\n시스템의 기타 백그라운드 작업 등 다양한 요소로 인해 <code class=\"language-text\">measure()</code> 또는 <code class=\"language-text\">console.time</code>을 사용한 측정은\n항상 정확한 결과를 제공하지 않으므로 참고만 하면 될 것 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 867px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2klEQVR42m1SiW6bQBDlP1qz987sxbE2YA4TO3LsRu3/f0+HJE4aqdLT6A2C3XdQHE/Xdfnd58s+P4WYlUWeal7Voqp5TNJ5QK98YCEacOAiQI5xirHX4Ao8nl1/juNrbM/S1TulGBNf4HLHZcklY9t8g9gxRiBSYO59N7XLy7C+Vv3EtKEPNghFKGn+szIhSyG51FIDl6boj2tTt94FdB7RG/A8ViJVPESB3tITDMQVOIsBoPFuSGlscoc+FvXp7vcDD75UupSaTmXafkAZoQxXhuTwNy6kkQqFhO01oQroFxhOcX5phiukTE7I3qdh9m74QTbDnO84eea0Fjl3XTd3++k4PjXtgTLkPgjSHCJ3XpBacBI9Q68NkiljqhTHNs/gQtGMl76/te1zVc2katNJbdERgNyCMKC0pckMSG0pJ6mcsclCorXAYbXDjMsV8yJjU5LV8rOqj3q+98R/MvajJOWiSPlQH4Z9t07Lve1GaYEb2C6naezbbZa40O8ctQ4WE0WtLRbDdFvGX93+kqpOG7t5Don+rc05VQVeoyeurDPbWjvXx3hMVaYWSfbZHdZ4vGEcmbI79kj7K+Hvsilt9kg79lMcT3m9j+c/TT9zqR4/03+hH9jWvy5ZeWK+dy2iAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"for...in vs object.keys performance measure\"\n        title=\"\"\n        src=\"/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png\"\n        srcset=\"/static/1694158211928.0957151190746/63868/forIn-objectKeys-benchmark.png 250w,\n/static/1694158211928.0957151190746/0b533/forIn-objectKeys-benchmark.png 500w,\n/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png 867w\"\n        sizes=\"(max-width: 867px) 100vw, 867px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Object.keys()</th>\n<th>for…in Loop</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>small</td>\n<td>0.09s</td>\n<td>0s</td>\n</tr>\n<tr>\n<td>large</td>\n<td>1.89s</td>\n<td>1.6s</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>상속된 속성의 맥락에서 각 메서드를 적절하게 사용하는 방법을 이해하면 객체에 대해 미묘하고 효과적인\n접근 방식이 가능합니다. <strong>상속된 속성이 있는 객체를 처리하냐</strong>에 따라 <code class=\"language-text\">Object.keys</code> 또는 <code class=\"language-text\">for…in</code>\n루프를 사용하면 되겠습니다. 이 부분을 제외하면 <code class=\"language-text\">Object.keys</code> 메서드는 일반적으로 더 읽기 쉽고, 특히\n작은 객체에서 사용하면 좋습니다. <code class=\"language-text\">for...in</code> 루프는 큰 객체의 경우 선택사항이 될 수 있습니다.</p>\n<p>이런 측면에선 어느 게 더 빠른가에 대해서는 중요하지 않습니다. 벤치마크를 통해 볼 수 있듯 속도에 있어\n성능 차이가 크지 않습니다. 여기에 최적화를 위해 시간을 쏟아부어도 얻는 효과는 크지 않다는 것이죠.\n그리고 Donald Knuth가 말했듯이\n<code class=\"language-text\">약 97%의 경우 작은 효율성은 잊어야 하며 성급한 최적화는 모든 악의 근원</code>입니다. 중요한 것은 필요한\n코드를 최적화 해야 하는 것입니다. 데이터 모델을 잘 설계했다면 데이터 모델로 인해 문제가 발생할\n가능성은 거의 없습니다. 문제를 발견하면 코드를 프로파일링하고 원인을 찾고 그때 최적화해도 됩니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\">MDN:Object.keys()</a></li>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/for...in\">MDN:for…in</a></li>\n</ul>",
      "forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1#for...in 루프 활용": "<p><code class=\"language-text\">Object.keys</code> 메서드와 <code class=\"language-text\">for…in</code> 루프를 활용해 자바스크립트에서 객체가 비어 있는지 확인하는 방법에\n대해 살펴보겠습니다.</p>\n<p>자바스크립트에서 객체는 다른 객체로부터 속성을 상속받아 프로토타입 체인을 생성할 수 있습니다.\n<strong><code class=\"language-text\">for...in</code></strong> 반복문을 사용하여 객체의 속성을 반복할 때, 객체 자체의 속성 뿐만 아니라 프로토타입\n체인에서 상속받은 속성도 열거합니다. 이러한 방법을 통해 상속받은 속성이 있는 객체를 다루는 경우에\n어떻게 이 방법들을 사용할 수 있는지 자세히 알아보겠습니다.</p>\n<p>이를 이해하면 데이터 구조를 처리하고 코드의 가독성을 향상시킬 때 도움이 됩니다. 각 방법의 원리와\n적절한 사용 사례를 이해하기 위해 간단하게 알아보도록 하겠습니다.</p>\n<h2 id=\"상속된-속성이-있는-객체-다룰-때\" style=\"position:relative;\"><a href=\"#%EC%83%81%EC%86%8D%EB%90%9C-%EC%86%8D%EC%84%B1%EC%9D%B4-%EC%9E%88%EB%8A%94-%EA%B0%9D%EC%B2%B4-%EB%8B%A4%EB%A3%B0-%EB%95%8C\" aria-label=\"상속된 속성이 있는 객체 다룰 때 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>상속된 속성이 있는 객체 다룰 때</h2>\n<p>프로토타입 객체와 이 프로토타입에서 속성을 상속받는 다른 객체가 있다고 가정해 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n  inheritedProp2<span class=\"token operator\">:</span> <span class=\"token string\">'value2'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp1 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue1'</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp2 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue2'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"objectkeys-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 활용</h3>\n<p><code class=\"language-text\">Object.keys</code> 를 사용해 <code class=\"language-text\">obj</code> 의 키를 얻으면 상속받은 것이 아닌 자체 속성만 반환됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['ownProp1', 'ownProp2']</span></code></pre></div>\n<h3 id=\"forin-루프-활용\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for…in 루프 활용</h3>\n<p>반면에 <code class=\"language-text\">for…in</code> 루프를 사용하면 자체 속성뿐만 아니라 상속받은 속성도 모두 반복합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2', 'inheritedProp1', 'inheritedProp2'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"hasownproperty와-함께-forin-루프-활용\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"hasownproperty와 함께 forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for…in 루프 활용</h3>\n<p>상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을 둘 수 있도록 <code class=\"language-text\">for...in</code> 루프 내에서\n<code class=\"language-text\">hasOwnProperty</code> 메서드를 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"objectkeys-메서드-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 메서드 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 메서드 활용</h2>\n<p><code class=\"language-text\">Object.keys</code> 메서드는 객체의 모든 열거 가능한 속성을 나열하여 배열로 반환하는 데 유용합니다. 이\n방법을 사용하면 객체에 포함된 키의 수를 기준으로 빈 객체를 쉽게 확인할 수 있습니다. 이 방법을 사용한\n코드는 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isEmptyUsingObjectKeys <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<p>이 방법은 매우 간단하며 높은 가독성을 제공합니다.</p>\n<h3 id=\"적절한-사용-사례\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80\" aria-label=\"적절한 사용 사례 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>작은 객체: 객체의 모든 속성을 반복하여 key 배열을 구축한 다음, 이 배열의 길이를 확인하여 객체가\n비어 있는지 확인합니다. 따라서 큰 객체에 대해선 사용하지 않는 게 좋습니다.</li>\n<li>코드 단순화: 최적화보다 가독성이 우선일 때 사용할 때 좋은 선택지입니다.</li>\n</ul>\n<h2 id=\"forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for...in 루프 활용</h2>\n<p>반면에 <code class=\"language-text\">for...in</code> 루프는 <strong>프로토타입 체인을 통해 상속받은 것을 포함</strong>하여 객체의 모든 열거 가능한\n속성을 순환합니다. 이를 통해 상속된 속성이 있는 객체를 다룰 때, 이 방법이 더욱 유연할 수 있습니다.\n<code class=\"language-text\">for...in</code> 루프를 사용하여 작성한 함수는 다음과 같습니다:</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForIn <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<ul>\n<li>상속: <code class=\"language-text\">Object.keys</code> 와 달리 프로토타입 체인을 따라 속성을 확인할 수 있습니다.</li>\n<li>유연성: 속성이 발견되면 루프를 조기에 끊을 수 있으므로 큰 객체에서 일찍 일치하는 경우 성능 이점을\n제공할 수 있습니다.</li>\n</ul>\n<h3 id=\"적절한-사용-사례-1\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80-1\" aria-label=\"적절한 사용 사례 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>큰 객체: 속성을 찾는 즉시 일찍 종료될 수 있습니다(조기에 브레이크가 발생할 수 있는 경우). 때문에\n비어 있지 않은 큰 객체에 대해 <code class=\"language-text\">Object.keys</code> 메서드보다 잠재적으로 빠르게 수행될 수 있습니다.</li>\n<li>상속: 객체가 프로토타입에서 상속받은 모든 속성을 알고 싶을 때 유용합니다. 다만 주의할 점은 객체에\n깊은 프로토타입 체인이 있는 경우 결과에 복잡성이 추가될 수 있습니다. 많은 속성을 나열하게 되어\n객체에 직접 속하는 속성을 분리하기가 더 어려워집니다.</li>\n</ul>\n<h2 id=\"hasownproperty와-함께-forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"hasownproperty와 함께 forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for...in 루프 활용</h2>\n<p><code class=\"language-text\">for…in</code> 루프를 사용하면서, 프로토타입 체인에서 상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을\n두도록 할 수 있습니다. <code class=\"language-text\">for…in</code> 루프 내에서 <code class=\"language-text\">Object.prototype.hasOwnProperty</code> 메서드를 함께 사용하면\n됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForInWithHasOwnProperty <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code></pre></div>\n<p>프로토타입 체인에서 속성을 제외하기 위해서 <code class=\"language-text\">hasOwnProperty</code> 검사가 필요하므로 약간 복잡해 보일 수\n있습니다. 마찬가지로 큰 객체를 처리할 때 유용합니다.</p>\n<h2 id=\"벤치마크\" style=\"position:relative;\"><a href=\"#%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>벤치마크</h2>\n<p>우선 테스트 할 데이터로 작은 객체 하나, 큰 객체 하나를 준비 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> smallObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  b<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  c<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  d<span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n  e<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n  f<span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n  g<span class=\"token operator\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span>\n  h<span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n  i<span class=\"token operator\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span>\n  j<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100_000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>largeObject<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>아래 사진은 <code class=\"language-text\">measure()</code> 메서드를 사용해서 성능 측정을 한 결과입니다. JavaScript 엔진 최적화,\n시스템의 기타 백그라운드 작업 등 다양한 요소로 인해 <code class=\"language-text\">measure()</code> 또는 <code class=\"language-text\">console.time</code>을 사용한 측정은\n항상 정확한 결과를 제공하지 않으므로 참고만 하면 될 것 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 867px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2klEQVR42m1SiW6bQBDlP1qz987sxbE2YA4TO3LsRu3/f0+HJE4aqdLT6A2C3XdQHE/Xdfnd58s+P4WYlUWeal7Voqp5TNJ5QK98YCEacOAiQI5xirHX4Ao8nl1/juNrbM/S1TulGBNf4HLHZcklY9t8g9gxRiBSYO59N7XLy7C+Vv3EtKEPNghFKGn+szIhSyG51FIDl6boj2tTt94FdB7RG/A8ViJVPESB3tITDMQVOIsBoPFuSGlscoc+FvXp7vcDD75UupSaTmXafkAZoQxXhuTwNy6kkQqFhO01oQroFxhOcX5phiukTE7I3qdh9m74QTbDnO84eea0Fjl3XTd3++k4PjXtgTLkPgjSHCJ3XpBacBI9Q68NkiljqhTHNs/gQtGMl76/te1zVc2katNJbdERgNyCMKC0pckMSG0pJ6mcsclCorXAYbXDjMsV8yJjU5LV8rOqj3q+98R/MvajJOWiSPlQH4Z9t07Lve1GaYEb2C6naezbbZa40O8ctQ4WE0WtLRbDdFvGX93+kqpOG7t5Don+rc05VQVeoyeurDPbWjvXx3hMVaYWSfbZHdZ4vGEcmbI79kj7K+Hvsilt9kg79lMcT3m9j+c/TT9zqR4/03+hH9jWvy5ZeWK+dy2iAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"for...in vs object.keys performance measure\"\n        title=\"\"\n        src=\"/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png\"\n        srcset=\"/static/1694158211928.0957151190746/63868/forIn-objectKeys-benchmark.png 250w,\n/static/1694158211928.0957151190746/0b533/forIn-objectKeys-benchmark.png 500w,\n/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png 867w\"\n        sizes=\"(max-width: 867px) 100vw, 867px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Object.keys()</th>\n<th>for…in Loop</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>small</td>\n<td>0.09s</td>\n<td>0s</td>\n</tr>\n<tr>\n<td>large</td>\n<td>1.89s</td>\n<td>1.6s</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>상속된 속성의 맥락에서 각 메서드를 적절하게 사용하는 방법을 이해하면 객체에 대해 미묘하고 효과적인\n접근 방식이 가능합니다. <strong>상속된 속성이 있는 객체를 처리하냐</strong>에 따라 <code class=\"language-text\">Object.keys</code> 또는 <code class=\"language-text\">for…in</code>\n루프를 사용하면 되겠습니다. 이 부분을 제외하면 <code class=\"language-text\">Object.keys</code> 메서드는 일반적으로 더 읽기 쉽고, 특히\n작은 객체에서 사용하면 좋습니다. <code class=\"language-text\">for...in</code> 루프는 큰 객체의 경우 선택사항이 될 수 있습니다.</p>\n<p>이런 측면에선 어느 게 더 빠른가에 대해서는 중요하지 않습니다. 벤치마크를 통해 볼 수 있듯 속도에 있어\n성능 차이가 크지 않습니다. 여기에 최적화를 위해 시간을 쏟아부어도 얻는 효과는 크지 않다는 것이죠.\n그리고 Donald Knuth가 말했듯이\n<code class=\"language-text\">약 97%의 경우 작은 효율성은 잊어야 하며 성급한 최적화는 모든 악의 근원</code>입니다. 중요한 것은 필요한\n코드를 최적화 해야 하는 것입니다. 데이터 모델을 잘 설계했다면 데이터 모델로 인해 문제가 발생할\n가능성은 거의 없습니다. 문제를 발견하면 코드를 프로파일링하고 원인을 찾고 그때 최적화해도 됩니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\">MDN:Object.keys()</a></li>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/for...in\">MDN:for…in</a></li>\n</ul>",
      "%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80-1#적절한 사용 사례": "<p><code class=\"language-text\">Object.keys</code> 메서드와 <code class=\"language-text\">for…in</code> 루프를 활용해 자바스크립트에서 객체가 비어 있는지 확인하는 방법에\n대해 살펴보겠습니다.</p>\n<p>자바스크립트에서 객체는 다른 객체로부터 속성을 상속받아 프로토타입 체인을 생성할 수 있습니다.\n<strong><code class=\"language-text\">for...in</code></strong> 반복문을 사용하여 객체의 속성을 반복할 때, 객체 자체의 속성 뿐만 아니라 프로토타입\n체인에서 상속받은 속성도 열거합니다. 이러한 방법을 통해 상속받은 속성이 있는 객체를 다루는 경우에\n어떻게 이 방법들을 사용할 수 있는지 자세히 알아보겠습니다.</p>\n<p>이를 이해하면 데이터 구조를 처리하고 코드의 가독성을 향상시킬 때 도움이 됩니다. 각 방법의 원리와\n적절한 사용 사례를 이해하기 위해 간단하게 알아보도록 하겠습니다.</p>\n<h2 id=\"상속된-속성이-있는-객체-다룰-때\" style=\"position:relative;\"><a href=\"#%EC%83%81%EC%86%8D%EB%90%9C-%EC%86%8D%EC%84%B1%EC%9D%B4-%EC%9E%88%EB%8A%94-%EA%B0%9D%EC%B2%B4-%EB%8B%A4%EB%A3%B0-%EB%95%8C\" aria-label=\"상속된 속성이 있는 객체 다룰 때 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>상속된 속성이 있는 객체 다룰 때</h2>\n<p>프로토타입 객체와 이 프로토타입에서 속성을 상속받는 다른 객체가 있다고 가정해 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n  inheritedProp2<span class=\"token operator\">:</span> <span class=\"token string\">'value2'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp1 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue1'</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp2 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue2'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"objectkeys-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 활용</h3>\n<p><code class=\"language-text\">Object.keys</code> 를 사용해 <code class=\"language-text\">obj</code> 의 키를 얻으면 상속받은 것이 아닌 자체 속성만 반환됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['ownProp1', 'ownProp2']</span></code></pre></div>\n<h3 id=\"forin-루프-활용\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for…in 루프 활용</h3>\n<p>반면에 <code class=\"language-text\">for…in</code> 루프를 사용하면 자체 속성뿐만 아니라 상속받은 속성도 모두 반복합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2', 'inheritedProp1', 'inheritedProp2'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"hasownproperty와-함께-forin-루프-활용\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"hasownproperty와 함께 forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for…in 루프 활용</h3>\n<p>상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을 둘 수 있도록 <code class=\"language-text\">for...in</code> 루프 내에서\n<code class=\"language-text\">hasOwnProperty</code> 메서드를 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"objectkeys-메서드-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 메서드 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 메서드 활용</h2>\n<p><code class=\"language-text\">Object.keys</code> 메서드는 객체의 모든 열거 가능한 속성을 나열하여 배열로 반환하는 데 유용합니다. 이\n방법을 사용하면 객체에 포함된 키의 수를 기준으로 빈 객체를 쉽게 확인할 수 있습니다. 이 방법을 사용한\n코드는 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isEmptyUsingObjectKeys <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<p>이 방법은 매우 간단하며 높은 가독성을 제공합니다.</p>\n<h3 id=\"적절한-사용-사례\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80\" aria-label=\"적절한 사용 사례 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>작은 객체: 객체의 모든 속성을 반복하여 key 배열을 구축한 다음, 이 배열의 길이를 확인하여 객체가\n비어 있는지 확인합니다. 따라서 큰 객체에 대해선 사용하지 않는 게 좋습니다.</li>\n<li>코드 단순화: 최적화보다 가독성이 우선일 때 사용할 때 좋은 선택지입니다.</li>\n</ul>\n<h2 id=\"forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for...in 루프 활용</h2>\n<p>반면에 <code class=\"language-text\">for...in</code> 루프는 <strong>프로토타입 체인을 통해 상속받은 것을 포함</strong>하여 객체의 모든 열거 가능한\n속성을 순환합니다. 이를 통해 상속된 속성이 있는 객체를 다룰 때, 이 방법이 더욱 유연할 수 있습니다.\n<code class=\"language-text\">for...in</code> 루프를 사용하여 작성한 함수는 다음과 같습니다:</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForIn <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<ul>\n<li>상속: <code class=\"language-text\">Object.keys</code> 와 달리 프로토타입 체인을 따라 속성을 확인할 수 있습니다.</li>\n<li>유연성: 속성이 발견되면 루프를 조기에 끊을 수 있으므로 큰 객체에서 일찍 일치하는 경우 성능 이점을\n제공할 수 있습니다.</li>\n</ul>\n<h3 id=\"적절한-사용-사례-1\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80-1\" aria-label=\"적절한 사용 사례 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>큰 객체: 속성을 찾는 즉시 일찍 종료될 수 있습니다(조기에 브레이크가 발생할 수 있는 경우). 때문에\n비어 있지 않은 큰 객체에 대해 <code class=\"language-text\">Object.keys</code> 메서드보다 잠재적으로 빠르게 수행될 수 있습니다.</li>\n<li>상속: 객체가 프로토타입에서 상속받은 모든 속성을 알고 싶을 때 유용합니다. 다만 주의할 점은 객체에\n깊은 프로토타입 체인이 있는 경우 결과에 복잡성이 추가될 수 있습니다. 많은 속성을 나열하게 되어\n객체에 직접 속하는 속성을 분리하기가 더 어려워집니다.</li>\n</ul>\n<h2 id=\"hasownproperty와-함께-forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"hasownproperty와 함께 forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for...in 루프 활용</h2>\n<p><code class=\"language-text\">for…in</code> 루프를 사용하면서, 프로토타입 체인에서 상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을\n두도록 할 수 있습니다. <code class=\"language-text\">for…in</code> 루프 내에서 <code class=\"language-text\">Object.prototype.hasOwnProperty</code> 메서드를 함께 사용하면\n됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForInWithHasOwnProperty <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code></pre></div>\n<p>프로토타입 체인에서 속성을 제외하기 위해서 <code class=\"language-text\">hasOwnProperty</code> 검사가 필요하므로 약간 복잡해 보일 수\n있습니다. 마찬가지로 큰 객체를 처리할 때 유용합니다.</p>\n<h2 id=\"벤치마크\" style=\"position:relative;\"><a href=\"#%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>벤치마크</h2>\n<p>우선 테스트 할 데이터로 작은 객체 하나, 큰 객체 하나를 준비 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> smallObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  b<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  c<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  d<span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n  e<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n  f<span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n  g<span class=\"token operator\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span>\n  h<span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n  i<span class=\"token operator\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span>\n  j<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100_000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>largeObject<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>아래 사진은 <code class=\"language-text\">measure()</code> 메서드를 사용해서 성능 측정을 한 결과입니다. JavaScript 엔진 최적화,\n시스템의 기타 백그라운드 작업 등 다양한 요소로 인해 <code class=\"language-text\">measure()</code> 또는 <code class=\"language-text\">console.time</code>을 사용한 측정은\n항상 정확한 결과를 제공하지 않으므로 참고만 하면 될 것 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 867px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2klEQVR42m1SiW6bQBDlP1qz987sxbE2YA4TO3LsRu3/f0+HJE4aqdLT6A2C3XdQHE/Xdfnd58s+P4WYlUWeal7Voqp5TNJ5QK98YCEacOAiQI5xirHX4Ao8nl1/juNrbM/S1TulGBNf4HLHZcklY9t8g9gxRiBSYO59N7XLy7C+Vv3EtKEPNghFKGn+szIhSyG51FIDl6boj2tTt94FdB7RG/A8ViJVPESB3tITDMQVOIsBoPFuSGlscoc+FvXp7vcDD75UupSaTmXafkAZoQxXhuTwNy6kkQqFhO01oQroFxhOcX5phiukTE7I3qdh9m74QTbDnO84eea0Fjl3XTd3++k4PjXtgTLkPgjSHCJ3XpBacBI9Q68NkiljqhTHNs/gQtGMl76/te1zVc2katNJbdERgNyCMKC0pckMSG0pJ6mcsclCorXAYbXDjMsV8yJjU5LV8rOqj3q+98R/MvajJOWiSPlQH4Z9t07Lve1GaYEb2C6naezbbZa40O8ctQ4WE0WtLRbDdFvGX93+kqpOG7t5Don+rc05VQVeoyeurDPbWjvXx3hMVaYWSfbZHdZ4vGEcmbI79kj7K+Hvsilt9kg79lMcT3m9j+c/TT9zqR4/03+hH9jWvy5ZeWK+dy2iAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"for...in vs object.keys performance measure\"\n        title=\"\"\n        src=\"/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png\"\n        srcset=\"/static/1694158211928.0957151190746/63868/forIn-objectKeys-benchmark.png 250w,\n/static/1694158211928.0957151190746/0b533/forIn-objectKeys-benchmark.png 500w,\n/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png 867w\"\n        sizes=\"(max-width: 867px) 100vw, 867px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Object.keys()</th>\n<th>for…in Loop</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>small</td>\n<td>0.09s</td>\n<td>0s</td>\n</tr>\n<tr>\n<td>large</td>\n<td>1.89s</td>\n<td>1.6s</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>상속된 속성의 맥락에서 각 메서드를 적절하게 사용하는 방법을 이해하면 객체에 대해 미묘하고 효과적인\n접근 방식이 가능합니다. <strong>상속된 속성이 있는 객체를 처리하냐</strong>에 따라 <code class=\"language-text\">Object.keys</code> 또는 <code class=\"language-text\">for…in</code>\n루프를 사용하면 되겠습니다. 이 부분을 제외하면 <code class=\"language-text\">Object.keys</code> 메서드는 일반적으로 더 읽기 쉽고, 특히\n작은 객체에서 사용하면 좋습니다. <code class=\"language-text\">for...in</code> 루프는 큰 객체의 경우 선택사항이 될 수 있습니다.</p>\n<p>이런 측면에선 어느 게 더 빠른가에 대해서는 중요하지 않습니다. 벤치마크를 통해 볼 수 있듯 속도에 있어\n성능 차이가 크지 않습니다. 여기에 최적화를 위해 시간을 쏟아부어도 얻는 효과는 크지 않다는 것이죠.\n그리고 Donald Knuth가 말했듯이\n<code class=\"language-text\">약 97%의 경우 작은 효율성은 잊어야 하며 성급한 최적화는 모든 악의 근원</code>입니다. 중요한 것은 필요한\n코드를 최적화 해야 하는 것입니다. 데이터 모델을 잘 설계했다면 데이터 모델로 인해 문제가 발생할\n가능성은 거의 없습니다. 문제를 발견하면 코드를 프로파일링하고 원인을 찾고 그때 최적화해도 됩니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\">MDN:Object.keys()</a></li>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/for...in\">MDN:for…in</a></li>\n</ul>",
      "hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1#hasOwnProperty와 함께 for...in 루프 활용": "<p><code class=\"language-text\">Object.keys</code> 메서드와 <code class=\"language-text\">for…in</code> 루프를 활용해 자바스크립트에서 객체가 비어 있는지 확인하는 방법에\n대해 살펴보겠습니다.</p>\n<p>자바스크립트에서 객체는 다른 객체로부터 속성을 상속받아 프로토타입 체인을 생성할 수 있습니다.\n<strong><code class=\"language-text\">for...in</code></strong> 반복문을 사용하여 객체의 속성을 반복할 때, 객체 자체의 속성 뿐만 아니라 프로토타입\n체인에서 상속받은 속성도 열거합니다. 이러한 방법을 통해 상속받은 속성이 있는 객체를 다루는 경우에\n어떻게 이 방법들을 사용할 수 있는지 자세히 알아보겠습니다.</p>\n<p>이를 이해하면 데이터 구조를 처리하고 코드의 가독성을 향상시킬 때 도움이 됩니다. 각 방법의 원리와\n적절한 사용 사례를 이해하기 위해 간단하게 알아보도록 하겠습니다.</p>\n<h2 id=\"상속된-속성이-있는-객체-다룰-때\" style=\"position:relative;\"><a href=\"#%EC%83%81%EC%86%8D%EB%90%9C-%EC%86%8D%EC%84%B1%EC%9D%B4-%EC%9E%88%EB%8A%94-%EA%B0%9D%EC%B2%B4-%EB%8B%A4%EB%A3%B0-%EB%95%8C\" aria-label=\"상속된 속성이 있는 객체 다룰 때 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>상속된 속성이 있는 객체 다룰 때</h2>\n<p>프로토타입 객체와 이 프로토타입에서 속성을 상속받는 다른 객체가 있다고 가정해 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n  inheritedProp2<span class=\"token operator\">:</span> <span class=\"token string\">'value2'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp1 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue1'</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp2 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue2'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"objectkeys-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 활용</h3>\n<p><code class=\"language-text\">Object.keys</code> 를 사용해 <code class=\"language-text\">obj</code> 의 키를 얻으면 상속받은 것이 아닌 자체 속성만 반환됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['ownProp1', 'ownProp2']</span></code></pre></div>\n<h3 id=\"forin-루프-활용\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for…in 루프 활용</h3>\n<p>반면에 <code class=\"language-text\">for…in</code> 루프를 사용하면 자체 속성뿐만 아니라 상속받은 속성도 모두 반복합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2', 'inheritedProp1', 'inheritedProp2'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"hasownproperty와-함께-forin-루프-활용\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"hasownproperty와 함께 forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for…in 루프 활용</h3>\n<p>상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을 둘 수 있도록 <code class=\"language-text\">for...in</code> 루프 내에서\n<code class=\"language-text\">hasOwnProperty</code> 메서드를 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"objectkeys-메서드-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 메서드 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 메서드 활용</h2>\n<p><code class=\"language-text\">Object.keys</code> 메서드는 객체의 모든 열거 가능한 속성을 나열하여 배열로 반환하는 데 유용합니다. 이\n방법을 사용하면 객체에 포함된 키의 수를 기준으로 빈 객체를 쉽게 확인할 수 있습니다. 이 방법을 사용한\n코드는 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isEmptyUsingObjectKeys <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<p>이 방법은 매우 간단하며 높은 가독성을 제공합니다.</p>\n<h3 id=\"적절한-사용-사례\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80\" aria-label=\"적절한 사용 사례 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>작은 객체: 객체의 모든 속성을 반복하여 key 배열을 구축한 다음, 이 배열의 길이를 확인하여 객체가\n비어 있는지 확인합니다. 따라서 큰 객체에 대해선 사용하지 않는 게 좋습니다.</li>\n<li>코드 단순화: 최적화보다 가독성이 우선일 때 사용할 때 좋은 선택지입니다.</li>\n</ul>\n<h2 id=\"forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for...in 루프 활용</h2>\n<p>반면에 <code class=\"language-text\">for...in</code> 루프는 <strong>프로토타입 체인을 통해 상속받은 것을 포함</strong>하여 객체의 모든 열거 가능한\n속성을 순환합니다. 이를 통해 상속된 속성이 있는 객체를 다룰 때, 이 방법이 더욱 유연할 수 있습니다.\n<code class=\"language-text\">for...in</code> 루프를 사용하여 작성한 함수는 다음과 같습니다:</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForIn <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<ul>\n<li>상속: <code class=\"language-text\">Object.keys</code> 와 달리 프로토타입 체인을 따라 속성을 확인할 수 있습니다.</li>\n<li>유연성: 속성이 발견되면 루프를 조기에 끊을 수 있으므로 큰 객체에서 일찍 일치하는 경우 성능 이점을\n제공할 수 있습니다.</li>\n</ul>\n<h3 id=\"적절한-사용-사례-1\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80-1\" aria-label=\"적절한 사용 사례 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>큰 객체: 속성을 찾는 즉시 일찍 종료될 수 있습니다(조기에 브레이크가 발생할 수 있는 경우). 때문에\n비어 있지 않은 큰 객체에 대해 <code class=\"language-text\">Object.keys</code> 메서드보다 잠재적으로 빠르게 수행될 수 있습니다.</li>\n<li>상속: 객체가 프로토타입에서 상속받은 모든 속성을 알고 싶을 때 유용합니다. 다만 주의할 점은 객체에\n깊은 프로토타입 체인이 있는 경우 결과에 복잡성이 추가될 수 있습니다. 많은 속성을 나열하게 되어\n객체에 직접 속하는 속성을 분리하기가 더 어려워집니다.</li>\n</ul>\n<h2 id=\"hasownproperty와-함께-forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"hasownproperty와 함께 forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for...in 루프 활용</h2>\n<p><code class=\"language-text\">for…in</code> 루프를 사용하면서, 프로토타입 체인에서 상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을\n두도록 할 수 있습니다. <code class=\"language-text\">for…in</code> 루프 내에서 <code class=\"language-text\">Object.prototype.hasOwnProperty</code> 메서드를 함께 사용하면\n됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForInWithHasOwnProperty <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code></pre></div>\n<p>프로토타입 체인에서 속성을 제외하기 위해서 <code class=\"language-text\">hasOwnProperty</code> 검사가 필요하므로 약간 복잡해 보일 수\n있습니다. 마찬가지로 큰 객체를 처리할 때 유용합니다.</p>\n<h2 id=\"벤치마크\" style=\"position:relative;\"><a href=\"#%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>벤치마크</h2>\n<p>우선 테스트 할 데이터로 작은 객체 하나, 큰 객체 하나를 준비 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> smallObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  b<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  c<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  d<span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n  e<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n  f<span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n  g<span class=\"token operator\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span>\n  h<span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n  i<span class=\"token operator\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span>\n  j<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100_000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>largeObject<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>아래 사진은 <code class=\"language-text\">measure()</code> 메서드를 사용해서 성능 측정을 한 결과입니다. JavaScript 엔진 최적화,\n시스템의 기타 백그라운드 작업 등 다양한 요소로 인해 <code class=\"language-text\">measure()</code> 또는 <code class=\"language-text\">console.time</code>을 사용한 측정은\n항상 정확한 결과를 제공하지 않으므로 참고만 하면 될 것 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 867px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2klEQVR42m1SiW6bQBDlP1qz987sxbE2YA4TO3LsRu3/f0+HJE4aqdLT6A2C3XdQHE/Xdfnd58s+P4WYlUWeal7Voqp5TNJ5QK98YCEacOAiQI5xirHX4Ao8nl1/juNrbM/S1TulGBNf4HLHZcklY9t8g9gxRiBSYO59N7XLy7C+Vv3EtKEPNghFKGn+szIhSyG51FIDl6boj2tTt94FdB7RG/A8ViJVPESB3tITDMQVOIsBoPFuSGlscoc+FvXp7vcDD75UupSaTmXafkAZoQxXhuTwNy6kkQqFhO01oQroFxhOcX5phiukTE7I3qdh9m74QTbDnO84eea0Fjl3XTd3++k4PjXtgTLkPgjSHCJ3XpBacBI9Q68NkiljqhTHNs/gQtGMl76/te1zVc2katNJbdERgNyCMKC0pckMSG0pJ6mcsclCorXAYbXDjMsV8yJjU5LV8rOqj3q+98R/MvajJOWiSPlQH4Z9t07Lve1GaYEb2C6naezbbZa40O8ctQ4WE0WtLRbDdFvGX93+kqpOG7t5Don+rc05VQVeoyeurDPbWjvXx3hMVaYWSfbZHdZ4vGEcmbI79kj7K+Hvsilt9kg79lMcT3m9j+c/TT9zqR4/03+hH9jWvy5ZeWK+dy2iAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"for...in vs object.keys performance measure\"\n        title=\"\"\n        src=\"/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png\"\n        srcset=\"/static/1694158211928.0957151190746/63868/forIn-objectKeys-benchmark.png 250w,\n/static/1694158211928.0957151190746/0b533/forIn-objectKeys-benchmark.png 500w,\n/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png 867w\"\n        sizes=\"(max-width: 867px) 100vw, 867px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Object.keys()</th>\n<th>for…in Loop</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>small</td>\n<td>0.09s</td>\n<td>0s</td>\n</tr>\n<tr>\n<td>large</td>\n<td>1.89s</td>\n<td>1.6s</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>상속된 속성의 맥락에서 각 메서드를 적절하게 사용하는 방법을 이해하면 객체에 대해 미묘하고 효과적인\n접근 방식이 가능합니다. <strong>상속된 속성이 있는 객체를 처리하냐</strong>에 따라 <code class=\"language-text\">Object.keys</code> 또는 <code class=\"language-text\">for…in</code>\n루프를 사용하면 되겠습니다. 이 부분을 제외하면 <code class=\"language-text\">Object.keys</code> 메서드는 일반적으로 더 읽기 쉽고, 특히\n작은 객체에서 사용하면 좋습니다. <code class=\"language-text\">for...in</code> 루프는 큰 객체의 경우 선택사항이 될 수 있습니다.</p>\n<p>이런 측면에선 어느 게 더 빠른가에 대해서는 중요하지 않습니다. 벤치마크를 통해 볼 수 있듯 속도에 있어\n성능 차이가 크지 않습니다. 여기에 최적화를 위해 시간을 쏟아부어도 얻는 효과는 크지 않다는 것이죠.\n그리고 Donald Knuth가 말했듯이\n<code class=\"language-text\">약 97%의 경우 작은 효율성은 잊어야 하며 성급한 최적화는 모든 악의 근원</code>입니다. 중요한 것은 필요한\n코드를 최적화 해야 하는 것입니다. 데이터 모델을 잘 설계했다면 데이터 모델로 인해 문제가 발생할\n가능성은 거의 없습니다. 문제를 발견하면 코드를 프로파일링하고 원인을 찾고 그때 최적화해도 됩니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\">MDN:Object.keys()</a></li>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/for...in\">MDN:for…in</a></li>\n</ul>",
      "%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC#벤치마크": "<p><code class=\"language-text\">Object.keys</code> 메서드와 <code class=\"language-text\">for…in</code> 루프를 활용해 자바스크립트에서 객체가 비어 있는지 확인하는 방법에\n대해 살펴보겠습니다.</p>\n<p>자바스크립트에서 객체는 다른 객체로부터 속성을 상속받아 프로토타입 체인을 생성할 수 있습니다.\n<strong><code class=\"language-text\">for...in</code></strong> 반복문을 사용하여 객체의 속성을 반복할 때, 객체 자체의 속성 뿐만 아니라 프로토타입\n체인에서 상속받은 속성도 열거합니다. 이러한 방법을 통해 상속받은 속성이 있는 객체를 다루는 경우에\n어떻게 이 방법들을 사용할 수 있는지 자세히 알아보겠습니다.</p>\n<p>이를 이해하면 데이터 구조를 처리하고 코드의 가독성을 향상시킬 때 도움이 됩니다. 각 방법의 원리와\n적절한 사용 사례를 이해하기 위해 간단하게 알아보도록 하겠습니다.</p>\n<h2 id=\"상속된-속성이-있는-객체-다룰-때\" style=\"position:relative;\"><a href=\"#%EC%83%81%EC%86%8D%EB%90%9C-%EC%86%8D%EC%84%B1%EC%9D%B4-%EC%9E%88%EB%8A%94-%EA%B0%9D%EC%B2%B4-%EB%8B%A4%EB%A3%B0-%EB%95%8C\" aria-label=\"상속된 속성이 있는 객체 다룰 때 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>상속된 속성이 있는 객체 다룰 때</h2>\n<p>프로토타입 객체와 이 프로토타입에서 속성을 상속받는 다른 객체가 있다고 가정해 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n  inheritedProp2<span class=\"token operator\">:</span> <span class=\"token string\">'value2'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp1 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue1'</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp2 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue2'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"objectkeys-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 활용</h3>\n<p><code class=\"language-text\">Object.keys</code> 를 사용해 <code class=\"language-text\">obj</code> 의 키를 얻으면 상속받은 것이 아닌 자체 속성만 반환됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['ownProp1', 'ownProp2']</span></code></pre></div>\n<h3 id=\"forin-루프-활용\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for…in 루프 활용</h3>\n<p>반면에 <code class=\"language-text\">for…in</code> 루프를 사용하면 자체 속성뿐만 아니라 상속받은 속성도 모두 반복합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2', 'inheritedProp1', 'inheritedProp2'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"hasownproperty와-함께-forin-루프-활용\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"hasownproperty와 함께 forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for…in 루프 활용</h3>\n<p>상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을 둘 수 있도록 <code class=\"language-text\">for...in</code> 루프 내에서\n<code class=\"language-text\">hasOwnProperty</code> 메서드를 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"objectkeys-메서드-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 메서드 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 메서드 활용</h2>\n<p><code class=\"language-text\">Object.keys</code> 메서드는 객체의 모든 열거 가능한 속성을 나열하여 배열로 반환하는 데 유용합니다. 이\n방법을 사용하면 객체에 포함된 키의 수를 기준으로 빈 객체를 쉽게 확인할 수 있습니다. 이 방법을 사용한\n코드는 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isEmptyUsingObjectKeys <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<p>이 방법은 매우 간단하며 높은 가독성을 제공합니다.</p>\n<h3 id=\"적절한-사용-사례\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80\" aria-label=\"적절한 사용 사례 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>작은 객체: 객체의 모든 속성을 반복하여 key 배열을 구축한 다음, 이 배열의 길이를 확인하여 객체가\n비어 있는지 확인합니다. 따라서 큰 객체에 대해선 사용하지 않는 게 좋습니다.</li>\n<li>코드 단순화: 최적화보다 가독성이 우선일 때 사용할 때 좋은 선택지입니다.</li>\n</ul>\n<h2 id=\"forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for...in 루프 활용</h2>\n<p>반면에 <code class=\"language-text\">for...in</code> 루프는 <strong>프로토타입 체인을 통해 상속받은 것을 포함</strong>하여 객체의 모든 열거 가능한\n속성을 순환합니다. 이를 통해 상속된 속성이 있는 객체를 다룰 때, 이 방법이 더욱 유연할 수 있습니다.\n<code class=\"language-text\">for...in</code> 루프를 사용하여 작성한 함수는 다음과 같습니다:</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForIn <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<ul>\n<li>상속: <code class=\"language-text\">Object.keys</code> 와 달리 프로토타입 체인을 따라 속성을 확인할 수 있습니다.</li>\n<li>유연성: 속성이 발견되면 루프를 조기에 끊을 수 있으므로 큰 객체에서 일찍 일치하는 경우 성능 이점을\n제공할 수 있습니다.</li>\n</ul>\n<h3 id=\"적절한-사용-사례-1\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80-1\" aria-label=\"적절한 사용 사례 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>큰 객체: 속성을 찾는 즉시 일찍 종료될 수 있습니다(조기에 브레이크가 발생할 수 있는 경우). 때문에\n비어 있지 않은 큰 객체에 대해 <code class=\"language-text\">Object.keys</code> 메서드보다 잠재적으로 빠르게 수행될 수 있습니다.</li>\n<li>상속: 객체가 프로토타입에서 상속받은 모든 속성을 알고 싶을 때 유용합니다. 다만 주의할 점은 객체에\n깊은 프로토타입 체인이 있는 경우 결과에 복잡성이 추가될 수 있습니다. 많은 속성을 나열하게 되어\n객체에 직접 속하는 속성을 분리하기가 더 어려워집니다.</li>\n</ul>\n<h2 id=\"hasownproperty와-함께-forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"hasownproperty와 함께 forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for...in 루프 활용</h2>\n<p><code class=\"language-text\">for…in</code> 루프를 사용하면서, 프로토타입 체인에서 상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을\n두도록 할 수 있습니다. <code class=\"language-text\">for…in</code> 루프 내에서 <code class=\"language-text\">Object.prototype.hasOwnProperty</code> 메서드를 함께 사용하면\n됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForInWithHasOwnProperty <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code></pre></div>\n<p>프로토타입 체인에서 속성을 제외하기 위해서 <code class=\"language-text\">hasOwnProperty</code> 검사가 필요하므로 약간 복잡해 보일 수\n있습니다. 마찬가지로 큰 객체를 처리할 때 유용합니다.</p>\n<h2 id=\"벤치마크\" style=\"position:relative;\"><a href=\"#%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>벤치마크</h2>\n<p>우선 테스트 할 데이터로 작은 객체 하나, 큰 객체 하나를 준비 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> smallObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  b<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  c<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  d<span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n  e<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n  f<span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n  g<span class=\"token operator\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span>\n  h<span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n  i<span class=\"token operator\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span>\n  j<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100_000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>largeObject<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>아래 사진은 <code class=\"language-text\">measure()</code> 메서드를 사용해서 성능 측정을 한 결과입니다. JavaScript 엔진 최적화,\n시스템의 기타 백그라운드 작업 등 다양한 요소로 인해 <code class=\"language-text\">measure()</code> 또는 <code class=\"language-text\">console.time</code>을 사용한 측정은\n항상 정확한 결과를 제공하지 않으므로 참고만 하면 될 것 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 867px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2klEQVR42m1SiW6bQBDlP1qz987sxbE2YA4TO3LsRu3/f0+HJE4aqdLT6A2C3XdQHE/Xdfnd58s+P4WYlUWeal7Voqp5TNJ5QK98YCEacOAiQI5xirHX4Ao8nl1/juNrbM/S1TulGBNf4HLHZcklY9t8g9gxRiBSYO59N7XLy7C+Vv3EtKEPNghFKGn+szIhSyG51FIDl6boj2tTt94FdB7RG/A8ViJVPESB3tITDMQVOIsBoPFuSGlscoc+FvXp7vcDD75UupSaTmXafkAZoQxXhuTwNy6kkQqFhO01oQroFxhOcX5phiukTE7I3qdh9m74QTbDnO84eea0Fjl3XTd3++k4PjXtgTLkPgjSHCJ3XpBacBI9Q68NkiljqhTHNs/gQtGMl76/te1zVc2katNJbdERgNyCMKC0pckMSG0pJ6mcsclCorXAYbXDjMsV8yJjU5LV8rOqj3q+98R/MvajJOWiSPlQH4Z9t07Lve1GaYEb2C6naezbbZa40O8ctQ4WE0WtLRbDdFvGX93+kqpOG7t5Don+rc05VQVeoyeurDPbWjvXx3hMVaYWSfbZHdZ4vGEcmbI79kj7K+Hvsilt9kg79lMcT3m9j+c/TT9zqR4/03+hH9jWvy5ZeWK+dy2iAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"for...in vs object.keys performance measure\"\n        title=\"\"\n        src=\"/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png\"\n        srcset=\"/static/1694158211928.0957151190746/63868/forIn-objectKeys-benchmark.png 250w,\n/static/1694158211928.0957151190746/0b533/forIn-objectKeys-benchmark.png 500w,\n/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png 867w\"\n        sizes=\"(max-width: 867px) 100vw, 867px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Object.keys()</th>\n<th>for…in Loop</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>small</td>\n<td>0.09s</td>\n<td>0s</td>\n</tr>\n<tr>\n<td>large</td>\n<td>1.89s</td>\n<td>1.6s</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>상속된 속성의 맥락에서 각 메서드를 적절하게 사용하는 방법을 이해하면 객체에 대해 미묘하고 효과적인\n접근 방식이 가능합니다. <strong>상속된 속성이 있는 객체를 처리하냐</strong>에 따라 <code class=\"language-text\">Object.keys</code> 또는 <code class=\"language-text\">for…in</code>\n루프를 사용하면 되겠습니다. 이 부분을 제외하면 <code class=\"language-text\">Object.keys</code> 메서드는 일반적으로 더 읽기 쉽고, 특히\n작은 객체에서 사용하면 좋습니다. <code class=\"language-text\">for...in</code> 루프는 큰 객체의 경우 선택사항이 될 수 있습니다.</p>\n<p>이런 측면에선 어느 게 더 빠른가에 대해서는 중요하지 않습니다. 벤치마크를 통해 볼 수 있듯 속도에 있어\n성능 차이가 크지 않습니다. 여기에 최적화를 위해 시간을 쏟아부어도 얻는 효과는 크지 않다는 것이죠.\n그리고 Donald Knuth가 말했듯이\n<code class=\"language-text\">약 97%의 경우 작은 효율성은 잊어야 하며 성급한 최적화는 모든 악의 근원</code>입니다. 중요한 것은 필요한\n코드를 최적화 해야 하는 것입니다. 데이터 모델을 잘 설계했다면 데이터 모델로 인해 문제가 발생할\n가능성은 거의 없습니다. 문제를 발견하면 코드를 프로파일링하고 원인을 찾고 그때 최적화해도 됩니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\">MDN:Object.keys()</a></li>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/for...in\">MDN:for…in</a></li>\n</ul>",
      "%EA%B2%B0%EB%A1%A0#결론": "<p><code class=\"language-text\">Object.keys</code> 메서드와 <code class=\"language-text\">for…in</code> 루프를 활용해 자바스크립트에서 객체가 비어 있는지 확인하는 방법에\n대해 살펴보겠습니다.</p>\n<p>자바스크립트에서 객체는 다른 객체로부터 속성을 상속받아 프로토타입 체인을 생성할 수 있습니다.\n<strong><code class=\"language-text\">for...in</code></strong> 반복문을 사용하여 객체의 속성을 반복할 때, 객체 자체의 속성 뿐만 아니라 프로토타입\n체인에서 상속받은 속성도 열거합니다. 이러한 방법을 통해 상속받은 속성이 있는 객체를 다루는 경우에\n어떻게 이 방법들을 사용할 수 있는지 자세히 알아보겠습니다.</p>\n<p>이를 이해하면 데이터 구조를 처리하고 코드의 가독성을 향상시킬 때 도움이 됩니다. 각 방법의 원리와\n적절한 사용 사례를 이해하기 위해 간단하게 알아보도록 하겠습니다.</p>\n<h2 id=\"상속된-속성이-있는-객체-다룰-때\" style=\"position:relative;\"><a href=\"#%EC%83%81%EC%86%8D%EB%90%9C-%EC%86%8D%EC%84%B1%EC%9D%B4-%EC%9E%88%EB%8A%94-%EA%B0%9D%EC%B2%B4-%EB%8B%A4%EB%A3%B0-%EB%95%8C\" aria-label=\"상속된 속성이 있는 객체 다룰 때 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>상속된 속성이 있는 객체 다룰 때</h2>\n<p>프로토타입 객체와 이 프로토타입에서 속성을 상속받는 다른 객체가 있다고 가정해 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n  inheritedProp2<span class=\"token operator\">:</span> <span class=\"token string\">'value2'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp1 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue1'</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp2 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue2'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"objectkeys-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 활용</h3>\n<p><code class=\"language-text\">Object.keys</code> 를 사용해 <code class=\"language-text\">obj</code> 의 키를 얻으면 상속받은 것이 아닌 자체 속성만 반환됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['ownProp1', 'ownProp2']</span></code></pre></div>\n<h3 id=\"forin-루프-활용\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for…in 루프 활용</h3>\n<p>반면에 <code class=\"language-text\">for…in</code> 루프를 사용하면 자체 속성뿐만 아니라 상속받은 속성도 모두 반복합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2', 'inheritedProp1', 'inheritedProp2'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"hasownproperty와-함께-forin-루프-활용\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"hasownproperty와 함께 forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for…in 루프 활용</h3>\n<p>상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을 둘 수 있도록 <code class=\"language-text\">for...in</code> 루프 내에서\n<code class=\"language-text\">hasOwnProperty</code> 메서드를 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"objectkeys-메서드-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 메서드 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 메서드 활용</h2>\n<p><code class=\"language-text\">Object.keys</code> 메서드는 객체의 모든 열거 가능한 속성을 나열하여 배열로 반환하는 데 유용합니다. 이\n방법을 사용하면 객체에 포함된 키의 수를 기준으로 빈 객체를 쉽게 확인할 수 있습니다. 이 방법을 사용한\n코드는 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isEmptyUsingObjectKeys <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<p>이 방법은 매우 간단하며 높은 가독성을 제공합니다.</p>\n<h3 id=\"적절한-사용-사례\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80\" aria-label=\"적절한 사용 사례 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>작은 객체: 객체의 모든 속성을 반복하여 key 배열을 구축한 다음, 이 배열의 길이를 확인하여 객체가\n비어 있는지 확인합니다. 따라서 큰 객체에 대해선 사용하지 않는 게 좋습니다.</li>\n<li>코드 단순화: 최적화보다 가독성이 우선일 때 사용할 때 좋은 선택지입니다.</li>\n</ul>\n<h2 id=\"forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for...in 루프 활용</h2>\n<p>반면에 <code class=\"language-text\">for...in</code> 루프는 <strong>프로토타입 체인을 통해 상속받은 것을 포함</strong>하여 객체의 모든 열거 가능한\n속성을 순환합니다. 이를 통해 상속된 속성이 있는 객체를 다룰 때, 이 방법이 더욱 유연할 수 있습니다.\n<code class=\"language-text\">for...in</code> 루프를 사용하여 작성한 함수는 다음과 같습니다:</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForIn <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<ul>\n<li>상속: <code class=\"language-text\">Object.keys</code> 와 달리 프로토타입 체인을 따라 속성을 확인할 수 있습니다.</li>\n<li>유연성: 속성이 발견되면 루프를 조기에 끊을 수 있으므로 큰 객체에서 일찍 일치하는 경우 성능 이점을\n제공할 수 있습니다.</li>\n</ul>\n<h3 id=\"적절한-사용-사례-1\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80-1\" aria-label=\"적절한 사용 사례 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>큰 객체: 속성을 찾는 즉시 일찍 종료될 수 있습니다(조기에 브레이크가 발생할 수 있는 경우). 때문에\n비어 있지 않은 큰 객체에 대해 <code class=\"language-text\">Object.keys</code> 메서드보다 잠재적으로 빠르게 수행될 수 있습니다.</li>\n<li>상속: 객체가 프로토타입에서 상속받은 모든 속성을 알고 싶을 때 유용합니다. 다만 주의할 점은 객체에\n깊은 프로토타입 체인이 있는 경우 결과에 복잡성이 추가될 수 있습니다. 많은 속성을 나열하게 되어\n객체에 직접 속하는 속성을 분리하기가 더 어려워집니다.</li>\n</ul>\n<h2 id=\"hasownproperty와-함께-forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"hasownproperty와 함께 forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for...in 루프 활용</h2>\n<p><code class=\"language-text\">for…in</code> 루프를 사용하면서, 프로토타입 체인에서 상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을\n두도록 할 수 있습니다. <code class=\"language-text\">for…in</code> 루프 내에서 <code class=\"language-text\">Object.prototype.hasOwnProperty</code> 메서드를 함께 사용하면\n됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForInWithHasOwnProperty <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code></pre></div>\n<p>프로토타입 체인에서 속성을 제외하기 위해서 <code class=\"language-text\">hasOwnProperty</code> 검사가 필요하므로 약간 복잡해 보일 수\n있습니다. 마찬가지로 큰 객체를 처리할 때 유용합니다.</p>\n<h2 id=\"벤치마크\" style=\"position:relative;\"><a href=\"#%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>벤치마크</h2>\n<p>우선 테스트 할 데이터로 작은 객체 하나, 큰 객체 하나를 준비 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> smallObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  b<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  c<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  d<span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n  e<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n  f<span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n  g<span class=\"token operator\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span>\n  h<span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n  i<span class=\"token operator\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span>\n  j<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100_000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>largeObject<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>아래 사진은 <code class=\"language-text\">measure()</code> 메서드를 사용해서 성능 측정을 한 결과입니다. JavaScript 엔진 최적화,\n시스템의 기타 백그라운드 작업 등 다양한 요소로 인해 <code class=\"language-text\">measure()</code> 또는 <code class=\"language-text\">console.time</code>을 사용한 측정은\n항상 정확한 결과를 제공하지 않으므로 참고만 하면 될 것 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 867px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2klEQVR42m1SiW6bQBDlP1qz987sxbE2YA4TO3LsRu3/f0+HJE4aqdLT6A2C3XdQHE/Xdfnd58s+P4WYlUWeal7Voqp5TNJ5QK98YCEacOAiQI5xirHX4Ao8nl1/juNrbM/S1TulGBNf4HLHZcklY9t8g9gxRiBSYO59N7XLy7C+Vv3EtKEPNghFKGn+szIhSyG51FIDl6boj2tTt94FdB7RG/A8ViJVPESB3tITDMQVOIsBoPFuSGlscoc+FvXp7vcDD75UupSaTmXafkAZoQxXhuTwNy6kkQqFhO01oQroFxhOcX5phiukTE7I3qdh9m74QTbDnO84eea0Fjl3XTd3++k4PjXtgTLkPgjSHCJ3XpBacBI9Q68NkiljqhTHNs/gQtGMl76/te1zVc2katNJbdERgNyCMKC0pckMSG0pJ6mcsclCorXAYbXDjMsV8yJjU5LV8rOqj3q+98R/MvajJOWiSPlQH4Z9t07Lve1GaYEb2C6naezbbZa40O8ctQ4WE0WtLRbDdFvGX93+kqpOG7t5Don+rc05VQVeoyeurDPbWjvXx3hMVaYWSfbZHdZ4vGEcmbI79kj7K+Hvsilt9kg79lMcT3m9j+c/TT9zqR4/03+hH9jWvy5ZeWK+dy2iAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"for...in vs object.keys performance measure\"\n        title=\"\"\n        src=\"/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png\"\n        srcset=\"/static/1694158211928.0957151190746/63868/forIn-objectKeys-benchmark.png 250w,\n/static/1694158211928.0957151190746/0b533/forIn-objectKeys-benchmark.png 500w,\n/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png 867w\"\n        sizes=\"(max-width: 867px) 100vw, 867px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Object.keys()</th>\n<th>for…in Loop</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>small</td>\n<td>0.09s</td>\n<td>0s</td>\n</tr>\n<tr>\n<td>large</td>\n<td>1.89s</td>\n<td>1.6s</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>상속된 속성의 맥락에서 각 메서드를 적절하게 사용하는 방법을 이해하면 객체에 대해 미묘하고 효과적인\n접근 방식이 가능합니다. <strong>상속된 속성이 있는 객체를 처리하냐</strong>에 따라 <code class=\"language-text\">Object.keys</code> 또는 <code class=\"language-text\">for…in</code>\n루프를 사용하면 되겠습니다. 이 부분을 제외하면 <code class=\"language-text\">Object.keys</code> 메서드는 일반적으로 더 읽기 쉽고, 특히\n작은 객체에서 사용하면 좋습니다. <code class=\"language-text\">for...in</code> 루프는 큰 객체의 경우 선택사항이 될 수 있습니다.</p>\n<p>이런 측면에선 어느 게 더 빠른가에 대해서는 중요하지 않습니다. 벤치마크를 통해 볼 수 있듯 속도에 있어\n성능 차이가 크지 않습니다. 여기에 최적화를 위해 시간을 쏟아부어도 얻는 효과는 크지 않다는 것이죠.\n그리고 Donald Knuth가 말했듯이\n<code class=\"language-text\">약 97%의 경우 작은 효율성은 잊어야 하며 성급한 최적화는 모든 악의 근원</code>입니다. 중요한 것은 필요한\n코드를 최적화 해야 하는 것입니다. 데이터 모델을 잘 설계했다면 데이터 모델로 인해 문제가 발생할\n가능성은 거의 없습니다. 문제를 발견하면 코드를 프로파일링하고 원인을 찾고 그때 최적화해도 됩니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\">MDN:Object.keys()</a></li>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/for...in\">MDN:for…in</a></li>\n</ul>",
      "%EC%B0%B8%EA%B3%A0#참고": "<p><code class=\"language-text\">Object.keys</code> 메서드와 <code class=\"language-text\">for…in</code> 루프를 활용해 자바스크립트에서 객체가 비어 있는지 확인하는 방법에\n대해 살펴보겠습니다.</p>\n<p>자바스크립트에서 객체는 다른 객체로부터 속성을 상속받아 프로토타입 체인을 생성할 수 있습니다.\n<strong><code class=\"language-text\">for...in</code></strong> 반복문을 사용하여 객체의 속성을 반복할 때, 객체 자체의 속성 뿐만 아니라 프로토타입\n체인에서 상속받은 속성도 열거합니다. 이러한 방법을 통해 상속받은 속성이 있는 객체를 다루는 경우에\n어떻게 이 방법들을 사용할 수 있는지 자세히 알아보겠습니다.</p>\n<p>이를 이해하면 데이터 구조를 처리하고 코드의 가독성을 향상시킬 때 도움이 됩니다. 각 방법의 원리와\n적절한 사용 사례를 이해하기 위해 간단하게 알아보도록 하겠습니다.</p>\n<h2 id=\"상속된-속성이-있는-객체-다룰-때\" style=\"position:relative;\"><a href=\"#%EC%83%81%EC%86%8D%EB%90%9C-%EC%86%8D%EC%84%B1%EC%9D%B4-%EC%9E%88%EB%8A%94-%EA%B0%9D%EC%B2%B4-%EB%8B%A4%EB%A3%B0-%EB%95%8C\" aria-label=\"상속된 속성이 있는 객체 다룰 때 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>상속된 속성이 있는 객체 다룰 때</h2>\n<p>프로토타입 객체와 이 프로토타입에서 속성을 상속받는 다른 객체가 있다고 가정해 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n  inheritedProp2<span class=\"token operator\">:</span> <span class=\"token string\">'value2'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp1 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue1'</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>ownProp2 <span class=\"token operator\">=</span> <span class=\"token string\">'ownValue2'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"objectkeys-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 활용</h3>\n<p><code class=\"language-text\">Object.keys</code> 를 사용해 <code class=\"language-text\">obj</code> 의 키를 얻으면 상속받은 것이 아닌 자체 속성만 반환됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['ownProp1', 'ownProp2']</span></code></pre></div>\n<h3 id=\"forin-루프-활용\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for…in 루프 활용</h3>\n<p>반면에 <code class=\"language-text\">for…in</code> 루프를 사용하면 자체 속성뿐만 아니라 상속받은 속성도 모두 반복합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2', 'inheritedProp1', 'inheritedProp2'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"hasownproperty와-함께-forin-루프-활용\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9\" aria-label=\"hasownproperty와 함께 forin 루프 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for…in 루프 활용</h3>\n<p>상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을 둘 수 있도록 <code class=\"language-text\">for...in</code> 루프 내에서\n<code class=\"language-text\">hasOwnProperty</code> 메서드를 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ownProp1', 'ownProp2'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"objectkeys-메서드-활용\" style=\"position:relative;\"><a href=\"#objectkeys-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%99%9C%EC%9A%A9\" aria-label=\"objectkeys 메서드 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.keys 메서드 활용</h2>\n<p><code class=\"language-text\">Object.keys</code> 메서드는 객체의 모든 열거 가능한 속성을 나열하여 배열로 반환하는 데 유용합니다. 이\n방법을 사용하면 객체에 포함된 키의 수를 기준으로 빈 객체를 쉽게 확인할 수 있습니다. 이 방법을 사용한\n코드는 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isEmptyUsingObjectKeys <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<p>이 방법은 매우 간단하며 높은 가독성을 제공합니다.</p>\n<h3 id=\"적절한-사용-사례\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80\" aria-label=\"적절한 사용 사례 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>작은 객체: 객체의 모든 속성을 반복하여 key 배열을 구축한 다음, 이 배열의 길이를 확인하여 객체가\n비어 있는지 확인합니다. 따라서 큰 객체에 대해선 사용하지 않는 게 좋습니다.</li>\n<li>코드 단순화: 최적화보다 가독성이 우선일 때 사용할 때 좋은 선택지입니다.</li>\n</ul>\n<h2 id=\"forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for...in 루프 활용</h2>\n<p>반면에 <code class=\"language-text\">for...in</code> 루프는 <strong>프로토타입 체인을 통해 상속받은 것을 포함</strong>하여 객체의 모든 열거 가능한\n속성을 순환합니다. 이를 통해 상속된 속성이 있는 객체를 다룰 때, 이 방법이 더욱 유연할 수 있습니다.\n<code class=\"language-text\">for...in</code> 루프를 사용하여 작성한 함수는 다음과 같습니다:</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForIn <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForIn</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<ul>\n<li>상속: <code class=\"language-text\">Object.keys</code> 와 달리 프로토타입 체인을 따라 속성을 확인할 수 있습니다.</li>\n<li>유연성: 속성이 발견되면 루프를 조기에 끊을 수 있으므로 큰 객체에서 일찍 일치하는 경우 성능 이점을\n제공할 수 있습니다.</li>\n</ul>\n<h3 id=\"적절한-사용-사례-1\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80-1\" aria-label=\"적절한 사용 사례 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적절한 사용 사례</h3>\n<ul>\n<li>큰 객체: 속성을 찾는 즉시 일찍 종료될 수 있습니다(조기에 브레이크가 발생할 수 있는 경우). 때문에\n비어 있지 않은 큰 객체에 대해 <code class=\"language-text\">Object.keys</code> 메서드보다 잠재적으로 빠르게 수행될 수 있습니다.</li>\n<li>상속: 객체가 프로토타입에서 상속받은 모든 속성을 알고 싶을 때 유용합니다. 다만 주의할 점은 객체에\n깊은 프로토타입 체인이 있는 경우 결과에 복잡성이 추가될 수 있습니다. 많은 속성을 나열하게 되어\n객체에 직접 속하는 속성을 분리하기가 더 어려워집니다.</li>\n</ul>\n<h2 id=\"hasownproperty와-함께-forin-루프-활용-1\" style=\"position:relative;\"><a href=\"#hasownproperty%EC%99%80-%ED%95%A8%EA%BB%98-forin-%EB%A3%A8%ED%94%84-%ED%99%9C%EC%9A%A9-1\" aria-label=\"hasownproperty와 함께 forin 루프 활용 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hasOwnProperty와 함께 for...in 루프 활용</h2>\n<p><code class=\"language-text\">for…in</code> 루프를 사용하면서, 프로토타입 체인에서 상속받은 속성을 걸러내고 객체 자체의 속성에만 중점을\n두도록 할 수 있습니다. <code class=\"language-text\">for…in</code> 루프 내에서 <code class=\"language-text\">Object.prototype.hasOwnProperty</code> 메서드를 함께 사용하면\n됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> prototypeObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  inheritedProp1<span class=\"token operator\">:</span> <span class=\"token string\">'value1'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>prototypeObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isEmptyUsingForInWithHasOwnProperty <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">unknown</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyUsingForInWithHasOwnProperty</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code></pre></div>\n<p>프로토타입 체인에서 속성을 제외하기 위해서 <code class=\"language-text\">hasOwnProperty</code> 검사가 필요하므로 약간 복잡해 보일 수\n있습니다. 마찬가지로 큰 객체를 처리할 때 유용합니다.</p>\n<h2 id=\"벤치마크\" style=\"position:relative;\"><a href=\"#%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>벤치마크</h2>\n<p>우선 테스트 할 데이터로 작은 객체 하나, 큰 객체 하나를 준비 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> smallObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  b<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  c<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  d<span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n  e<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n  f<span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n  g<span class=\"token operator\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span>\n  h<span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n  i<span class=\"token operator\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span>\n  j<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100_000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  largeObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>largeObject<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>아래 사진은 <code class=\"language-text\">measure()</code> 메서드를 사용해서 성능 측정을 한 결과입니다. JavaScript 엔진 최적화,\n시스템의 기타 백그라운드 작업 등 다양한 요소로 인해 <code class=\"language-text\">measure()</code> 또는 <code class=\"language-text\">console.time</code>을 사용한 측정은\n항상 정확한 결과를 제공하지 않으므로 참고만 하면 될 것 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 867px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2klEQVR42m1SiW6bQBDlP1qz987sxbE2YA4TO3LsRu3/f0+HJE4aqdLT6A2C3XdQHE/Xdfnd58s+P4WYlUWeal7Voqp5TNJ5QK98YCEacOAiQI5xirHX4Ao8nl1/juNrbM/S1TulGBNf4HLHZcklY9t8g9gxRiBSYO59N7XLy7C+Vv3EtKEPNghFKGn+szIhSyG51FIDl6boj2tTt94FdB7RG/A8ViJVPESB3tITDMQVOIsBoPFuSGlscoc+FvXp7vcDD75UupSaTmXafkAZoQxXhuTwNy6kkQqFhO01oQroFxhOcX5phiukTE7I3qdh9m74QTbDnO84eea0Fjl3XTd3++k4PjXtgTLkPgjSHCJ3XpBacBI9Q68NkiljqhTHNs/gQtGMl76/te1zVc2katNJbdERgNyCMKC0pckMSG0pJ6mcsclCorXAYbXDjMsV8yJjU5LV8rOqj3q+98R/MvajJOWiSPlQH4Z9t07Lve1GaYEb2C6naezbbZa40O8ctQ4WE0WtLRbDdFvGX93+kqpOG7t5Don+rc05VQVeoyeurDPbWjvXx3hMVaYWSfbZHdZ4vGEcmbI79kj7K+Hvsilt9kg79lMcT3m9j+c/TT9zqR4/03+hH9jWvy5ZeWK+dy2iAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"for...in vs object.keys performance measure\"\n        title=\"\"\n        src=\"/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png\"\n        srcset=\"/static/1694158211928.0957151190746/63868/forIn-objectKeys-benchmark.png 250w,\n/static/1694158211928.0957151190746/0b533/forIn-objectKeys-benchmark.png 500w,\n/static/1694158211928.0957151190746/264eb/forIn-objectKeys-benchmark.png 867w\"\n        sizes=\"(max-width: 867px) 100vw, 867px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Object.keys()</th>\n<th>for…in Loop</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>small</td>\n<td>0.09s</td>\n<td>0s</td>\n</tr>\n<tr>\n<td>large</td>\n<td>1.89s</td>\n<td>1.6s</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>상속된 속성의 맥락에서 각 메서드를 적절하게 사용하는 방법을 이해하면 객체에 대해 미묘하고 효과적인\n접근 방식이 가능합니다. <strong>상속된 속성이 있는 객체를 처리하냐</strong>에 따라 <code class=\"language-text\">Object.keys</code> 또는 <code class=\"language-text\">for…in</code>\n루프를 사용하면 되겠습니다. 이 부분을 제외하면 <code class=\"language-text\">Object.keys</code> 메서드는 일반적으로 더 읽기 쉽고, 특히\n작은 객체에서 사용하면 좋습니다. <code class=\"language-text\">for...in</code> 루프는 큰 객체의 경우 선택사항이 될 수 있습니다.</p>\n<p>이런 측면에선 어느 게 더 빠른가에 대해서는 중요하지 않습니다. 벤치마크를 통해 볼 수 있듯 속도에 있어\n성능 차이가 크지 않습니다. 여기에 최적화를 위해 시간을 쏟아부어도 얻는 효과는 크지 않다는 것이죠.\n그리고 Donald Knuth가 말했듯이\n<code class=\"language-text\">약 97%의 경우 작은 효율성은 잊어야 하며 성급한 최적화는 모든 악의 근원</code>입니다. 중요한 것은 필요한\n코드를 최적화 해야 하는 것입니다. 데이터 모델을 잘 설계했다면 데이터 모델로 인해 문제가 발생할\n가능성은 거의 없습니다. 문제를 발견하면 코드를 프로파일링하고 원인을 찾고 그때 최적화해도 됩니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\">MDN:Object.keys()</a></li>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/for...in\">MDN:for…in</a></li>\n</ul>"
    }
  },
  {
    "route": "https://lazy-dev.netlify.app/javascript/different-ways-to-copy-objects-in-js/",
    "data": {
      "%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC%ED%95%98%EA%B8%B0#객체 복사하기": "<h2 id=\"객체-복사하기\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC%ED%95%98%EA%B8%B0\" aria-label=\"객체 복사하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사하기</h2>\n<p>객체를 복사하는 데 주로 쓰이는 방법은 아래와 같습니다.</p>\n<!-- prettier-ignore -->\n<table>\n<thead>\n<tr>\n<th>방법</th>\n<th>장점</th>\n<th>단점</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>JSON.stringify() &#x26; JSON.parse()</td>\n<td>간단하고 빠르게 깊은 복사를 할 수 있습니다.</td>\n<td>Infinity, Functions, Date, RegExp 등의 유형은 유실됩니다.</td>\n</tr>\n<tr>\n<td>Spread syntax</td>\n<td>가장 간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Object.assign()</td>\n<td>간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Copy</td>\n<td>Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>순환 참조가 있는 객체를 받을 경우 무한 루프에 빠지게 됩니다. 직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Clone with WeakMap Caching</td>\n<td>순환 참조가 있는 객체도 지원하며 Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Lodash - cloneDeep()</td>\n<td>모든 데이터 형식에 대해 깊게 복사합니다.</td>\n<td>외부 종속성이 추가됩니다.</td>\n</tr>\n</tbody>\n</table>\n<p>각 함수를 테스트하기에 앞서 <code class=\"language-text\">person</code> 이라는 객체를 생성해두겠습니다. 앞으로 이 객체를 이용하여 모든\n함수 테스트를 진행할 것입니다.</p>\n<h3 id=\"set-person-object\" style=\"position:relative;\"><a href=\"#set-person-object\" aria-label=\"set person object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Set Person Object</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> person <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'ben'</span><span class=\"token punctuation\">,</span>\n  age<span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n  address<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    city<span class=\"token operator\">:</span> <span class=\"token string\">'seoul'</span><span class=\"token punctuation\">,</span>\n    country<span class=\"token operator\">:</span> <span class=\"token string\">'korea'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">getAge</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  birth<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  life<span class=\"token operator\">:</span> <span class=\"token number\">Infinity</span><span class=\"token punctuation\">,</span>\n  regT<span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[a-z0-9](\\.|\\+|\\-?[a-z0-9]){1,39}@test\\.com$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">gm</span></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"jsonstringify--jsonparse\" style=\"position:relative;\"><a href=\"#jsonstringify--jsonparse\" aria-label=\"jsonstringify  jsonparse permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSON.stringify() &#x26; JSON.parse()</h3>\n<p><code class=\"language-text\">JSON.stringify</code> 함수가 객체를 JSON 문자열로 변환합니다. (원본 객체에 대한 참조가 없어집니다) 그리고\n<code class=\"language-text\">JSON.parse</code> 를 이용해 객체를 반환합니다.</p>\n<p>이렇게 이 두 가지 함수를 이용하여 간단하게 객체의 깊은 복사본을 만들 수 있습니다. 이제 복사된 객체가\n변경되어도 원본 객체는 그대로 유지됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> deepCopyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span></code></pre></div>\n<p>이 방법을 사용할 때 꼭 알아둬야 할 사항들이 있습니다. <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code>\n<code class=\"language-text\">functions</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code> 객체, <code class=\"language-text\">Infinity</code> 까지 복사하진 않습니다. 왜 그럴까요?</p>\n<ul>\n<li><code class=\"language-text\">Date</code> 객체는 JSON으로 변환하는 과정에서 <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a>형식에\n따라 문자열로\n<a href=\"https://stackoverflow.com/questions/10286204/what-is-the-right-json-date-format\">저장</a>됩니다. 따\n라서 원본 객체의 <code class=\"language-text\">Date</code> 객체는 <strong>복사 후 손실</strong>됩니다. <code class=\"language-text\">reviver</code> 기능을 사용하면 <code class=\"language-text\">Date</code> 객체를\n<a href=\"https://stackoverflow.com/a/9194413\">가져올 수 있긴 합니다</a>.</li>\n<li>함수는 데이터가 아니라 더 복잡한 의미를 가진 동작이며 JSON에서 지원되는 엔티티가 아니기 때문에\n<strong>복사 후 함수는 유지되지 않습니다</strong>.</li>\n<li>JSON에서 객체를 직렬화하고 역직렬화하는 방법의 특성으로 인해 느릴 것 같지만 대부분의 사람들이 이\n방식을 채택하여 사용하여\n<a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">V8이 적극적으로 최적화</a>했기에 <strong>빠르게</strong> 복사본\n을 얻을 수 있습니다.</li>\n</ul>\n<p>즉, 복사된 객체에서 아래와 같이 데이터를 사용하려 한다면 예와 에러가 발생합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">deepCopyPerson<span class=\"token punctuation\">.</span><span class=\"token function\">getAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.getAge is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>birth<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.birth.getDate is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>life<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => null</span></code></pre></div>\n<p>따라서 이 방법은 객체 내에 위와 같은 데이터가 없을 경우에 사용하면 됩니다.</p>\n<h3 id=\"spread-syntax\" style=\"position:relative;\"><a href=\"#spread-syntax\" aria-label=\"spread syntax permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spread syntax</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>obj <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<h3 id=\"objectassign\" style=\"position:relative;\"><a href=\"#objectassign\" aria-label=\"objectassign permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.assign()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p><code class=\"language-text\">Spead</code> 연산자나 <code class=\"language-text\">Object.assign</code> 은 최상위 속성을 복사합니다. 하지만 객체로서의 속성은 얕은 복사 후\n에 참조로 복사되므로 원본 객체와 복사된 객체 간에 공유됩니다.\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#warning_for_deep_clone\">MDN: Object.assign()</a>을\n이용한 예시를 코드로 들어보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 중첩된 객체를 포함하는 복잡한 person 객체 전달</span>\n<span class=\"token comment\">// 중첩된 객체 내의 속성을 변경할 때마다 원본 객체인 person의 동일한 속성도 변합니다</span>\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony', 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan', 'busan'</span></code></pre></div>\n<p>원래 객체의 <code class=\"language-text\">name</code> 속성은 그대로 유지 되었지만, <code class=\"language-text\">city</code> 속성은 재할당 작업으로 인해 변경되었습니다.\n(Spread syntax 도 마찬가지) 그래도 JSON 방식에 비해 다른 점은 <code class=\"language-text\">functions</code>, <code class=\"language-text\">rRegExp</code>, <code class=\"language-text\">Date</code> 객체,\n<code class=\"language-text\">Infinity</code> 까지 복사된다는 점입니다.</p>\n<p>따라서 중첩된 객체 속성이 필요하지 않은 경우에는 좋은 복사 방법입니다.</p>\n<h3 id=\"recursive-deep-clone-object\" style=\"position:relative;\"><a href=\"#recursive-deep-clone-object\" aria-label=\"recursive deep clone object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recursive Deep Clone Object</h3>\n<p>앞에서 다뤘던 문제(JS 내장 함수 및 함수가 손실되는 것)를 해결하며 <strong>깊은 복사</strong>를 실현하는 함수를\n만들어 보겠습니다. 복사를 진행하다가 객체를 만나면 함수를 <strong>재귀적으로</strong> 실행해 깊은 복사를 실현하면\n됩니다.</p>\n<p>regExp 와 Date 객체를 복사하는 건 Lodash의 코드를 참고하여 작성했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> value <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> cloneRegExp <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>regExp<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> RegExp <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> reFlags <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w*$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">regExp</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">,</span> reFlags<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  result<span class=\"token punctuation\">.</span>lastIndex <span class=\"token operator\">=</span> regExp<span class=\"token punctuation\">.</span>lastIndex<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> getTag <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span> <span class=\"token operator\">?</span> <span class=\"token string\">'[object Undefined]'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'[object Null]'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * `Set`, `Map`, `Boolean`, `Date`, `Number`, `String`, `RegExp` 태그가 있는 값만 복사를 진행합니다.\n */</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneByTag</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> tag<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Boolean]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Date]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token operator\">+</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Number]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object String]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Set]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Map]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object RegExp]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">cloneRegExp</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isPrototype <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> object<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> value <span class=\"token operator\">&amp;&amp;</span> value<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> proto <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> Ctor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> Ctor<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> proto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneObject</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">typeof</span> obj<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token function\">isPrototype</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">?</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">getPrototypeOf</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 객체 생성</span>\n    <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> initCloneArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">any</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> length <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> array<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">array</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n    length <span class=\"token operator\">&amp;&amp;</span>\n    <span class=\"token keyword\">typeof</span> array<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span> <span class=\"token operator\">&amp;&amp;</span>\n    Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">,</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result<span class=\"token punctuation\">.</span>index <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">;</span>\n    result<span class=\"token punctuation\">.</span>input <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> obj <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span> <span class=\"token operator\">?</span> <span class=\"token function-variable function\">obj</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode <span class=\"token operator\">=</span> <span class=\"token string\">'12345'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => undefined</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => '12345'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>regT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => lastIndex: 0</span>\ndotAll<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nflags<span class=\"token operator\">:</span> <span class=\"token string\">'gm'</span><span class=\"token punctuation\">;</span>\nglobal<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nhasIndices<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nignoreCase<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nmultiline<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nsource<span class=\"token operator\">:</span> <span class=\"token string\">'^[a-z0-9](\\\\.|\\\\+|\\\\-?[a-z0-9]){1,39}@test\\\\.com$'</span><span class=\"token punctuation\">;</span>\nsticky<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nunicode<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>중요한 것을 살펴보자면 <code class=\"language-text\">typeof</code> 가 아닌 <code class=\"language-text\">toString</code> 메소드를 사용했습니다.</p>\n<p>이 둘의 가장 큰 차이점은 <code class=\"language-text\">toString</code> 은 메소드이기 때문에 오버라이딩이 가능한 반면, <code class=\"language-text\">typeof</code> 는 연산\n자로 분류되기에 오버라이드가 불가능합니다. 즉, <code class=\"language-text\">typeof</code> 를 사용해서는 <strong>반환되는 결과를 조작하는 게\n불가능</strong>하기에 <code class=\"language-text\">toString</code> 을 타입 체크로 사용하여 추가적인 문자열 파싱을 진행했습니다.</p>\n<p>그래서 <strong>toStringTag</strong> 를 활용하여 <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">Boolean</code>, <code class=\"language-text\">Date</code>, <code class=\"language-text\">Number</code>, <code class=\"language-text\">String</code>, <code class=\"language-text\">RegExp</code> 태\n그가 있는 값만 복사를 진행합니다.</p>\n<p>만약 깊게 복사해야 할 객체가 지금 제작한 함수로 커버할 수 있는 범위라면 이대로 쓰는 게 가장 좋습니다\n.</p>\n<p>그리고 이 코드에는 <strong>몇 가지 문제</strong>가 있습니다.</p>\n<p>첫 번재는 바이너리 데이터 관련 객체(<code class=\"language-text\">TypedArray</code>, <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">DataView</code>…) 객체는 깊게 복사하지\n않습니다. 저는 굳이 <code class=\"language-text\">ArrayBuffer</code> 객체까지 깊게 복사할 필요가 없어 추가해주진 않았습니다만, 이\n부분에 대한 태그 케이스를 추가하여 <code class=\"language-text\">ArrayBuffer</code>를 복사하는 로직을 작성해주면 바이너리 관련 객체도\n깊게 복사 할 수 있겠습니다.</p>\n<p>두 번째는 순환 참조가 있는 객체를 복사해야 할 경우에는 무한하게 서로가 서로를 호출해서 호출 스택\n(call stack)이 터져버리는 에러를 마주하게 됩니다. 이 문제를 해결하기 위해선 무한 루프에 빠지지\n않도록 이전의 참조 맵을 유지하면서 전달 받은 객체를 통해 반복하여 복사하도록 해주면 됩니다. 객체가\n맵에 저장되어 있다면 복사본이 반복되지 않고 그대로 반환되도록 하는 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> hash <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WeakMap<span class=\"token operator\">&lt;</span>object<span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 순환 참조</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hash<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> hash<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// hash에 복사할 객체를 저장합니다.</span>\n  hash<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Map]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Set]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 열거 가능한 자체 속성을 재귀적으로 복제 및 할당합니다.</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> 순환참조가_있는_객체를_완전히_복사하는지_검사 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> object <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    foo<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> b<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> c<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> d<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    bar<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d <span class=\"token operator\">=</span> object<span class=\"token punctuation\">;</span>\n  object<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> copied <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> copied<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">!==</span> object <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">순환참조가_있는_객체를_완전히_복사하는지_검사</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => true</span></code></pre></div>\n<p>순환 참조가 있는 객체를 완전히 복사하는지 검사한 결과도 <code class=\"language-text\">true</code>로 잘 나옵니다.</p>\n<p>이쯤되면 궁금해집니다. 왜 굳이 이런 번거로움을 감수하고도 <strong>깊은 복사</strong>를 생성한다는 것이 왜 중요할\n까요? 우선 깊은 복사와 얕은 복사가 뭔지 이해할 필요가 있습니다.</p>\n<p>얕은 복사는 두 객체가 동일한 참조를 공유하기에 원본 또는 복사본이 변경되면 예상치 못한 객체가 변경되\n어 디버깅이 어려워집니다. 반면, 깊은 복사는 복사된 객체의 속성이 원본 객체와 동일한 참조를 공유하지\n않는 복사본을 뜻합니다.</p>\n<p>즉, <strong>원본이나 복사본을 변경할 때 다른 객체를 변경하지 않도록 보장</strong>받을 수 있습니다. 실수를\n방지하는 것이죠.</p>\n<h3 id=\"lodash의-clonedeep\" style=\"position:relative;\"><a href=\"#lodash%EC%9D%98-clonedeep\" aria-label=\"lodash의 clonedeep permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lodash의 cloneDeep()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> _ <span class=\"token keyword\">from</span> <span class=\"token string\">'lodash'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">cloneDeep</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p>모든 값, 속성, 그리고 중첩된 객체까지 모두 달라 <code class=\"language-text\">false</code> 로 나타납니다. 그러나 외부 종속성이 추가되는\n것은 피할 수 없습니다.</p>\n<h2 id=\"객체-복사-메소드별-벤치마크\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC-%EB%A9%94%EC%86%8C%EB%93%9C%EB%B3%84-%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"객체 복사 메소드별 벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사 메소드별 벤치마크</h2>\n<p><a href=\"https://jsben.ch/zEKYJ\">각 메소드별 벤치마크 결과 보러가기</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 924px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2ElEQVR42m3O3W/SUBjH8fMPGF4KPedw+n5KSykt7xQItNABBSnZsmS6GUcgZk4ng6gx8cIb44UX3njpnf+qnQiyZcnn4vd8rx5QKeTKBpUxQ0lKwQmBje/x6TuH5b90TMhAIHROhfBWmt7I4Tt5smC8S8abR5LeHPtz2L8bzAPuJdNfYrMJsHfBnnxmww/s7GNivEmM11uxYM3NNmi6iQfrffwnWMWOv8DKAIjemXj8XghX4uw21V8m3DnTW2yRwRL5y+TuPISNBs8LADkhHF5Bf8EOruBkhcNNKrhJDt9EuPE1Cq4Tf/cDsORzkgr44ZK7+EbOv4qT16pV1SstXreRYkAln7VrillB1MyohftMbNQJzQGuekS856R7xjenUr4sF2oRajfUoiPkSpxmZ7LWoziJAjx+y85/wpc/xN45rfVoc6Q4Q6UxkGq+0R4ptT5rtlChfV8LWR1CDaDUj/ThC6lzArUSljUk61tY1omaj2So8Zg8JymAGa9ii1/xZ99Zy4VWB9nuFrS6WjuQ6oNo7ONOFxX7RDUBLbf1zlPd8a2KYxSrRM7uiWqOp/phOaBxogSYyfrJq9/M7BMpurjsw6K3xdqu1p7IzigdfbGLOy5b8ola+APR6YkiFXODxwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"객체 복사 각 메소드별 벤치마크 결과\"\n        title=\"\"\n        src=\"/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png\"\n        srcset=\"/static/1672710200016.31870475063/63868/copy-object-benchmark.png 250w,\n/static/1672710200016.31870475063/0b533/copy-object-benchmark.png 500w,\n/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png 924w\"\n        sizes=\"(max-width: 924px) 100vw, 924px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<ul>\n<li>순환 객체에 대해 지원하지 않아도 되고 <code class=\"language-text\">Date</code>, <code class=\"language-text\">Map</code> 등의 유형을 보존할 필요가 없다면\n<code class=\"language-text\">JSON.parse(JSON.stringify())</code>를 사용하거나 위에서 직접 구현한 <code class=\"language-text\">Recursive Deep Clone Object</code> 처럼\n구현해 사용하면 되겠습니다.</li>\n<li>그러나 순환 객체에 대해 지원해야 하고 여러 유형을 보존해야 한다면 lodash의 <code class=\"language-text\">cloneDeep()</code> 이나 위에\n서 구현한 <code class=\"language-text\">deepCopyObject</code> 함수를 사용하면 되겠습니다. (물론 <code class=\"language-text\">cloneDeep</code> 과 달리 구현한\n<code class=\"language-text\">deepCopyObject</code> 는 모든 유형을 지원하진 않습니다.)</li>\n</ul>\n<p>객체를 복사하는 데에는 많은 방법이 있습니다. 정답은 없으므로 상황에 따라 가장 적합한 방법을 선택하여\n사용하면 되겠습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<p><a href=\"https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json\">https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json</a></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag</a></p>\n<p><a href=\"https://medium.com/%EC%98%A4%EB%8A%98%EC%9D%98-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%97%90%EC%84%9C-object-object-%EA%B0%80-%EB%8C%80%EC%B2%B4-%EB%AD%98%EA%B9%8C-fe55b754e709\">https://medium.com/오늘의-프로그래밍/자바스크립트에서-object-object-가-대체-뭘까-fe55b754e709</a></p>\n<p><a href=\"https://github.com/lodash/lodash\">https://github.com/lodash/lodash</a></p>\n<p><a href=\"https://erdem.pl/2019/08/can-json-parse-be-performance-improvement\">https://erdem.pl/2019/08/can-json-parse-be-performance-improvement</a></p>\n<p><a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">https://v8.dev/blog/cost-of-javascript-2019#json</a></p>\n<p><a href=\"https://jsben.ch/1m5Gm\">https://jsben.ch/1m5Gm</a></p>",
      "set-person-object#Set Person Object": "<h2 id=\"객체-복사하기\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC%ED%95%98%EA%B8%B0\" aria-label=\"객체 복사하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사하기</h2>\n<p>객체를 복사하는 데 주로 쓰이는 방법은 아래와 같습니다.</p>\n<!-- prettier-ignore -->\n<table>\n<thead>\n<tr>\n<th>방법</th>\n<th>장점</th>\n<th>단점</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>JSON.stringify() &#x26; JSON.parse()</td>\n<td>간단하고 빠르게 깊은 복사를 할 수 있습니다.</td>\n<td>Infinity, Functions, Date, RegExp 등의 유형은 유실됩니다.</td>\n</tr>\n<tr>\n<td>Spread syntax</td>\n<td>가장 간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Object.assign()</td>\n<td>간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Copy</td>\n<td>Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>순환 참조가 있는 객체를 받을 경우 무한 루프에 빠지게 됩니다. 직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Clone with WeakMap Caching</td>\n<td>순환 참조가 있는 객체도 지원하며 Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Lodash - cloneDeep()</td>\n<td>모든 데이터 형식에 대해 깊게 복사합니다.</td>\n<td>외부 종속성이 추가됩니다.</td>\n</tr>\n</tbody>\n</table>\n<p>각 함수를 테스트하기에 앞서 <code class=\"language-text\">person</code> 이라는 객체를 생성해두겠습니다. 앞으로 이 객체를 이용하여 모든\n함수 테스트를 진행할 것입니다.</p>\n<h3 id=\"set-person-object\" style=\"position:relative;\"><a href=\"#set-person-object\" aria-label=\"set person object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Set Person Object</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> person <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'ben'</span><span class=\"token punctuation\">,</span>\n  age<span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n  address<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    city<span class=\"token operator\">:</span> <span class=\"token string\">'seoul'</span><span class=\"token punctuation\">,</span>\n    country<span class=\"token operator\">:</span> <span class=\"token string\">'korea'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">getAge</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  birth<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  life<span class=\"token operator\">:</span> <span class=\"token number\">Infinity</span><span class=\"token punctuation\">,</span>\n  regT<span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[a-z0-9](\\.|\\+|\\-?[a-z0-9]){1,39}@test\\.com$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">gm</span></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"jsonstringify--jsonparse\" style=\"position:relative;\"><a href=\"#jsonstringify--jsonparse\" aria-label=\"jsonstringify  jsonparse permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSON.stringify() &#x26; JSON.parse()</h3>\n<p><code class=\"language-text\">JSON.stringify</code> 함수가 객체를 JSON 문자열로 변환합니다. (원본 객체에 대한 참조가 없어집니다) 그리고\n<code class=\"language-text\">JSON.parse</code> 를 이용해 객체를 반환합니다.</p>\n<p>이렇게 이 두 가지 함수를 이용하여 간단하게 객체의 깊은 복사본을 만들 수 있습니다. 이제 복사된 객체가\n변경되어도 원본 객체는 그대로 유지됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> deepCopyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span></code></pre></div>\n<p>이 방법을 사용할 때 꼭 알아둬야 할 사항들이 있습니다. <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code>\n<code class=\"language-text\">functions</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code> 객체, <code class=\"language-text\">Infinity</code> 까지 복사하진 않습니다. 왜 그럴까요?</p>\n<ul>\n<li><code class=\"language-text\">Date</code> 객체는 JSON으로 변환하는 과정에서 <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a>형식에\n따라 문자열로\n<a href=\"https://stackoverflow.com/questions/10286204/what-is-the-right-json-date-format\">저장</a>됩니다. 따\n라서 원본 객체의 <code class=\"language-text\">Date</code> 객체는 <strong>복사 후 손실</strong>됩니다. <code class=\"language-text\">reviver</code> 기능을 사용하면 <code class=\"language-text\">Date</code> 객체를\n<a href=\"https://stackoverflow.com/a/9194413\">가져올 수 있긴 합니다</a>.</li>\n<li>함수는 데이터가 아니라 더 복잡한 의미를 가진 동작이며 JSON에서 지원되는 엔티티가 아니기 때문에\n<strong>복사 후 함수는 유지되지 않습니다</strong>.</li>\n<li>JSON에서 객체를 직렬화하고 역직렬화하는 방법의 특성으로 인해 느릴 것 같지만 대부분의 사람들이 이\n방식을 채택하여 사용하여\n<a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">V8이 적극적으로 최적화</a>했기에 <strong>빠르게</strong> 복사본\n을 얻을 수 있습니다.</li>\n</ul>\n<p>즉, 복사된 객체에서 아래와 같이 데이터를 사용하려 한다면 예와 에러가 발생합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">deepCopyPerson<span class=\"token punctuation\">.</span><span class=\"token function\">getAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.getAge is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>birth<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.birth.getDate is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>life<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => null</span></code></pre></div>\n<p>따라서 이 방법은 객체 내에 위와 같은 데이터가 없을 경우에 사용하면 됩니다.</p>\n<h3 id=\"spread-syntax\" style=\"position:relative;\"><a href=\"#spread-syntax\" aria-label=\"spread syntax permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spread syntax</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>obj <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<h3 id=\"objectassign\" style=\"position:relative;\"><a href=\"#objectassign\" aria-label=\"objectassign permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.assign()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p><code class=\"language-text\">Spead</code> 연산자나 <code class=\"language-text\">Object.assign</code> 은 최상위 속성을 복사합니다. 하지만 객체로서의 속성은 얕은 복사 후\n에 참조로 복사되므로 원본 객체와 복사된 객체 간에 공유됩니다.\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#warning_for_deep_clone\">MDN: Object.assign()</a>을\n이용한 예시를 코드로 들어보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 중첩된 객체를 포함하는 복잡한 person 객체 전달</span>\n<span class=\"token comment\">// 중첩된 객체 내의 속성을 변경할 때마다 원본 객체인 person의 동일한 속성도 변합니다</span>\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony', 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan', 'busan'</span></code></pre></div>\n<p>원래 객체의 <code class=\"language-text\">name</code> 속성은 그대로 유지 되었지만, <code class=\"language-text\">city</code> 속성은 재할당 작업으로 인해 변경되었습니다.\n(Spread syntax 도 마찬가지) 그래도 JSON 방식에 비해 다른 점은 <code class=\"language-text\">functions</code>, <code class=\"language-text\">rRegExp</code>, <code class=\"language-text\">Date</code> 객체,\n<code class=\"language-text\">Infinity</code> 까지 복사된다는 점입니다.</p>\n<p>따라서 중첩된 객체 속성이 필요하지 않은 경우에는 좋은 복사 방법입니다.</p>\n<h3 id=\"recursive-deep-clone-object\" style=\"position:relative;\"><a href=\"#recursive-deep-clone-object\" aria-label=\"recursive deep clone object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recursive Deep Clone Object</h3>\n<p>앞에서 다뤘던 문제(JS 내장 함수 및 함수가 손실되는 것)를 해결하며 <strong>깊은 복사</strong>를 실현하는 함수를\n만들어 보겠습니다. 복사를 진행하다가 객체를 만나면 함수를 <strong>재귀적으로</strong> 실행해 깊은 복사를 실현하면\n됩니다.</p>\n<p>regExp 와 Date 객체를 복사하는 건 Lodash의 코드를 참고하여 작성했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> value <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> cloneRegExp <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>regExp<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> RegExp <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> reFlags <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w*$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">regExp</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">,</span> reFlags<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  result<span class=\"token punctuation\">.</span>lastIndex <span class=\"token operator\">=</span> regExp<span class=\"token punctuation\">.</span>lastIndex<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> getTag <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span> <span class=\"token operator\">?</span> <span class=\"token string\">'[object Undefined]'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'[object Null]'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * `Set`, `Map`, `Boolean`, `Date`, `Number`, `String`, `RegExp` 태그가 있는 값만 복사를 진행합니다.\n */</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneByTag</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> tag<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Boolean]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Date]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token operator\">+</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Number]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object String]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Set]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Map]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object RegExp]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">cloneRegExp</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isPrototype <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> object<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> value <span class=\"token operator\">&amp;&amp;</span> value<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> proto <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> Ctor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> Ctor<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> proto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneObject</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">typeof</span> obj<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token function\">isPrototype</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">?</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">getPrototypeOf</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 객체 생성</span>\n    <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> initCloneArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">any</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> length <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> array<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">array</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n    length <span class=\"token operator\">&amp;&amp;</span>\n    <span class=\"token keyword\">typeof</span> array<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span> <span class=\"token operator\">&amp;&amp;</span>\n    Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">,</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result<span class=\"token punctuation\">.</span>index <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">;</span>\n    result<span class=\"token punctuation\">.</span>input <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> obj <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span> <span class=\"token operator\">?</span> <span class=\"token function-variable function\">obj</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode <span class=\"token operator\">=</span> <span class=\"token string\">'12345'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => undefined</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => '12345'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>regT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => lastIndex: 0</span>\ndotAll<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nflags<span class=\"token operator\">:</span> <span class=\"token string\">'gm'</span><span class=\"token punctuation\">;</span>\nglobal<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nhasIndices<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nignoreCase<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nmultiline<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nsource<span class=\"token operator\">:</span> <span class=\"token string\">'^[a-z0-9](\\\\.|\\\\+|\\\\-?[a-z0-9]){1,39}@test\\\\.com$'</span><span class=\"token punctuation\">;</span>\nsticky<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nunicode<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>중요한 것을 살펴보자면 <code class=\"language-text\">typeof</code> 가 아닌 <code class=\"language-text\">toString</code> 메소드를 사용했습니다.</p>\n<p>이 둘의 가장 큰 차이점은 <code class=\"language-text\">toString</code> 은 메소드이기 때문에 오버라이딩이 가능한 반면, <code class=\"language-text\">typeof</code> 는 연산\n자로 분류되기에 오버라이드가 불가능합니다. 즉, <code class=\"language-text\">typeof</code> 를 사용해서는 <strong>반환되는 결과를 조작하는 게\n불가능</strong>하기에 <code class=\"language-text\">toString</code> 을 타입 체크로 사용하여 추가적인 문자열 파싱을 진행했습니다.</p>\n<p>그래서 <strong>toStringTag</strong> 를 활용하여 <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">Boolean</code>, <code class=\"language-text\">Date</code>, <code class=\"language-text\">Number</code>, <code class=\"language-text\">String</code>, <code class=\"language-text\">RegExp</code> 태\n그가 있는 값만 복사를 진행합니다.</p>\n<p>만약 깊게 복사해야 할 객체가 지금 제작한 함수로 커버할 수 있는 범위라면 이대로 쓰는 게 가장 좋습니다\n.</p>\n<p>그리고 이 코드에는 <strong>몇 가지 문제</strong>가 있습니다.</p>\n<p>첫 번재는 바이너리 데이터 관련 객체(<code class=\"language-text\">TypedArray</code>, <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">DataView</code>…) 객체는 깊게 복사하지\n않습니다. 저는 굳이 <code class=\"language-text\">ArrayBuffer</code> 객체까지 깊게 복사할 필요가 없어 추가해주진 않았습니다만, 이\n부분에 대한 태그 케이스를 추가하여 <code class=\"language-text\">ArrayBuffer</code>를 복사하는 로직을 작성해주면 바이너리 관련 객체도\n깊게 복사 할 수 있겠습니다.</p>\n<p>두 번째는 순환 참조가 있는 객체를 복사해야 할 경우에는 무한하게 서로가 서로를 호출해서 호출 스택\n(call stack)이 터져버리는 에러를 마주하게 됩니다. 이 문제를 해결하기 위해선 무한 루프에 빠지지\n않도록 이전의 참조 맵을 유지하면서 전달 받은 객체를 통해 반복하여 복사하도록 해주면 됩니다. 객체가\n맵에 저장되어 있다면 복사본이 반복되지 않고 그대로 반환되도록 하는 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> hash <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WeakMap<span class=\"token operator\">&lt;</span>object<span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 순환 참조</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hash<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> hash<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// hash에 복사할 객체를 저장합니다.</span>\n  hash<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Map]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Set]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 열거 가능한 자체 속성을 재귀적으로 복제 및 할당합니다.</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> 순환참조가_있는_객체를_완전히_복사하는지_검사 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> object <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    foo<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> b<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> c<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> d<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    bar<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d <span class=\"token operator\">=</span> object<span class=\"token punctuation\">;</span>\n  object<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> copied <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> copied<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">!==</span> object <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">순환참조가_있는_객체를_완전히_복사하는지_검사</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => true</span></code></pre></div>\n<p>순환 참조가 있는 객체를 완전히 복사하는지 검사한 결과도 <code class=\"language-text\">true</code>로 잘 나옵니다.</p>\n<p>이쯤되면 궁금해집니다. 왜 굳이 이런 번거로움을 감수하고도 <strong>깊은 복사</strong>를 생성한다는 것이 왜 중요할\n까요? 우선 깊은 복사와 얕은 복사가 뭔지 이해할 필요가 있습니다.</p>\n<p>얕은 복사는 두 객체가 동일한 참조를 공유하기에 원본 또는 복사본이 변경되면 예상치 못한 객체가 변경되\n어 디버깅이 어려워집니다. 반면, 깊은 복사는 복사된 객체의 속성이 원본 객체와 동일한 참조를 공유하지\n않는 복사본을 뜻합니다.</p>\n<p>즉, <strong>원본이나 복사본을 변경할 때 다른 객체를 변경하지 않도록 보장</strong>받을 수 있습니다. 실수를\n방지하는 것이죠.</p>\n<h3 id=\"lodash의-clonedeep\" style=\"position:relative;\"><a href=\"#lodash%EC%9D%98-clonedeep\" aria-label=\"lodash의 clonedeep permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lodash의 cloneDeep()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> _ <span class=\"token keyword\">from</span> <span class=\"token string\">'lodash'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">cloneDeep</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p>모든 값, 속성, 그리고 중첩된 객체까지 모두 달라 <code class=\"language-text\">false</code> 로 나타납니다. 그러나 외부 종속성이 추가되는\n것은 피할 수 없습니다.</p>\n<h2 id=\"객체-복사-메소드별-벤치마크\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC-%EB%A9%94%EC%86%8C%EB%93%9C%EB%B3%84-%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"객체 복사 메소드별 벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사 메소드별 벤치마크</h2>\n<p><a href=\"https://jsben.ch/zEKYJ\">각 메소드별 벤치마크 결과 보러가기</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 924px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2ElEQVR42m3O3W/SUBjH8fMPGF4KPedw+n5KSykt7xQItNABBSnZsmS6GUcgZk4ng6gx8cIb44UX3njpnf+qnQiyZcnn4vd8rx5QKeTKBpUxQ0lKwQmBje/x6TuH5b90TMhAIHROhfBWmt7I4Tt5smC8S8abR5LeHPtz2L8bzAPuJdNfYrMJsHfBnnxmww/s7GNivEmM11uxYM3NNmi6iQfrffwnWMWOv8DKAIjemXj8XghX4uw21V8m3DnTW2yRwRL5y+TuPISNBs8LADkhHF5Bf8EOruBkhcNNKrhJDt9EuPE1Cq4Tf/cDsORzkgr44ZK7+EbOv4qT16pV1SstXreRYkAln7VrillB1MyohftMbNQJzQGuekS856R7xjenUr4sF2oRajfUoiPkSpxmZ7LWoziJAjx+y85/wpc/xN45rfVoc6Q4Q6UxkGq+0R4ptT5rtlChfV8LWR1CDaDUj/ThC6lzArUSljUk61tY1omaj2So8Zg8JymAGa9ii1/xZ99Zy4VWB9nuFrS6WjuQ6oNo7ONOFxX7RDUBLbf1zlPd8a2KYxSrRM7uiWqOp/phOaBxogSYyfrJq9/M7BMpurjsw6K3xdqu1p7IzigdfbGLOy5b8ola+APR6YkiFXODxwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"객체 복사 각 메소드별 벤치마크 결과\"\n        title=\"\"\n        src=\"/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png\"\n        srcset=\"/static/1672710200016.31870475063/63868/copy-object-benchmark.png 250w,\n/static/1672710200016.31870475063/0b533/copy-object-benchmark.png 500w,\n/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png 924w\"\n        sizes=\"(max-width: 924px) 100vw, 924px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<ul>\n<li>순환 객체에 대해 지원하지 않아도 되고 <code class=\"language-text\">Date</code>, <code class=\"language-text\">Map</code> 등의 유형을 보존할 필요가 없다면\n<code class=\"language-text\">JSON.parse(JSON.stringify())</code>를 사용하거나 위에서 직접 구현한 <code class=\"language-text\">Recursive Deep Clone Object</code> 처럼\n구현해 사용하면 되겠습니다.</li>\n<li>그러나 순환 객체에 대해 지원해야 하고 여러 유형을 보존해야 한다면 lodash의 <code class=\"language-text\">cloneDeep()</code> 이나 위에\n서 구현한 <code class=\"language-text\">deepCopyObject</code> 함수를 사용하면 되겠습니다. (물론 <code class=\"language-text\">cloneDeep</code> 과 달리 구현한\n<code class=\"language-text\">deepCopyObject</code> 는 모든 유형을 지원하진 않습니다.)</li>\n</ul>\n<p>객체를 복사하는 데에는 많은 방법이 있습니다. 정답은 없으므로 상황에 따라 가장 적합한 방법을 선택하여\n사용하면 되겠습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<p><a href=\"https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json\">https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json</a></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag</a></p>\n<p><a href=\"https://medium.com/%EC%98%A4%EB%8A%98%EC%9D%98-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%97%90%EC%84%9C-object-object-%EA%B0%80-%EB%8C%80%EC%B2%B4-%EB%AD%98%EA%B9%8C-fe55b754e709\">https://medium.com/오늘의-프로그래밍/자바스크립트에서-object-object-가-대체-뭘까-fe55b754e709</a></p>\n<p><a href=\"https://github.com/lodash/lodash\">https://github.com/lodash/lodash</a></p>\n<p><a href=\"https://erdem.pl/2019/08/can-json-parse-be-performance-improvement\">https://erdem.pl/2019/08/can-json-parse-be-performance-improvement</a></p>\n<p><a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">https://v8.dev/blog/cost-of-javascript-2019#json</a></p>\n<p><a href=\"https://jsben.ch/1m5Gm\">https://jsben.ch/1m5Gm</a></p>",
      "jsonstringify--jsonparse#JSON.stringify() & JSON.parse()": "<h2 id=\"객체-복사하기\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC%ED%95%98%EA%B8%B0\" aria-label=\"객체 복사하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사하기</h2>\n<p>객체를 복사하는 데 주로 쓰이는 방법은 아래와 같습니다.</p>\n<!-- prettier-ignore -->\n<table>\n<thead>\n<tr>\n<th>방법</th>\n<th>장점</th>\n<th>단점</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>JSON.stringify() &#x26; JSON.parse()</td>\n<td>간단하고 빠르게 깊은 복사를 할 수 있습니다.</td>\n<td>Infinity, Functions, Date, RegExp 등의 유형은 유실됩니다.</td>\n</tr>\n<tr>\n<td>Spread syntax</td>\n<td>가장 간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Object.assign()</td>\n<td>간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Copy</td>\n<td>Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>순환 참조가 있는 객체를 받을 경우 무한 루프에 빠지게 됩니다. 직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Clone with WeakMap Caching</td>\n<td>순환 참조가 있는 객체도 지원하며 Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Lodash - cloneDeep()</td>\n<td>모든 데이터 형식에 대해 깊게 복사합니다.</td>\n<td>외부 종속성이 추가됩니다.</td>\n</tr>\n</tbody>\n</table>\n<p>각 함수를 테스트하기에 앞서 <code class=\"language-text\">person</code> 이라는 객체를 생성해두겠습니다. 앞으로 이 객체를 이용하여 모든\n함수 테스트를 진행할 것입니다.</p>\n<h3 id=\"set-person-object\" style=\"position:relative;\"><a href=\"#set-person-object\" aria-label=\"set person object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Set Person Object</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> person <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'ben'</span><span class=\"token punctuation\">,</span>\n  age<span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n  address<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    city<span class=\"token operator\">:</span> <span class=\"token string\">'seoul'</span><span class=\"token punctuation\">,</span>\n    country<span class=\"token operator\">:</span> <span class=\"token string\">'korea'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">getAge</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  birth<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  life<span class=\"token operator\">:</span> <span class=\"token number\">Infinity</span><span class=\"token punctuation\">,</span>\n  regT<span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[a-z0-9](\\.|\\+|\\-?[a-z0-9]){1,39}@test\\.com$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">gm</span></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"jsonstringify--jsonparse\" style=\"position:relative;\"><a href=\"#jsonstringify--jsonparse\" aria-label=\"jsonstringify  jsonparse permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSON.stringify() &#x26; JSON.parse()</h3>\n<p><code class=\"language-text\">JSON.stringify</code> 함수가 객체를 JSON 문자열로 변환합니다. (원본 객체에 대한 참조가 없어집니다) 그리고\n<code class=\"language-text\">JSON.parse</code> 를 이용해 객체를 반환합니다.</p>\n<p>이렇게 이 두 가지 함수를 이용하여 간단하게 객체의 깊은 복사본을 만들 수 있습니다. 이제 복사된 객체가\n변경되어도 원본 객체는 그대로 유지됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> deepCopyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span></code></pre></div>\n<p>이 방법을 사용할 때 꼭 알아둬야 할 사항들이 있습니다. <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code>\n<code class=\"language-text\">functions</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code> 객체, <code class=\"language-text\">Infinity</code> 까지 복사하진 않습니다. 왜 그럴까요?</p>\n<ul>\n<li><code class=\"language-text\">Date</code> 객체는 JSON으로 변환하는 과정에서 <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a>형식에\n따라 문자열로\n<a href=\"https://stackoverflow.com/questions/10286204/what-is-the-right-json-date-format\">저장</a>됩니다. 따\n라서 원본 객체의 <code class=\"language-text\">Date</code> 객체는 <strong>복사 후 손실</strong>됩니다. <code class=\"language-text\">reviver</code> 기능을 사용하면 <code class=\"language-text\">Date</code> 객체를\n<a href=\"https://stackoverflow.com/a/9194413\">가져올 수 있긴 합니다</a>.</li>\n<li>함수는 데이터가 아니라 더 복잡한 의미를 가진 동작이며 JSON에서 지원되는 엔티티가 아니기 때문에\n<strong>복사 후 함수는 유지되지 않습니다</strong>.</li>\n<li>JSON에서 객체를 직렬화하고 역직렬화하는 방법의 특성으로 인해 느릴 것 같지만 대부분의 사람들이 이\n방식을 채택하여 사용하여\n<a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">V8이 적극적으로 최적화</a>했기에 <strong>빠르게</strong> 복사본\n을 얻을 수 있습니다.</li>\n</ul>\n<p>즉, 복사된 객체에서 아래와 같이 데이터를 사용하려 한다면 예와 에러가 발생합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">deepCopyPerson<span class=\"token punctuation\">.</span><span class=\"token function\">getAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.getAge is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>birth<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.birth.getDate is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>life<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => null</span></code></pre></div>\n<p>따라서 이 방법은 객체 내에 위와 같은 데이터가 없을 경우에 사용하면 됩니다.</p>\n<h3 id=\"spread-syntax\" style=\"position:relative;\"><a href=\"#spread-syntax\" aria-label=\"spread syntax permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spread syntax</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>obj <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<h3 id=\"objectassign\" style=\"position:relative;\"><a href=\"#objectassign\" aria-label=\"objectassign permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.assign()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p><code class=\"language-text\">Spead</code> 연산자나 <code class=\"language-text\">Object.assign</code> 은 최상위 속성을 복사합니다. 하지만 객체로서의 속성은 얕은 복사 후\n에 참조로 복사되므로 원본 객체와 복사된 객체 간에 공유됩니다.\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#warning_for_deep_clone\">MDN: Object.assign()</a>을\n이용한 예시를 코드로 들어보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 중첩된 객체를 포함하는 복잡한 person 객체 전달</span>\n<span class=\"token comment\">// 중첩된 객체 내의 속성을 변경할 때마다 원본 객체인 person의 동일한 속성도 변합니다</span>\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony', 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan', 'busan'</span></code></pre></div>\n<p>원래 객체의 <code class=\"language-text\">name</code> 속성은 그대로 유지 되었지만, <code class=\"language-text\">city</code> 속성은 재할당 작업으로 인해 변경되었습니다.\n(Spread syntax 도 마찬가지) 그래도 JSON 방식에 비해 다른 점은 <code class=\"language-text\">functions</code>, <code class=\"language-text\">rRegExp</code>, <code class=\"language-text\">Date</code> 객체,\n<code class=\"language-text\">Infinity</code> 까지 복사된다는 점입니다.</p>\n<p>따라서 중첩된 객체 속성이 필요하지 않은 경우에는 좋은 복사 방법입니다.</p>\n<h3 id=\"recursive-deep-clone-object\" style=\"position:relative;\"><a href=\"#recursive-deep-clone-object\" aria-label=\"recursive deep clone object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recursive Deep Clone Object</h3>\n<p>앞에서 다뤘던 문제(JS 내장 함수 및 함수가 손실되는 것)를 해결하며 <strong>깊은 복사</strong>를 실현하는 함수를\n만들어 보겠습니다. 복사를 진행하다가 객체를 만나면 함수를 <strong>재귀적으로</strong> 실행해 깊은 복사를 실현하면\n됩니다.</p>\n<p>regExp 와 Date 객체를 복사하는 건 Lodash의 코드를 참고하여 작성했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> value <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> cloneRegExp <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>regExp<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> RegExp <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> reFlags <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w*$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">regExp</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">,</span> reFlags<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  result<span class=\"token punctuation\">.</span>lastIndex <span class=\"token operator\">=</span> regExp<span class=\"token punctuation\">.</span>lastIndex<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> getTag <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span> <span class=\"token operator\">?</span> <span class=\"token string\">'[object Undefined]'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'[object Null]'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * `Set`, `Map`, `Boolean`, `Date`, `Number`, `String`, `RegExp` 태그가 있는 값만 복사를 진행합니다.\n */</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneByTag</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> tag<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Boolean]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Date]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token operator\">+</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Number]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object String]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Set]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Map]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object RegExp]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">cloneRegExp</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isPrototype <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> object<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> value <span class=\"token operator\">&amp;&amp;</span> value<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> proto <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> Ctor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> Ctor<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> proto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneObject</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">typeof</span> obj<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token function\">isPrototype</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">?</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">getPrototypeOf</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 객체 생성</span>\n    <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> initCloneArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">any</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> length <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> array<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">array</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n    length <span class=\"token operator\">&amp;&amp;</span>\n    <span class=\"token keyword\">typeof</span> array<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span> <span class=\"token operator\">&amp;&amp;</span>\n    Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">,</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result<span class=\"token punctuation\">.</span>index <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">;</span>\n    result<span class=\"token punctuation\">.</span>input <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> obj <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span> <span class=\"token operator\">?</span> <span class=\"token function-variable function\">obj</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode <span class=\"token operator\">=</span> <span class=\"token string\">'12345'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => undefined</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => '12345'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>regT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => lastIndex: 0</span>\ndotAll<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nflags<span class=\"token operator\">:</span> <span class=\"token string\">'gm'</span><span class=\"token punctuation\">;</span>\nglobal<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nhasIndices<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nignoreCase<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nmultiline<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nsource<span class=\"token operator\">:</span> <span class=\"token string\">'^[a-z0-9](\\\\.|\\\\+|\\\\-?[a-z0-9]){1,39}@test\\\\.com$'</span><span class=\"token punctuation\">;</span>\nsticky<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nunicode<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>중요한 것을 살펴보자면 <code class=\"language-text\">typeof</code> 가 아닌 <code class=\"language-text\">toString</code> 메소드를 사용했습니다.</p>\n<p>이 둘의 가장 큰 차이점은 <code class=\"language-text\">toString</code> 은 메소드이기 때문에 오버라이딩이 가능한 반면, <code class=\"language-text\">typeof</code> 는 연산\n자로 분류되기에 오버라이드가 불가능합니다. 즉, <code class=\"language-text\">typeof</code> 를 사용해서는 <strong>반환되는 결과를 조작하는 게\n불가능</strong>하기에 <code class=\"language-text\">toString</code> 을 타입 체크로 사용하여 추가적인 문자열 파싱을 진행했습니다.</p>\n<p>그래서 <strong>toStringTag</strong> 를 활용하여 <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">Boolean</code>, <code class=\"language-text\">Date</code>, <code class=\"language-text\">Number</code>, <code class=\"language-text\">String</code>, <code class=\"language-text\">RegExp</code> 태\n그가 있는 값만 복사를 진행합니다.</p>\n<p>만약 깊게 복사해야 할 객체가 지금 제작한 함수로 커버할 수 있는 범위라면 이대로 쓰는 게 가장 좋습니다\n.</p>\n<p>그리고 이 코드에는 <strong>몇 가지 문제</strong>가 있습니다.</p>\n<p>첫 번재는 바이너리 데이터 관련 객체(<code class=\"language-text\">TypedArray</code>, <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">DataView</code>…) 객체는 깊게 복사하지\n않습니다. 저는 굳이 <code class=\"language-text\">ArrayBuffer</code> 객체까지 깊게 복사할 필요가 없어 추가해주진 않았습니다만, 이\n부분에 대한 태그 케이스를 추가하여 <code class=\"language-text\">ArrayBuffer</code>를 복사하는 로직을 작성해주면 바이너리 관련 객체도\n깊게 복사 할 수 있겠습니다.</p>\n<p>두 번째는 순환 참조가 있는 객체를 복사해야 할 경우에는 무한하게 서로가 서로를 호출해서 호출 스택\n(call stack)이 터져버리는 에러를 마주하게 됩니다. 이 문제를 해결하기 위해선 무한 루프에 빠지지\n않도록 이전의 참조 맵을 유지하면서 전달 받은 객체를 통해 반복하여 복사하도록 해주면 됩니다. 객체가\n맵에 저장되어 있다면 복사본이 반복되지 않고 그대로 반환되도록 하는 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> hash <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WeakMap<span class=\"token operator\">&lt;</span>object<span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 순환 참조</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hash<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> hash<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// hash에 복사할 객체를 저장합니다.</span>\n  hash<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Map]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Set]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 열거 가능한 자체 속성을 재귀적으로 복제 및 할당합니다.</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> 순환참조가_있는_객체를_완전히_복사하는지_검사 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> object <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    foo<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> b<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> c<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> d<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    bar<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d <span class=\"token operator\">=</span> object<span class=\"token punctuation\">;</span>\n  object<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> copied <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> copied<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">!==</span> object <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">순환참조가_있는_객체를_완전히_복사하는지_검사</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => true</span></code></pre></div>\n<p>순환 참조가 있는 객체를 완전히 복사하는지 검사한 결과도 <code class=\"language-text\">true</code>로 잘 나옵니다.</p>\n<p>이쯤되면 궁금해집니다. 왜 굳이 이런 번거로움을 감수하고도 <strong>깊은 복사</strong>를 생성한다는 것이 왜 중요할\n까요? 우선 깊은 복사와 얕은 복사가 뭔지 이해할 필요가 있습니다.</p>\n<p>얕은 복사는 두 객체가 동일한 참조를 공유하기에 원본 또는 복사본이 변경되면 예상치 못한 객체가 변경되\n어 디버깅이 어려워집니다. 반면, 깊은 복사는 복사된 객체의 속성이 원본 객체와 동일한 참조를 공유하지\n않는 복사본을 뜻합니다.</p>\n<p>즉, <strong>원본이나 복사본을 변경할 때 다른 객체를 변경하지 않도록 보장</strong>받을 수 있습니다. 실수를\n방지하는 것이죠.</p>\n<h3 id=\"lodash의-clonedeep\" style=\"position:relative;\"><a href=\"#lodash%EC%9D%98-clonedeep\" aria-label=\"lodash의 clonedeep permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lodash의 cloneDeep()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> _ <span class=\"token keyword\">from</span> <span class=\"token string\">'lodash'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">cloneDeep</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p>모든 값, 속성, 그리고 중첩된 객체까지 모두 달라 <code class=\"language-text\">false</code> 로 나타납니다. 그러나 외부 종속성이 추가되는\n것은 피할 수 없습니다.</p>\n<h2 id=\"객체-복사-메소드별-벤치마크\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC-%EB%A9%94%EC%86%8C%EB%93%9C%EB%B3%84-%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"객체 복사 메소드별 벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사 메소드별 벤치마크</h2>\n<p><a href=\"https://jsben.ch/zEKYJ\">각 메소드별 벤치마크 결과 보러가기</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 924px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2ElEQVR42m3O3W/SUBjH8fMPGF4KPedw+n5KSykt7xQItNABBSnZsmS6GUcgZk4ng6gx8cIb44UX3njpnf+qnQiyZcnn4vd8rx5QKeTKBpUxQ0lKwQmBje/x6TuH5b90TMhAIHROhfBWmt7I4Tt5smC8S8abR5LeHPtz2L8bzAPuJdNfYrMJsHfBnnxmww/s7GNivEmM11uxYM3NNmi6iQfrffwnWMWOv8DKAIjemXj8XghX4uw21V8m3DnTW2yRwRL5y+TuPISNBs8LADkhHF5Bf8EOruBkhcNNKrhJDt9EuPE1Cq4Tf/cDsORzkgr44ZK7+EbOv4qT16pV1SstXreRYkAln7VrillB1MyohftMbNQJzQGuekS856R7xjenUr4sF2oRajfUoiPkSpxmZ7LWoziJAjx+y85/wpc/xN45rfVoc6Q4Q6UxkGq+0R4ptT5rtlChfV8LWR1CDaDUj/ThC6lzArUSljUk61tY1omaj2So8Zg8JymAGa9ii1/xZ99Zy4VWB9nuFrS6WjuQ6oNo7ONOFxX7RDUBLbf1zlPd8a2KYxSrRM7uiWqOp/phOaBxogSYyfrJq9/M7BMpurjsw6K3xdqu1p7IzigdfbGLOy5b8ola+APR6YkiFXODxwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"객체 복사 각 메소드별 벤치마크 결과\"\n        title=\"\"\n        src=\"/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png\"\n        srcset=\"/static/1672710200016.31870475063/63868/copy-object-benchmark.png 250w,\n/static/1672710200016.31870475063/0b533/copy-object-benchmark.png 500w,\n/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png 924w\"\n        sizes=\"(max-width: 924px) 100vw, 924px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<ul>\n<li>순환 객체에 대해 지원하지 않아도 되고 <code class=\"language-text\">Date</code>, <code class=\"language-text\">Map</code> 등의 유형을 보존할 필요가 없다면\n<code class=\"language-text\">JSON.parse(JSON.stringify())</code>를 사용하거나 위에서 직접 구현한 <code class=\"language-text\">Recursive Deep Clone Object</code> 처럼\n구현해 사용하면 되겠습니다.</li>\n<li>그러나 순환 객체에 대해 지원해야 하고 여러 유형을 보존해야 한다면 lodash의 <code class=\"language-text\">cloneDeep()</code> 이나 위에\n서 구현한 <code class=\"language-text\">deepCopyObject</code> 함수를 사용하면 되겠습니다. (물론 <code class=\"language-text\">cloneDeep</code> 과 달리 구현한\n<code class=\"language-text\">deepCopyObject</code> 는 모든 유형을 지원하진 않습니다.)</li>\n</ul>\n<p>객체를 복사하는 데에는 많은 방법이 있습니다. 정답은 없으므로 상황에 따라 가장 적합한 방법을 선택하여\n사용하면 되겠습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<p><a href=\"https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json\">https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json</a></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag</a></p>\n<p><a href=\"https://medium.com/%EC%98%A4%EB%8A%98%EC%9D%98-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%97%90%EC%84%9C-object-object-%EA%B0%80-%EB%8C%80%EC%B2%B4-%EB%AD%98%EA%B9%8C-fe55b754e709\">https://medium.com/오늘의-프로그래밍/자바스크립트에서-object-object-가-대체-뭘까-fe55b754e709</a></p>\n<p><a href=\"https://github.com/lodash/lodash\">https://github.com/lodash/lodash</a></p>\n<p><a href=\"https://erdem.pl/2019/08/can-json-parse-be-performance-improvement\">https://erdem.pl/2019/08/can-json-parse-be-performance-improvement</a></p>\n<p><a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">https://v8.dev/blog/cost-of-javascript-2019#json</a></p>\n<p><a href=\"https://jsben.ch/1m5Gm\">https://jsben.ch/1m5Gm</a></p>",
      "spread-syntax#Spread syntax": "<h2 id=\"객체-복사하기\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC%ED%95%98%EA%B8%B0\" aria-label=\"객체 복사하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사하기</h2>\n<p>객체를 복사하는 데 주로 쓰이는 방법은 아래와 같습니다.</p>\n<!-- prettier-ignore -->\n<table>\n<thead>\n<tr>\n<th>방법</th>\n<th>장점</th>\n<th>단점</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>JSON.stringify() &#x26; JSON.parse()</td>\n<td>간단하고 빠르게 깊은 복사를 할 수 있습니다.</td>\n<td>Infinity, Functions, Date, RegExp 등의 유형은 유실됩니다.</td>\n</tr>\n<tr>\n<td>Spread syntax</td>\n<td>가장 간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Object.assign()</td>\n<td>간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Copy</td>\n<td>Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>순환 참조가 있는 객체를 받을 경우 무한 루프에 빠지게 됩니다. 직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Clone with WeakMap Caching</td>\n<td>순환 참조가 있는 객체도 지원하며 Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Lodash - cloneDeep()</td>\n<td>모든 데이터 형식에 대해 깊게 복사합니다.</td>\n<td>외부 종속성이 추가됩니다.</td>\n</tr>\n</tbody>\n</table>\n<p>각 함수를 테스트하기에 앞서 <code class=\"language-text\">person</code> 이라는 객체를 생성해두겠습니다. 앞으로 이 객체를 이용하여 모든\n함수 테스트를 진행할 것입니다.</p>\n<h3 id=\"set-person-object\" style=\"position:relative;\"><a href=\"#set-person-object\" aria-label=\"set person object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Set Person Object</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> person <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'ben'</span><span class=\"token punctuation\">,</span>\n  age<span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n  address<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    city<span class=\"token operator\">:</span> <span class=\"token string\">'seoul'</span><span class=\"token punctuation\">,</span>\n    country<span class=\"token operator\">:</span> <span class=\"token string\">'korea'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">getAge</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  birth<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  life<span class=\"token operator\">:</span> <span class=\"token number\">Infinity</span><span class=\"token punctuation\">,</span>\n  regT<span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[a-z0-9](\\.|\\+|\\-?[a-z0-9]){1,39}@test\\.com$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">gm</span></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"jsonstringify--jsonparse\" style=\"position:relative;\"><a href=\"#jsonstringify--jsonparse\" aria-label=\"jsonstringify  jsonparse permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSON.stringify() &#x26; JSON.parse()</h3>\n<p><code class=\"language-text\">JSON.stringify</code> 함수가 객체를 JSON 문자열로 변환합니다. (원본 객체에 대한 참조가 없어집니다) 그리고\n<code class=\"language-text\">JSON.parse</code> 를 이용해 객체를 반환합니다.</p>\n<p>이렇게 이 두 가지 함수를 이용하여 간단하게 객체의 깊은 복사본을 만들 수 있습니다. 이제 복사된 객체가\n변경되어도 원본 객체는 그대로 유지됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> deepCopyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span></code></pre></div>\n<p>이 방법을 사용할 때 꼭 알아둬야 할 사항들이 있습니다. <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code>\n<code class=\"language-text\">functions</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code> 객체, <code class=\"language-text\">Infinity</code> 까지 복사하진 않습니다. 왜 그럴까요?</p>\n<ul>\n<li><code class=\"language-text\">Date</code> 객체는 JSON으로 변환하는 과정에서 <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a>형식에\n따라 문자열로\n<a href=\"https://stackoverflow.com/questions/10286204/what-is-the-right-json-date-format\">저장</a>됩니다. 따\n라서 원본 객체의 <code class=\"language-text\">Date</code> 객체는 <strong>복사 후 손실</strong>됩니다. <code class=\"language-text\">reviver</code> 기능을 사용하면 <code class=\"language-text\">Date</code> 객체를\n<a href=\"https://stackoverflow.com/a/9194413\">가져올 수 있긴 합니다</a>.</li>\n<li>함수는 데이터가 아니라 더 복잡한 의미를 가진 동작이며 JSON에서 지원되는 엔티티가 아니기 때문에\n<strong>복사 후 함수는 유지되지 않습니다</strong>.</li>\n<li>JSON에서 객체를 직렬화하고 역직렬화하는 방법의 특성으로 인해 느릴 것 같지만 대부분의 사람들이 이\n방식을 채택하여 사용하여\n<a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">V8이 적극적으로 최적화</a>했기에 <strong>빠르게</strong> 복사본\n을 얻을 수 있습니다.</li>\n</ul>\n<p>즉, 복사된 객체에서 아래와 같이 데이터를 사용하려 한다면 예와 에러가 발생합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">deepCopyPerson<span class=\"token punctuation\">.</span><span class=\"token function\">getAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.getAge is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>birth<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.birth.getDate is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>life<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => null</span></code></pre></div>\n<p>따라서 이 방법은 객체 내에 위와 같은 데이터가 없을 경우에 사용하면 됩니다.</p>\n<h3 id=\"spread-syntax\" style=\"position:relative;\"><a href=\"#spread-syntax\" aria-label=\"spread syntax permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spread syntax</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>obj <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<h3 id=\"objectassign\" style=\"position:relative;\"><a href=\"#objectassign\" aria-label=\"objectassign permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.assign()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p><code class=\"language-text\">Spead</code> 연산자나 <code class=\"language-text\">Object.assign</code> 은 최상위 속성을 복사합니다. 하지만 객체로서의 속성은 얕은 복사 후\n에 참조로 복사되므로 원본 객체와 복사된 객체 간에 공유됩니다.\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#warning_for_deep_clone\">MDN: Object.assign()</a>을\n이용한 예시를 코드로 들어보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 중첩된 객체를 포함하는 복잡한 person 객체 전달</span>\n<span class=\"token comment\">// 중첩된 객체 내의 속성을 변경할 때마다 원본 객체인 person의 동일한 속성도 변합니다</span>\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony', 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan', 'busan'</span></code></pre></div>\n<p>원래 객체의 <code class=\"language-text\">name</code> 속성은 그대로 유지 되었지만, <code class=\"language-text\">city</code> 속성은 재할당 작업으로 인해 변경되었습니다.\n(Spread syntax 도 마찬가지) 그래도 JSON 방식에 비해 다른 점은 <code class=\"language-text\">functions</code>, <code class=\"language-text\">rRegExp</code>, <code class=\"language-text\">Date</code> 객체,\n<code class=\"language-text\">Infinity</code> 까지 복사된다는 점입니다.</p>\n<p>따라서 중첩된 객체 속성이 필요하지 않은 경우에는 좋은 복사 방법입니다.</p>\n<h3 id=\"recursive-deep-clone-object\" style=\"position:relative;\"><a href=\"#recursive-deep-clone-object\" aria-label=\"recursive deep clone object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recursive Deep Clone Object</h3>\n<p>앞에서 다뤘던 문제(JS 내장 함수 및 함수가 손실되는 것)를 해결하며 <strong>깊은 복사</strong>를 실현하는 함수를\n만들어 보겠습니다. 복사를 진행하다가 객체를 만나면 함수를 <strong>재귀적으로</strong> 실행해 깊은 복사를 실현하면\n됩니다.</p>\n<p>regExp 와 Date 객체를 복사하는 건 Lodash의 코드를 참고하여 작성했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> value <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> cloneRegExp <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>regExp<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> RegExp <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> reFlags <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w*$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">regExp</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">,</span> reFlags<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  result<span class=\"token punctuation\">.</span>lastIndex <span class=\"token operator\">=</span> regExp<span class=\"token punctuation\">.</span>lastIndex<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> getTag <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span> <span class=\"token operator\">?</span> <span class=\"token string\">'[object Undefined]'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'[object Null]'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * `Set`, `Map`, `Boolean`, `Date`, `Number`, `String`, `RegExp` 태그가 있는 값만 복사를 진행합니다.\n */</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneByTag</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> tag<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Boolean]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Date]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token operator\">+</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Number]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object String]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Set]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Map]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object RegExp]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">cloneRegExp</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isPrototype <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> object<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> value <span class=\"token operator\">&amp;&amp;</span> value<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> proto <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> Ctor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> Ctor<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> proto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneObject</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">typeof</span> obj<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token function\">isPrototype</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">?</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">getPrototypeOf</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 객체 생성</span>\n    <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> initCloneArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">any</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> length <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> array<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">array</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n    length <span class=\"token operator\">&amp;&amp;</span>\n    <span class=\"token keyword\">typeof</span> array<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span> <span class=\"token operator\">&amp;&amp;</span>\n    Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">,</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result<span class=\"token punctuation\">.</span>index <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">;</span>\n    result<span class=\"token punctuation\">.</span>input <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> obj <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span> <span class=\"token operator\">?</span> <span class=\"token function-variable function\">obj</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode <span class=\"token operator\">=</span> <span class=\"token string\">'12345'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => undefined</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => '12345'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>regT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => lastIndex: 0</span>\ndotAll<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nflags<span class=\"token operator\">:</span> <span class=\"token string\">'gm'</span><span class=\"token punctuation\">;</span>\nglobal<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nhasIndices<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nignoreCase<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nmultiline<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nsource<span class=\"token operator\">:</span> <span class=\"token string\">'^[a-z0-9](\\\\.|\\\\+|\\\\-?[a-z0-9]){1,39}@test\\\\.com$'</span><span class=\"token punctuation\">;</span>\nsticky<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nunicode<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>중요한 것을 살펴보자면 <code class=\"language-text\">typeof</code> 가 아닌 <code class=\"language-text\">toString</code> 메소드를 사용했습니다.</p>\n<p>이 둘의 가장 큰 차이점은 <code class=\"language-text\">toString</code> 은 메소드이기 때문에 오버라이딩이 가능한 반면, <code class=\"language-text\">typeof</code> 는 연산\n자로 분류되기에 오버라이드가 불가능합니다. 즉, <code class=\"language-text\">typeof</code> 를 사용해서는 <strong>반환되는 결과를 조작하는 게\n불가능</strong>하기에 <code class=\"language-text\">toString</code> 을 타입 체크로 사용하여 추가적인 문자열 파싱을 진행했습니다.</p>\n<p>그래서 <strong>toStringTag</strong> 를 활용하여 <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">Boolean</code>, <code class=\"language-text\">Date</code>, <code class=\"language-text\">Number</code>, <code class=\"language-text\">String</code>, <code class=\"language-text\">RegExp</code> 태\n그가 있는 값만 복사를 진행합니다.</p>\n<p>만약 깊게 복사해야 할 객체가 지금 제작한 함수로 커버할 수 있는 범위라면 이대로 쓰는 게 가장 좋습니다\n.</p>\n<p>그리고 이 코드에는 <strong>몇 가지 문제</strong>가 있습니다.</p>\n<p>첫 번재는 바이너리 데이터 관련 객체(<code class=\"language-text\">TypedArray</code>, <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">DataView</code>…) 객체는 깊게 복사하지\n않습니다. 저는 굳이 <code class=\"language-text\">ArrayBuffer</code> 객체까지 깊게 복사할 필요가 없어 추가해주진 않았습니다만, 이\n부분에 대한 태그 케이스를 추가하여 <code class=\"language-text\">ArrayBuffer</code>를 복사하는 로직을 작성해주면 바이너리 관련 객체도\n깊게 복사 할 수 있겠습니다.</p>\n<p>두 번째는 순환 참조가 있는 객체를 복사해야 할 경우에는 무한하게 서로가 서로를 호출해서 호출 스택\n(call stack)이 터져버리는 에러를 마주하게 됩니다. 이 문제를 해결하기 위해선 무한 루프에 빠지지\n않도록 이전의 참조 맵을 유지하면서 전달 받은 객체를 통해 반복하여 복사하도록 해주면 됩니다. 객체가\n맵에 저장되어 있다면 복사본이 반복되지 않고 그대로 반환되도록 하는 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> hash <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WeakMap<span class=\"token operator\">&lt;</span>object<span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 순환 참조</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hash<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> hash<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// hash에 복사할 객체를 저장합니다.</span>\n  hash<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Map]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Set]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 열거 가능한 자체 속성을 재귀적으로 복제 및 할당합니다.</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> 순환참조가_있는_객체를_완전히_복사하는지_검사 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> object <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    foo<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> b<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> c<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> d<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    bar<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d <span class=\"token operator\">=</span> object<span class=\"token punctuation\">;</span>\n  object<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> copied <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> copied<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">!==</span> object <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">순환참조가_있는_객체를_완전히_복사하는지_검사</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => true</span></code></pre></div>\n<p>순환 참조가 있는 객체를 완전히 복사하는지 검사한 결과도 <code class=\"language-text\">true</code>로 잘 나옵니다.</p>\n<p>이쯤되면 궁금해집니다. 왜 굳이 이런 번거로움을 감수하고도 <strong>깊은 복사</strong>를 생성한다는 것이 왜 중요할\n까요? 우선 깊은 복사와 얕은 복사가 뭔지 이해할 필요가 있습니다.</p>\n<p>얕은 복사는 두 객체가 동일한 참조를 공유하기에 원본 또는 복사본이 변경되면 예상치 못한 객체가 변경되\n어 디버깅이 어려워집니다. 반면, 깊은 복사는 복사된 객체의 속성이 원본 객체와 동일한 참조를 공유하지\n않는 복사본을 뜻합니다.</p>\n<p>즉, <strong>원본이나 복사본을 변경할 때 다른 객체를 변경하지 않도록 보장</strong>받을 수 있습니다. 실수를\n방지하는 것이죠.</p>\n<h3 id=\"lodash의-clonedeep\" style=\"position:relative;\"><a href=\"#lodash%EC%9D%98-clonedeep\" aria-label=\"lodash의 clonedeep permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lodash의 cloneDeep()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> _ <span class=\"token keyword\">from</span> <span class=\"token string\">'lodash'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">cloneDeep</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p>모든 값, 속성, 그리고 중첩된 객체까지 모두 달라 <code class=\"language-text\">false</code> 로 나타납니다. 그러나 외부 종속성이 추가되는\n것은 피할 수 없습니다.</p>\n<h2 id=\"객체-복사-메소드별-벤치마크\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC-%EB%A9%94%EC%86%8C%EB%93%9C%EB%B3%84-%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"객체 복사 메소드별 벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사 메소드별 벤치마크</h2>\n<p><a href=\"https://jsben.ch/zEKYJ\">각 메소드별 벤치마크 결과 보러가기</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 924px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2ElEQVR42m3O3W/SUBjH8fMPGF4KPedw+n5KSykt7xQItNABBSnZsmS6GUcgZk4ng6gx8cIb44UX3njpnf+qnQiyZcnn4vd8rx5QKeTKBpUxQ0lKwQmBje/x6TuH5b90TMhAIHROhfBWmt7I4Tt5smC8S8abR5LeHPtz2L8bzAPuJdNfYrMJsHfBnnxmww/s7GNivEmM11uxYM3NNmi6iQfrffwnWMWOv8DKAIjemXj8XghX4uw21V8m3DnTW2yRwRL5y+TuPISNBs8LADkhHF5Bf8EOruBkhcNNKrhJDt9EuPE1Cq4Tf/cDsORzkgr44ZK7+EbOv4qT16pV1SstXreRYkAln7VrillB1MyohftMbNQJzQGuekS856R7xjenUr4sF2oRajfUoiPkSpxmZ7LWoziJAjx+y85/wpc/xN45rfVoc6Q4Q6UxkGq+0R4ptT5rtlChfV8LWR1CDaDUj/ThC6lzArUSljUk61tY1omaj2So8Zg8JymAGa9ii1/xZ99Zy4VWB9nuFrS6WjuQ6oNo7ONOFxX7RDUBLbf1zlPd8a2KYxSrRM7uiWqOp/phOaBxogSYyfrJq9/M7BMpurjsw6K3xdqu1p7IzigdfbGLOy5b8ola+APR6YkiFXODxwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"객체 복사 각 메소드별 벤치마크 결과\"\n        title=\"\"\n        src=\"/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png\"\n        srcset=\"/static/1672710200016.31870475063/63868/copy-object-benchmark.png 250w,\n/static/1672710200016.31870475063/0b533/copy-object-benchmark.png 500w,\n/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png 924w\"\n        sizes=\"(max-width: 924px) 100vw, 924px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<ul>\n<li>순환 객체에 대해 지원하지 않아도 되고 <code class=\"language-text\">Date</code>, <code class=\"language-text\">Map</code> 등의 유형을 보존할 필요가 없다면\n<code class=\"language-text\">JSON.parse(JSON.stringify())</code>를 사용하거나 위에서 직접 구현한 <code class=\"language-text\">Recursive Deep Clone Object</code> 처럼\n구현해 사용하면 되겠습니다.</li>\n<li>그러나 순환 객체에 대해 지원해야 하고 여러 유형을 보존해야 한다면 lodash의 <code class=\"language-text\">cloneDeep()</code> 이나 위에\n서 구현한 <code class=\"language-text\">deepCopyObject</code> 함수를 사용하면 되겠습니다. (물론 <code class=\"language-text\">cloneDeep</code> 과 달리 구현한\n<code class=\"language-text\">deepCopyObject</code> 는 모든 유형을 지원하진 않습니다.)</li>\n</ul>\n<p>객체를 복사하는 데에는 많은 방법이 있습니다. 정답은 없으므로 상황에 따라 가장 적합한 방법을 선택하여\n사용하면 되겠습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<p><a href=\"https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json\">https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json</a></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag</a></p>\n<p><a href=\"https://medium.com/%EC%98%A4%EB%8A%98%EC%9D%98-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%97%90%EC%84%9C-object-object-%EA%B0%80-%EB%8C%80%EC%B2%B4-%EB%AD%98%EA%B9%8C-fe55b754e709\">https://medium.com/오늘의-프로그래밍/자바스크립트에서-object-object-가-대체-뭘까-fe55b754e709</a></p>\n<p><a href=\"https://github.com/lodash/lodash\">https://github.com/lodash/lodash</a></p>\n<p><a href=\"https://erdem.pl/2019/08/can-json-parse-be-performance-improvement\">https://erdem.pl/2019/08/can-json-parse-be-performance-improvement</a></p>\n<p><a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">https://v8.dev/blog/cost-of-javascript-2019#json</a></p>\n<p><a href=\"https://jsben.ch/1m5Gm\">https://jsben.ch/1m5Gm</a></p>",
      "objectassign#Object.assign()": "<h2 id=\"객체-복사하기\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC%ED%95%98%EA%B8%B0\" aria-label=\"객체 복사하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사하기</h2>\n<p>객체를 복사하는 데 주로 쓰이는 방법은 아래와 같습니다.</p>\n<!-- prettier-ignore -->\n<table>\n<thead>\n<tr>\n<th>방법</th>\n<th>장점</th>\n<th>단점</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>JSON.stringify() &#x26; JSON.parse()</td>\n<td>간단하고 빠르게 깊은 복사를 할 수 있습니다.</td>\n<td>Infinity, Functions, Date, RegExp 등의 유형은 유실됩니다.</td>\n</tr>\n<tr>\n<td>Spread syntax</td>\n<td>가장 간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Object.assign()</td>\n<td>간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Copy</td>\n<td>Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>순환 참조가 있는 객체를 받을 경우 무한 루프에 빠지게 됩니다. 직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Clone with WeakMap Caching</td>\n<td>순환 참조가 있는 객체도 지원하며 Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Lodash - cloneDeep()</td>\n<td>모든 데이터 형식에 대해 깊게 복사합니다.</td>\n<td>외부 종속성이 추가됩니다.</td>\n</tr>\n</tbody>\n</table>\n<p>각 함수를 테스트하기에 앞서 <code class=\"language-text\">person</code> 이라는 객체를 생성해두겠습니다. 앞으로 이 객체를 이용하여 모든\n함수 테스트를 진행할 것입니다.</p>\n<h3 id=\"set-person-object\" style=\"position:relative;\"><a href=\"#set-person-object\" aria-label=\"set person object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Set Person Object</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> person <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'ben'</span><span class=\"token punctuation\">,</span>\n  age<span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n  address<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    city<span class=\"token operator\">:</span> <span class=\"token string\">'seoul'</span><span class=\"token punctuation\">,</span>\n    country<span class=\"token operator\">:</span> <span class=\"token string\">'korea'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">getAge</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  birth<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  life<span class=\"token operator\">:</span> <span class=\"token number\">Infinity</span><span class=\"token punctuation\">,</span>\n  regT<span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[a-z0-9](\\.|\\+|\\-?[a-z0-9]){1,39}@test\\.com$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">gm</span></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"jsonstringify--jsonparse\" style=\"position:relative;\"><a href=\"#jsonstringify--jsonparse\" aria-label=\"jsonstringify  jsonparse permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSON.stringify() &#x26; JSON.parse()</h3>\n<p><code class=\"language-text\">JSON.stringify</code> 함수가 객체를 JSON 문자열로 변환합니다. (원본 객체에 대한 참조가 없어집니다) 그리고\n<code class=\"language-text\">JSON.parse</code> 를 이용해 객체를 반환합니다.</p>\n<p>이렇게 이 두 가지 함수를 이용하여 간단하게 객체의 깊은 복사본을 만들 수 있습니다. 이제 복사된 객체가\n변경되어도 원본 객체는 그대로 유지됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> deepCopyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span></code></pre></div>\n<p>이 방법을 사용할 때 꼭 알아둬야 할 사항들이 있습니다. <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code>\n<code class=\"language-text\">functions</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code> 객체, <code class=\"language-text\">Infinity</code> 까지 복사하진 않습니다. 왜 그럴까요?</p>\n<ul>\n<li><code class=\"language-text\">Date</code> 객체는 JSON으로 변환하는 과정에서 <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a>형식에\n따라 문자열로\n<a href=\"https://stackoverflow.com/questions/10286204/what-is-the-right-json-date-format\">저장</a>됩니다. 따\n라서 원본 객체의 <code class=\"language-text\">Date</code> 객체는 <strong>복사 후 손실</strong>됩니다. <code class=\"language-text\">reviver</code> 기능을 사용하면 <code class=\"language-text\">Date</code> 객체를\n<a href=\"https://stackoverflow.com/a/9194413\">가져올 수 있긴 합니다</a>.</li>\n<li>함수는 데이터가 아니라 더 복잡한 의미를 가진 동작이며 JSON에서 지원되는 엔티티가 아니기 때문에\n<strong>복사 후 함수는 유지되지 않습니다</strong>.</li>\n<li>JSON에서 객체를 직렬화하고 역직렬화하는 방법의 특성으로 인해 느릴 것 같지만 대부분의 사람들이 이\n방식을 채택하여 사용하여\n<a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">V8이 적극적으로 최적화</a>했기에 <strong>빠르게</strong> 복사본\n을 얻을 수 있습니다.</li>\n</ul>\n<p>즉, 복사된 객체에서 아래와 같이 데이터를 사용하려 한다면 예와 에러가 발생합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">deepCopyPerson<span class=\"token punctuation\">.</span><span class=\"token function\">getAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.getAge is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>birth<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.birth.getDate is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>life<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => null</span></code></pre></div>\n<p>따라서 이 방법은 객체 내에 위와 같은 데이터가 없을 경우에 사용하면 됩니다.</p>\n<h3 id=\"spread-syntax\" style=\"position:relative;\"><a href=\"#spread-syntax\" aria-label=\"spread syntax permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spread syntax</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>obj <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<h3 id=\"objectassign\" style=\"position:relative;\"><a href=\"#objectassign\" aria-label=\"objectassign permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.assign()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p><code class=\"language-text\">Spead</code> 연산자나 <code class=\"language-text\">Object.assign</code> 은 최상위 속성을 복사합니다. 하지만 객체로서의 속성은 얕은 복사 후\n에 참조로 복사되므로 원본 객체와 복사된 객체 간에 공유됩니다.\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#warning_for_deep_clone\">MDN: Object.assign()</a>을\n이용한 예시를 코드로 들어보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 중첩된 객체를 포함하는 복잡한 person 객체 전달</span>\n<span class=\"token comment\">// 중첩된 객체 내의 속성을 변경할 때마다 원본 객체인 person의 동일한 속성도 변합니다</span>\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony', 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan', 'busan'</span></code></pre></div>\n<p>원래 객체의 <code class=\"language-text\">name</code> 속성은 그대로 유지 되었지만, <code class=\"language-text\">city</code> 속성은 재할당 작업으로 인해 변경되었습니다.\n(Spread syntax 도 마찬가지) 그래도 JSON 방식에 비해 다른 점은 <code class=\"language-text\">functions</code>, <code class=\"language-text\">rRegExp</code>, <code class=\"language-text\">Date</code> 객체,\n<code class=\"language-text\">Infinity</code> 까지 복사된다는 점입니다.</p>\n<p>따라서 중첩된 객체 속성이 필요하지 않은 경우에는 좋은 복사 방법입니다.</p>\n<h3 id=\"recursive-deep-clone-object\" style=\"position:relative;\"><a href=\"#recursive-deep-clone-object\" aria-label=\"recursive deep clone object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recursive Deep Clone Object</h3>\n<p>앞에서 다뤘던 문제(JS 내장 함수 및 함수가 손실되는 것)를 해결하며 <strong>깊은 복사</strong>를 실현하는 함수를\n만들어 보겠습니다. 복사를 진행하다가 객체를 만나면 함수를 <strong>재귀적으로</strong> 실행해 깊은 복사를 실현하면\n됩니다.</p>\n<p>regExp 와 Date 객체를 복사하는 건 Lodash의 코드를 참고하여 작성했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> value <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> cloneRegExp <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>regExp<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> RegExp <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> reFlags <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w*$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">regExp</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">,</span> reFlags<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  result<span class=\"token punctuation\">.</span>lastIndex <span class=\"token operator\">=</span> regExp<span class=\"token punctuation\">.</span>lastIndex<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> getTag <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span> <span class=\"token operator\">?</span> <span class=\"token string\">'[object Undefined]'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'[object Null]'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * `Set`, `Map`, `Boolean`, `Date`, `Number`, `String`, `RegExp` 태그가 있는 값만 복사를 진행합니다.\n */</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneByTag</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> tag<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Boolean]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Date]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token operator\">+</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Number]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object String]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Set]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Map]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object RegExp]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">cloneRegExp</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isPrototype <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> object<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> value <span class=\"token operator\">&amp;&amp;</span> value<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> proto <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> Ctor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> Ctor<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> proto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneObject</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">typeof</span> obj<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token function\">isPrototype</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">?</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">getPrototypeOf</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 객체 생성</span>\n    <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> initCloneArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">any</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> length <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> array<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">array</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n    length <span class=\"token operator\">&amp;&amp;</span>\n    <span class=\"token keyword\">typeof</span> array<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span> <span class=\"token operator\">&amp;&amp;</span>\n    Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">,</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result<span class=\"token punctuation\">.</span>index <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">;</span>\n    result<span class=\"token punctuation\">.</span>input <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> obj <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span> <span class=\"token operator\">?</span> <span class=\"token function-variable function\">obj</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode <span class=\"token operator\">=</span> <span class=\"token string\">'12345'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => undefined</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => '12345'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>regT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => lastIndex: 0</span>\ndotAll<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nflags<span class=\"token operator\">:</span> <span class=\"token string\">'gm'</span><span class=\"token punctuation\">;</span>\nglobal<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nhasIndices<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nignoreCase<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nmultiline<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nsource<span class=\"token operator\">:</span> <span class=\"token string\">'^[a-z0-9](\\\\.|\\\\+|\\\\-?[a-z0-9]){1,39}@test\\\\.com$'</span><span class=\"token punctuation\">;</span>\nsticky<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nunicode<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>중요한 것을 살펴보자면 <code class=\"language-text\">typeof</code> 가 아닌 <code class=\"language-text\">toString</code> 메소드를 사용했습니다.</p>\n<p>이 둘의 가장 큰 차이점은 <code class=\"language-text\">toString</code> 은 메소드이기 때문에 오버라이딩이 가능한 반면, <code class=\"language-text\">typeof</code> 는 연산\n자로 분류되기에 오버라이드가 불가능합니다. 즉, <code class=\"language-text\">typeof</code> 를 사용해서는 <strong>반환되는 결과를 조작하는 게\n불가능</strong>하기에 <code class=\"language-text\">toString</code> 을 타입 체크로 사용하여 추가적인 문자열 파싱을 진행했습니다.</p>\n<p>그래서 <strong>toStringTag</strong> 를 활용하여 <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">Boolean</code>, <code class=\"language-text\">Date</code>, <code class=\"language-text\">Number</code>, <code class=\"language-text\">String</code>, <code class=\"language-text\">RegExp</code> 태\n그가 있는 값만 복사를 진행합니다.</p>\n<p>만약 깊게 복사해야 할 객체가 지금 제작한 함수로 커버할 수 있는 범위라면 이대로 쓰는 게 가장 좋습니다\n.</p>\n<p>그리고 이 코드에는 <strong>몇 가지 문제</strong>가 있습니다.</p>\n<p>첫 번재는 바이너리 데이터 관련 객체(<code class=\"language-text\">TypedArray</code>, <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">DataView</code>…) 객체는 깊게 복사하지\n않습니다. 저는 굳이 <code class=\"language-text\">ArrayBuffer</code> 객체까지 깊게 복사할 필요가 없어 추가해주진 않았습니다만, 이\n부분에 대한 태그 케이스를 추가하여 <code class=\"language-text\">ArrayBuffer</code>를 복사하는 로직을 작성해주면 바이너리 관련 객체도\n깊게 복사 할 수 있겠습니다.</p>\n<p>두 번째는 순환 참조가 있는 객체를 복사해야 할 경우에는 무한하게 서로가 서로를 호출해서 호출 스택\n(call stack)이 터져버리는 에러를 마주하게 됩니다. 이 문제를 해결하기 위해선 무한 루프에 빠지지\n않도록 이전의 참조 맵을 유지하면서 전달 받은 객체를 통해 반복하여 복사하도록 해주면 됩니다. 객체가\n맵에 저장되어 있다면 복사본이 반복되지 않고 그대로 반환되도록 하는 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> hash <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WeakMap<span class=\"token operator\">&lt;</span>object<span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 순환 참조</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hash<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> hash<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// hash에 복사할 객체를 저장합니다.</span>\n  hash<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Map]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Set]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 열거 가능한 자체 속성을 재귀적으로 복제 및 할당합니다.</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> 순환참조가_있는_객체를_완전히_복사하는지_검사 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> object <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    foo<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> b<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> c<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> d<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    bar<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d <span class=\"token operator\">=</span> object<span class=\"token punctuation\">;</span>\n  object<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> copied <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> copied<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">!==</span> object <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">순환참조가_있는_객체를_완전히_복사하는지_검사</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => true</span></code></pre></div>\n<p>순환 참조가 있는 객체를 완전히 복사하는지 검사한 결과도 <code class=\"language-text\">true</code>로 잘 나옵니다.</p>\n<p>이쯤되면 궁금해집니다. 왜 굳이 이런 번거로움을 감수하고도 <strong>깊은 복사</strong>를 생성한다는 것이 왜 중요할\n까요? 우선 깊은 복사와 얕은 복사가 뭔지 이해할 필요가 있습니다.</p>\n<p>얕은 복사는 두 객체가 동일한 참조를 공유하기에 원본 또는 복사본이 변경되면 예상치 못한 객체가 변경되\n어 디버깅이 어려워집니다. 반면, 깊은 복사는 복사된 객체의 속성이 원본 객체와 동일한 참조를 공유하지\n않는 복사본을 뜻합니다.</p>\n<p>즉, <strong>원본이나 복사본을 변경할 때 다른 객체를 변경하지 않도록 보장</strong>받을 수 있습니다. 실수를\n방지하는 것이죠.</p>\n<h3 id=\"lodash의-clonedeep\" style=\"position:relative;\"><a href=\"#lodash%EC%9D%98-clonedeep\" aria-label=\"lodash의 clonedeep permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lodash의 cloneDeep()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> _ <span class=\"token keyword\">from</span> <span class=\"token string\">'lodash'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">cloneDeep</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p>모든 값, 속성, 그리고 중첩된 객체까지 모두 달라 <code class=\"language-text\">false</code> 로 나타납니다. 그러나 외부 종속성이 추가되는\n것은 피할 수 없습니다.</p>\n<h2 id=\"객체-복사-메소드별-벤치마크\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC-%EB%A9%94%EC%86%8C%EB%93%9C%EB%B3%84-%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"객체 복사 메소드별 벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사 메소드별 벤치마크</h2>\n<p><a href=\"https://jsben.ch/zEKYJ\">각 메소드별 벤치마크 결과 보러가기</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 924px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2ElEQVR42m3O3W/SUBjH8fMPGF4KPedw+n5KSykt7xQItNABBSnZsmS6GUcgZk4ng6gx8cIb44UX3njpnf+qnQiyZcnn4vd8rx5QKeTKBpUxQ0lKwQmBje/x6TuH5b90TMhAIHROhfBWmt7I4Tt5smC8S8abR5LeHPtz2L8bzAPuJdNfYrMJsHfBnnxmww/s7GNivEmM11uxYM3NNmi6iQfrffwnWMWOv8DKAIjemXj8XghX4uw21V8m3DnTW2yRwRL5y+TuPISNBs8LADkhHF5Bf8EOruBkhcNNKrhJDt9EuPE1Cq4Tf/cDsORzkgr44ZK7+EbOv4qT16pV1SstXreRYkAln7VrillB1MyohftMbNQJzQGuekS856R7xjenUr4sF2oRajfUoiPkSpxmZ7LWoziJAjx+y85/wpc/xN45rfVoc6Q4Q6UxkGq+0R4ptT5rtlChfV8LWR1CDaDUj/ThC6lzArUSljUk61tY1omaj2So8Zg8JymAGa9ii1/xZ99Zy4VWB9nuFrS6WjuQ6oNo7ONOFxX7RDUBLbf1zlPd8a2KYxSrRM7uiWqOp/phOaBxogSYyfrJq9/M7BMpurjsw6K3xdqu1p7IzigdfbGLOy5b8ola+APR6YkiFXODxwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"객체 복사 각 메소드별 벤치마크 결과\"\n        title=\"\"\n        src=\"/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png\"\n        srcset=\"/static/1672710200016.31870475063/63868/copy-object-benchmark.png 250w,\n/static/1672710200016.31870475063/0b533/copy-object-benchmark.png 500w,\n/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png 924w\"\n        sizes=\"(max-width: 924px) 100vw, 924px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<ul>\n<li>순환 객체에 대해 지원하지 않아도 되고 <code class=\"language-text\">Date</code>, <code class=\"language-text\">Map</code> 등의 유형을 보존할 필요가 없다면\n<code class=\"language-text\">JSON.parse(JSON.stringify())</code>를 사용하거나 위에서 직접 구현한 <code class=\"language-text\">Recursive Deep Clone Object</code> 처럼\n구현해 사용하면 되겠습니다.</li>\n<li>그러나 순환 객체에 대해 지원해야 하고 여러 유형을 보존해야 한다면 lodash의 <code class=\"language-text\">cloneDeep()</code> 이나 위에\n서 구현한 <code class=\"language-text\">deepCopyObject</code> 함수를 사용하면 되겠습니다. (물론 <code class=\"language-text\">cloneDeep</code> 과 달리 구현한\n<code class=\"language-text\">deepCopyObject</code> 는 모든 유형을 지원하진 않습니다.)</li>\n</ul>\n<p>객체를 복사하는 데에는 많은 방법이 있습니다. 정답은 없으므로 상황에 따라 가장 적합한 방법을 선택하여\n사용하면 되겠습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<p><a href=\"https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json\">https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json</a></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag</a></p>\n<p><a href=\"https://medium.com/%EC%98%A4%EB%8A%98%EC%9D%98-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%97%90%EC%84%9C-object-object-%EA%B0%80-%EB%8C%80%EC%B2%B4-%EB%AD%98%EA%B9%8C-fe55b754e709\">https://medium.com/오늘의-프로그래밍/자바스크립트에서-object-object-가-대체-뭘까-fe55b754e709</a></p>\n<p><a href=\"https://github.com/lodash/lodash\">https://github.com/lodash/lodash</a></p>\n<p><a href=\"https://erdem.pl/2019/08/can-json-parse-be-performance-improvement\">https://erdem.pl/2019/08/can-json-parse-be-performance-improvement</a></p>\n<p><a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">https://v8.dev/blog/cost-of-javascript-2019#json</a></p>\n<p><a href=\"https://jsben.ch/1m5Gm\">https://jsben.ch/1m5Gm</a></p>",
      "recursive-deep-clone-object#Recursive Deep Clone Object": "<h2 id=\"객체-복사하기\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC%ED%95%98%EA%B8%B0\" aria-label=\"객체 복사하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사하기</h2>\n<p>객체를 복사하는 데 주로 쓰이는 방법은 아래와 같습니다.</p>\n<!-- prettier-ignore -->\n<table>\n<thead>\n<tr>\n<th>방법</th>\n<th>장점</th>\n<th>단점</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>JSON.stringify() &#x26; JSON.parse()</td>\n<td>간단하고 빠르게 깊은 복사를 할 수 있습니다.</td>\n<td>Infinity, Functions, Date, RegExp 등의 유형은 유실됩니다.</td>\n</tr>\n<tr>\n<td>Spread syntax</td>\n<td>가장 간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Object.assign()</td>\n<td>간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Copy</td>\n<td>Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>순환 참조가 있는 객체를 받을 경우 무한 루프에 빠지게 됩니다. 직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Clone with WeakMap Caching</td>\n<td>순환 참조가 있는 객체도 지원하며 Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Lodash - cloneDeep()</td>\n<td>모든 데이터 형식에 대해 깊게 복사합니다.</td>\n<td>외부 종속성이 추가됩니다.</td>\n</tr>\n</tbody>\n</table>\n<p>각 함수를 테스트하기에 앞서 <code class=\"language-text\">person</code> 이라는 객체를 생성해두겠습니다. 앞으로 이 객체를 이용하여 모든\n함수 테스트를 진행할 것입니다.</p>\n<h3 id=\"set-person-object\" style=\"position:relative;\"><a href=\"#set-person-object\" aria-label=\"set person object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Set Person Object</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> person <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'ben'</span><span class=\"token punctuation\">,</span>\n  age<span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n  address<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    city<span class=\"token operator\">:</span> <span class=\"token string\">'seoul'</span><span class=\"token punctuation\">,</span>\n    country<span class=\"token operator\">:</span> <span class=\"token string\">'korea'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">getAge</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  birth<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  life<span class=\"token operator\">:</span> <span class=\"token number\">Infinity</span><span class=\"token punctuation\">,</span>\n  regT<span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[a-z0-9](\\.|\\+|\\-?[a-z0-9]){1,39}@test\\.com$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">gm</span></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"jsonstringify--jsonparse\" style=\"position:relative;\"><a href=\"#jsonstringify--jsonparse\" aria-label=\"jsonstringify  jsonparse permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSON.stringify() &#x26; JSON.parse()</h3>\n<p><code class=\"language-text\">JSON.stringify</code> 함수가 객체를 JSON 문자열로 변환합니다. (원본 객체에 대한 참조가 없어집니다) 그리고\n<code class=\"language-text\">JSON.parse</code> 를 이용해 객체를 반환합니다.</p>\n<p>이렇게 이 두 가지 함수를 이용하여 간단하게 객체의 깊은 복사본을 만들 수 있습니다. 이제 복사된 객체가\n변경되어도 원본 객체는 그대로 유지됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> deepCopyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span></code></pre></div>\n<p>이 방법을 사용할 때 꼭 알아둬야 할 사항들이 있습니다. <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code>\n<code class=\"language-text\">functions</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code> 객체, <code class=\"language-text\">Infinity</code> 까지 복사하진 않습니다. 왜 그럴까요?</p>\n<ul>\n<li><code class=\"language-text\">Date</code> 객체는 JSON으로 변환하는 과정에서 <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a>형식에\n따라 문자열로\n<a href=\"https://stackoverflow.com/questions/10286204/what-is-the-right-json-date-format\">저장</a>됩니다. 따\n라서 원본 객체의 <code class=\"language-text\">Date</code> 객체는 <strong>복사 후 손실</strong>됩니다. <code class=\"language-text\">reviver</code> 기능을 사용하면 <code class=\"language-text\">Date</code> 객체를\n<a href=\"https://stackoverflow.com/a/9194413\">가져올 수 있긴 합니다</a>.</li>\n<li>함수는 데이터가 아니라 더 복잡한 의미를 가진 동작이며 JSON에서 지원되는 엔티티가 아니기 때문에\n<strong>복사 후 함수는 유지되지 않습니다</strong>.</li>\n<li>JSON에서 객체를 직렬화하고 역직렬화하는 방법의 특성으로 인해 느릴 것 같지만 대부분의 사람들이 이\n방식을 채택하여 사용하여\n<a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">V8이 적극적으로 최적화</a>했기에 <strong>빠르게</strong> 복사본\n을 얻을 수 있습니다.</li>\n</ul>\n<p>즉, 복사된 객체에서 아래와 같이 데이터를 사용하려 한다면 예와 에러가 발생합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">deepCopyPerson<span class=\"token punctuation\">.</span><span class=\"token function\">getAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.getAge is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>birth<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.birth.getDate is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>life<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => null</span></code></pre></div>\n<p>따라서 이 방법은 객체 내에 위와 같은 데이터가 없을 경우에 사용하면 됩니다.</p>\n<h3 id=\"spread-syntax\" style=\"position:relative;\"><a href=\"#spread-syntax\" aria-label=\"spread syntax permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spread syntax</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>obj <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<h3 id=\"objectassign\" style=\"position:relative;\"><a href=\"#objectassign\" aria-label=\"objectassign permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.assign()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p><code class=\"language-text\">Spead</code> 연산자나 <code class=\"language-text\">Object.assign</code> 은 최상위 속성을 복사합니다. 하지만 객체로서의 속성은 얕은 복사 후\n에 참조로 복사되므로 원본 객체와 복사된 객체 간에 공유됩니다.\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#warning_for_deep_clone\">MDN: Object.assign()</a>을\n이용한 예시를 코드로 들어보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 중첩된 객체를 포함하는 복잡한 person 객체 전달</span>\n<span class=\"token comment\">// 중첩된 객체 내의 속성을 변경할 때마다 원본 객체인 person의 동일한 속성도 변합니다</span>\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony', 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan', 'busan'</span></code></pre></div>\n<p>원래 객체의 <code class=\"language-text\">name</code> 속성은 그대로 유지 되었지만, <code class=\"language-text\">city</code> 속성은 재할당 작업으로 인해 변경되었습니다.\n(Spread syntax 도 마찬가지) 그래도 JSON 방식에 비해 다른 점은 <code class=\"language-text\">functions</code>, <code class=\"language-text\">rRegExp</code>, <code class=\"language-text\">Date</code> 객체,\n<code class=\"language-text\">Infinity</code> 까지 복사된다는 점입니다.</p>\n<p>따라서 중첩된 객체 속성이 필요하지 않은 경우에는 좋은 복사 방법입니다.</p>\n<h3 id=\"recursive-deep-clone-object\" style=\"position:relative;\"><a href=\"#recursive-deep-clone-object\" aria-label=\"recursive deep clone object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recursive Deep Clone Object</h3>\n<p>앞에서 다뤘던 문제(JS 내장 함수 및 함수가 손실되는 것)를 해결하며 <strong>깊은 복사</strong>를 실현하는 함수를\n만들어 보겠습니다. 복사를 진행하다가 객체를 만나면 함수를 <strong>재귀적으로</strong> 실행해 깊은 복사를 실현하면\n됩니다.</p>\n<p>regExp 와 Date 객체를 복사하는 건 Lodash의 코드를 참고하여 작성했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> value <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> cloneRegExp <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>regExp<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> RegExp <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> reFlags <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w*$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">regExp</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">,</span> reFlags<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  result<span class=\"token punctuation\">.</span>lastIndex <span class=\"token operator\">=</span> regExp<span class=\"token punctuation\">.</span>lastIndex<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> getTag <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span> <span class=\"token operator\">?</span> <span class=\"token string\">'[object Undefined]'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'[object Null]'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * `Set`, `Map`, `Boolean`, `Date`, `Number`, `String`, `RegExp` 태그가 있는 값만 복사를 진행합니다.\n */</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneByTag</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> tag<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Boolean]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Date]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token operator\">+</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Number]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object String]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Set]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Map]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object RegExp]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">cloneRegExp</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isPrototype <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> object<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> value <span class=\"token operator\">&amp;&amp;</span> value<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> proto <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> Ctor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> Ctor<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> proto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneObject</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">typeof</span> obj<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token function\">isPrototype</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">?</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">getPrototypeOf</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 객체 생성</span>\n    <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> initCloneArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">any</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> length <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> array<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">array</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n    length <span class=\"token operator\">&amp;&amp;</span>\n    <span class=\"token keyword\">typeof</span> array<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span> <span class=\"token operator\">&amp;&amp;</span>\n    Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">,</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result<span class=\"token punctuation\">.</span>index <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">;</span>\n    result<span class=\"token punctuation\">.</span>input <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> obj <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span> <span class=\"token operator\">?</span> <span class=\"token function-variable function\">obj</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode <span class=\"token operator\">=</span> <span class=\"token string\">'12345'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => undefined</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => '12345'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>regT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => lastIndex: 0</span>\ndotAll<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nflags<span class=\"token operator\">:</span> <span class=\"token string\">'gm'</span><span class=\"token punctuation\">;</span>\nglobal<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nhasIndices<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nignoreCase<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nmultiline<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nsource<span class=\"token operator\">:</span> <span class=\"token string\">'^[a-z0-9](\\\\.|\\\\+|\\\\-?[a-z0-9]){1,39}@test\\\\.com$'</span><span class=\"token punctuation\">;</span>\nsticky<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nunicode<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>중요한 것을 살펴보자면 <code class=\"language-text\">typeof</code> 가 아닌 <code class=\"language-text\">toString</code> 메소드를 사용했습니다.</p>\n<p>이 둘의 가장 큰 차이점은 <code class=\"language-text\">toString</code> 은 메소드이기 때문에 오버라이딩이 가능한 반면, <code class=\"language-text\">typeof</code> 는 연산\n자로 분류되기에 오버라이드가 불가능합니다. 즉, <code class=\"language-text\">typeof</code> 를 사용해서는 <strong>반환되는 결과를 조작하는 게\n불가능</strong>하기에 <code class=\"language-text\">toString</code> 을 타입 체크로 사용하여 추가적인 문자열 파싱을 진행했습니다.</p>\n<p>그래서 <strong>toStringTag</strong> 를 활용하여 <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">Boolean</code>, <code class=\"language-text\">Date</code>, <code class=\"language-text\">Number</code>, <code class=\"language-text\">String</code>, <code class=\"language-text\">RegExp</code> 태\n그가 있는 값만 복사를 진행합니다.</p>\n<p>만약 깊게 복사해야 할 객체가 지금 제작한 함수로 커버할 수 있는 범위라면 이대로 쓰는 게 가장 좋습니다\n.</p>\n<p>그리고 이 코드에는 <strong>몇 가지 문제</strong>가 있습니다.</p>\n<p>첫 번재는 바이너리 데이터 관련 객체(<code class=\"language-text\">TypedArray</code>, <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">DataView</code>…) 객체는 깊게 복사하지\n않습니다. 저는 굳이 <code class=\"language-text\">ArrayBuffer</code> 객체까지 깊게 복사할 필요가 없어 추가해주진 않았습니다만, 이\n부분에 대한 태그 케이스를 추가하여 <code class=\"language-text\">ArrayBuffer</code>를 복사하는 로직을 작성해주면 바이너리 관련 객체도\n깊게 복사 할 수 있겠습니다.</p>\n<p>두 번째는 순환 참조가 있는 객체를 복사해야 할 경우에는 무한하게 서로가 서로를 호출해서 호출 스택\n(call stack)이 터져버리는 에러를 마주하게 됩니다. 이 문제를 해결하기 위해선 무한 루프에 빠지지\n않도록 이전의 참조 맵을 유지하면서 전달 받은 객체를 통해 반복하여 복사하도록 해주면 됩니다. 객체가\n맵에 저장되어 있다면 복사본이 반복되지 않고 그대로 반환되도록 하는 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> hash <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WeakMap<span class=\"token operator\">&lt;</span>object<span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 순환 참조</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hash<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> hash<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// hash에 복사할 객체를 저장합니다.</span>\n  hash<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Map]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Set]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 열거 가능한 자체 속성을 재귀적으로 복제 및 할당합니다.</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> 순환참조가_있는_객체를_완전히_복사하는지_검사 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> object <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    foo<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> b<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> c<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> d<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    bar<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d <span class=\"token operator\">=</span> object<span class=\"token punctuation\">;</span>\n  object<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> copied <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> copied<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">!==</span> object <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">순환참조가_있는_객체를_완전히_복사하는지_검사</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => true</span></code></pre></div>\n<p>순환 참조가 있는 객체를 완전히 복사하는지 검사한 결과도 <code class=\"language-text\">true</code>로 잘 나옵니다.</p>\n<p>이쯤되면 궁금해집니다. 왜 굳이 이런 번거로움을 감수하고도 <strong>깊은 복사</strong>를 생성한다는 것이 왜 중요할\n까요? 우선 깊은 복사와 얕은 복사가 뭔지 이해할 필요가 있습니다.</p>\n<p>얕은 복사는 두 객체가 동일한 참조를 공유하기에 원본 또는 복사본이 변경되면 예상치 못한 객체가 변경되\n어 디버깅이 어려워집니다. 반면, 깊은 복사는 복사된 객체의 속성이 원본 객체와 동일한 참조를 공유하지\n않는 복사본을 뜻합니다.</p>\n<p>즉, <strong>원본이나 복사본을 변경할 때 다른 객체를 변경하지 않도록 보장</strong>받을 수 있습니다. 실수를\n방지하는 것이죠.</p>\n<h3 id=\"lodash의-clonedeep\" style=\"position:relative;\"><a href=\"#lodash%EC%9D%98-clonedeep\" aria-label=\"lodash의 clonedeep permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lodash의 cloneDeep()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> _ <span class=\"token keyword\">from</span> <span class=\"token string\">'lodash'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">cloneDeep</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p>모든 값, 속성, 그리고 중첩된 객체까지 모두 달라 <code class=\"language-text\">false</code> 로 나타납니다. 그러나 외부 종속성이 추가되는\n것은 피할 수 없습니다.</p>\n<h2 id=\"객체-복사-메소드별-벤치마크\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC-%EB%A9%94%EC%86%8C%EB%93%9C%EB%B3%84-%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"객체 복사 메소드별 벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사 메소드별 벤치마크</h2>\n<p><a href=\"https://jsben.ch/zEKYJ\">각 메소드별 벤치마크 결과 보러가기</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 924px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2ElEQVR42m3O3W/SUBjH8fMPGF4KPedw+n5KSykt7xQItNABBSnZsmS6GUcgZk4ng6gx8cIb44UX3njpnf+qnQiyZcnn4vd8rx5QKeTKBpUxQ0lKwQmBje/x6TuH5b90TMhAIHROhfBWmt7I4Tt5smC8S8abR5LeHPtz2L8bzAPuJdNfYrMJsHfBnnxmww/s7GNivEmM11uxYM3NNmi6iQfrffwnWMWOv8DKAIjemXj8XghX4uw21V8m3DnTW2yRwRL5y+TuPISNBs8LADkhHF5Bf8EOruBkhcNNKrhJDt9EuPE1Cq4Tf/cDsORzkgr44ZK7+EbOv4qT16pV1SstXreRYkAln7VrillB1MyohftMbNQJzQGuekS856R7xjenUr4sF2oRajfUoiPkSpxmZ7LWoziJAjx+y85/wpc/xN45rfVoc6Q4Q6UxkGq+0R4ptT5rtlChfV8LWR1CDaDUj/ThC6lzArUSljUk61tY1omaj2So8Zg8JymAGa9ii1/xZ99Zy4VWB9nuFrS6WjuQ6oNo7ONOFxX7RDUBLbf1zlPd8a2KYxSrRM7uiWqOp/phOaBxogSYyfrJq9/M7BMpurjsw6K3xdqu1p7IzigdfbGLOy5b8ola+APR6YkiFXODxwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"객체 복사 각 메소드별 벤치마크 결과\"\n        title=\"\"\n        src=\"/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png\"\n        srcset=\"/static/1672710200016.31870475063/63868/copy-object-benchmark.png 250w,\n/static/1672710200016.31870475063/0b533/copy-object-benchmark.png 500w,\n/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png 924w\"\n        sizes=\"(max-width: 924px) 100vw, 924px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<ul>\n<li>순환 객체에 대해 지원하지 않아도 되고 <code class=\"language-text\">Date</code>, <code class=\"language-text\">Map</code> 등의 유형을 보존할 필요가 없다면\n<code class=\"language-text\">JSON.parse(JSON.stringify())</code>를 사용하거나 위에서 직접 구현한 <code class=\"language-text\">Recursive Deep Clone Object</code> 처럼\n구현해 사용하면 되겠습니다.</li>\n<li>그러나 순환 객체에 대해 지원해야 하고 여러 유형을 보존해야 한다면 lodash의 <code class=\"language-text\">cloneDeep()</code> 이나 위에\n서 구현한 <code class=\"language-text\">deepCopyObject</code> 함수를 사용하면 되겠습니다. (물론 <code class=\"language-text\">cloneDeep</code> 과 달리 구현한\n<code class=\"language-text\">deepCopyObject</code> 는 모든 유형을 지원하진 않습니다.)</li>\n</ul>\n<p>객체를 복사하는 데에는 많은 방법이 있습니다. 정답은 없으므로 상황에 따라 가장 적합한 방법을 선택하여\n사용하면 되겠습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<p><a href=\"https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json\">https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json</a></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag</a></p>\n<p><a href=\"https://medium.com/%EC%98%A4%EB%8A%98%EC%9D%98-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%97%90%EC%84%9C-object-object-%EA%B0%80-%EB%8C%80%EC%B2%B4-%EB%AD%98%EA%B9%8C-fe55b754e709\">https://medium.com/오늘의-프로그래밍/자바스크립트에서-object-object-가-대체-뭘까-fe55b754e709</a></p>\n<p><a href=\"https://github.com/lodash/lodash\">https://github.com/lodash/lodash</a></p>\n<p><a href=\"https://erdem.pl/2019/08/can-json-parse-be-performance-improvement\">https://erdem.pl/2019/08/can-json-parse-be-performance-improvement</a></p>\n<p><a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">https://v8.dev/blog/cost-of-javascript-2019#json</a></p>\n<p><a href=\"https://jsben.ch/1m5Gm\">https://jsben.ch/1m5Gm</a></p>",
      "lodash%EC%9D%98-clonedeep#Lodash의 cloneDeep()": "<h2 id=\"객체-복사하기\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC%ED%95%98%EA%B8%B0\" aria-label=\"객체 복사하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사하기</h2>\n<p>객체를 복사하는 데 주로 쓰이는 방법은 아래와 같습니다.</p>\n<!-- prettier-ignore -->\n<table>\n<thead>\n<tr>\n<th>방법</th>\n<th>장점</th>\n<th>단점</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>JSON.stringify() &#x26; JSON.parse()</td>\n<td>간단하고 빠르게 깊은 복사를 할 수 있습니다.</td>\n<td>Infinity, Functions, Date, RegExp 등의 유형은 유실됩니다.</td>\n</tr>\n<tr>\n<td>Spread syntax</td>\n<td>가장 간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Object.assign()</td>\n<td>간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Copy</td>\n<td>Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>순환 참조가 있는 객체를 받을 경우 무한 루프에 빠지게 됩니다. 직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Clone with WeakMap Caching</td>\n<td>순환 참조가 있는 객체도 지원하며 Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Lodash - cloneDeep()</td>\n<td>모든 데이터 형식에 대해 깊게 복사합니다.</td>\n<td>외부 종속성이 추가됩니다.</td>\n</tr>\n</tbody>\n</table>\n<p>각 함수를 테스트하기에 앞서 <code class=\"language-text\">person</code> 이라는 객체를 생성해두겠습니다. 앞으로 이 객체를 이용하여 모든\n함수 테스트를 진행할 것입니다.</p>\n<h3 id=\"set-person-object\" style=\"position:relative;\"><a href=\"#set-person-object\" aria-label=\"set person object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Set Person Object</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> person <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'ben'</span><span class=\"token punctuation\">,</span>\n  age<span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n  address<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    city<span class=\"token operator\">:</span> <span class=\"token string\">'seoul'</span><span class=\"token punctuation\">,</span>\n    country<span class=\"token operator\">:</span> <span class=\"token string\">'korea'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">getAge</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  birth<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  life<span class=\"token operator\">:</span> <span class=\"token number\">Infinity</span><span class=\"token punctuation\">,</span>\n  regT<span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[a-z0-9](\\.|\\+|\\-?[a-z0-9]){1,39}@test\\.com$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">gm</span></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"jsonstringify--jsonparse\" style=\"position:relative;\"><a href=\"#jsonstringify--jsonparse\" aria-label=\"jsonstringify  jsonparse permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSON.stringify() &#x26; JSON.parse()</h3>\n<p><code class=\"language-text\">JSON.stringify</code> 함수가 객체를 JSON 문자열로 변환합니다. (원본 객체에 대한 참조가 없어집니다) 그리고\n<code class=\"language-text\">JSON.parse</code> 를 이용해 객체를 반환합니다.</p>\n<p>이렇게 이 두 가지 함수를 이용하여 간단하게 객체의 깊은 복사본을 만들 수 있습니다. 이제 복사된 객체가\n변경되어도 원본 객체는 그대로 유지됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> deepCopyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span></code></pre></div>\n<p>이 방법을 사용할 때 꼭 알아둬야 할 사항들이 있습니다. <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code>\n<code class=\"language-text\">functions</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code> 객체, <code class=\"language-text\">Infinity</code> 까지 복사하진 않습니다. 왜 그럴까요?</p>\n<ul>\n<li><code class=\"language-text\">Date</code> 객체는 JSON으로 변환하는 과정에서 <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a>형식에\n따라 문자열로\n<a href=\"https://stackoverflow.com/questions/10286204/what-is-the-right-json-date-format\">저장</a>됩니다. 따\n라서 원본 객체의 <code class=\"language-text\">Date</code> 객체는 <strong>복사 후 손실</strong>됩니다. <code class=\"language-text\">reviver</code> 기능을 사용하면 <code class=\"language-text\">Date</code> 객체를\n<a href=\"https://stackoverflow.com/a/9194413\">가져올 수 있긴 합니다</a>.</li>\n<li>함수는 데이터가 아니라 더 복잡한 의미를 가진 동작이며 JSON에서 지원되는 엔티티가 아니기 때문에\n<strong>복사 후 함수는 유지되지 않습니다</strong>.</li>\n<li>JSON에서 객체를 직렬화하고 역직렬화하는 방법의 특성으로 인해 느릴 것 같지만 대부분의 사람들이 이\n방식을 채택하여 사용하여\n<a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">V8이 적극적으로 최적화</a>했기에 <strong>빠르게</strong> 복사본\n을 얻을 수 있습니다.</li>\n</ul>\n<p>즉, 복사된 객체에서 아래와 같이 데이터를 사용하려 한다면 예와 에러가 발생합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">deepCopyPerson<span class=\"token punctuation\">.</span><span class=\"token function\">getAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.getAge is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>birth<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.birth.getDate is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>life<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => null</span></code></pre></div>\n<p>따라서 이 방법은 객체 내에 위와 같은 데이터가 없을 경우에 사용하면 됩니다.</p>\n<h3 id=\"spread-syntax\" style=\"position:relative;\"><a href=\"#spread-syntax\" aria-label=\"spread syntax permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spread syntax</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>obj <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<h3 id=\"objectassign\" style=\"position:relative;\"><a href=\"#objectassign\" aria-label=\"objectassign permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.assign()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p><code class=\"language-text\">Spead</code> 연산자나 <code class=\"language-text\">Object.assign</code> 은 최상위 속성을 복사합니다. 하지만 객체로서의 속성은 얕은 복사 후\n에 참조로 복사되므로 원본 객체와 복사된 객체 간에 공유됩니다.\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#warning_for_deep_clone\">MDN: Object.assign()</a>을\n이용한 예시를 코드로 들어보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 중첩된 객체를 포함하는 복잡한 person 객체 전달</span>\n<span class=\"token comment\">// 중첩된 객체 내의 속성을 변경할 때마다 원본 객체인 person의 동일한 속성도 변합니다</span>\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony', 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan', 'busan'</span></code></pre></div>\n<p>원래 객체의 <code class=\"language-text\">name</code> 속성은 그대로 유지 되었지만, <code class=\"language-text\">city</code> 속성은 재할당 작업으로 인해 변경되었습니다.\n(Spread syntax 도 마찬가지) 그래도 JSON 방식에 비해 다른 점은 <code class=\"language-text\">functions</code>, <code class=\"language-text\">rRegExp</code>, <code class=\"language-text\">Date</code> 객체,\n<code class=\"language-text\">Infinity</code> 까지 복사된다는 점입니다.</p>\n<p>따라서 중첩된 객체 속성이 필요하지 않은 경우에는 좋은 복사 방법입니다.</p>\n<h3 id=\"recursive-deep-clone-object\" style=\"position:relative;\"><a href=\"#recursive-deep-clone-object\" aria-label=\"recursive deep clone object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recursive Deep Clone Object</h3>\n<p>앞에서 다뤘던 문제(JS 내장 함수 및 함수가 손실되는 것)를 해결하며 <strong>깊은 복사</strong>를 실현하는 함수를\n만들어 보겠습니다. 복사를 진행하다가 객체를 만나면 함수를 <strong>재귀적으로</strong> 실행해 깊은 복사를 실현하면\n됩니다.</p>\n<p>regExp 와 Date 객체를 복사하는 건 Lodash의 코드를 참고하여 작성했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> value <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> cloneRegExp <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>regExp<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> RegExp <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> reFlags <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w*$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">regExp</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">,</span> reFlags<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  result<span class=\"token punctuation\">.</span>lastIndex <span class=\"token operator\">=</span> regExp<span class=\"token punctuation\">.</span>lastIndex<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> getTag <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span> <span class=\"token operator\">?</span> <span class=\"token string\">'[object Undefined]'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'[object Null]'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * `Set`, `Map`, `Boolean`, `Date`, `Number`, `String`, `RegExp` 태그가 있는 값만 복사를 진행합니다.\n */</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneByTag</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> tag<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Boolean]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Date]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token operator\">+</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Number]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object String]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Set]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Map]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object RegExp]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">cloneRegExp</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isPrototype <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> object<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> value <span class=\"token operator\">&amp;&amp;</span> value<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> proto <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> Ctor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> Ctor<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> proto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneObject</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">typeof</span> obj<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token function\">isPrototype</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">?</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">getPrototypeOf</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 객체 생성</span>\n    <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> initCloneArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">any</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> length <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> array<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">array</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n    length <span class=\"token operator\">&amp;&amp;</span>\n    <span class=\"token keyword\">typeof</span> array<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span> <span class=\"token operator\">&amp;&amp;</span>\n    Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">,</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result<span class=\"token punctuation\">.</span>index <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">;</span>\n    result<span class=\"token punctuation\">.</span>input <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> obj <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span> <span class=\"token operator\">?</span> <span class=\"token function-variable function\">obj</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode <span class=\"token operator\">=</span> <span class=\"token string\">'12345'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => undefined</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => '12345'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>regT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => lastIndex: 0</span>\ndotAll<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nflags<span class=\"token operator\">:</span> <span class=\"token string\">'gm'</span><span class=\"token punctuation\">;</span>\nglobal<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nhasIndices<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nignoreCase<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nmultiline<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nsource<span class=\"token operator\">:</span> <span class=\"token string\">'^[a-z0-9](\\\\.|\\\\+|\\\\-?[a-z0-9]){1,39}@test\\\\.com$'</span><span class=\"token punctuation\">;</span>\nsticky<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nunicode<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>중요한 것을 살펴보자면 <code class=\"language-text\">typeof</code> 가 아닌 <code class=\"language-text\">toString</code> 메소드를 사용했습니다.</p>\n<p>이 둘의 가장 큰 차이점은 <code class=\"language-text\">toString</code> 은 메소드이기 때문에 오버라이딩이 가능한 반면, <code class=\"language-text\">typeof</code> 는 연산\n자로 분류되기에 오버라이드가 불가능합니다. 즉, <code class=\"language-text\">typeof</code> 를 사용해서는 <strong>반환되는 결과를 조작하는 게\n불가능</strong>하기에 <code class=\"language-text\">toString</code> 을 타입 체크로 사용하여 추가적인 문자열 파싱을 진행했습니다.</p>\n<p>그래서 <strong>toStringTag</strong> 를 활용하여 <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">Boolean</code>, <code class=\"language-text\">Date</code>, <code class=\"language-text\">Number</code>, <code class=\"language-text\">String</code>, <code class=\"language-text\">RegExp</code> 태\n그가 있는 값만 복사를 진행합니다.</p>\n<p>만약 깊게 복사해야 할 객체가 지금 제작한 함수로 커버할 수 있는 범위라면 이대로 쓰는 게 가장 좋습니다\n.</p>\n<p>그리고 이 코드에는 <strong>몇 가지 문제</strong>가 있습니다.</p>\n<p>첫 번재는 바이너리 데이터 관련 객체(<code class=\"language-text\">TypedArray</code>, <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">DataView</code>…) 객체는 깊게 복사하지\n않습니다. 저는 굳이 <code class=\"language-text\">ArrayBuffer</code> 객체까지 깊게 복사할 필요가 없어 추가해주진 않았습니다만, 이\n부분에 대한 태그 케이스를 추가하여 <code class=\"language-text\">ArrayBuffer</code>를 복사하는 로직을 작성해주면 바이너리 관련 객체도\n깊게 복사 할 수 있겠습니다.</p>\n<p>두 번째는 순환 참조가 있는 객체를 복사해야 할 경우에는 무한하게 서로가 서로를 호출해서 호출 스택\n(call stack)이 터져버리는 에러를 마주하게 됩니다. 이 문제를 해결하기 위해선 무한 루프에 빠지지\n않도록 이전의 참조 맵을 유지하면서 전달 받은 객체를 통해 반복하여 복사하도록 해주면 됩니다. 객체가\n맵에 저장되어 있다면 복사본이 반복되지 않고 그대로 반환되도록 하는 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> hash <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WeakMap<span class=\"token operator\">&lt;</span>object<span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 순환 참조</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hash<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> hash<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// hash에 복사할 객체를 저장합니다.</span>\n  hash<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Map]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Set]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 열거 가능한 자체 속성을 재귀적으로 복제 및 할당합니다.</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> 순환참조가_있는_객체를_완전히_복사하는지_검사 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> object <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    foo<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> b<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> c<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> d<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    bar<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d <span class=\"token operator\">=</span> object<span class=\"token punctuation\">;</span>\n  object<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> copied <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> copied<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">!==</span> object <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">순환참조가_있는_객체를_완전히_복사하는지_검사</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => true</span></code></pre></div>\n<p>순환 참조가 있는 객체를 완전히 복사하는지 검사한 결과도 <code class=\"language-text\">true</code>로 잘 나옵니다.</p>\n<p>이쯤되면 궁금해집니다. 왜 굳이 이런 번거로움을 감수하고도 <strong>깊은 복사</strong>를 생성한다는 것이 왜 중요할\n까요? 우선 깊은 복사와 얕은 복사가 뭔지 이해할 필요가 있습니다.</p>\n<p>얕은 복사는 두 객체가 동일한 참조를 공유하기에 원본 또는 복사본이 변경되면 예상치 못한 객체가 변경되\n어 디버깅이 어려워집니다. 반면, 깊은 복사는 복사된 객체의 속성이 원본 객체와 동일한 참조를 공유하지\n않는 복사본을 뜻합니다.</p>\n<p>즉, <strong>원본이나 복사본을 변경할 때 다른 객체를 변경하지 않도록 보장</strong>받을 수 있습니다. 실수를\n방지하는 것이죠.</p>\n<h3 id=\"lodash의-clonedeep\" style=\"position:relative;\"><a href=\"#lodash%EC%9D%98-clonedeep\" aria-label=\"lodash의 clonedeep permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lodash의 cloneDeep()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> _ <span class=\"token keyword\">from</span> <span class=\"token string\">'lodash'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">cloneDeep</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p>모든 값, 속성, 그리고 중첩된 객체까지 모두 달라 <code class=\"language-text\">false</code> 로 나타납니다. 그러나 외부 종속성이 추가되는\n것은 피할 수 없습니다.</p>\n<h2 id=\"객체-복사-메소드별-벤치마크\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC-%EB%A9%94%EC%86%8C%EB%93%9C%EB%B3%84-%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"객체 복사 메소드별 벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사 메소드별 벤치마크</h2>\n<p><a href=\"https://jsben.ch/zEKYJ\">각 메소드별 벤치마크 결과 보러가기</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 924px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2ElEQVR42m3O3W/SUBjH8fMPGF4KPedw+n5KSykt7xQItNABBSnZsmS6GUcgZk4ng6gx8cIb44UX3njpnf+qnQiyZcnn4vd8rx5QKeTKBpUxQ0lKwQmBje/x6TuH5b90TMhAIHROhfBWmt7I4Tt5smC8S8abR5LeHPtz2L8bzAPuJdNfYrMJsHfBnnxmww/s7GNivEmM11uxYM3NNmi6iQfrffwnWMWOv8DKAIjemXj8XghX4uw21V8m3DnTW2yRwRL5y+TuPISNBs8LADkhHF5Bf8EOruBkhcNNKrhJDt9EuPE1Cq4Tf/cDsORzkgr44ZK7+EbOv4qT16pV1SstXreRYkAln7VrillB1MyohftMbNQJzQGuekS856R7xjenUr4sF2oRajfUoiPkSpxmZ7LWoziJAjx+y85/wpc/xN45rfVoc6Q4Q6UxkGq+0R4ptT5rtlChfV8LWR1CDaDUj/ThC6lzArUSljUk61tY1omaj2So8Zg8JymAGa9ii1/xZ99Zy4VWB9nuFrS6WjuQ6oNo7ONOFxX7RDUBLbf1zlPd8a2KYxSrRM7uiWqOp/phOaBxogSYyfrJq9/M7BMpurjsw6K3xdqu1p7IzigdfbGLOy5b8ola+APR6YkiFXODxwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"객체 복사 각 메소드별 벤치마크 결과\"\n        title=\"\"\n        src=\"/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png\"\n        srcset=\"/static/1672710200016.31870475063/63868/copy-object-benchmark.png 250w,\n/static/1672710200016.31870475063/0b533/copy-object-benchmark.png 500w,\n/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png 924w\"\n        sizes=\"(max-width: 924px) 100vw, 924px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<ul>\n<li>순환 객체에 대해 지원하지 않아도 되고 <code class=\"language-text\">Date</code>, <code class=\"language-text\">Map</code> 등의 유형을 보존할 필요가 없다면\n<code class=\"language-text\">JSON.parse(JSON.stringify())</code>를 사용하거나 위에서 직접 구현한 <code class=\"language-text\">Recursive Deep Clone Object</code> 처럼\n구현해 사용하면 되겠습니다.</li>\n<li>그러나 순환 객체에 대해 지원해야 하고 여러 유형을 보존해야 한다면 lodash의 <code class=\"language-text\">cloneDeep()</code> 이나 위에\n서 구현한 <code class=\"language-text\">deepCopyObject</code> 함수를 사용하면 되겠습니다. (물론 <code class=\"language-text\">cloneDeep</code> 과 달리 구현한\n<code class=\"language-text\">deepCopyObject</code> 는 모든 유형을 지원하진 않습니다.)</li>\n</ul>\n<p>객체를 복사하는 데에는 많은 방법이 있습니다. 정답은 없으므로 상황에 따라 가장 적합한 방법을 선택하여\n사용하면 되겠습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<p><a href=\"https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json\">https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json</a></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag</a></p>\n<p><a href=\"https://medium.com/%EC%98%A4%EB%8A%98%EC%9D%98-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%97%90%EC%84%9C-object-object-%EA%B0%80-%EB%8C%80%EC%B2%B4-%EB%AD%98%EA%B9%8C-fe55b754e709\">https://medium.com/오늘의-프로그래밍/자바스크립트에서-object-object-가-대체-뭘까-fe55b754e709</a></p>\n<p><a href=\"https://github.com/lodash/lodash\">https://github.com/lodash/lodash</a></p>\n<p><a href=\"https://erdem.pl/2019/08/can-json-parse-be-performance-improvement\">https://erdem.pl/2019/08/can-json-parse-be-performance-improvement</a></p>\n<p><a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">https://v8.dev/blog/cost-of-javascript-2019#json</a></p>\n<p><a href=\"https://jsben.ch/1m5Gm\">https://jsben.ch/1m5Gm</a></p>",
      "%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC-%EB%A9%94%EC%86%8C%EB%93%9C%EB%B3%84-%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC#객체 복사 메소드별 벤치마크": "<h2 id=\"객체-복사하기\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC%ED%95%98%EA%B8%B0\" aria-label=\"객체 복사하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사하기</h2>\n<p>객체를 복사하는 데 주로 쓰이는 방법은 아래와 같습니다.</p>\n<!-- prettier-ignore -->\n<table>\n<thead>\n<tr>\n<th>방법</th>\n<th>장점</th>\n<th>단점</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>JSON.stringify() &#x26; JSON.parse()</td>\n<td>간단하고 빠르게 깊은 복사를 할 수 있습니다.</td>\n<td>Infinity, Functions, Date, RegExp 등의 유형은 유실됩니다.</td>\n</tr>\n<tr>\n<td>Spread syntax</td>\n<td>가장 간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Object.assign()</td>\n<td>간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Copy</td>\n<td>Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>순환 참조가 있는 객체를 받을 경우 무한 루프에 빠지게 됩니다. 직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Clone with WeakMap Caching</td>\n<td>순환 참조가 있는 객체도 지원하며 Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Lodash - cloneDeep()</td>\n<td>모든 데이터 형식에 대해 깊게 복사합니다.</td>\n<td>외부 종속성이 추가됩니다.</td>\n</tr>\n</tbody>\n</table>\n<p>각 함수를 테스트하기에 앞서 <code class=\"language-text\">person</code> 이라는 객체를 생성해두겠습니다. 앞으로 이 객체를 이용하여 모든\n함수 테스트를 진행할 것입니다.</p>\n<h3 id=\"set-person-object\" style=\"position:relative;\"><a href=\"#set-person-object\" aria-label=\"set person object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Set Person Object</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> person <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'ben'</span><span class=\"token punctuation\">,</span>\n  age<span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n  address<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    city<span class=\"token operator\">:</span> <span class=\"token string\">'seoul'</span><span class=\"token punctuation\">,</span>\n    country<span class=\"token operator\">:</span> <span class=\"token string\">'korea'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">getAge</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  birth<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  life<span class=\"token operator\">:</span> <span class=\"token number\">Infinity</span><span class=\"token punctuation\">,</span>\n  regT<span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[a-z0-9](\\.|\\+|\\-?[a-z0-9]){1,39}@test\\.com$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">gm</span></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"jsonstringify--jsonparse\" style=\"position:relative;\"><a href=\"#jsonstringify--jsonparse\" aria-label=\"jsonstringify  jsonparse permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSON.stringify() &#x26; JSON.parse()</h3>\n<p><code class=\"language-text\">JSON.stringify</code> 함수가 객체를 JSON 문자열로 변환합니다. (원본 객체에 대한 참조가 없어집니다) 그리고\n<code class=\"language-text\">JSON.parse</code> 를 이용해 객체를 반환합니다.</p>\n<p>이렇게 이 두 가지 함수를 이용하여 간단하게 객체의 깊은 복사본을 만들 수 있습니다. 이제 복사된 객체가\n변경되어도 원본 객체는 그대로 유지됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> deepCopyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span></code></pre></div>\n<p>이 방법을 사용할 때 꼭 알아둬야 할 사항들이 있습니다. <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code>\n<code class=\"language-text\">functions</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code> 객체, <code class=\"language-text\">Infinity</code> 까지 복사하진 않습니다. 왜 그럴까요?</p>\n<ul>\n<li><code class=\"language-text\">Date</code> 객체는 JSON으로 변환하는 과정에서 <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a>형식에\n따라 문자열로\n<a href=\"https://stackoverflow.com/questions/10286204/what-is-the-right-json-date-format\">저장</a>됩니다. 따\n라서 원본 객체의 <code class=\"language-text\">Date</code> 객체는 <strong>복사 후 손실</strong>됩니다. <code class=\"language-text\">reviver</code> 기능을 사용하면 <code class=\"language-text\">Date</code> 객체를\n<a href=\"https://stackoverflow.com/a/9194413\">가져올 수 있긴 합니다</a>.</li>\n<li>함수는 데이터가 아니라 더 복잡한 의미를 가진 동작이며 JSON에서 지원되는 엔티티가 아니기 때문에\n<strong>복사 후 함수는 유지되지 않습니다</strong>.</li>\n<li>JSON에서 객체를 직렬화하고 역직렬화하는 방법의 특성으로 인해 느릴 것 같지만 대부분의 사람들이 이\n방식을 채택하여 사용하여\n<a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">V8이 적극적으로 최적화</a>했기에 <strong>빠르게</strong> 복사본\n을 얻을 수 있습니다.</li>\n</ul>\n<p>즉, 복사된 객체에서 아래와 같이 데이터를 사용하려 한다면 예와 에러가 발생합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">deepCopyPerson<span class=\"token punctuation\">.</span><span class=\"token function\">getAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.getAge is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>birth<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.birth.getDate is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>life<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => null</span></code></pre></div>\n<p>따라서 이 방법은 객체 내에 위와 같은 데이터가 없을 경우에 사용하면 됩니다.</p>\n<h3 id=\"spread-syntax\" style=\"position:relative;\"><a href=\"#spread-syntax\" aria-label=\"spread syntax permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spread syntax</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>obj <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<h3 id=\"objectassign\" style=\"position:relative;\"><a href=\"#objectassign\" aria-label=\"objectassign permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.assign()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p><code class=\"language-text\">Spead</code> 연산자나 <code class=\"language-text\">Object.assign</code> 은 최상위 속성을 복사합니다. 하지만 객체로서의 속성은 얕은 복사 후\n에 참조로 복사되므로 원본 객체와 복사된 객체 간에 공유됩니다.\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#warning_for_deep_clone\">MDN: Object.assign()</a>을\n이용한 예시를 코드로 들어보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 중첩된 객체를 포함하는 복잡한 person 객체 전달</span>\n<span class=\"token comment\">// 중첩된 객체 내의 속성을 변경할 때마다 원본 객체인 person의 동일한 속성도 변합니다</span>\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony', 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan', 'busan'</span></code></pre></div>\n<p>원래 객체의 <code class=\"language-text\">name</code> 속성은 그대로 유지 되었지만, <code class=\"language-text\">city</code> 속성은 재할당 작업으로 인해 변경되었습니다.\n(Spread syntax 도 마찬가지) 그래도 JSON 방식에 비해 다른 점은 <code class=\"language-text\">functions</code>, <code class=\"language-text\">rRegExp</code>, <code class=\"language-text\">Date</code> 객체,\n<code class=\"language-text\">Infinity</code> 까지 복사된다는 점입니다.</p>\n<p>따라서 중첩된 객체 속성이 필요하지 않은 경우에는 좋은 복사 방법입니다.</p>\n<h3 id=\"recursive-deep-clone-object\" style=\"position:relative;\"><a href=\"#recursive-deep-clone-object\" aria-label=\"recursive deep clone object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recursive Deep Clone Object</h3>\n<p>앞에서 다뤘던 문제(JS 내장 함수 및 함수가 손실되는 것)를 해결하며 <strong>깊은 복사</strong>를 실현하는 함수를\n만들어 보겠습니다. 복사를 진행하다가 객체를 만나면 함수를 <strong>재귀적으로</strong> 실행해 깊은 복사를 실현하면\n됩니다.</p>\n<p>regExp 와 Date 객체를 복사하는 건 Lodash의 코드를 참고하여 작성했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> value <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> cloneRegExp <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>regExp<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> RegExp <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> reFlags <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w*$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">regExp</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">,</span> reFlags<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  result<span class=\"token punctuation\">.</span>lastIndex <span class=\"token operator\">=</span> regExp<span class=\"token punctuation\">.</span>lastIndex<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> getTag <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span> <span class=\"token operator\">?</span> <span class=\"token string\">'[object Undefined]'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'[object Null]'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * `Set`, `Map`, `Boolean`, `Date`, `Number`, `String`, `RegExp` 태그가 있는 값만 복사를 진행합니다.\n */</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneByTag</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> tag<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Boolean]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Date]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token operator\">+</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Number]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object String]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Set]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Map]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object RegExp]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">cloneRegExp</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isPrototype <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> object<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> value <span class=\"token operator\">&amp;&amp;</span> value<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> proto <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> Ctor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> Ctor<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> proto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneObject</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">typeof</span> obj<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token function\">isPrototype</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">?</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">getPrototypeOf</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 객체 생성</span>\n    <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> initCloneArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">any</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> length <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> array<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">array</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n    length <span class=\"token operator\">&amp;&amp;</span>\n    <span class=\"token keyword\">typeof</span> array<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span> <span class=\"token operator\">&amp;&amp;</span>\n    Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">,</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result<span class=\"token punctuation\">.</span>index <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">;</span>\n    result<span class=\"token punctuation\">.</span>input <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> obj <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span> <span class=\"token operator\">?</span> <span class=\"token function-variable function\">obj</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode <span class=\"token operator\">=</span> <span class=\"token string\">'12345'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => undefined</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => '12345'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>regT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => lastIndex: 0</span>\ndotAll<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nflags<span class=\"token operator\">:</span> <span class=\"token string\">'gm'</span><span class=\"token punctuation\">;</span>\nglobal<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nhasIndices<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nignoreCase<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nmultiline<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nsource<span class=\"token operator\">:</span> <span class=\"token string\">'^[a-z0-9](\\\\.|\\\\+|\\\\-?[a-z0-9]){1,39}@test\\\\.com$'</span><span class=\"token punctuation\">;</span>\nsticky<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nunicode<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>중요한 것을 살펴보자면 <code class=\"language-text\">typeof</code> 가 아닌 <code class=\"language-text\">toString</code> 메소드를 사용했습니다.</p>\n<p>이 둘의 가장 큰 차이점은 <code class=\"language-text\">toString</code> 은 메소드이기 때문에 오버라이딩이 가능한 반면, <code class=\"language-text\">typeof</code> 는 연산\n자로 분류되기에 오버라이드가 불가능합니다. 즉, <code class=\"language-text\">typeof</code> 를 사용해서는 <strong>반환되는 결과를 조작하는 게\n불가능</strong>하기에 <code class=\"language-text\">toString</code> 을 타입 체크로 사용하여 추가적인 문자열 파싱을 진행했습니다.</p>\n<p>그래서 <strong>toStringTag</strong> 를 활용하여 <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">Boolean</code>, <code class=\"language-text\">Date</code>, <code class=\"language-text\">Number</code>, <code class=\"language-text\">String</code>, <code class=\"language-text\">RegExp</code> 태\n그가 있는 값만 복사를 진행합니다.</p>\n<p>만약 깊게 복사해야 할 객체가 지금 제작한 함수로 커버할 수 있는 범위라면 이대로 쓰는 게 가장 좋습니다\n.</p>\n<p>그리고 이 코드에는 <strong>몇 가지 문제</strong>가 있습니다.</p>\n<p>첫 번재는 바이너리 데이터 관련 객체(<code class=\"language-text\">TypedArray</code>, <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">DataView</code>…) 객체는 깊게 복사하지\n않습니다. 저는 굳이 <code class=\"language-text\">ArrayBuffer</code> 객체까지 깊게 복사할 필요가 없어 추가해주진 않았습니다만, 이\n부분에 대한 태그 케이스를 추가하여 <code class=\"language-text\">ArrayBuffer</code>를 복사하는 로직을 작성해주면 바이너리 관련 객체도\n깊게 복사 할 수 있겠습니다.</p>\n<p>두 번째는 순환 참조가 있는 객체를 복사해야 할 경우에는 무한하게 서로가 서로를 호출해서 호출 스택\n(call stack)이 터져버리는 에러를 마주하게 됩니다. 이 문제를 해결하기 위해선 무한 루프에 빠지지\n않도록 이전의 참조 맵을 유지하면서 전달 받은 객체를 통해 반복하여 복사하도록 해주면 됩니다. 객체가\n맵에 저장되어 있다면 복사본이 반복되지 않고 그대로 반환되도록 하는 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> hash <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WeakMap<span class=\"token operator\">&lt;</span>object<span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 순환 참조</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hash<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> hash<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// hash에 복사할 객체를 저장합니다.</span>\n  hash<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Map]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Set]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 열거 가능한 자체 속성을 재귀적으로 복제 및 할당합니다.</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> 순환참조가_있는_객체를_완전히_복사하는지_검사 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> object <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    foo<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> b<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> c<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> d<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    bar<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d <span class=\"token operator\">=</span> object<span class=\"token punctuation\">;</span>\n  object<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> copied <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> copied<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">!==</span> object <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">순환참조가_있는_객체를_완전히_복사하는지_검사</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => true</span></code></pre></div>\n<p>순환 참조가 있는 객체를 완전히 복사하는지 검사한 결과도 <code class=\"language-text\">true</code>로 잘 나옵니다.</p>\n<p>이쯤되면 궁금해집니다. 왜 굳이 이런 번거로움을 감수하고도 <strong>깊은 복사</strong>를 생성한다는 것이 왜 중요할\n까요? 우선 깊은 복사와 얕은 복사가 뭔지 이해할 필요가 있습니다.</p>\n<p>얕은 복사는 두 객체가 동일한 참조를 공유하기에 원본 또는 복사본이 변경되면 예상치 못한 객체가 변경되\n어 디버깅이 어려워집니다. 반면, 깊은 복사는 복사된 객체의 속성이 원본 객체와 동일한 참조를 공유하지\n않는 복사본을 뜻합니다.</p>\n<p>즉, <strong>원본이나 복사본을 변경할 때 다른 객체를 변경하지 않도록 보장</strong>받을 수 있습니다. 실수를\n방지하는 것이죠.</p>\n<h3 id=\"lodash의-clonedeep\" style=\"position:relative;\"><a href=\"#lodash%EC%9D%98-clonedeep\" aria-label=\"lodash의 clonedeep permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lodash의 cloneDeep()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> _ <span class=\"token keyword\">from</span> <span class=\"token string\">'lodash'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">cloneDeep</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p>모든 값, 속성, 그리고 중첩된 객체까지 모두 달라 <code class=\"language-text\">false</code> 로 나타납니다. 그러나 외부 종속성이 추가되는\n것은 피할 수 없습니다.</p>\n<h2 id=\"객체-복사-메소드별-벤치마크\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC-%EB%A9%94%EC%86%8C%EB%93%9C%EB%B3%84-%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"객체 복사 메소드별 벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사 메소드별 벤치마크</h2>\n<p><a href=\"https://jsben.ch/zEKYJ\">각 메소드별 벤치마크 결과 보러가기</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 924px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2ElEQVR42m3O3W/SUBjH8fMPGF4KPedw+n5KSykt7xQItNABBSnZsmS6GUcgZk4ng6gx8cIb44UX3njpnf+qnQiyZcnn4vd8rx5QKeTKBpUxQ0lKwQmBje/x6TuH5b90TMhAIHROhfBWmt7I4Tt5smC8S8abR5LeHPtz2L8bzAPuJdNfYrMJsHfBnnxmww/s7GNivEmM11uxYM3NNmi6iQfrffwnWMWOv8DKAIjemXj8XghX4uw21V8m3DnTW2yRwRL5y+TuPISNBs8LADkhHF5Bf8EOruBkhcNNKrhJDt9EuPE1Cq4Tf/cDsORzkgr44ZK7+EbOv4qT16pV1SstXreRYkAln7VrillB1MyohftMbNQJzQGuekS856R7xjenUr4sF2oRajfUoiPkSpxmZ7LWoziJAjx+y85/wpc/xN45rfVoc6Q4Q6UxkGq+0R4ptT5rtlChfV8LWR1CDaDUj/ThC6lzArUSljUk61tY1omaj2So8Zg8JymAGa9ii1/xZ99Zy4VWB9nuFrS6WjuQ6oNo7ONOFxX7RDUBLbf1zlPd8a2KYxSrRM7uiWqOp/phOaBxogSYyfrJq9/M7BMpurjsw6K3xdqu1p7IzigdfbGLOy5b8ola+APR6YkiFXODxwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"객체 복사 각 메소드별 벤치마크 결과\"\n        title=\"\"\n        src=\"/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png\"\n        srcset=\"/static/1672710200016.31870475063/63868/copy-object-benchmark.png 250w,\n/static/1672710200016.31870475063/0b533/copy-object-benchmark.png 500w,\n/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png 924w\"\n        sizes=\"(max-width: 924px) 100vw, 924px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<ul>\n<li>순환 객체에 대해 지원하지 않아도 되고 <code class=\"language-text\">Date</code>, <code class=\"language-text\">Map</code> 등의 유형을 보존할 필요가 없다면\n<code class=\"language-text\">JSON.parse(JSON.stringify())</code>를 사용하거나 위에서 직접 구현한 <code class=\"language-text\">Recursive Deep Clone Object</code> 처럼\n구현해 사용하면 되겠습니다.</li>\n<li>그러나 순환 객체에 대해 지원해야 하고 여러 유형을 보존해야 한다면 lodash의 <code class=\"language-text\">cloneDeep()</code> 이나 위에\n서 구현한 <code class=\"language-text\">deepCopyObject</code> 함수를 사용하면 되겠습니다. (물론 <code class=\"language-text\">cloneDeep</code> 과 달리 구현한\n<code class=\"language-text\">deepCopyObject</code> 는 모든 유형을 지원하진 않습니다.)</li>\n</ul>\n<p>객체를 복사하는 데에는 많은 방법이 있습니다. 정답은 없으므로 상황에 따라 가장 적합한 방법을 선택하여\n사용하면 되겠습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<p><a href=\"https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json\">https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json</a></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag</a></p>\n<p><a href=\"https://medium.com/%EC%98%A4%EB%8A%98%EC%9D%98-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%97%90%EC%84%9C-object-object-%EA%B0%80-%EB%8C%80%EC%B2%B4-%EB%AD%98%EA%B9%8C-fe55b754e709\">https://medium.com/오늘의-프로그래밍/자바스크립트에서-object-object-가-대체-뭘까-fe55b754e709</a></p>\n<p><a href=\"https://github.com/lodash/lodash\">https://github.com/lodash/lodash</a></p>\n<p><a href=\"https://erdem.pl/2019/08/can-json-parse-be-performance-improvement\">https://erdem.pl/2019/08/can-json-parse-be-performance-improvement</a></p>\n<p><a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">https://v8.dev/blog/cost-of-javascript-2019#json</a></p>\n<p><a href=\"https://jsben.ch/1m5Gm\">https://jsben.ch/1m5Gm</a></p>",
      "%EA%B2%B0%EB%A1%A0#결론": "<h2 id=\"객체-복사하기\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC%ED%95%98%EA%B8%B0\" aria-label=\"객체 복사하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사하기</h2>\n<p>객체를 복사하는 데 주로 쓰이는 방법은 아래와 같습니다.</p>\n<!-- prettier-ignore -->\n<table>\n<thead>\n<tr>\n<th>방법</th>\n<th>장점</th>\n<th>단점</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>JSON.stringify() &#x26; JSON.parse()</td>\n<td>간단하고 빠르게 깊은 복사를 할 수 있습니다.</td>\n<td>Infinity, Functions, Date, RegExp 등의 유형은 유실됩니다.</td>\n</tr>\n<tr>\n<td>Spread syntax</td>\n<td>가장 간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Object.assign()</td>\n<td>간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Copy</td>\n<td>Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>순환 참조가 있는 객체를 받을 경우 무한 루프에 빠지게 됩니다. 직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Clone with WeakMap Caching</td>\n<td>순환 참조가 있는 객체도 지원하며 Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Lodash - cloneDeep()</td>\n<td>모든 데이터 형식에 대해 깊게 복사합니다.</td>\n<td>외부 종속성이 추가됩니다.</td>\n</tr>\n</tbody>\n</table>\n<p>각 함수를 테스트하기에 앞서 <code class=\"language-text\">person</code> 이라는 객체를 생성해두겠습니다. 앞으로 이 객체를 이용하여 모든\n함수 테스트를 진행할 것입니다.</p>\n<h3 id=\"set-person-object\" style=\"position:relative;\"><a href=\"#set-person-object\" aria-label=\"set person object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Set Person Object</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> person <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'ben'</span><span class=\"token punctuation\">,</span>\n  age<span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n  address<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    city<span class=\"token operator\">:</span> <span class=\"token string\">'seoul'</span><span class=\"token punctuation\">,</span>\n    country<span class=\"token operator\">:</span> <span class=\"token string\">'korea'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">getAge</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  birth<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  life<span class=\"token operator\">:</span> <span class=\"token number\">Infinity</span><span class=\"token punctuation\">,</span>\n  regT<span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[a-z0-9](\\.|\\+|\\-?[a-z0-9]){1,39}@test\\.com$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">gm</span></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"jsonstringify--jsonparse\" style=\"position:relative;\"><a href=\"#jsonstringify--jsonparse\" aria-label=\"jsonstringify  jsonparse permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSON.stringify() &#x26; JSON.parse()</h3>\n<p><code class=\"language-text\">JSON.stringify</code> 함수가 객체를 JSON 문자열로 변환합니다. (원본 객체에 대한 참조가 없어집니다) 그리고\n<code class=\"language-text\">JSON.parse</code> 를 이용해 객체를 반환합니다.</p>\n<p>이렇게 이 두 가지 함수를 이용하여 간단하게 객체의 깊은 복사본을 만들 수 있습니다. 이제 복사된 객체가\n변경되어도 원본 객체는 그대로 유지됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> deepCopyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span></code></pre></div>\n<p>이 방법을 사용할 때 꼭 알아둬야 할 사항들이 있습니다. <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code>\n<code class=\"language-text\">functions</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code> 객체, <code class=\"language-text\">Infinity</code> 까지 복사하진 않습니다. 왜 그럴까요?</p>\n<ul>\n<li><code class=\"language-text\">Date</code> 객체는 JSON으로 변환하는 과정에서 <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a>형식에\n따라 문자열로\n<a href=\"https://stackoverflow.com/questions/10286204/what-is-the-right-json-date-format\">저장</a>됩니다. 따\n라서 원본 객체의 <code class=\"language-text\">Date</code> 객체는 <strong>복사 후 손실</strong>됩니다. <code class=\"language-text\">reviver</code> 기능을 사용하면 <code class=\"language-text\">Date</code> 객체를\n<a href=\"https://stackoverflow.com/a/9194413\">가져올 수 있긴 합니다</a>.</li>\n<li>함수는 데이터가 아니라 더 복잡한 의미를 가진 동작이며 JSON에서 지원되는 엔티티가 아니기 때문에\n<strong>복사 후 함수는 유지되지 않습니다</strong>.</li>\n<li>JSON에서 객체를 직렬화하고 역직렬화하는 방법의 특성으로 인해 느릴 것 같지만 대부분의 사람들이 이\n방식을 채택하여 사용하여\n<a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">V8이 적극적으로 최적화</a>했기에 <strong>빠르게</strong> 복사본\n을 얻을 수 있습니다.</li>\n</ul>\n<p>즉, 복사된 객체에서 아래와 같이 데이터를 사용하려 한다면 예와 에러가 발생합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">deepCopyPerson<span class=\"token punctuation\">.</span><span class=\"token function\">getAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.getAge is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>birth<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.birth.getDate is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>life<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => null</span></code></pre></div>\n<p>따라서 이 방법은 객체 내에 위와 같은 데이터가 없을 경우에 사용하면 됩니다.</p>\n<h3 id=\"spread-syntax\" style=\"position:relative;\"><a href=\"#spread-syntax\" aria-label=\"spread syntax permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spread syntax</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>obj <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<h3 id=\"objectassign\" style=\"position:relative;\"><a href=\"#objectassign\" aria-label=\"objectassign permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.assign()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p><code class=\"language-text\">Spead</code> 연산자나 <code class=\"language-text\">Object.assign</code> 은 최상위 속성을 복사합니다. 하지만 객체로서의 속성은 얕은 복사 후\n에 참조로 복사되므로 원본 객체와 복사된 객체 간에 공유됩니다.\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#warning_for_deep_clone\">MDN: Object.assign()</a>을\n이용한 예시를 코드로 들어보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 중첩된 객체를 포함하는 복잡한 person 객체 전달</span>\n<span class=\"token comment\">// 중첩된 객체 내의 속성을 변경할 때마다 원본 객체인 person의 동일한 속성도 변합니다</span>\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony', 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan', 'busan'</span></code></pre></div>\n<p>원래 객체의 <code class=\"language-text\">name</code> 속성은 그대로 유지 되었지만, <code class=\"language-text\">city</code> 속성은 재할당 작업으로 인해 변경되었습니다.\n(Spread syntax 도 마찬가지) 그래도 JSON 방식에 비해 다른 점은 <code class=\"language-text\">functions</code>, <code class=\"language-text\">rRegExp</code>, <code class=\"language-text\">Date</code> 객체,\n<code class=\"language-text\">Infinity</code> 까지 복사된다는 점입니다.</p>\n<p>따라서 중첩된 객체 속성이 필요하지 않은 경우에는 좋은 복사 방법입니다.</p>\n<h3 id=\"recursive-deep-clone-object\" style=\"position:relative;\"><a href=\"#recursive-deep-clone-object\" aria-label=\"recursive deep clone object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recursive Deep Clone Object</h3>\n<p>앞에서 다뤘던 문제(JS 내장 함수 및 함수가 손실되는 것)를 해결하며 <strong>깊은 복사</strong>를 실현하는 함수를\n만들어 보겠습니다. 복사를 진행하다가 객체를 만나면 함수를 <strong>재귀적으로</strong> 실행해 깊은 복사를 실현하면\n됩니다.</p>\n<p>regExp 와 Date 객체를 복사하는 건 Lodash의 코드를 참고하여 작성했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> value <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> cloneRegExp <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>regExp<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> RegExp <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> reFlags <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w*$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">regExp</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">,</span> reFlags<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  result<span class=\"token punctuation\">.</span>lastIndex <span class=\"token operator\">=</span> regExp<span class=\"token punctuation\">.</span>lastIndex<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> getTag <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span> <span class=\"token operator\">?</span> <span class=\"token string\">'[object Undefined]'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'[object Null]'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * `Set`, `Map`, `Boolean`, `Date`, `Number`, `String`, `RegExp` 태그가 있는 값만 복사를 진행합니다.\n */</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneByTag</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> tag<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Boolean]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Date]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token operator\">+</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Number]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object String]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Set]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Map]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object RegExp]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">cloneRegExp</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isPrototype <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> object<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> value <span class=\"token operator\">&amp;&amp;</span> value<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> proto <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> Ctor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> Ctor<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> proto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneObject</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">typeof</span> obj<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token function\">isPrototype</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">?</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">getPrototypeOf</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 객체 생성</span>\n    <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> initCloneArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">any</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> length <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> array<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">array</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n    length <span class=\"token operator\">&amp;&amp;</span>\n    <span class=\"token keyword\">typeof</span> array<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span> <span class=\"token operator\">&amp;&amp;</span>\n    Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">,</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result<span class=\"token punctuation\">.</span>index <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">;</span>\n    result<span class=\"token punctuation\">.</span>input <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> obj <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span> <span class=\"token operator\">?</span> <span class=\"token function-variable function\">obj</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode <span class=\"token operator\">=</span> <span class=\"token string\">'12345'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => undefined</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => '12345'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>regT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => lastIndex: 0</span>\ndotAll<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nflags<span class=\"token operator\">:</span> <span class=\"token string\">'gm'</span><span class=\"token punctuation\">;</span>\nglobal<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nhasIndices<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nignoreCase<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nmultiline<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nsource<span class=\"token operator\">:</span> <span class=\"token string\">'^[a-z0-9](\\\\.|\\\\+|\\\\-?[a-z0-9]){1,39}@test\\\\.com$'</span><span class=\"token punctuation\">;</span>\nsticky<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nunicode<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>중요한 것을 살펴보자면 <code class=\"language-text\">typeof</code> 가 아닌 <code class=\"language-text\">toString</code> 메소드를 사용했습니다.</p>\n<p>이 둘의 가장 큰 차이점은 <code class=\"language-text\">toString</code> 은 메소드이기 때문에 오버라이딩이 가능한 반면, <code class=\"language-text\">typeof</code> 는 연산\n자로 분류되기에 오버라이드가 불가능합니다. 즉, <code class=\"language-text\">typeof</code> 를 사용해서는 <strong>반환되는 결과를 조작하는 게\n불가능</strong>하기에 <code class=\"language-text\">toString</code> 을 타입 체크로 사용하여 추가적인 문자열 파싱을 진행했습니다.</p>\n<p>그래서 <strong>toStringTag</strong> 를 활용하여 <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">Boolean</code>, <code class=\"language-text\">Date</code>, <code class=\"language-text\">Number</code>, <code class=\"language-text\">String</code>, <code class=\"language-text\">RegExp</code> 태\n그가 있는 값만 복사를 진행합니다.</p>\n<p>만약 깊게 복사해야 할 객체가 지금 제작한 함수로 커버할 수 있는 범위라면 이대로 쓰는 게 가장 좋습니다\n.</p>\n<p>그리고 이 코드에는 <strong>몇 가지 문제</strong>가 있습니다.</p>\n<p>첫 번재는 바이너리 데이터 관련 객체(<code class=\"language-text\">TypedArray</code>, <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">DataView</code>…) 객체는 깊게 복사하지\n않습니다. 저는 굳이 <code class=\"language-text\">ArrayBuffer</code> 객체까지 깊게 복사할 필요가 없어 추가해주진 않았습니다만, 이\n부분에 대한 태그 케이스를 추가하여 <code class=\"language-text\">ArrayBuffer</code>를 복사하는 로직을 작성해주면 바이너리 관련 객체도\n깊게 복사 할 수 있겠습니다.</p>\n<p>두 번째는 순환 참조가 있는 객체를 복사해야 할 경우에는 무한하게 서로가 서로를 호출해서 호출 스택\n(call stack)이 터져버리는 에러를 마주하게 됩니다. 이 문제를 해결하기 위해선 무한 루프에 빠지지\n않도록 이전의 참조 맵을 유지하면서 전달 받은 객체를 통해 반복하여 복사하도록 해주면 됩니다. 객체가\n맵에 저장되어 있다면 복사본이 반복되지 않고 그대로 반환되도록 하는 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> hash <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WeakMap<span class=\"token operator\">&lt;</span>object<span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 순환 참조</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hash<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> hash<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// hash에 복사할 객체를 저장합니다.</span>\n  hash<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Map]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Set]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 열거 가능한 자체 속성을 재귀적으로 복제 및 할당합니다.</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> 순환참조가_있는_객체를_완전히_복사하는지_검사 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> object <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    foo<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> b<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> c<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> d<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    bar<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d <span class=\"token operator\">=</span> object<span class=\"token punctuation\">;</span>\n  object<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> copied <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> copied<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">!==</span> object <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">순환참조가_있는_객체를_완전히_복사하는지_검사</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => true</span></code></pre></div>\n<p>순환 참조가 있는 객체를 완전히 복사하는지 검사한 결과도 <code class=\"language-text\">true</code>로 잘 나옵니다.</p>\n<p>이쯤되면 궁금해집니다. 왜 굳이 이런 번거로움을 감수하고도 <strong>깊은 복사</strong>를 생성한다는 것이 왜 중요할\n까요? 우선 깊은 복사와 얕은 복사가 뭔지 이해할 필요가 있습니다.</p>\n<p>얕은 복사는 두 객체가 동일한 참조를 공유하기에 원본 또는 복사본이 변경되면 예상치 못한 객체가 변경되\n어 디버깅이 어려워집니다. 반면, 깊은 복사는 복사된 객체의 속성이 원본 객체와 동일한 참조를 공유하지\n않는 복사본을 뜻합니다.</p>\n<p>즉, <strong>원본이나 복사본을 변경할 때 다른 객체를 변경하지 않도록 보장</strong>받을 수 있습니다. 실수를\n방지하는 것이죠.</p>\n<h3 id=\"lodash의-clonedeep\" style=\"position:relative;\"><a href=\"#lodash%EC%9D%98-clonedeep\" aria-label=\"lodash의 clonedeep permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lodash의 cloneDeep()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> _ <span class=\"token keyword\">from</span> <span class=\"token string\">'lodash'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">cloneDeep</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p>모든 값, 속성, 그리고 중첩된 객체까지 모두 달라 <code class=\"language-text\">false</code> 로 나타납니다. 그러나 외부 종속성이 추가되는\n것은 피할 수 없습니다.</p>\n<h2 id=\"객체-복사-메소드별-벤치마크\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC-%EB%A9%94%EC%86%8C%EB%93%9C%EB%B3%84-%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"객체 복사 메소드별 벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사 메소드별 벤치마크</h2>\n<p><a href=\"https://jsben.ch/zEKYJ\">각 메소드별 벤치마크 결과 보러가기</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 924px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2ElEQVR42m3O3W/SUBjH8fMPGF4KPedw+n5KSykt7xQItNABBSnZsmS6GUcgZk4ng6gx8cIb44UX3njpnf+qnQiyZcnn4vd8rx5QKeTKBpUxQ0lKwQmBje/x6TuH5b90TMhAIHROhfBWmt7I4Tt5smC8S8abR5LeHPtz2L8bzAPuJdNfYrMJsHfBnnxmww/s7GNivEmM11uxYM3NNmi6iQfrffwnWMWOv8DKAIjemXj8XghX4uw21V8m3DnTW2yRwRL5y+TuPISNBs8LADkhHF5Bf8EOruBkhcNNKrhJDt9EuPE1Cq4Tf/cDsORzkgr44ZK7+EbOv4qT16pV1SstXreRYkAln7VrillB1MyohftMbNQJzQGuekS856R7xjenUr4sF2oRajfUoiPkSpxmZ7LWoziJAjx+y85/wpc/xN45rfVoc6Q4Q6UxkGq+0R4ptT5rtlChfV8LWR1CDaDUj/ThC6lzArUSljUk61tY1omaj2So8Zg8JymAGa9ii1/xZ99Zy4VWB9nuFrS6WjuQ6oNo7ONOFxX7RDUBLbf1zlPd8a2KYxSrRM7uiWqOp/phOaBxogSYyfrJq9/M7BMpurjsw6K3xdqu1p7IzigdfbGLOy5b8ola+APR6YkiFXODxwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"객체 복사 각 메소드별 벤치마크 결과\"\n        title=\"\"\n        src=\"/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png\"\n        srcset=\"/static/1672710200016.31870475063/63868/copy-object-benchmark.png 250w,\n/static/1672710200016.31870475063/0b533/copy-object-benchmark.png 500w,\n/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png 924w\"\n        sizes=\"(max-width: 924px) 100vw, 924px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<ul>\n<li>순환 객체에 대해 지원하지 않아도 되고 <code class=\"language-text\">Date</code>, <code class=\"language-text\">Map</code> 등의 유형을 보존할 필요가 없다면\n<code class=\"language-text\">JSON.parse(JSON.stringify())</code>를 사용하거나 위에서 직접 구현한 <code class=\"language-text\">Recursive Deep Clone Object</code> 처럼\n구현해 사용하면 되겠습니다.</li>\n<li>그러나 순환 객체에 대해 지원해야 하고 여러 유형을 보존해야 한다면 lodash의 <code class=\"language-text\">cloneDeep()</code> 이나 위에\n서 구현한 <code class=\"language-text\">deepCopyObject</code> 함수를 사용하면 되겠습니다. (물론 <code class=\"language-text\">cloneDeep</code> 과 달리 구현한\n<code class=\"language-text\">deepCopyObject</code> 는 모든 유형을 지원하진 않습니다.)</li>\n</ul>\n<p>객체를 복사하는 데에는 많은 방법이 있습니다. 정답은 없으므로 상황에 따라 가장 적합한 방법을 선택하여\n사용하면 되겠습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<p><a href=\"https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json\">https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json</a></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag</a></p>\n<p><a href=\"https://medium.com/%EC%98%A4%EB%8A%98%EC%9D%98-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%97%90%EC%84%9C-object-object-%EA%B0%80-%EB%8C%80%EC%B2%B4-%EB%AD%98%EA%B9%8C-fe55b754e709\">https://medium.com/오늘의-프로그래밍/자바스크립트에서-object-object-가-대체-뭘까-fe55b754e709</a></p>\n<p><a href=\"https://github.com/lodash/lodash\">https://github.com/lodash/lodash</a></p>\n<p><a href=\"https://erdem.pl/2019/08/can-json-parse-be-performance-improvement\">https://erdem.pl/2019/08/can-json-parse-be-performance-improvement</a></p>\n<p><a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">https://v8.dev/blog/cost-of-javascript-2019#json</a></p>\n<p><a href=\"https://jsben.ch/1m5Gm\">https://jsben.ch/1m5Gm</a></p>",
      "%EC%B0%B8%EA%B3%A0#참고": "<h2 id=\"객체-복사하기\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC%ED%95%98%EA%B8%B0\" aria-label=\"객체 복사하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사하기</h2>\n<p>객체를 복사하는 데 주로 쓰이는 방법은 아래와 같습니다.</p>\n<!-- prettier-ignore -->\n<table>\n<thead>\n<tr>\n<th>방법</th>\n<th>장점</th>\n<th>단점</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>JSON.stringify() &#x26; JSON.parse()</td>\n<td>간단하고 빠르게 깊은 복사를 할 수 있습니다.</td>\n<td>Infinity, Functions, Date, RegExp 등의 유형은 유실됩니다.</td>\n</tr>\n<tr>\n<td>Spread syntax</td>\n<td>가장 간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Object.assign()</td>\n<td>간단하게 객체를 얕게 복사합니다.</td>\n<td>중첩된 객체는 깊게 복사하지 못합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Copy</td>\n<td>Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>순환 참조가 있는 객체를 받을 경우 무한 루프에 빠지게 됩니다. 직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Recursive Deep Clone with WeakMap Caching</td>\n<td>순환 참조가 있는 객체도 지원하며 Infinity, Functions, Date, RegExp도 깊게 복사합니다.</td>\n<td>직접 작성한 함수이므로 객체(ArrayBuffer, DataView…)복사 로직 직접 구현 및 다양한 테스트 필요합니다.</td>\n</tr>\n<tr>\n<td>Lodash - cloneDeep()</td>\n<td>모든 데이터 형식에 대해 깊게 복사합니다.</td>\n<td>외부 종속성이 추가됩니다.</td>\n</tr>\n</tbody>\n</table>\n<p>각 함수를 테스트하기에 앞서 <code class=\"language-text\">person</code> 이라는 객체를 생성해두겠습니다. 앞으로 이 객체를 이용하여 모든\n함수 테스트를 진행할 것입니다.</p>\n<h3 id=\"set-person-object\" style=\"position:relative;\"><a href=\"#set-person-object\" aria-label=\"set person object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Set Person Object</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> person <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'ben'</span><span class=\"token punctuation\">,</span>\n  age<span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n  address<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    city<span class=\"token operator\">:</span> <span class=\"token string\">'seoul'</span><span class=\"token punctuation\">,</span>\n    country<span class=\"token operator\">:</span> <span class=\"token string\">'korea'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">getAge</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  birth<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  life<span class=\"token operator\">:</span> <span class=\"token number\">Infinity</span><span class=\"token punctuation\">,</span>\n  regT<span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[a-z0-9](\\.|\\+|\\-?[a-z0-9]){1,39}@test\\.com$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">gm</span></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"jsonstringify--jsonparse\" style=\"position:relative;\"><a href=\"#jsonstringify--jsonparse\" aria-label=\"jsonstringify  jsonparse permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSON.stringify() &#x26; JSON.parse()</h3>\n<p><code class=\"language-text\">JSON.stringify</code> 함수가 객체를 JSON 문자열로 변환합니다. (원본 객체에 대한 참조가 없어집니다) 그리고\n<code class=\"language-text\">JSON.parse</code> 를 이용해 객체를 반환합니다.</p>\n<p>이렇게 이 두 가지 함수를 이용하여 간단하게 객체의 깊은 복사본을 만들 수 있습니다. 이제 복사된 객체가\n변경되어도 원본 객체는 그대로 유지됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> deepCopyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n\ndeepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>deepCopyPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span></code></pre></div>\n<p>이 방법을 사용할 때 꼭 알아둬야 할 사항들이 있습니다. <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code>\n<code class=\"language-text\">functions</code>, <code class=\"language-text\">RegExp</code>, <code class=\"language-text\">Date</code> 객체, <code class=\"language-text\">Infinity</code> 까지 복사하진 않습니다. 왜 그럴까요?</p>\n<ul>\n<li><code class=\"language-text\">Date</code> 객체는 JSON으로 변환하는 과정에서 <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a>형식에\n따라 문자열로\n<a href=\"https://stackoverflow.com/questions/10286204/what-is-the-right-json-date-format\">저장</a>됩니다. 따\n라서 원본 객체의 <code class=\"language-text\">Date</code> 객체는 <strong>복사 후 손실</strong>됩니다. <code class=\"language-text\">reviver</code> 기능을 사용하면 <code class=\"language-text\">Date</code> 객체를\n<a href=\"https://stackoverflow.com/a/9194413\">가져올 수 있긴 합니다</a>.</li>\n<li>함수는 데이터가 아니라 더 복잡한 의미를 가진 동작이며 JSON에서 지원되는 엔티티가 아니기 때문에\n<strong>복사 후 함수는 유지되지 않습니다</strong>.</li>\n<li>JSON에서 객체를 직렬화하고 역직렬화하는 방법의 특성으로 인해 느릴 것 같지만 대부분의 사람들이 이\n방식을 채택하여 사용하여\n<a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">V8이 적극적으로 최적화</a>했기에 <strong>빠르게</strong> 복사본\n을 얻을 수 있습니다.</li>\n</ul>\n<p>즉, 복사된 객체에서 아래와 같이 데이터를 사용하려 한다면 예와 에러가 발생합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">deepCopyPerson<span class=\"token punctuation\">.</span><span class=\"token function\">getAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.getAge is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>birth<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => TypeError: deepCopyPerson.birth.getDate is not a function</span>\ndeepCopyPerson<span class=\"token punctuation\">.</span>life<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => null</span></code></pre></div>\n<p>따라서 이 방법은 객체 내에 위와 같은 데이터가 없을 경우에 사용하면 됩니다.</p>\n<h3 id=\"spread-syntax\" style=\"position:relative;\"><a href=\"#spread-syntax\" aria-label=\"spread syntax permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spread syntax</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>obj <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<h3 id=\"objectassign\" style=\"position:relative;\"><a href=\"#objectassign\" aria-label=\"objectassign permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.assign()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> copyObj <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copyPerson <span class=\"token operator\">=</span> <span class=\"token function\">copyObj</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copyPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p><code class=\"language-text\">Spead</code> 연산자나 <code class=\"language-text\">Object.assign</code> 은 최상위 속성을 복사합니다. 하지만 객체로서의 속성은 얕은 복사 후\n에 참조로 복사되므로 원본 객체와 복사된 객체 간에 공유됩니다.\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#warning_for_deep_clone\">MDN: Object.assign()</a>을\n이용한 예시를 코드로 들어보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// 중첩된 객체를 포함하는 복잡한 person 객체 전달</span>\n<span class=\"token comment\">// 중첩된 객체 내의 속성을 변경할 때마다 원본 객체인 person의 동일한 속성도 변합니다</span>\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony', 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">,</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan', 'busan'</span></code></pre></div>\n<p>원래 객체의 <code class=\"language-text\">name</code> 속성은 그대로 유지 되었지만, <code class=\"language-text\">city</code> 속성은 재할당 작업으로 인해 변경되었습니다.\n(Spread syntax 도 마찬가지) 그래도 JSON 방식에 비해 다른 점은 <code class=\"language-text\">functions</code>, <code class=\"language-text\">rRegExp</code>, <code class=\"language-text\">Date</code> 객체,\n<code class=\"language-text\">Infinity</code> 까지 복사된다는 점입니다.</p>\n<p>따라서 중첩된 객체 속성이 필요하지 않은 경우에는 좋은 복사 방법입니다.</p>\n<h3 id=\"recursive-deep-clone-object\" style=\"position:relative;\"><a href=\"#recursive-deep-clone-object\" aria-label=\"recursive deep clone object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recursive Deep Clone Object</h3>\n<p>앞에서 다뤘던 문제(JS 내장 함수 및 함수가 손실되는 것)를 해결하며 <strong>깊은 복사</strong>를 실현하는 함수를\n만들어 보겠습니다. 복사를 진행하다가 객체를 만나면 함수를 <strong>재귀적으로</strong> 실행해 깊은 복사를 실현하면\n됩니다.</p>\n<p>regExp 와 Date 객체를 복사하는 건 Lodash의 코드를 참고하여 작성했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> value <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> cloneRegExp <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>regExp<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> RegExp <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> reFlags <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w*$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">regExp</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">,</span> reFlags<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>regExp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  result<span class=\"token punctuation\">.</span>lastIndex <span class=\"token operator\">=</span> regExp<span class=\"token punctuation\">.</span>lastIndex<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> getTag <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span> <span class=\"token operator\">?</span> <span class=\"token string\">'[object Undefined]'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'[object Null]'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * `Set`, `Map`, `Boolean`, `Date`, `Number`, `String`, `RegExp` 태그가 있는 값만 복사를 진행합니다.\n */</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneByTag</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> tag<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Boolean]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Date]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token operator\">+</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Number]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object String]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Set]'</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object Map]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ctor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'[object RegExp]'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">cloneRegExp</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isPrototype <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> object<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> Ctor <span class=\"token operator\">=</span> value <span class=\"token operator\">&amp;&amp;</span> value<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> proto <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> Ctor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> Ctor<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> proto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initCloneObject</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">typeof</span> obj<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token function\">isPrototype</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">?</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">getPrototypeOf</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 객체 생성</span>\n    <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> initCloneArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">any</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> length <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> array<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">array</span><span class=\"token punctuation\">.</span><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n    length <span class=\"token operator\">&amp;&amp;</span>\n    <span class=\"token keyword\">typeof</span> array<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span> <span class=\"token operator\">&amp;&amp;</span>\n    Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">,</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result<span class=\"token punctuation\">.</span>index <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">;</span>\n    result<span class=\"token punctuation\">.</span>input <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> obj <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span> <span class=\"token operator\">&amp;&amp;</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\"><span class=\"token builtin\">Function</span></span> <span class=\"token operator\">?</span> <span class=\"token function-variable function\">obj</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n\ncopiedPerson<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'tony'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city <span class=\"token operator\">=</span> <span class=\"token string\">'busan'</span><span class=\"token punctuation\">;</span>\ncopiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode <span class=\"token operator\">=</span> <span class=\"token string\">'12345'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'ben'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'tony'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'seoul'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>city<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 'busan'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => undefined</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>zipCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => '12345'</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>copiedPerson<span class=\"token punctuation\">.</span>regT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => lastIndex: 0</span>\ndotAll<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nflags<span class=\"token operator\">:</span> <span class=\"token string\">'gm'</span><span class=\"token punctuation\">;</span>\nglobal<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nhasIndices<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nignoreCase<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nmultiline<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nsource<span class=\"token operator\">:</span> <span class=\"token string\">'^[a-z0-9](\\\\.|\\\\+|\\\\-?[a-z0-9]){1,39}@test\\\\.com$'</span><span class=\"token punctuation\">;</span>\nsticky<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nunicode<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>중요한 것을 살펴보자면 <code class=\"language-text\">typeof</code> 가 아닌 <code class=\"language-text\">toString</code> 메소드를 사용했습니다.</p>\n<p>이 둘의 가장 큰 차이점은 <code class=\"language-text\">toString</code> 은 메소드이기 때문에 오버라이딩이 가능한 반면, <code class=\"language-text\">typeof</code> 는 연산\n자로 분류되기에 오버라이드가 불가능합니다. 즉, <code class=\"language-text\">typeof</code> 를 사용해서는 <strong>반환되는 결과를 조작하는 게\n불가능</strong>하기에 <code class=\"language-text\">toString</code> 을 타입 체크로 사용하여 추가적인 문자열 파싱을 진행했습니다.</p>\n<p>그래서 <strong>toStringTag</strong> 를 활용하여 <code class=\"language-text\">Map</code>, <code class=\"language-text\">Set</code>, <code class=\"language-text\">Boolean</code>, <code class=\"language-text\">Date</code>, <code class=\"language-text\">Number</code>, <code class=\"language-text\">String</code>, <code class=\"language-text\">RegExp</code> 태\n그가 있는 값만 복사를 진행합니다.</p>\n<p>만약 깊게 복사해야 할 객체가 지금 제작한 함수로 커버할 수 있는 범위라면 이대로 쓰는 게 가장 좋습니다\n.</p>\n<p>그리고 이 코드에는 <strong>몇 가지 문제</strong>가 있습니다.</p>\n<p>첫 번재는 바이너리 데이터 관련 객체(<code class=\"language-text\">TypedArray</code>, <code class=\"language-text\">ArrayBuffer</code>, <code class=\"language-text\">DataView</code>…) 객체는 깊게 복사하지\n않습니다. 저는 굳이 <code class=\"language-text\">ArrayBuffer</code> 객체까지 깊게 복사할 필요가 없어 추가해주진 않았습니다만, 이\n부분에 대한 태그 케이스를 추가하여 <code class=\"language-text\">ArrayBuffer</code>를 복사하는 로직을 작성해주면 바이너리 관련 객체도\n깊게 복사 할 수 있겠습니다.</p>\n<p>두 번째는 순환 참조가 있는 객체를 복사해야 할 경우에는 무한하게 서로가 서로를 호출해서 호출 스택\n(call stack)이 터져버리는 에러를 마주하게 됩니다. 이 문제를 해결하기 위해선 무한 루프에 빠지지\n않도록 이전의 참조 맵을 유지하면서 전달 받은 객체를 통해 반복하여 복사하도록 해주면 됩니다. 객체가\n맵에 저장되어 있다면 복사본이 반복되지 않고 그대로 반환되도록 하는 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> deepCopyObject <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> hash <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WeakMap<span class=\"token operator\">&lt;</span>object<span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> result<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 오브렉트 유형이 아닌 원시값이라면 그대로 반환합니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 순환 참조</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hash<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> hash<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> isFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Object]'</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>isFunc <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> isFunc <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> <span class=\"token function\">initCloneObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Array]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneArray</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFunc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    result <span class=\"token operator\">=</span> <span class=\"token function\">initCloneByTag</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// hash에 복사할 객체를 저장합니다.</span>\n  hash<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>value <span class=\"token keyword\">as</span> object<span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Map]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">===</span> <span class=\"token string\">'[object Set]'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// @ts-ignore</span>\n    value<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>subValue<span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 열거 가능한 자체 속성을 재귀적으로 복제 및 할당합니다.</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> 순환참조가_있는_객체를_완전히_복사하는지_검사 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> object <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    foo<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> b<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> c<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> d<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    bar<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d <span class=\"token operator\">=</span> object<span class=\"token punctuation\">;</span>\n  object<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> object<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> copied <span class=\"token operator\">=</span> <span class=\"token function\">deepCopyObject</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> copied<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>b <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">!==</span> object <span class=\"token operator\">&amp;&amp;</span> copied <span class=\"token operator\">===</span> copied<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>d<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">순환참조가_있는_객체를_완전히_복사하는지_검사</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => true</span></code></pre></div>\n<p>순환 참조가 있는 객체를 완전히 복사하는지 검사한 결과도 <code class=\"language-text\">true</code>로 잘 나옵니다.</p>\n<p>이쯤되면 궁금해집니다. 왜 굳이 이런 번거로움을 감수하고도 <strong>깊은 복사</strong>를 생성한다는 것이 왜 중요할\n까요? 우선 깊은 복사와 얕은 복사가 뭔지 이해할 필요가 있습니다.</p>\n<p>얕은 복사는 두 객체가 동일한 참조를 공유하기에 원본 또는 복사본이 변경되면 예상치 못한 객체가 변경되\n어 디버깅이 어려워집니다. 반면, 깊은 복사는 복사된 객체의 속성이 원본 객체와 동일한 참조를 공유하지\n않는 복사본을 뜻합니다.</p>\n<p>즉, <strong>원본이나 복사본을 변경할 때 다른 객체를 변경하지 않도록 보장</strong>받을 수 있습니다. 실수를\n방지하는 것이죠.</p>\n<h3 id=\"lodash의-clonedeep\" style=\"position:relative;\"><a href=\"#lodash%EC%9D%98-clonedeep\" aria-label=\"lodash의 clonedeep permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lodash의 cloneDeep()</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> _ <span class=\"token keyword\">from</span> <span class=\"token string\">'lodash'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> copiedPerson <span class=\"token operator\">=</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">cloneDeep</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>address <span class=\"token operator\">===</span> copiedPerson<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => false</span></code></pre></div>\n<p>모든 값, 속성, 그리고 중첩된 객체까지 모두 달라 <code class=\"language-text\">false</code> 로 나타납니다. 그러나 외부 종속성이 추가되는\n것은 피할 수 없습니다.</p>\n<h2 id=\"객체-복사-메소드별-벤치마크\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC-%EB%A9%94%EC%86%8C%EB%93%9C%EB%B3%84-%EB%B2%A4%EC%B9%98%EB%A7%88%ED%81%AC\" aria-label=\"객체 복사 메소드별 벤치마크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사 메소드별 벤치마크</h2>\n<p><a href=\"https://jsben.ch/zEKYJ\">각 메소드별 벤치마크 결과 보러가기</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 924px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2ElEQVR42m3O3W/SUBjH8fMPGF4KPedw+n5KSykt7xQItNABBSnZsmS6GUcgZk4ng6gx8cIb44UX3njpnf+qnQiyZcnn4vd8rx5QKeTKBpUxQ0lKwQmBje/x6TuH5b90TMhAIHROhfBWmt7I4Tt5smC8S8abR5LeHPtz2L8bzAPuJdNfYrMJsHfBnnxmww/s7GNivEmM11uxYM3NNmi6iQfrffwnWMWOv8DKAIjemXj8XghX4uw21V8m3DnTW2yRwRL5y+TuPISNBs8LADkhHF5Bf8EOruBkhcNNKrhJDt9EuPE1Cq4Tf/cDsORzkgr44ZK7+EbOv4qT16pV1SstXreRYkAln7VrillB1MyohftMbNQJzQGuekS856R7xjenUr4sF2oRajfUoiPkSpxmZ7LWoziJAjx+y85/wpc/xN45rfVoc6Q4Q6UxkGq+0R4ptT5rtlChfV8LWR1CDaDUj/ThC6lzArUSljUk61tY1omaj2So8Zg8JymAGa9ii1/xZ99Zy4VWB9nuFrS6WjuQ6oNo7ONOFxX7RDUBLbf1zlPd8a2KYxSrRM7uiWqOp/phOaBxogSYyfrJq9/M7BMpurjsw6K3xdqu1p7IzigdfbGLOy5b8ola+APR6YkiFXODxwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"객체 복사 각 메소드별 벤치마크 결과\"\n        title=\"\"\n        src=\"/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png\"\n        srcset=\"/static/1672710200016.31870475063/63868/copy-object-benchmark.png 250w,\n/static/1672710200016.31870475063/0b533/copy-object-benchmark.png 500w,\n/static/1672710200016.31870475063/9a1cf/copy-object-benchmark.png 924w\"\n        sizes=\"(max-width: 924px) 100vw, 924px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<ul>\n<li>순환 객체에 대해 지원하지 않아도 되고 <code class=\"language-text\">Date</code>, <code class=\"language-text\">Map</code> 등의 유형을 보존할 필요가 없다면\n<code class=\"language-text\">JSON.parse(JSON.stringify())</code>를 사용하거나 위에서 직접 구현한 <code class=\"language-text\">Recursive Deep Clone Object</code> 처럼\n구현해 사용하면 되겠습니다.</li>\n<li>그러나 순환 객체에 대해 지원해야 하고 여러 유형을 보존해야 한다면 lodash의 <code class=\"language-text\">cloneDeep()</code> 이나 위에\n서 구현한 <code class=\"language-text\">deepCopyObject</code> 함수를 사용하면 되겠습니다. (물론 <code class=\"language-text\">cloneDeep</code> 과 달리 구현한\n<code class=\"language-text\">deepCopyObject</code> 는 모든 유형을 지원하진 않습니다.)</li>\n</ul>\n<p>객체를 복사하는 데에는 많은 방법이 있습니다. 정답은 없으므로 상황에 따라 가장 적합한 방법을 선택하여\n사용하면 되겠습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<p><a href=\"https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json\">https://code.tutsplus.com/articles/the-best-way-to-deep-copy-an-object-in-javascript--cms-39655#json</a></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag</a></p>\n<p><a href=\"https://medium.com/%EC%98%A4%EB%8A%98%EC%9D%98-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%97%90%EC%84%9C-object-object-%EA%B0%80-%EB%8C%80%EC%B2%B4-%EB%AD%98%EA%B9%8C-fe55b754e709\">https://medium.com/오늘의-프로그래밍/자바스크립트에서-object-object-가-대체-뭘까-fe55b754e709</a></p>\n<p><a href=\"https://github.com/lodash/lodash\">https://github.com/lodash/lodash</a></p>\n<p><a href=\"https://erdem.pl/2019/08/can-json-parse-be-performance-improvement\">https://erdem.pl/2019/08/can-json-parse-be-performance-improvement</a></p>\n<p><a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\">https://v8.dev/blog/cost-of-javascript-2019#json</a></p>\n<p><a href=\"https://jsben.ch/1m5Gm\">https://jsben.ch/1m5Gm</a></p>"
    }
  },
  {
    "route": "https://lazy-dev.netlify.app/javascript/why-is-extending-standard-built-in-objects-a-bad-practice/",
    "data": {
      "%EB%82%B4%EC%9E%A5-%EA%B0%9D%EC%B2%B4-%ED%99%95%EC%9E%A5%EC%9D%98-%EB%A7%A4%EB%A0%A5#내장 객체 확장의 매력": "<h2 id=\"내장-객체-확장의-매력\" style=\"position:relative;\"><a href=\"#%EB%82%B4%EC%9E%A5-%EA%B0%9D%EC%B2%B4-%ED%99%95%EC%9E%A5%EC%9D%98-%EB%A7%A4%EB%A0%A5\" aria-label=\"내장 객체 확장의 매력 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>내장 객체 확장의 매력</strong></h2>\n<p>JS로 작업할 때 <code class=\"language-text\">Array.prototype</code>과 같은 내장 객체에 직접 함수를 추가하려고 할 수도 있습니다. 이는배\n열 인스턴스에서 직접 추가한 함수를 호출할 수 있기 때문에 좋아 보일 수 있습니다. 그러나 이렇게 하면다\n른 개발자와 협업하거나 라이브러리를 사용할 때 충돌이 발생하고 코드를 이해하기 어려워질 수있습니다.</p>\n<p>들어가기 전에 <code class=\"language-text\">Array.prototype</code> 과 <code class=\"language-text\">Array 생성자</code> 에 함수를 추가할 때 차이점에 대해 살펴보겠습니다.</p>\n<h3 id=\"두-방법의-차이점\" style=\"position:relative;\"><a href=\"#%EB%91%90-%EB%B0%A9%EB%B2%95%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90\" aria-label=\"두 방법의 차이점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>두 방법의 차이점</h3>\n<p><code class=\"language-text\">Array.prototype</code> 을 사용하여 Array 객체에 함수를 추가하면 Array 객체의 프로토타입이 확장됩니다. 이\n는 배열의 모든 인스턴스가 추가된 함수에 액세스할 수 있음을 의미합니다. 반면 <code class=\"language-text\">Array.replace = …</code> 처럼\n사용하는 경우에는 프로토타입이 아닌 Array 생성자 자체에 정적 함수를 추가하게 됩니다.</p>\n<p>이 두 방법의 차이점에 대해 간단한 예시와 함께 살펴보도록 하겠습니다.</p>\n<ol>\n<li>\n<p>Array.prototype</p>\n<ul>\n<li><code class=\"language-text\">Array.prototype</code> 에 함수를 추가하면 모든 <strong>Array 인스턴스에서</strong> 함수를 사용할 수 있습니다.</li>\n<li>이는 모든 Array 인스턴스가 <code class=\"language-text\">Array.prototype</code> 에서 상속되기 때문입니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">myFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'hello world'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: 'hello world'</span></code></pre></div>\n</li>\n<li>\n<p>Array constructor</p>\n<ul>\n<li>Array 생성자에 직접 함수를 추가하면 정적 함수가 됩니다.</li>\n<li>정적 함수는 배열 인스턴스의 일부가 아니라 생성자 자체의 일부입니다.</li>\n<li>이는 Array의 인스턴스가 아닌 <strong>Array 생성자에서만</strong> 액세스할 수 있음을 의미합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">myFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'hello world'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: TypeError: arr.myFunction is not a function</span>\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: 'hello world'</span></code></pre></div>\n</li>\n</ol>\n<p>이제 위 방법으로 확장하는 게 왜 좋지 않은지 살펴보도록 하겠습니다.</p>\n<h2 id=\"문제가-발생할-수-있는-상황\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%83%81%ED%99%A9\" aria-label=\"문제가 발생할 수 있는 상황 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제가 발생할 수 있는 상황</h2>\n<p><code class=\"language-text\">Array.prototype</code>과 같은 내장 객체를 확장하는 것은 일반적으로 좋은 방법이 아닙니다. 위에서말했다시피\n프로토타입을 수정하면 충돌이 발생할 수 있으며 코드를 이해하고 유지보수하기가 더 어려워질수 있기 때문\n입니다.</p>\n<p>이제 내장 객체 확장의 잠재적인 위험을 보여주는 예를 살펴보겠습니다. 두 개의 JavaScript 라이브러리(라\n이브러리 A 및 라이브러리 B)를 사용하는 웹 애플리케이션을 개발하고 있다고 가정해보겠습니다.</p>\n<p>각 라이브러리의 구현 코드는 아래와 같습니다.</p>\n<ul>\n<li>\n<p>라이브러리 A</p>\n<ul>\n<li>배열에서 <code class=\"language-text\">oldValue</code>의 <strong>첫 번째 항목만</strong> <code class=\"language-text\">newValue</code>로 바꿉니다. 중첩된 배열에서는 교체 작업을수\n행하지 않습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// Library A</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">declare</span> global <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token generic-function\"><span class=\"token function\">replace</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span> <span class=\"token keyword\">extends</span> <span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">replace</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(\n  this: NestedArray&lt;T>,\n  oldValue: T,\n  newValue: T,\n): NestedArray&lt;T> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token plain-text\">;\n\nexport </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">;</span></code></pre></div>\n</li>\n<li>\n<p>라이브러리 B</p>\n<ul>\n<li>배열에서 <code class=\"language-text\">oldValue</code>의 <strong>모든 항목</strong>을 <code class=\"language-text\">newValue</code>로 바꾸고 중첩 배열을 재귀적으로 처리하여 동일한\n교체 작업을 수행합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// Library B</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">declare</span> global <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token generic-function\"><span class=\"token function\">replace</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span> <span class=\"token keyword\">extends</span> <span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">replace</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(\n  this: NestedArray&lt;T>,\n  oldValue: T,\n  newValue: T,\n): NestedArray&lt;T> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>item <span class=\"token keyword\">as</span> <span class=\"token builtin\">unknown</span> <span class=\"token keyword\">as</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>oldValue<span class=\"token punctuation\">,</span> newValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item <span class=\"token operator\">===</span> oldValue <span class=\"token operator\">?</span> newValue <span class=\"token operator\">:</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token plain-text\">;\n\nexport </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">;</span></code></pre></div>\n</li>\n</ul>\n<p>요약하면 <code class=\"language-text\">library-a</code>의 <code class=\"language-text\">replace</code>는 배열에서 처음 나타나는 값을 바꾸는 데 사용되는 반면,\n<code class=\"language-text\">library-b</code>의 <code class=\"language-text\">replace</code> 는 중첩 배열을 포함하여 모든 값을 바꾸는 데 사용됩니다.</p>\n<p>이처럼 두 라이브러리 모두 <code class=\"language-text\">replace</code> 로 <strong>이름은 같지만 구현과 목적이 다른 <code class=\"language-text\">replace</code> 함수를추가하여</strong>\n<strong><code class=\"language-text\">Array.prototype</code>을 확장</strong>하고 있습니다. 아래 코드를 보며 이처럼 프로토타입을 수정하면생길 수 있는\n문제점을 살펴 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token string\">'library-b'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-a'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [1, [3, 1]]이 출력되길 원합니다 (library-a의 replace 함수가 실행됨)</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [1, [2, 1]]</span>\n\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [10, '1', '1', '1']이 출력되길 원합니다</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [10, '1', '2', '1']</span>\n\n<span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-a'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-b'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [1, [3, 1]]이 출력되길 원합니다 (library-b의 replace 함수가 실행됨)</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [1, [3, 1]]</span>\n\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [10, '1', '1', '1']이 출력되길 원합니다</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [10, '1', '1', '1']</span></code></pre></div>\n<p><code class=\"language-text\">library-a</code>와 <code class=\"language-text\">library-b</code>를 모두 가져오는 경우 가져오는 순서에 따라 결과값이 변경되는 것을 확인할 수\n있습니다. 첫 번째 경우는 <code class=\"language-text\">library-b</code> 다음에 <code class=\"language-text\">library-a</code> 를 가져오므로 <code class=\"language-text\">library-a</code> 의 함수가\n<code class=\"language-text\">library-b</code> 의 <code class=\"language-text\">replace</code> 함수를 덮어씁니다. 이는 두 라이브러리가 동일한 전역 <code class=\"language-text\">Array.prototype</code> 객체\n를 수정하기 때문입니다.</p>\n<p>이처럼 두 라이브러리를 모두 사용하는 상황일 경우 <strong>충돌이 발생</strong>하여 한 구현이 다른 구현을 덮어쓰게\n되어 예기치 않은 동작이 발생하고 코드를 이해하고 디버깅하기 어려울 수 있습니다.</p>\n<h2 id=\"더-안전한-대안-standalone-utility-function\" style=\"position:relative;\"><a href=\"#%EB%8D%94-%EC%95%88%EC%A0%84%ED%95%9C-%EB%8C%80%EC%95%88-standalone-utility-function\" aria-label=\"더 안전한 대안 standalone utility function permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>더 안전한 대안: Standalone Utility Function</strong></h2>\n<p>내장 객체를 확장하는 대신 코드베이스 전체에서 가져오고 사용할 수 있는 유틸리티 함수를 만드는 것이좋\n습니다. 이 접근 방식은 내장된 Array 객체를 수정하지 않고 다른 라이브러리나 개발자 코드와의잠재적인충\n돌을 방지하기 때문에 더 안전하고 유지보수가 쉽습니다.</p>\n<p>예를 들어, 유틸리티 함수를 만들어 <code class=\"language-text\">Array.prototype</code>을 수정하지 않고 배열의 특정 항목을 교체하는것입\n니다. 아래 코드는 위 <code class=\"language-text\">Array.prototype</code> 을 확장하던 코드를 유틸리티 함수로 구현한 코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// utils/array.ts</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> replace <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> replaceAll <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">,</span> oldValue<span class=\"token punctuation\">,</span> newValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> replace<span class=\"token punctuation\">,</span> replaceAll <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이 유틸리티 함수들을 사용하기 위해 가져옵니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// main.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> replace<span class=\"token punctuation\">,</span> replaceAll <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./utils/array'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, [2, 1]]</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, [3, 1]]</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [10, '3', '2', '1']</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [10, '3', '3', '1']</span></code></pre></div>\n<p>이렇게 하면 유틸리티 함수가 <code class=\"language-text\">Array.prototype</code> 을 수정하지 않으며 필요에 따라 가져와 사용할 수있습니\n다.</p>\n<h2 id=\"objectdefineproperty를-사용하여-객체를-보다-안전하게-확장\" style=\"position:relative;\"><a href=\"#objectdefineproperty%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EB%B3%B4%EB%8B%A4-%EC%95%88%EC%A0%84%ED%95%98%EA%B2%8C-%ED%99%95%EC%9E%A5\" aria-label=\"objectdefineproperty를 사용하여 객체를 보다 안전하게 확장 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.defineProperty()를 사용하여 객체를 보다 안전하게 확장</h2>\n<p>그래도 배열 인스턴스에서 호출해 사용하고 싶을 수도 있겠죠. 이럴 땐 <code class=\"language-text\">Object.defineProperty()</code>을사용하\n여 더 안전하게 추가할 수 있습니다. <code class=\"language-text\">Object.defineProperty()</code> 정적 함수는 객체에 새로운 속성을직접 정\n의하거나 이미 존재하는 속성을 수정한 후, 해당 객체를 반환합니다. 객체에 새 속성을 정의하고속성을 지\n정하며 실수로 덮어쓰거나 하는 충돌을 방지할 수 있습니다.</p>\n<p>아래 코드는 <code class=\"language-text\">Object.defineProperty()</code> 을 사용해 <code class=\"language-text\">Array.prototype</code> 에 <code class=\"language-text\">replace</code> 함수를 추가하는 예시\n코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  Object<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">defineProperty</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">unknown</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">,</span> <span class=\"token string\">'replace'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">value</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    configurable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// `true`로 설정하면 나중에 속성을 삭제하거나 변경할 수 있습니다.</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">555</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, 555, 3, 2]</span></code></pre></div>\n<p><code class=\"language-text\">configurable</code> 속성의 기본값은 false입니다. 따라서 정의된 속성을 재정의하려고 하면 \"TypeError:\nCannot redefine property: replace\" 오류가 발생합니다 . 이 오류는 JavaScript가 속성의 재정의를허용하\n지 않기 때문에 발생합니다.</p>\n<p>이 오류를 방지하려면 먼저 속성이 이미 존재하는지 확인하면 됩니다. <code class=\"language-text\">replace</code> 함수가\n<code class=\"language-text\">Array.prototype</code>에 이미 존재하는지 확인하는 것이죠. 존재하지 않는 경우 함수가 정의됩니다. 또한\n<code class=\"language-text\">configurable</code> 속성을 true로 설정하여 속성을 다시 정의할 수 있도록 했습니다. 자세한 건\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters\">mdn</a>에\n서확인할 수 있습니다.</p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>결론</strong></h2>\n<p>개발자로서 JavaScript에서 표준 내장 객체 확장과 관련된 잠재적인 위험을 인지하는 게 중요합니다. 유틸\n리티 함수와 보다 안전한 <code class=\"language-text\">Object.defineProperty()</code> 함수를 사용하면 충돌을 방지하고 코드유지보수성을향\n상시키며 동료와 보다 효과적으로 협업할 수 있습니다. 따라서 다음 번에 내장된프로토타입을 수정하고싶을\n때는 다시 한 번 생각해 보고 더 안전한 대안을 고려해 보는 것을추천드립니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters</a></li>\n</ul>",
      "%EB%91%90-%EB%B0%A9%EB%B2%95%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90#두 방법의 차이점": "<h2 id=\"내장-객체-확장의-매력\" style=\"position:relative;\"><a href=\"#%EB%82%B4%EC%9E%A5-%EA%B0%9D%EC%B2%B4-%ED%99%95%EC%9E%A5%EC%9D%98-%EB%A7%A4%EB%A0%A5\" aria-label=\"내장 객체 확장의 매력 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>내장 객체 확장의 매력</strong></h2>\n<p>JS로 작업할 때 <code class=\"language-text\">Array.prototype</code>과 같은 내장 객체에 직접 함수를 추가하려고 할 수도 있습니다. 이는배\n열 인스턴스에서 직접 추가한 함수를 호출할 수 있기 때문에 좋아 보일 수 있습니다. 그러나 이렇게 하면다\n른 개발자와 협업하거나 라이브러리를 사용할 때 충돌이 발생하고 코드를 이해하기 어려워질 수있습니다.</p>\n<p>들어가기 전에 <code class=\"language-text\">Array.prototype</code> 과 <code class=\"language-text\">Array 생성자</code> 에 함수를 추가할 때 차이점에 대해 살펴보겠습니다.</p>\n<h3 id=\"두-방법의-차이점\" style=\"position:relative;\"><a href=\"#%EB%91%90-%EB%B0%A9%EB%B2%95%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90\" aria-label=\"두 방법의 차이점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>두 방법의 차이점</h3>\n<p><code class=\"language-text\">Array.prototype</code> 을 사용하여 Array 객체에 함수를 추가하면 Array 객체의 프로토타입이 확장됩니다. 이\n는 배열의 모든 인스턴스가 추가된 함수에 액세스할 수 있음을 의미합니다. 반면 <code class=\"language-text\">Array.replace = …</code> 처럼\n사용하는 경우에는 프로토타입이 아닌 Array 생성자 자체에 정적 함수를 추가하게 됩니다.</p>\n<p>이 두 방법의 차이점에 대해 간단한 예시와 함께 살펴보도록 하겠습니다.</p>\n<ol>\n<li>\n<p>Array.prototype</p>\n<ul>\n<li><code class=\"language-text\">Array.prototype</code> 에 함수를 추가하면 모든 <strong>Array 인스턴스에서</strong> 함수를 사용할 수 있습니다.</li>\n<li>이는 모든 Array 인스턴스가 <code class=\"language-text\">Array.prototype</code> 에서 상속되기 때문입니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">myFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'hello world'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: 'hello world'</span></code></pre></div>\n</li>\n<li>\n<p>Array constructor</p>\n<ul>\n<li>Array 생성자에 직접 함수를 추가하면 정적 함수가 됩니다.</li>\n<li>정적 함수는 배열 인스턴스의 일부가 아니라 생성자 자체의 일부입니다.</li>\n<li>이는 Array의 인스턴스가 아닌 <strong>Array 생성자에서만</strong> 액세스할 수 있음을 의미합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">myFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'hello world'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: TypeError: arr.myFunction is not a function</span>\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: 'hello world'</span></code></pre></div>\n</li>\n</ol>\n<p>이제 위 방법으로 확장하는 게 왜 좋지 않은지 살펴보도록 하겠습니다.</p>\n<h2 id=\"문제가-발생할-수-있는-상황\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%83%81%ED%99%A9\" aria-label=\"문제가 발생할 수 있는 상황 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제가 발생할 수 있는 상황</h2>\n<p><code class=\"language-text\">Array.prototype</code>과 같은 내장 객체를 확장하는 것은 일반적으로 좋은 방법이 아닙니다. 위에서말했다시피\n프로토타입을 수정하면 충돌이 발생할 수 있으며 코드를 이해하고 유지보수하기가 더 어려워질수 있기 때문\n입니다.</p>\n<p>이제 내장 객체 확장의 잠재적인 위험을 보여주는 예를 살펴보겠습니다. 두 개의 JavaScript 라이브러리(라\n이브러리 A 및 라이브러리 B)를 사용하는 웹 애플리케이션을 개발하고 있다고 가정해보겠습니다.</p>\n<p>각 라이브러리의 구현 코드는 아래와 같습니다.</p>\n<ul>\n<li>\n<p>라이브러리 A</p>\n<ul>\n<li>배열에서 <code class=\"language-text\">oldValue</code>의 <strong>첫 번째 항목만</strong> <code class=\"language-text\">newValue</code>로 바꿉니다. 중첩된 배열에서는 교체 작업을수\n행하지 않습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// Library A</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">declare</span> global <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token generic-function\"><span class=\"token function\">replace</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span> <span class=\"token keyword\">extends</span> <span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">replace</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(\n  this: NestedArray&lt;T>,\n  oldValue: T,\n  newValue: T,\n): NestedArray&lt;T> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token plain-text\">;\n\nexport </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">;</span></code></pre></div>\n</li>\n<li>\n<p>라이브러리 B</p>\n<ul>\n<li>배열에서 <code class=\"language-text\">oldValue</code>의 <strong>모든 항목</strong>을 <code class=\"language-text\">newValue</code>로 바꾸고 중첩 배열을 재귀적으로 처리하여 동일한\n교체 작업을 수행합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// Library B</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">declare</span> global <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token generic-function\"><span class=\"token function\">replace</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span> <span class=\"token keyword\">extends</span> <span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">replace</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(\n  this: NestedArray&lt;T>,\n  oldValue: T,\n  newValue: T,\n): NestedArray&lt;T> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>item <span class=\"token keyword\">as</span> <span class=\"token builtin\">unknown</span> <span class=\"token keyword\">as</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>oldValue<span class=\"token punctuation\">,</span> newValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item <span class=\"token operator\">===</span> oldValue <span class=\"token operator\">?</span> newValue <span class=\"token operator\">:</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token plain-text\">;\n\nexport </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">;</span></code></pre></div>\n</li>\n</ul>\n<p>요약하면 <code class=\"language-text\">library-a</code>의 <code class=\"language-text\">replace</code>는 배열에서 처음 나타나는 값을 바꾸는 데 사용되는 반면,\n<code class=\"language-text\">library-b</code>의 <code class=\"language-text\">replace</code> 는 중첩 배열을 포함하여 모든 값을 바꾸는 데 사용됩니다.</p>\n<p>이처럼 두 라이브러리 모두 <code class=\"language-text\">replace</code> 로 <strong>이름은 같지만 구현과 목적이 다른 <code class=\"language-text\">replace</code> 함수를추가하여</strong>\n<strong><code class=\"language-text\">Array.prototype</code>을 확장</strong>하고 있습니다. 아래 코드를 보며 이처럼 프로토타입을 수정하면생길 수 있는\n문제점을 살펴 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token string\">'library-b'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-a'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [1, [3, 1]]이 출력되길 원합니다 (library-a의 replace 함수가 실행됨)</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [1, [2, 1]]</span>\n\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [10, '1', '1', '1']이 출력되길 원합니다</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [10, '1', '2', '1']</span>\n\n<span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-a'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-b'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [1, [3, 1]]이 출력되길 원합니다 (library-b의 replace 함수가 실행됨)</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [1, [3, 1]]</span>\n\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [10, '1', '1', '1']이 출력되길 원합니다</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [10, '1', '1', '1']</span></code></pre></div>\n<p><code class=\"language-text\">library-a</code>와 <code class=\"language-text\">library-b</code>를 모두 가져오는 경우 가져오는 순서에 따라 결과값이 변경되는 것을 확인할 수\n있습니다. 첫 번째 경우는 <code class=\"language-text\">library-b</code> 다음에 <code class=\"language-text\">library-a</code> 를 가져오므로 <code class=\"language-text\">library-a</code> 의 함수가\n<code class=\"language-text\">library-b</code> 의 <code class=\"language-text\">replace</code> 함수를 덮어씁니다. 이는 두 라이브러리가 동일한 전역 <code class=\"language-text\">Array.prototype</code> 객체\n를 수정하기 때문입니다.</p>\n<p>이처럼 두 라이브러리를 모두 사용하는 상황일 경우 <strong>충돌이 발생</strong>하여 한 구현이 다른 구현을 덮어쓰게\n되어 예기치 않은 동작이 발생하고 코드를 이해하고 디버깅하기 어려울 수 있습니다.</p>\n<h2 id=\"더-안전한-대안-standalone-utility-function\" style=\"position:relative;\"><a href=\"#%EB%8D%94-%EC%95%88%EC%A0%84%ED%95%9C-%EB%8C%80%EC%95%88-standalone-utility-function\" aria-label=\"더 안전한 대안 standalone utility function permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>더 안전한 대안: Standalone Utility Function</strong></h2>\n<p>내장 객체를 확장하는 대신 코드베이스 전체에서 가져오고 사용할 수 있는 유틸리티 함수를 만드는 것이좋\n습니다. 이 접근 방식은 내장된 Array 객체를 수정하지 않고 다른 라이브러리나 개발자 코드와의잠재적인충\n돌을 방지하기 때문에 더 안전하고 유지보수가 쉽습니다.</p>\n<p>예를 들어, 유틸리티 함수를 만들어 <code class=\"language-text\">Array.prototype</code>을 수정하지 않고 배열의 특정 항목을 교체하는것입\n니다. 아래 코드는 위 <code class=\"language-text\">Array.prototype</code> 을 확장하던 코드를 유틸리티 함수로 구현한 코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// utils/array.ts</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> replace <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> replaceAll <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">,</span> oldValue<span class=\"token punctuation\">,</span> newValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> replace<span class=\"token punctuation\">,</span> replaceAll <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이 유틸리티 함수들을 사용하기 위해 가져옵니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// main.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> replace<span class=\"token punctuation\">,</span> replaceAll <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./utils/array'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, [2, 1]]</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, [3, 1]]</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [10, '3', '2', '1']</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [10, '3', '3', '1']</span></code></pre></div>\n<p>이렇게 하면 유틸리티 함수가 <code class=\"language-text\">Array.prototype</code> 을 수정하지 않으며 필요에 따라 가져와 사용할 수있습니\n다.</p>\n<h2 id=\"objectdefineproperty를-사용하여-객체를-보다-안전하게-확장\" style=\"position:relative;\"><a href=\"#objectdefineproperty%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EB%B3%B4%EB%8B%A4-%EC%95%88%EC%A0%84%ED%95%98%EA%B2%8C-%ED%99%95%EC%9E%A5\" aria-label=\"objectdefineproperty를 사용하여 객체를 보다 안전하게 확장 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.defineProperty()를 사용하여 객체를 보다 안전하게 확장</h2>\n<p>그래도 배열 인스턴스에서 호출해 사용하고 싶을 수도 있겠죠. 이럴 땐 <code class=\"language-text\">Object.defineProperty()</code>을사용하\n여 더 안전하게 추가할 수 있습니다. <code class=\"language-text\">Object.defineProperty()</code> 정적 함수는 객체에 새로운 속성을직접 정\n의하거나 이미 존재하는 속성을 수정한 후, 해당 객체를 반환합니다. 객체에 새 속성을 정의하고속성을 지\n정하며 실수로 덮어쓰거나 하는 충돌을 방지할 수 있습니다.</p>\n<p>아래 코드는 <code class=\"language-text\">Object.defineProperty()</code> 을 사용해 <code class=\"language-text\">Array.prototype</code> 에 <code class=\"language-text\">replace</code> 함수를 추가하는 예시\n코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  Object<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">defineProperty</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">unknown</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">,</span> <span class=\"token string\">'replace'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">value</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    configurable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// `true`로 설정하면 나중에 속성을 삭제하거나 변경할 수 있습니다.</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">555</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, 555, 3, 2]</span></code></pre></div>\n<p><code class=\"language-text\">configurable</code> 속성의 기본값은 false입니다. 따라서 정의된 속성을 재정의하려고 하면 \"TypeError:\nCannot redefine property: replace\" 오류가 발생합니다 . 이 오류는 JavaScript가 속성의 재정의를허용하\n지 않기 때문에 발생합니다.</p>\n<p>이 오류를 방지하려면 먼저 속성이 이미 존재하는지 확인하면 됩니다. <code class=\"language-text\">replace</code> 함수가\n<code class=\"language-text\">Array.prototype</code>에 이미 존재하는지 확인하는 것이죠. 존재하지 않는 경우 함수가 정의됩니다. 또한\n<code class=\"language-text\">configurable</code> 속성을 true로 설정하여 속성을 다시 정의할 수 있도록 했습니다. 자세한 건\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters\">mdn</a>에\n서확인할 수 있습니다.</p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>결론</strong></h2>\n<p>개발자로서 JavaScript에서 표준 내장 객체 확장과 관련된 잠재적인 위험을 인지하는 게 중요합니다. 유틸\n리티 함수와 보다 안전한 <code class=\"language-text\">Object.defineProperty()</code> 함수를 사용하면 충돌을 방지하고 코드유지보수성을향\n상시키며 동료와 보다 효과적으로 협업할 수 있습니다. 따라서 다음 번에 내장된프로토타입을 수정하고싶을\n때는 다시 한 번 생각해 보고 더 안전한 대안을 고려해 보는 것을추천드립니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters</a></li>\n</ul>",
      "%EB%AC%B8%EC%A0%9C%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%83%81%ED%99%A9#문제가 발생할 수 있는 상황": "<h2 id=\"내장-객체-확장의-매력\" style=\"position:relative;\"><a href=\"#%EB%82%B4%EC%9E%A5-%EA%B0%9D%EC%B2%B4-%ED%99%95%EC%9E%A5%EC%9D%98-%EB%A7%A4%EB%A0%A5\" aria-label=\"내장 객체 확장의 매력 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>내장 객체 확장의 매력</strong></h2>\n<p>JS로 작업할 때 <code class=\"language-text\">Array.prototype</code>과 같은 내장 객체에 직접 함수를 추가하려고 할 수도 있습니다. 이는배\n열 인스턴스에서 직접 추가한 함수를 호출할 수 있기 때문에 좋아 보일 수 있습니다. 그러나 이렇게 하면다\n른 개발자와 협업하거나 라이브러리를 사용할 때 충돌이 발생하고 코드를 이해하기 어려워질 수있습니다.</p>\n<p>들어가기 전에 <code class=\"language-text\">Array.prototype</code> 과 <code class=\"language-text\">Array 생성자</code> 에 함수를 추가할 때 차이점에 대해 살펴보겠습니다.</p>\n<h3 id=\"두-방법의-차이점\" style=\"position:relative;\"><a href=\"#%EB%91%90-%EB%B0%A9%EB%B2%95%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90\" aria-label=\"두 방법의 차이점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>두 방법의 차이점</h3>\n<p><code class=\"language-text\">Array.prototype</code> 을 사용하여 Array 객체에 함수를 추가하면 Array 객체의 프로토타입이 확장됩니다. 이\n는 배열의 모든 인스턴스가 추가된 함수에 액세스할 수 있음을 의미합니다. 반면 <code class=\"language-text\">Array.replace = …</code> 처럼\n사용하는 경우에는 프로토타입이 아닌 Array 생성자 자체에 정적 함수를 추가하게 됩니다.</p>\n<p>이 두 방법의 차이점에 대해 간단한 예시와 함께 살펴보도록 하겠습니다.</p>\n<ol>\n<li>\n<p>Array.prototype</p>\n<ul>\n<li><code class=\"language-text\">Array.prototype</code> 에 함수를 추가하면 모든 <strong>Array 인스턴스에서</strong> 함수를 사용할 수 있습니다.</li>\n<li>이는 모든 Array 인스턴스가 <code class=\"language-text\">Array.prototype</code> 에서 상속되기 때문입니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">myFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'hello world'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: 'hello world'</span></code></pre></div>\n</li>\n<li>\n<p>Array constructor</p>\n<ul>\n<li>Array 생성자에 직접 함수를 추가하면 정적 함수가 됩니다.</li>\n<li>정적 함수는 배열 인스턴스의 일부가 아니라 생성자 자체의 일부입니다.</li>\n<li>이는 Array의 인스턴스가 아닌 <strong>Array 생성자에서만</strong> 액세스할 수 있음을 의미합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">myFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'hello world'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: TypeError: arr.myFunction is not a function</span>\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: 'hello world'</span></code></pre></div>\n</li>\n</ol>\n<p>이제 위 방법으로 확장하는 게 왜 좋지 않은지 살펴보도록 하겠습니다.</p>\n<h2 id=\"문제가-발생할-수-있는-상황\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%83%81%ED%99%A9\" aria-label=\"문제가 발생할 수 있는 상황 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제가 발생할 수 있는 상황</h2>\n<p><code class=\"language-text\">Array.prototype</code>과 같은 내장 객체를 확장하는 것은 일반적으로 좋은 방법이 아닙니다. 위에서말했다시피\n프로토타입을 수정하면 충돌이 발생할 수 있으며 코드를 이해하고 유지보수하기가 더 어려워질수 있기 때문\n입니다.</p>\n<p>이제 내장 객체 확장의 잠재적인 위험을 보여주는 예를 살펴보겠습니다. 두 개의 JavaScript 라이브러리(라\n이브러리 A 및 라이브러리 B)를 사용하는 웹 애플리케이션을 개발하고 있다고 가정해보겠습니다.</p>\n<p>각 라이브러리의 구현 코드는 아래와 같습니다.</p>\n<ul>\n<li>\n<p>라이브러리 A</p>\n<ul>\n<li>배열에서 <code class=\"language-text\">oldValue</code>의 <strong>첫 번째 항목만</strong> <code class=\"language-text\">newValue</code>로 바꿉니다. 중첩된 배열에서는 교체 작업을수\n행하지 않습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// Library A</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">declare</span> global <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token generic-function\"><span class=\"token function\">replace</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span> <span class=\"token keyword\">extends</span> <span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">replace</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(\n  this: NestedArray&lt;T>,\n  oldValue: T,\n  newValue: T,\n): NestedArray&lt;T> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token plain-text\">;\n\nexport </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">;</span></code></pre></div>\n</li>\n<li>\n<p>라이브러리 B</p>\n<ul>\n<li>배열에서 <code class=\"language-text\">oldValue</code>의 <strong>모든 항목</strong>을 <code class=\"language-text\">newValue</code>로 바꾸고 중첩 배열을 재귀적으로 처리하여 동일한\n교체 작업을 수행합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// Library B</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">declare</span> global <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token generic-function\"><span class=\"token function\">replace</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span> <span class=\"token keyword\">extends</span> <span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">replace</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(\n  this: NestedArray&lt;T>,\n  oldValue: T,\n  newValue: T,\n): NestedArray&lt;T> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>item <span class=\"token keyword\">as</span> <span class=\"token builtin\">unknown</span> <span class=\"token keyword\">as</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>oldValue<span class=\"token punctuation\">,</span> newValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item <span class=\"token operator\">===</span> oldValue <span class=\"token operator\">?</span> newValue <span class=\"token operator\">:</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token plain-text\">;\n\nexport </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">;</span></code></pre></div>\n</li>\n</ul>\n<p>요약하면 <code class=\"language-text\">library-a</code>의 <code class=\"language-text\">replace</code>는 배열에서 처음 나타나는 값을 바꾸는 데 사용되는 반면,\n<code class=\"language-text\">library-b</code>의 <code class=\"language-text\">replace</code> 는 중첩 배열을 포함하여 모든 값을 바꾸는 데 사용됩니다.</p>\n<p>이처럼 두 라이브러리 모두 <code class=\"language-text\">replace</code> 로 <strong>이름은 같지만 구현과 목적이 다른 <code class=\"language-text\">replace</code> 함수를추가하여</strong>\n<strong><code class=\"language-text\">Array.prototype</code>을 확장</strong>하고 있습니다. 아래 코드를 보며 이처럼 프로토타입을 수정하면생길 수 있는\n문제점을 살펴 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token string\">'library-b'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-a'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [1, [3, 1]]이 출력되길 원합니다 (library-a의 replace 함수가 실행됨)</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [1, [2, 1]]</span>\n\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [10, '1', '1', '1']이 출력되길 원합니다</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [10, '1', '2', '1']</span>\n\n<span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-a'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-b'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [1, [3, 1]]이 출력되길 원합니다 (library-b의 replace 함수가 실행됨)</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [1, [3, 1]]</span>\n\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [10, '1', '1', '1']이 출력되길 원합니다</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [10, '1', '1', '1']</span></code></pre></div>\n<p><code class=\"language-text\">library-a</code>와 <code class=\"language-text\">library-b</code>를 모두 가져오는 경우 가져오는 순서에 따라 결과값이 변경되는 것을 확인할 수\n있습니다. 첫 번째 경우는 <code class=\"language-text\">library-b</code> 다음에 <code class=\"language-text\">library-a</code> 를 가져오므로 <code class=\"language-text\">library-a</code> 의 함수가\n<code class=\"language-text\">library-b</code> 의 <code class=\"language-text\">replace</code> 함수를 덮어씁니다. 이는 두 라이브러리가 동일한 전역 <code class=\"language-text\">Array.prototype</code> 객체\n를 수정하기 때문입니다.</p>\n<p>이처럼 두 라이브러리를 모두 사용하는 상황일 경우 <strong>충돌이 발생</strong>하여 한 구현이 다른 구현을 덮어쓰게\n되어 예기치 않은 동작이 발생하고 코드를 이해하고 디버깅하기 어려울 수 있습니다.</p>\n<h2 id=\"더-안전한-대안-standalone-utility-function\" style=\"position:relative;\"><a href=\"#%EB%8D%94-%EC%95%88%EC%A0%84%ED%95%9C-%EB%8C%80%EC%95%88-standalone-utility-function\" aria-label=\"더 안전한 대안 standalone utility function permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>더 안전한 대안: Standalone Utility Function</strong></h2>\n<p>내장 객체를 확장하는 대신 코드베이스 전체에서 가져오고 사용할 수 있는 유틸리티 함수를 만드는 것이좋\n습니다. 이 접근 방식은 내장된 Array 객체를 수정하지 않고 다른 라이브러리나 개발자 코드와의잠재적인충\n돌을 방지하기 때문에 더 안전하고 유지보수가 쉽습니다.</p>\n<p>예를 들어, 유틸리티 함수를 만들어 <code class=\"language-text\">Array.prototype</code>을 수정하지 않고 배열의 특정 항목을 교체하는것입\n니다. 아래 코드는 위 <code class=\"language-text\">Array.prototype</code> 을 확장하던 코드를 유틸리티 함수로 구현한 코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// utils/array.ts</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> replace <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> replaceAll <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">,</span> oldValue<span class=\"token punctuation\">,</span> newValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> replace<span class=\"token punctuation\">,</span> replaceAll <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이 유틸리티 함수들을 사용하기 위해 가져옵니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// main.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> replace<span class=\"token punctuation\">,</span> replaceAll <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./utils/array'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, [2, 1]]</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, [3, 1]]</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [10, '3', '2', '1']</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [10, '3', '3', '1']</span></code></pre></div>\n<p>이렇게 하면 유틸리티 함수가 <code class=\"language-text\">Array.prototype</code> 을 수정하지 않으며 필요에 따라 가져와 사용할 수있습니\n다.</p>\n<h2 id=\"objectdefineproperty를-사용하여-객체를-보다-안전하게-확장\" style=\"position:relative;\"><a href=\"#objectdefineproperty%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EB%B3%B4%EB%8B%A4-%EC%95%88%EC%A0%84%ED%95%98%EA%B2%8C-%ED%99%95%EC%9E%A5\" aria-label=\"objectdefineproperty를 사용하여 객체를 보다 안전하게 확장 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.defineProperty()를 사용하여 객체를 보다 안전하게 확장</h2>\n<p>그래도 배열 인스턴스에서 호출해 사용하고 싶을 수도 있겠죠. 이럴 땐 <code class=\"language-text\">Object.defineProperty()</code>을사용하\n여 더 안전하게 추가할 수 있습니다. <code class=\"language-text\">Object.defineProperty()</code> 정적 함수는 객체에 새로운 속성을직접 정\n의하거나 이미 존재하는 속성을 수정한 후, 해당 객체를 반환합니다. 객체에 새 속성을 정의하고속성을 지\n정하며 실수로 덮어쓰거나 하는 충돌을 방지할 수 있습니다.</p>\n<p>아래 코드는 <code class=\"language-text\">Object.defineProperty()</code> 을 사용해 <code class=\"language-text\">Array.prototype</code> 에 <code class=\"language-text\">replace</code> 함수를 추가하는 예시\n코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  Object<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">defineProperty</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">unknown</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">,</span> <span class=\"token string\">'replace'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">value</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    configurable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// `true`로 설정하면 나중에 속성을 삭제하거나 변경할 수 있습니다.</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">555</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, 555, 3, 2]</span></code></pre></div>\n<p><code class=\"language-text\">configurable</code> 속성의 기본값은 false입니다. 따라서 정의된 속성을 재정의하려고 하면 \"TypeError:\nCannot redefine property: replace\" 오류가 발생합니다 . 이 오류는 JavaScript가 속성의 재정의를허용하\n지 않기 때문에 발생합니다.</p>\n<p>이 오류를 방지하려면 먼저 속성이 이미 존재하는지 확인하면 됩니다. <code class=\"language-text\">replace</code> 함수가\n<code class=\"language-text\">Array.prototype</code>에 이미 존재하는지 확인하는 것이죠. 존재하지 않는 경우 함수가 정의됩니다. 또한\n<code class=\"language-text\">configurable</code> 속성을 true로 설정하여 속성을 다시 정의할 수 있도록 했습니다. 자세한 건\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters\">mdn</a>에\n서확인할 수 있습니다.</p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>결론</strong></h2>\n<p>개발자로서 JavaScript에서 표준 내장 객체 확장과 관련된 잠재적인 위험을 인지하는 게 중요합니다. 유틸\n리티 함수와 보다 안전한 <code class=\"language-text\">Object.defineProperty()</code> 함수를 사용하면 충돌을 방지하고 코드유지보수성을향\n상시키며 동료와 보다 효과적으로 협업할 수 있습니다. 따라서 다음 번에 내장된프로토타입을 수정하고싶을\n때는 다시 한 번 생각해 보고 더 안전한 대안을 고려해 보는 것을추천드립니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters</a></li>\n</ul>",
      "%EB%8D%94-%EC%95%88%EC%A0%84%ED%95%9C-%EB%8C%80%EC%95%88-standalone-utility-function#더 안전한 대안: Standalone Utility Function": "<h2 id=\"내장-객체-확장의-매력\" style=\"position:relative;\"><a href=\"#%EB%82%B4%EC%9E%A5-%EA%B0%9D%EC%B2%B4-%ED%99%95%EC%9E%A5%EC%9D%98-%EB%A7%A4%EB%A0%A5\" aria-label=\"내장 객체 확장의 매력 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>내장 객체 확장의 매력</strong></h2>\n<p>JS로 작업할 때 <code class=\"language-text\">Array.prototype</code>과 같은 내장 객체에 직접 함수를 추가하려고 할 수도 있습니다. 이는배\n열 인스턴스에서 직접 추가한 함수를 호출할 수 있기 때문에 좋아 보일 수 있습니다. 그러나 이렇게 하면다\n른 개발자와 협업하거나 라이브러리를 사용할 때 충돌이 발생하고 코드를 이해하기 어려워질 수있습니다.</p>\n<p>들어가기 전에 <code class=\"language-text\">Array.prototype</code> 과 <code class=\"language-text\">Array 생성자</code> 에 함수를 추가할 때 차이점에 대해 살펴보겠습니다.</p>\n<h3 id=\"두-방법의-차이점\" style=\"position:relative;\"><a href=\"#%EB%91%90-%EB%B0%A9%EB%B2%95%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90\" aria-label=\"두 방법의 차이점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>두 방법의 차이점</h3>\n<p><code class=\"language-text\">Array.prototype</code> 을 사용하여 Array 객체에 함수를 추가하면 Array 객체의 프로토타입이 확장됩니다. 이\n는 배열의 모든 인스턴스가 추가된 함수에 액세스할 수 있음을 의미합니다. 반면 <code class=\"language-text\">Array.replace = …</code> 처럼\n사용하는 경우에는 프로토타입이 아닌 Array 생성자 자체에 정적 함수를 추가하게 됩니다.</p>\n<p>이 두 방법의 차이점에 대해 간단한 예시와 함께 살펴보도록 하겠습니다.</p>\n<ol>\n<li>\n<p>Array.prototype</p>\n<ul>\n<li><code class=\"language-text\">Array.prototype</code> 에 함수를 추가하면 모든 <strong>Array 인스턴스에서</strong> 함수를 사용할 수 있습니다.</li>\n<li>이는 모든 Array 인스턴스가 <code class=\"language-text\">Array.prototype</code> 에서 상속되기 때문입니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">myFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'hello world'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: 'hello world'</span></code></pre></div>\n</li>\n<li>\n<p>Array constructor</p>\n<ul>\n<li>Array 생성자에 직접 함수를 추가하면 정적 함수가 됩니다.</li>\n<li>정적 함수는 배열 인스턴스의 일부가 아니라 생성자 자체의 일부입니다.</li>\n<li>이는 Array의 인스턴스가 아닌 <strong>Array 생성자에서만</strong> 액세스할 수 있음을 의미합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">myFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'hello world'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: TypeError: arr.myFunction is not a function</span>\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: 'hello world'</span></code></pre></div>\n</li>\n</ol>\n<p>이제 위 방법으로 확장하는 게 왜 좋지 않은지 살펴보도록 하겠습니다.</p>\n<h2 id=\"문제가-발생할-수-있는-상황\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%83%81%ED%99%A9\" aria-label=\"문제가 발생할 수 있는 상황 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제가 발생할 수 있는 상황</h2>\n<p><code class=\"language-text\">Array.prototype</code>과 같은 내장 객체를 확장하는 것은 일반적으로 좋은 방법이 아닙니다. 위에서말했다시피\n프로토타입을 수정하면 충돌이 발생할 수 있으며 코드를 이해하고 유지보수하기가 더 어려워질수 있기 때문\n입니다.</p>\n<p>이제 내장 객체 확장의 잠재적인 위험을 보여주는 예를 살펴보겠습니다. 두 개의 JavaScript 라이브러리(라\n이브러리 A 및 라이브러리 B)를 사용하는 웹 애플리케이션을 개발하고 있다고 가정해보겠습니다.</p>\n<p>각 라이브러리의 구현 코드는 아래와 같습니다.</p>\n<ul>\n<li>\n<p>라이브러리 A</p>\n<ul>\n<li>배열에서 <code class=\"language-text\">oldValue</code>의 <strong>첫 번째 항목만</strong> <code class=\"language-text\">newValue</code>로 바꿉니다. 중첩된 배열에서는 교체 작업을수\n행하지 않습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// Library A</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">declare</span> global <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token generic-function\"><span class=\"token function\">replace</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span> <span class=\"token keyword\">extends</span> <span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">replace</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(\n  this: NestedArray&lt;T>,\n  oldValue: T,\n  newValue: T,\n): NestedArray&lt;T> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token plain-text\">;\n\nexport </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">;</span></code></pre></div>\n</li>\n<li>\n<p>라이브러리 B</p>\n<ul>\n<li>배열에서 <code class=\"language-text\">oldValue</code>의 <strong>모든 항목</strong>을 <code class=\"language-text\">newValue</code>로 바꾸고 중첩 배열을 재귀적으로 처리하여 동일한\n교체 작업을 수행합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// Library B</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">declare</span> global <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token generic-function\"><span class=\"token function\">replace</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span> <span class=\"token keyword\">extends</span> <span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">replace</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(\n  this: NestedArray&lt;T>,\n  oldValue: T,\n  newValue: T,\n): NestedArray&lt;T> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>item <span class=\"token keyword\">as</span> <span class=\"token builtin\">unknown</span> <span class=\"token keyword\">as</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>oldValue<span class=\"token punctuation\">,</span> newValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item <span class=\"token operator\">===</span> oldValue <span class=\"token operator\">?</span> newValue <span class=\"token operator\">:</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token plain-text\">;\n\nexport </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">;</span></code></pre></div>\n</li>\n</ul>\n<p>요약하면 <code class=\"language-text\">library-a</code>의 <code class=\"language-text\">replace</code>는 배열에서 처음 나타나는 값을 바꾸는 데 사용되는 반면,\n<code class=\"language-text\">library-b</code>의 <code class=\"language-text\">replace</code> 는 중첩 배열을 포함하여 모든 값을 바꾸는 데 사용됩니다.</p>\n<p>이처럼 두 라이브러리 모두 <code class=\"language-text\">replace</code> 로 <strong>이름은 같지만 구현과 목적이 다른 <code class=\"language-text\">replace</code> 함수를추가하여</strong>\n<strong><code class=\"language-text\">Array.prototype</code>을 확장</strong>하고 있습니다. 아래 코드를 보며 이처럼 프로토타입을 수정하면생길 수 있는\n문제점을 살펴 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token string\">'library-b'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-a'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [1, [3, 1]]이 출력되길 원합니다 (library-a의 replace 함수가 실행됨)</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [1, [2, 1]]</span>\n\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [10, '1', '1', '1']이 출력되길 원합니다</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [10, '1', '2', '1']</span>\n\n<span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-a'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-b'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [1, [3, 1]]이 출력되길 원합니다 (library-b의 replace 함수가 실행됨)</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [1, [3, 1]]</span>\n\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [10, '1', '1', '1']이 출력되길 원합니다</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [10, '1', '1', '1']</span></code></pre></div>\n<p><code class=\"language-text\">library-a</code>와 <code class=\"language-text\">library-b</code>를 모두 가져오는 경우 가져오는 순서에 따라 결과값이 변경되는 것을 확인할 수\n있습니다. 첫 번째 경우는 <code class=\"language-text\">library-b</code> 다음에 <code class=\"language-text\">library-a</code> 를 가져오므로 <code class=\"language-text\">library-a</code> 의 함수가\n<code class=\"language-text\">library-b</code> 의 <code class=\"language-text\">replace</code> 함수를 덮어씁니다. 이는 두 라이브러리가 동일한 전역 <code class=\"language-text\">Array.prototype</code> 객체\n를 수정하기 때문입니다.</p>\n<p>이처럼 두 라이브러리를 모두 사용하는 상황일 경우 <strong>충돌이 발생</strong>하여 한 구현이 다른 구현을 덮어쓰게\n되어 예기치 않은 동작이 발생하고 코드를 이해하고 디버깅하기 어려울 수 있습니다.</p>\n<h2 id=\"더-안전한-대안-standalone-utility-function\" style=\"position:relative;\"><a href=\"#%EB%8D%94-%EC%95%88%EC%A0%84%ED%95%9C-%EB%8C%80%EC%95%88-standalone-utility-function\" aria-label=\"더 안전한 대안 standalone utility function permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>더 안전한 대안: Standalone Utility Function</strong></h2>\n<p>내장 객체를 확장하는 대신 코드베이스 전체에서 가져오고 사용할 수 있는 유틸리티 함수를 만드는 것이좋\n습니다. 이 접근 방식은 내장된 Array 객체를 수정하지 않고 다른 라이브러리나 개발자 코드와의잠재적인충\n돌을 방지하기 때문에 더 안전하고 유지보수가 쉽습니다.</p>\n<p>예를 들어, 유틸리티 함수를 만들어 <code class=\"language-text\">Array.prototype</code>을 수정하지 않고 배열의 특정 항목을 교체하는것입\n니다. 아래 코드는 위 <code class=\"language-text\">Array.prototype</code> 을 확장하던 코드를 유틸리티 함수로 구현한 코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// utils/array.ts</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> replace <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> replaceAll <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">,</span> oldValue<span class=\"token punctuation\">,</span> newValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> replace<span class=\"token punctuation\">,</span> replaceAll <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이 유틸리티 함수들을 사용하기 위해 가져옵니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// main.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> replace<span class=\"token punctuation\">,</span> replaceAll <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./utils/array'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, [2, 1]]</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, [3, 1]]</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [10, '3', '2', '1']</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [10, '3', '3', '1']</span></code></pre></div>\n<p>이렇게 하면 유틸리티 함수가 <code class=\"language-text\">Array.prototype</code> 을 수정하지 않으며 필요에 따라 가져와 사용할 수있습니\n다.</p>\n<h2 id=\"objectdefineproperty를-사용하여-객체를-보다-안전하게-확장\" style=\"position:relative;\"><a href=\"#objectdefineproperty%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EB%B3%B4%EB%8B%A4-%EC%95%88%EC%A0%84%ED%95%98%EA%B2%8C-%ED%99%95%EC%9E%A5\" aria-label=\"objectdefineproperty를 사용하여 객체를 보다 안전하게 확장 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.defineProperty()를 사용하여 객체를 보다 안전하게 확장</h2>\n<p>그래도 배열 인스턴스에서 호출해 사용하고 싶을 수도 있겠죠. 이럴 땐 <code class=\"language-text\">Object.defineProperty()</code>을사용하\n여 더 안전하게 추가할 수 있습니다. <code class=\"language-text\">Object.defineProperty()</code> 정적 함수는 객체에 새로운 속성을직접 정\n의하거나 이미 존재하는 속성을 수정한 후, 해당 객체를 반환합니다. 객체에 새 속성을 정의하고속성을 지\n정하며 실수로 덮어쓰거나 하는 충돌을 방지할 수 있습니다.</p>\n<p>아래 코드는 <code class=\"language-text\">Object.defineProperty()</code> 을 사용해 <code class=\"language-text\">Array.prototype</code> 에 <code class=\"language-text\">replace</code> 함수를 추가하는 예시\n코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  Object<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">defineProperty</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">unknown</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">,</span> <span class=\"token string\">'replace'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">value</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    configurable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// `true`로 설정하면 나중에 속성을 삭제하거나 변경할 수 있습니다.</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">555</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, 555, 3, 2]</span></code></pre></div>\n<p><code class=\"language-text\">configurable</code> 속성의 기본값은 false입니다. 따라서 정의된 속성을 재정의하려고 하면 \"TypeError:\nCannot redefine property: replace\" 오류가 발생합니다 . 이 오류는 JavaScript가 속성의 재정의를허용하\n지 않기 때문에 발생합니다.</p>\n<p>이 오류를 방지하려면 먼저 속성이 이미 존재하는지 확인하면 됩니다. <code class=\"language-text\">replace</code> 함수가\n<code class=\"language-text\">Array.prototype</code>에 이미 존재하는지 확인하는 것이죠. 존재하지 않는 경우 함수가 정의됩니다. 또한\n<code class=\"language-text\">configurable</code> 속성을 true로 설정하여 속성을 다시 정의할 수 있도록 했습니다. 자세한 건\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters\">mdn</a>에\n서확인할 수 있습니다.</p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>결론</strong></h2>\n<p>개발자로서 JavaScript에서 표준 내장 객체 확장과 관련된 잠재적인 위험을 인지하는 게 중요합니다. 유틸\n리티 함수와 보다 안전한 <code class=\"language-text\">Object.defineProperty()</code> 함수를 사용하면 충돌을 방지하고 코드유지보수성을향\n상시키며 동료와 보다 효과적으로 협업할 수 있습니다. 따라서 다음 번에 내장된프로토타입을 수정하고싶을\n때는 다시 한 번 생각해 보고 더 안전한 대안을 고려해 보는 것을추천드립니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters</a></li>\n</ul>",
      "objectdefineproperty%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EB%B3%B4%EB%8B%A4-%EC%95%88%EC%A0%84%ED%95%98%EA%B2%8C-%ED%99%95%EC%9E%A5#Object.defineProperty()를 사용하여 객체를 보다 안전하게 확장": "<h2 id=\"내장-객체-확장의-매력\" style=\"position:relative;\"><a href=\"#%EB%82%B4%EC%9E%A5-%EA%B0%9D%EC%B2%B4-%ED%99%95%EC%9E%A5%EC%9D%98-%EB%A7%A4%EB%A0%A5\" aria-label=\"내장 객체 확장의 매력 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>내장 객체 확장의 매력</strong></h2>\n<p>JS로 작업할 때 <code class=\"language-text\">Array.prototype</code>과 같은 내장 객체에 직접 함수를 추가하려고 할 수도 있습니다. 이는배\n열 인스턴스에서 직접 추가한 함수를 호출할 수 있기 때문에 좋아 보일 수 있습니다. 그러나 이렇게 하면다\n른 개발자와 협업하거나 라이브러리를 사용할 때 충돌이 발생하고 코드를 이해하기 어려워질 수있습니다.</p>\n<p>들어가기 전에 <code class=\"language-text\">Array.prototype</code> 과 <code class=\"language-text\">Array 생성자</code> 에 함수를 추가할 때 차이점에 대해 살펴보겠습니다.</p>\n<h3 id=\"두-방법의-차이점\" style=\"position:relative;\"><a href=\"#%EB%91%90-%EB%B0%A9%EB%B2%95%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90\" aria-label=\"두 방법의 차이점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>두 방법의 차이점</h3>\n<p><code class=\"language-text\">Array.prototype</code> 을 사용하여 Array 객체에 함수를 추가하면 Array 객체의 프로토타입이 확장됩니다. 이\n는 배열의 모든 인스턴스가 추가된 함수에 액세스할 수 있음을 의미합니다. 반면 <code class=\"language-text\">Array.replace = …</code> 처럼\n사용하는 경우에는 프로토타입이 아닌 Array 생성자 자체에 정적 함수를 추가하게 됩니다.</p>\n<p>이 두 방법의 차이점에 대해 간단한 예시와 함께 살펴보도록 하겠습니다.</p>\n<ol>\n<li>\n<p>Array.prototype</p>\n<ul>\n<li><code class=\"language-text\">Array.prototype</code> 에 함수를 추가하면 모든 <strong>Array 인스턴스에서</strong> 함수를 사용할 수 있습니다.</li>\n<li>이는 모든 Array 인스턴스가 <code class=\"language-text\">Array.prototype</code> 에서 상속되기 때문입니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">myFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'hello world'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: 'hello world'</span></code></pre></div>\n</li>\n<li>\n<p>Array constructor</p>\n<ul>\n<li>Array 생성자에 직접 함수를 추가하면 정적 함수가 됩니다.</li>\n<li>정적 함수는 배열 인스턴스의 일부가 아니라 생성자 자체의 일부입니다.</li>\n<li>이는 Array의 인스턴스가 아닌 <strong>Array 생성자에서만</strong> 액세스할 수 있음을 의미합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">myFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'hello world'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: TypeError: arr.myFunction is not a function</span>\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: 'hello world'</span></code></pre></div>\n</li>\n</ol>\n<p>이제 위 방법으로 확장하는 게 왜 좋지 않은지 살펴보도록 하겠습니다.</p>\n<h2 id=\"문제가-발생할-수-있는-상황\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%83%81%ED%99%A9\" aria-label=\"문제가 발생할 수 있는 상황 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제가 발생할 수 있는 상황</h2>\n<p><code class=\"language-text\">Array.prototype</code>과 같은 내장 객체를 확장하는 것은 일반적으로 좋은 방법이 아닙니다. 위에서말했다시피\n프로토타입을 수정하면 충돌이 발생할 수 있으며 코드를 이해하고 유지보수하기가 더 어려워질수 있기 때문\n입니다.</p>\n<p>이제 내장 객체 확장의 잠재적인 위험을 보여주는 예를 살펴보겠습니다. 두 개의 JavaScript 라이브러리(라\n이브러리 A 및 라이브러리 B)를 사용하는 웹 애플리케이션을 개발하고 있다고 가정해보겠습니다.</p>\n<p>각 라이브러리의 구현 코드는 아래와 같습니다.</p>\n<ul>\n<li>\n<p>라이브러리 A</p>\n<ul>\n<li>배열에서 <code class=\"language-text\">oldValue</code>의 <strong>첫 번째 항목만</strong> <code class=\"language-text\">newValue</code>로 바꿉니다. 중첩된 배열에서는 교체 작업을수\n행하지 않습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// Library A</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">declare</span> global <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token generic-function\"><span class=\"token function\">replace</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span> <span class=\"token keyword\">extends</span> <span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">replace</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(\n  this: NestedArray&lt;T>,\n  oldValue: T,\n  newValue: T,\n): NestedArray&lt;T> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token plain-text\">;\n\nexport </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">;</span></code></pre></div>\n</li>\n<li>\n<p>라이브러리 B</p>\n<ul>\n<li>배열에서 <code class=\"language-text\">oldValue</code>의 <strong>모든 항목</strong>을 <code class=\"language-text\">newValue</code>로 바꾸고 중첩 배열을 재귀적으로 처리하여 동일한\n교체 작업을 수행합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// Library B</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">declare</span> global <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token generic-function\"><span class=\"token function\">replace</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span> <span class=\"token keyword\">extends</span> <span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">replace</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(\n  this: NestedArray&lt;T>,\n  oldValue: T,\n  newValue: T,\n): NestedArray&lt;T> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>item <span class=\"token keyword\">as</span> <span class=\"token builtin\">unknown</span> <span class=\"token keyword\">as</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>oldValue<span class=\"token punctuation\">,</span> newValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item <span class=\"token operator\">===</span> oldValue <span class=\"token operator\">?</span> newValue <span class=\"token operator\">:</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token plain-text\">;\n\nexport </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">;</span></code></pre></div>\n</li>\n</ul>\n<p>요약하면 <code class=\"language-text\">library-a</code>의 <code class=\"language-text\">replace</code>는 배열에서 처음 나타나는 값을 바꾸는 데 사용되는 반면,\n<code class=\"language-text\">library-b</code>의 <code class=\"language-text\">replace</code> 는 중첩 배열을 포함하여 모든 값을 바꾸는 데 사용됩니다.</p>\n<p>이처럼 두 라이브러리 모두 <code class=\"language-text\">replace</code> 로 <strong>이름은 같지만 구현과 목적이 다른 <code class=\"language-text\">replace</code> 함수를추가하여</strong>\n<strong><code class=\"language-text\">Array.prototype</code>을 확장</strong>하고 있습니다. 아래 코드를 보며 이처럼 프로토타입을 수정하면생길 수 있는\n문제점을 살펴 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token string\">'library-b'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-a'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [1, [3, 1]]이 출력되길 원합니다 (library-a의 replace 함수가 실행됨)</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [1, [2, 1]]</span>\n\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [10, '1', '1', '1']이 출력되길 원합니다</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [10, '1', '2', '1']</span>\n\n<span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-a'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-b'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [1, [3, 1]]이 출력되길 원합니다 (library-b의 replace 함수가 실행됨)</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [1, [3, 1]]</span>\n\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [10, '1', '1', '1']이 출력되길 원합니다</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [10, '1', '1', '1']</span></code></pre></div>\n<p><code class=\"language-text\">library-a</code>와 <code class=\"language-text\">library-b</code>를 모두 가져오는 경우 가져오는 순서에 따라 결과값이 변경되는 것을 확인할 수\n있습니다. 첫 번째 경우는 <code class=\"language-text\">library-b</code> 다음에 <code class=\"language-text\">library-a</code> 를 가져오므로 <code class=\"language-text\">library-a</code> 의 함수가\n<code class=\"language-text\">library-b</code> 의 <code class=\"language-text\">replace</code> 함수를 덮어씁니다. 이는 두 라이브러리가 동일한 전역 <code class=\"language-text\">Array.prototype</code> 객체\n를 수정하기 때문입니다.</p>\n<p>이처럼 두 라이브러리를 모두 사용하는 상황일 경우 <strong>충돌이 발생</strong>하여 한 구현이 다른 구현을 덮어쓰게\n되어 예기치 않은 동작이 발생하고 코드를 이해하고 디버깅하기 어려울 수 있습니다.</p>\n<h2 id=\"더-안전한-대안-standalone-utility-function\" style=\"position:relative;\"><a href=\"#%EB%8D%94-%EC%95%88%EC%A0%84%ED%95%9C-%EB%8C%80%EC%95%88-standalone-utility-function\" aria-label=\"더 안전한 대안 standalone utility function permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>더 안전한 대안: Standalone Utility Function</strong></h2>\n<p>내장 객체를 확장하는 대신 코드베이스 전체에서 가져오고 사용할 수 있는 유틸리티 함수를 만드는 것이좋\n습니다. 이 접근 방식은 내장된 Array 객체를 수정하지 않고 다른 라이브러리나 개발자 코드와의잠재적인충\n돌을 방지하기 때문에 더 안전하고 유지보수가 쉽습니다.</p>\n<p>예를 들어, 유틸리티 함수를 만들어 <code class=\"language-text\">Array.prototype</code>을 수정하지 않고 배열의 특정 항목을 교체하는것입\n니다. 아래 코드는 위 <code class=\"language-text\">Array.prototype</code> 을 확장하던 코드를 유틸리티 함수로 구현한 코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// utils/array.ts</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> replace <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> replaceAll <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">,</span> oldValue<span class=\"token punctuation\">,</span> newValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> replace<span class=\"token punctuation\">,</span> replaceAll <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이 유틸리티 함수들을 사용하기 위해 가져옵니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// main.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> replace<span class=\"token punctuation\">,</span> replaceAll <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./utils/array'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, [2, 1]]</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, [3, 1]]</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [10, '3', '2', '1']</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [10, '3', '3', '1']</span></code></pre></div>\n<p>이렇게 하면 유틸리티 함수가 <code class=\"language-text\">Array.prototype</code> 을 수정하지 않으며 필요에 따라 가져와 사용할 수있습니\n다.</p>\n<h2 id=\"objectdefineproperty를-사용하여-객체를-보다-안전하게-확장\" style=\"position:relative;\"><a href=\"#objectdefineproperty%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EB%B3%B4%EB%8B%A4-%EC%95%88%EC%A0%84%ED%95%98%EA%B2%8C-%ED%99%95%EC%9E%A5\" aria-label=\"objectdefineproperty를 사용하여 객체를 보다 안전하게 확장 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.defineProperty()를 사용하여 객체를 보다 안전하게 확장</h2>\n<p>그래도 배열 인스턴스에서 호출해 사용하고 싶을 수도 있겠죠. 이럴 땐 <code class=\"language-text\">Object.defineProperty()</code>을사용하\n여 더 안전하게 추가할 수 있습니다. <code class=\"language-text\">Object.defineProperty()</code> 정적 함수는 객체에 새로운 속성을직접 정\n의하거나 이미 존재하는 속성을 수정한 후, 해당 객체를 반환합니다. 객체에 새 속성을 정의하고속성을 지\n정하며 실수로 덮어쓰거나 하는 충돌을 방지할 수 있습니다.</p>\n<p>아래 코드는 <code class=\"language-text\">Object.defineProperty()</code> 을 사용해 <code class=\"language-text\">Array.prototype</code> 에 <code class=\"language-text\">replace</code> 함수를 추가하는 예시\n코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  Object<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">defineProperty</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">unknown</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">,</span> <span class=\"token string\">'replace'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">value</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    configurable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// `true`로 설정하면 나중에 속성을 삭제하거나 변경할 수 있습니다.</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">555</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, 555, 3, 2]</span></code></pre></div>\n<p><code class=\"language-text\">configurable</code> 속성의 기본값은 false입니다. 따라서 정의된 속성을 재정의하려고 하면 \"TypeError:\nCannot redefine property: replace\" 오류가 발생합니다 . 이 오류는 JavaScript가 속성의 재정의를허용하\n지 않기 때문에 발생합니다.</p>\n<p>이 오류를 방지하려면 먼저 속성이 이미 존재하는지 확인하면 됩니다. <code class=\"language-text\">replace</code> 함수가\n<code class=\"language-text\">Array.prototype</code>에 이미 존재하는지 확인하는 것이죠. 존재하지 않는 경우 함수가 정의됩니다. 또한\n<code class=\"language-text\">configurable</code> 속성을 true로 설정하여 속성을 다시 정의할 수 있도록 했습니다. 자세한 건\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters\">mdn</a>에\n서확인할 수 있습니다.</p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>결론</strong></h2>\n<p>개발자로서 JavaScript에서 표준 내장 객체 확장과 관련된 잠재적인 위험을 인지하는 게 중요합니다. 유틸\n리티 함수와 보다 안전한 <code class=\"language-text\">Object.defineProperty()</code> 함수를 사용하면 충돌을 방지하고 코드유지보수성을향\n상시키며 동료와 보다 효과적으로 협업할 수 있습니다. 따라서 다음 번에 내장된프로토타입을 수정하고싶을\n때는 다시 한 번 생각해 보고 더 안전한 대안을 고려해 보는 것을추천드립니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters</a></li>\n</ul>",
      "%EA%B2%B0%EB%A1%A0#결론": "<h2 id=\"내장-객체-확장의-매력\" style=\"position:relative;\"><a href=\"#%EB%82%B4%EC%9E%A5-%EA%B0%9D%EC%B2%B4-%ED%99%95%EC%9E%A5%EC%9D%98-%EB%A7%A4%EB%A0%A5\" aria-label=\"내장 객체 확장의 매력 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>내장 객체 확장의 매력</strong></h2>\n<p>JS로 작업할 때 <code class=\"language-text\">Array.prototype</code>과 같은 내장 객체에 직접 함수를 추가하려고 할 수도 있습니다. 이는배\n열 인스턴스에서 직접 추가한 함수를 호출할 수 있기 때문에 좋아 보일 수 있습니다. 그러나 이렇게 하면다\n른 개발자와 협업하거나 라이브러리를 사용할 때 충돌이 발생하고 코드를 이해하기 어려워질 수있습니다.</p>\n<p>들어가기 전에 <code class=\"language-text\">Array.prototype</code> 과 <code class=\"language-text\">Array 생성자</code> 에 함수를 추가할 때 차이점에 대해 살펴보겠습니다.</p>\n<h3 id=\"두-방법의-차이점\" style=\"position:relative;\"><a href=\"#%EB%91%90-%EB%B0%A9%EB%B2%95%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90\" aria-label=\"두 방법의 차이점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>두 방법의 차이점</h3>\n<p><code class=\"language-text\">Array.prototype</code> 을 사용하여 Array 객체에 함수를 추가하면 Array 객체의 프로토타입이 확장됩니다. 이\n는 배열의 모든 인스턴스가 추가된 함수에 액세스할 수 있음을 의미합니다. 반면 <code class=\"language-text\">Array.replace = …</code> 처럼\n사용하는 경우에는 프로토타입이 아닌 Array 생성자 자체에 정적 함수를 추가하게 됩니다.</p>\n<p>이 두 방법의 차이점에 대해 간단한 예시와 함께 살펴보도록 하겠습니다.</p>\n<ol>\n<li>\n<p>Array.prototype</p>\n<ul>\n<li><code class=\"language-text\">Array.prototype</code> 에 함수를 추가하면 모든 <strong>Array 인스턴스에서</strong> 함수를 사용할 수 있습니다.</li>\n<li>이는 모든 Array 인스턴스가 <code class=\"language-text\">Array.prototype</code> 에서 상속되기 때문입니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">myFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'hello world'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: 'hello world'</span></code></pre></div>\n</li>\n<li>\n<p>Array constructor</p>\n<ul>\n<li>Array 생성자에 직접 함수를 추가하면 정적 함수가 됩니다.</li>\n<li>정적 함수는 배열 인스턴스의 일부가 아니라 생성자 자체의 일부입니다.</li>\n<li>이는 Array의 인스턴스가 아닌 <strong>Array 생성자에서만</strong> 액세스할 수 있음을 의미합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">myFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'hello world'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: TypeError: arr.myFunction is not a function</span>\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: 'hello world'</span></code></pre></div>\n</li>\n</ol>\n<p>이제 위 방법으로 확장하는 게 왜 좋지 않은지 살펴보도록 하겠습니다.</p>\n<h2 id=\"문제가-발생할-수-있는-상황\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%83%81%ED%99%A9\" aria-label=\"문제가 발생할 수 있는 상황 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제가 발생할 수 있는 상황</h2>\n<p><code class=\"language-text\">Array.prototype</code>과 같은 내장 객체를 확장하는 것은 일반적으로 좋은 방법이 아닙니다. 위에서말했다시피\n프로토타입을 수정하면 충돌이 발생할 수 있으며 코드를 이해하고 유지보수하기가 더 어려워질수 있기 때문\n입니다.</p>\n<p>이제 내장 객체 확장의 잠재적인 위험을 보여주는 예를 살펴보겠습니다. 두 개의 JavaScript 라이브러리(라\n이브러리 A 및 라이브러리 B)를 사용하는 웹 애플리케이션을 개발하고 있다고 가정해보겠습니다.</p>\n<p>각 라이브러리의 구현 코드는 아래와 같습니다.</p>\n<ul>\n<li>\n<p>라이브러리 A</p>\n<ul>\n<li>배열에서 <code class=\"language-text\">oldValue</code>의 <strong>첫 번째 항목만</strong> <code class=\"language-text\">newValue</code>로 바꿉니다. 중첩된 배열에서는 교체 작업을수\n행하지 않습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// Library A</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">declare</span> global <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token generic-function\"><span class=\"token function\">replace</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span> <span class=\"token keyword\">extends</span> <span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">replace</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(\n  this: NestedArray&lt;T>,\n  oldValue: T,\n  newValue: T,\n): NestedArray&lt;T> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token plain-text\">;\n\nexport </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">;</span></code></pre></div>\n</li>\n<li>\n<p>라이브러리 B</p>\n<ul>\n<li>배열에서 <code class=\"language-text\">oldValue</code>의 <strong>모든 항목</strong>을 <code class=\"language-text\">newValue</code>로 바꾸고 중첩 배열을 재귀적으로 처리하여 동일한\n교체 작업을 수행합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// Library B</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">declare</span> global <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token generic-function\"><span class=\"token function\">replace</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span> <span class=\"token keyword\">extends</span> <span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">replace</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(\n  this: NestedArray&lt;T>,\n  oldValue: T,\n  newValue: T,\n): NestedArray&lt;T> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>item <span class=\"token keyword\">as</span> <span class=\"token builtin\">unknown</span> <span class=\"token keyword\">as</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>oldValue<span class=\"token punctuation\">,</span> newValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item <span class=\"token operator\">===</span> oldValue <span class=\"token operator\">?</span> newValue <span class=\"token operator\">:</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token plain-text\">;\n\nexport </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">;</span></code></pre></div>\n</li>\n</ul>\n<p>요약하면 <code class=\"language-text\">library-a</code>의 <code class=\"language-text\">replace</code>는 배열에서 처음 나타나는 값을 바꾸는 데 사용되는 반면,\n<code class=\"language-text\">library-b</code>의 <code class=\"language-text\">replace</code> 는 중첩 배열을 포함하여 모든 값을 바꾸는 데 사용됩니다.</p>\n<p>이처럼 두 라이브러리 모두 <code class=\"language-text\">replace</code> 로 <strong>이름은 같지만 구현과 목적이 다른 <code class=\"language-text\">replace</code> 함수를추가하여</strong>\n<strong><code class=\"language-text\">Array.prototype</code>을 확장</strong>하고 있습니다. 아래 코드를 보며 이처럼 프로토타입을 수정하면생길 수 있는\n문제점을 살펴 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token string\">'library-b'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-a'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [1, [3, 1]]이 출력되길 원합니다 (library-a의 replace 함수가 실행됨)</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [1, [2, 1]]</span>\n\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [10, '1', '1', '1']이 출력되길 원합니다</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [10, '1', '2', '1']</span>\n\n<span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-a'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-b'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [1, [3, 1]]이 출력되길 원합니다 (library-b의 replace 함수가 실행됨)</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [1, [3, 1]]</span>\n\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [10, '1', '1', '1']이 출력되길 원합니다</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [10, '1', '1', '1']</span></code></pre></div>\n<p><code class=\"language-text\">library-a</code>와 <code class=\"language-text\">library-b</code>를 모두 가져오는 경우 가져오는 순서에 따라 결과값이 변경되는 것을 확인할 수\n있습니다. 첫 번째 경우는 <code class=\"language-text\">library-b</code> 다음에 <code class=\"language-text\">library-a</code> 를 가져오므로 <code class=\"language-text\">library-a</code> 의 함수가\n<code class=\"language-text\">library-b</code> 의 <code class=\"language-text\">replace</code> 함수를 덮어씁니다. 이는 두 라이브러리가 동일한 전역 <code class=\"language-text\">Array.prototype</code> 객체\n를 수정하기 때문입니다.</p>\n<p>이처럼 두 라이브러리를 모두 사용하는 상황일 경우 <strong>충돌이 발생</strong>하여 한 구현이 다른 구현을 덮어쓰게\n되어 예기치 않은 동작이 발생하고 코드를 이해하고 디버깅하기 어려울 수 있습니다.</p>\n<h2 id=\"더-안전한-대안-standalone-utility-function\" style=\"position:relative;\"><a href=\"#%EB%8D%94-%EC%95%88%EC%A0%84%ED%95%9C-%EB%8C%80%EC%95%88-standalone-utility-function\" aria-label=\"더 안전한 대안 standalone utility function permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>더 안전한 대안: Standalone Utility Function</strong></h2>\n<p>내장 객체를 확장하는 대신 코드베이스 전체에서 가져오고 사용할 수 있는 유틸리티 함수를 만드는 것이좋\n습니다. 이 접근 방식은 내장된 Array 객체를 수정하지 않고 다른 라이브러리나 개발자 코드와의잠재적인충\n돌을 방지하기 때문에 더 안전하고 유지보수가 쉽습니다.</p>\n<p>예를 들어, 유틸리티 함수를 만들어 <code class=\"language-text\">Array.prototype</code>을 수정하지 않고 배열의 특정 항목을 교체하는것입\n니다. 아래 코드는 위 <code class=\"language-text\">Array.prototype</code> 을 확장하던 코드를 유틸리티 함수로 구현한 코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// utils/array.ts</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> replace <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> replaceAll <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">,</span> oldValue<span class=\"token punctuation\">,</span> newValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> replace<span class=\"token punctuation\">,</span> replaceAll <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이 유틸리티 함수들을 사용하기 위해 가져옵니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// main.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> replace<span class=\"token punctuation\">,</span> replaceAll <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./utils/array'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, [2, 1]]</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, [3, 1]]</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [10, '3', '2', '1']</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [10, '3', '3', '1']</span></code></pre></div>\n<p>이렇게 하면 유틸리티 함수가 <code class=\"language-text\">Array.prototype</code> 을 수정하지 않으며 필요에 따라 가져와 사용할 수있습니\n다.</p>\n<h2 id=\"objectdefineproperty를-사용하여-객체를-보다-안전하게-확장\" style=\"position:relative;\"><a href=\"#objectdefineproperty%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EB%B3%B4%EB%8B%A4-%EC%95%88%EC%A0%84%ED%95%98%EA%B2%8C-%ED%99%95%EC%9E%A5\" aria-label=\"objectdefineproperty를 사용하여 객체를 보다 안전하게 확장 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.defineProperty()를 사용하여 객체를 보다 안전하게 확장</h2>\n<p>그래도 배열 인스턴스에서 호출해 사용하고 싶을 수도 있겠죠. 이럴 땐 <code class=\"language-text\">Object.defineProperty()</code>을사용하\n여 더 안전하게 추가할 수 있습니다. <code class=\"language-text\">Object.defineProperty()</code> 정적 함수는 객체에 새로운 속성을직접 정\n의하거나 이미 존재하는 속성을 수정한 후, 해당 객체를 반환합니다. 객체에 새 속성을 정의하고속성을 지\n정하며 실수로 덮어쓰거나 하는 충돌을 방지할 수 있습니다.</p>\n<p>아래 코드는 <code class=\"language-text\">Object.defineProperty()</code> 을 사용해 <code class=\"language-text\">Array.prototype</code> 에 <code class=\"language-text\">replace</code> 함수를 추가하는 예시\n코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  Object<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">defineProperty</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">unknown</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">,</span> <span class=\"token string\">'replace'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">value</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    configurable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// `true`로 설정하면 나중에 속성을 삭제하거나 변경할 수 있습니다.</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">555</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, 555, 3, 2]</span></code></pre></div>\n<p><code class=\"language-text\">configurable</code> 속성의 기본값은 false입니다. 따라서 정의된 속성을 재정의하려고 하면 \"TypeError:\nCannot redefine property: replace\" 오류가 발생합니다 . 이 오류는 JavaScript가 속성의 재정의를허용하\n지 않기 때문에 발생합니다.</p>\n<p>이 오류를 방지하려면 먼저 속성이 이미 존재하는지 확인하면 됩니다. <code class=\"language-text\">replace</code> 함수가\n<code class=\"language-text\">Array.prototype</code>에 이미 존재하는지 확인하는 것이죠. 존재하지 않는 경우 함수가 정의됩니다. 또한\n<code class=\"language-text\">configurable</code> 속성을 true로 설정하여 속성을 다시 정의할 수 있도록 했습니다. 자세한 건\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters\">mdn</a>에\n서확인할 수 있습니다.</p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>결론</strong></h2>\n<p>개발자로서 JavaScript에서 표준 내장 객체 확장과 관련된 잠재적인 위험을 인지하는 게 중요합니다. 유틸\n리티 함수와 보다 안전한 <code class=\"language-text\">Object.defineProperty()</code> 함수를 사용하면 충돌을 방지하고 코드유지보수성을향\n상시키며 동료와 보다 효과적으로 협업할 수 있습니다. 따라서 다음 번에 내장된프로토타입을 수정하고싶을\n때는 다시 한 번 생각해 보고 더 안전한 대안을 고려해 보는 것을추천드립니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters</a></li>\n</ul>",
      "%EC%B0%B8%EA%B3%A0#참고": "<h2 id=\"내장-객체-확장의-매력\" style=\"position:relative;\"><a href=\"#%EB%82%B4%EC%9E%A5-%EA%B0%9D%EC%B2%B4-%ED%99%95%EC%9E%A5%EC%9D%98-%EB%A7%A4%EB%A0%A5\" aria-label=\"내장 객체 확장의 매력 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>내장 객체 확장의 매력</strong></h2>\n<p>JS로 작업할 때 <code class=\"language-text\">Array.prototype</code>과 같은 내장 객체에 직접 함수를 추가하려고 할 수도 있습니다. 이는배\n열 인스턴스에서 직접 추가한 함수를 호출할 수 있기 때문에 좋아 보일 수 있습니다. 그러나 이렇게 하면다\n른 개발자와 협업하거나 라이브러리를 사용할 때 충돌이 발생하고 코드를 이해하기 어려워질 수있습니다.</p>\n<p>들어가기 전에 <code class=\"language-text\">Array.prototype</code> 과 <code class=\"language-text\">Array 생성자</code> 에 함수를 추가할 때 차이점에 대해 살펴보겠습니다.</p>\n<h3 id=\"두-방법의-차이점\" style=\"position:relative;\"><a href=\"#%EB%91%90-%EB%B0%A9%EB%B2%95%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90\" aria-label=\"두 방법의 차이점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>두 방법의 차이점</h3>\n<p><code class=\"language-text\">Array.prototype</code> 을 사용하여 Array 객체에 함수를 추가하면 Array 객체의 프로토타입이 확장됩니다. 이\n는 배열의 모든 인스턴스가 추가된 함수에 액세스할 수 있음을 의미합니다. 반면 <code class=\"language-text\">Array.replace = …</code> 처럼\n사용하는 경우에는 프로토타입이 아닌 Array 생성자 자체에 정적 함수를 추가하게 됩니다.</p>\n<p>이 두 방법의 차이점에 대해 간단한 예시와 함께 살펴보도록 하겠습니다.</p>\n<ol>\n<li>\n<p>Array.prototype</p>\n<ul>\n<li><code class=\"language-text\">Array.prototype</code> 에 함수를 추가하면 모든 <strong>Array 인스턴스에서</strong> 함수를 사용할 수 있습니다.</li>\n<li>이는 모든 Array 인스턴스가 <code class=\"language-text\">Array.prototype</code> 에서 상속되기 때문입니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">myFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'hello world'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: 'hello world'</span></code></pre></div>\n</li>\n<li>\n<p>Array constructor</p>\n<ul>\n<li>Array 생성자에 직접 함수를 추가하면 정적 함수가 됩니다.</li>\n<li>정적 함수는 배열 인스턴스의 일부가 아니라 생성자 자체의 일부입니다.</li>\n<li>이는 Array의 인스턴스가 아닌 <strong>Array 생성자에서만</strong> 액세스할 수 있음을 의미합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">myFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'hello world'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: TypeError: arr.myFunction is not a function</span>\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: 'hello world'</span></code></pre></div>\n</li>\n</ol>\n<p>이제 위 방법으로 확장하는 게 왜 좋지 않은지 살펴보도록 하겠습니다.</p>\n<h2 id=\"문제가-발생할-수-있는-상황\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%83%81%ED%99%A9\" aria-label=\"문제가 발생할 수 있는 상황 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제가 발생할 수 있는 상황</h2>\n<p><code class=\"language-text\">Array.prototype</code>과 같은 내장 객체를 확장하는 것은 일반적으로 좋은 방법이 아닙니다. 위에서말했다시피\n프로토타입을 수정하면 충돌이 발생할 수 있으며 코드를 이해하고 유지보수하기가 더 어려워질수 있기 때문\n입니다.</p>\n<p>이제 내장 객체 확장의 잠재적인 위험을 보여주는 예를 살펴보겠습니다. 두 개의 JavaScript 라이브러리(라\n이브러리 A 및 라이브러리 B)를 사용하는 웹 애플리케이션을 개발하고 있다고 가정해보겠습니다.</p>\n<p>각 라이브러리의 구현 코드는 아래와 같습니다.</p>\n<ul>\n<li>\n<p>라이브러리 A</p>\n<ul>\n<li>배열에서 <code class=\"language-text\">oldValue</code>의 <strong>첫 번째 항목만</strong> <code class=\"language-text\">newValue</code>로 바꿉니다. 중첩된 배열에서는 교체 작업을수\n행하지 않습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// Library A</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">declare</span> global <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token generic-function\"><span class=\"token function\">replace</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span> <span class=\"token keyword\">extends</span> <span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">replace</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(\n  this: NestedArray&lt;T>,\n  oldValue: T,\n  newValue: T,\n): NestedArray&lt;T> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token plain-text\">;\n\nexport </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">;</span></code></pre></div>\n</li>\n<li>\n<p>라이브러리 B</p>\n<ul>\n<li>배열에서 <code class=\"language-text\">oldValue</code>의 <strong>모든 항목</strong>을 <code class=\"language-text\">newValue</code>로 바꾸고 중첩 배열을 재귀적으로 처리하여 동일한\n교체 작업을 수행합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// Library B</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">declare</span> global <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">interface</span> <span class=\"token class-name\"><span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token generic-function\"><span class=\"token function\">replace</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">U</span> <span class=\"token keyword\">extends</span> <span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">U</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">replace</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(\n  this: NestedArray&lt;T>,\n  oldValue: T,\n  newValue: T,\n): NestedArray&lt;T> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>item <span class=\"token keyword\">as</span> <span class=\"token builtin\">unknown</span> <span class=\"token keyword\">as</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>oldValue<span class=\"token punctuation\">,</span> newValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item <span class=\"token operator\">===</span> oldValue <span class=\"token operator\">?</span> newValue <span class=\"token operator\">:</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token plain-text\">;\n\nexport </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">;</span></code></pre></div>\n</li>\n</ul>\n<p>요약하면 <code class=\"language-text\">library-a</code>의 <code class=\"language-text\">replace</code>는 배열에서 처음 나타나는 값을 바꾸는 데 사용되는 반면,\n<code class=\"language-text\">library-b</code>의 <code class=\"language-text\">replace</code> 는 중첩 배열을 포함하여 모든 값을 바꾸는 데 사용됩니다.</p>\n<p>이처럼 두 라이브러리 모두 <code class=\"language-text\">replace</code> 로 <strong>이름은 같지만 구현과 목적이 다른 <code class=\"language-text\">replace</code> 함수를추가하여</strong>\n<strong><code class=\"language-text\">Array.prototype</code>을 확장</strong>하고 있습니다. 아래 코드를 보며 이처럼 프로토타입을 수정하면생길 수 있는\n문제점을 살펴 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token string\">'library-b'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-a'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [1, [3, 1]]이 출력되길 원합니다 (library-a의 replace 함수가 실행됨)</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [1, [2, 1]]</span>\n\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [10, '1', '1', '1']이 출력되길 원합니다</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [10, '1', '2', '1']</span>\n\n<span class=\"token operator\">--</span><span class=\"token operator\">-</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-a'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'library-b'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [1, [3, 1]]이 출력되길 원합니다 (library-b의 replace 함수가 실행됨)</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [1, [3, 1]]</span>\n\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [10, '1', '1', '1']이 출력되길 원합니다</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실제 출력 결과: [10, '1', '1', '1']</span></code></pre></div>\n<p><code class=\"language-text\">library-a</code>와 <code class=\"language-text\">library-b</code>를 모두 가져오는 경우 가져오는 순서에 따라 결과값이 변경되는 것을 확인할 수\n있습니다. 첫 번째 경우는 <code class=\"language-text\">library-b</code> 다음에 <code class=\"language-text\">library-a</code> 를 가져오므로 <code class=\"language-text\">library-a</code> 의 함수가\n<code class=\"language-text\">library-b</code> 의 <code class=\"language-text\">replace</code> 함수를 덮어씁니다. 이는 두 라이브러리가 동일한 전역 <code class=\"language-text\">Array.prototype</code> 객체\n를 수정하기 때문입니다.</p>\n<p>이처럼 두 라이브러리를 모두 사용하는 상황일 경우 <strong>충돌이 발생</strong>하여 한 구현이 다른 구현을 덮어쓰게\n되어 예기치 않은 동작이 발생하고 코드를 이해하고 디버깅하기 어려울 수 있습니다.</p>\n<h2 id=\"더-안전한-대안-standalone-utility-function\" style=\"position:relative;\"><a href=\"#%EB%8D%94-%EC%95%88%EC%A0%84%ED%95%9C-%EB%8C%80%EC%95%88-standalone-utility-function\" aria-label=\"더 안전한 대안 standalone utility function permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>더 안전한 대안: Standalone Utility Function</strong></h2>\n<p>내장 객체를 확장하는 대신 코드베이스 전체에서 가져오고 사용할 수 있는 유틸리티 함수를 만드는 것이좋\n습니다. 이 접근 방식은 내장된 Array 객체를 수정하지 않고 다른 라이브러리나 개발자 코드와의잠재적인충\n돌을 방지하기 때문에 더 안전하고 유지보수가 쉽습니다.</p>\n<p>예를 들어, 유틸리티 함수를 만들어 <code class=\"language-text\">Array.prototype</code>을 수정하지 않고 배열의 특정 항목을 교체하는것입\n니다. 아래 코드는 위 <code class=\"language-text\">Array.prototype</code> 을 확장하던 코드를 유틸리티 함수로 구현한 코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// utils/array.ts</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">|</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> replace <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> replaceAll <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>array<span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> oldValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> NestedArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">,</span> oldValue<span class=\"token punctuation\">,</span> newValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> array<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> replace<span class=\"token punctuation\">,</span> replaceAll <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이 유틸리티 함수들을 사용하기 위해 가져옵니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// main.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> replace<span class=\"token punctuation\">,</span> replaceAll <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./utils/array'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, [2, 1]]</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, [3, 1]]</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [10, '3', '2', '1']</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">replaceAll</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [10, '3', '3', '1']</span></code></pre></div>\n<p>이렇게 하면 유틸리티 함수가 <code class=\"language-text\">Array.prototype</code> 을 수정하지 않으며 필요에 따라 가져와 사용할 수있습니\n다.</p>\n<h2 id=\"objectdefineproperty를-사용하여-객체를-보다-안전하게-확장\" style=\"position:relative;\"><a href=\"#objectdefineproperty%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EB%B3%B4%EB%8B%A4-%EC%95%88%EC%A0%84%ED%95%98%EA%B2%8C-%ED%99%95%EC%9E%A5\" aria-label=\"objectdefineproperty를 사용하여 객체를 보다 안전하게 확장 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object.defineProperty()를 사용하여 객체를 보다 안전하게 확장</h2>\n<p>그래도 배열 인스턴스에서 호출해 사용하고 싶을 수도 있겠죠. 이럴 땐 <code class=\"language-text\">Object.defineProperty()</code>을사용하\n여 더 안전하게 추가할 수 있습니다. <code class=\"language-text\">Object.defineProperty()</code> 정적 함수는 객체에 새로운 속성을직접 정\n의하거나 이미 존재하는 속성을 수정한 후, 해당 객체를 반환합니다. 객체에 새 속성을 정의하고속성을 지\n정하며 실수로 덮어쓰거나 하는 충돌을 방지할 수 있습니다.</p>\n<p>아래 코드는 <code class=\"language-text\">Object.defineProperty()</code> 을 사용해 <code class=\"language-text\">Array.prototype</code> 에 <code class=\"language-text\">replace</code> 함수를 추가하는 예시\n코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  Object<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">defineProperty</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">unknown</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">,</span> <span class=\"token string\">'replace'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">value</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>oldValue<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> newValue<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>item<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>replaced <span class=\"token operator\">&amp;&amp;</span> item <span class=\"token operator\">===</span> oldValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          replaced <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span> newValue<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> item<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    configurable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// `true`로 설정하면 나중에 속성을 삭제하거나 변경할 수 있습니다.</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">555</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output: [1, 555, 3, 2]</span></code></pre></div>\n<p><code class=\"language-text\">configurable</code> 속성의 기본값은 false입니다. 따라서 정의된 속성을 재정의하려고 하면 \"TypeError:\nCannot redefine property: replace\" 오류가 발생합니다 . 이 오류는 JavaScript가 속성의 재정의를허용하\n지 않기 때문에 발생합니다.</p>\n<p>이 오류를 방지하려면 먼저 속성이 이미 존재하는지 확인하면 됩니다. <code class=\"language-text\">replace</code> 함수가\n<code class=\"language-text\">Array.prototype</code>에 이미 존재하는지 확인하는 것이죠. 존재하지 않는 경우 함수가 정의됩니다. 또한\n<code class=\"language-text\">configurable</code> 속성을 true로 설정하여 속성을 다시 정의할 수 있도록 했습니다. 자세한 건\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters\">mdn</a>에\n서확인할 수 있습니다.</p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>결론</strong></h2>\n<p>개발자로서 JavaScript에서 표준 내장 객체 확장과 관련된 잠재적인 위험을 인지하는 게 중요합니다. 유틸\n리티 함수와 보다 안전한 <code class=\"language-text\">Object.defineProperty()</code> 함수를 사용하면 충돌을 방지하고 코드유지보수성을향\n상시키며 동료와 보다 효과적으로 협업할 수 있습니다. 따라서 다음 번에 내장된프로토타입을 수정하고싶을\n때는 다시 한 번 생각해 보고 더 안전한 대안을 고려해 보는 것을추천드립니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#parameters</a></li>\n</ul>"
    }
  },
  {
    "route": "https://lazy-dev.netlify.app/gatsby/gatsby-using-window-object/",
    "data": {
      "%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0#들어가며": "<h2 id=\"들어가며\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\" aria-label=\"들어가며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>들어가며</h2>\n<p>Gatsby는 개발 환경에서는 브라우저, 빌드 프로세스 중엔 Node.js 환경에서 실행됩니다. 이러한 특성으로인\n해 브라우저 환경에서만 사용할 수 있는 전역 객체인 <code class=\"language-text\">window</code> 객체를 사용할 때 혼란을 초래할 수 있습니\n다.</p>\n<p>이 글에서는 Gatsby가 작동하는 방식과 그렇게 작동하는 이유, <code class=\"language-text\">useEffect</code> 훅 외부에서 <code class=\"language-text\">window</code> 객체를사\n용할 때 방어 코드의 필요성, <code class=\"language-text\">useEffect</code> 훅에서 <code class=\"language-text\">window</code> 객체를 사용하는 것이 허용되는 이유 및\n<a href=\"https://www.npmjs.com/package/browser-monads\">browser-monads</a> 패키지를 사용하여 방어 코드를 작성하\n지 않고 브라우저와 비브라우저 환경 모두에서 원활하게 작동하는 코드를 작성하는 방법을 알아보겠습니다.</p>\n<h2 id=\"gatsby를-선택한-이유\" style=\"position:relative;\"><a href=\"#gatsby%EB%A5%BC-%EC%84%A0%ED%83%9D%ED%95%9C-%EC%9D%B4%EC%9C%A0\" aria-label=\"gatsby를 선택한 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby를 선택한 이유</h2>\n<p>얼마 전, 개발 블로그를 만들기 위해 크게 아래와 같은 이유로 <code class=\"language-text\">Gatsby</code>를 선택해 개발하게 되었습니다.</p>\n<ul>\n<li><strong>높은 성능</strong>: Gatsby는 정적 HTML 파일을 생성하여 매우 빠른 페이지 로드와 향상된 사용자 경험을 제\n공합니다. 또한 이미지 최적화, 코드 스플리팅, 지연 로딩도 간단하게 할 수 있게 기본 제공해줍니다.</li>\n<li><strong>정적 사이트 생성(SSG)</strong>: React의 SSR 기능을 활용하여 빌드 프로세스 중에 정적 파일을 생성합니다.\n이렇게 되면 CSR에 비해 더 나은 SEO, 더 빠른 페이지 로드가 가능합니다.</li>\n<li><strong>뛰어난 데이터 결합</strong>: GraphQL을 사용하여 CMS, API 및 로컬 파일과 같은 다양한 소스에서 데이터를가\n져올 수 있습니다. 이러한 유연성은 개발 블로그를 만드는 데 큰 이점을 줄 것 같았습니다.</li>\n<li><strong>플러그인 생태계</strong>: 프로젝트의 기능을 향상하거나 확장하기 위해 쉽게 추가 가능한 방대한 플러그인생\n태계를 제공합니다. 이 모듈식 접근 방식은 개발 시간을 절약하고 깔끔한 코드베이스를 유지하는 데 많은\n도움이 되었습니다.</li>\n</ul>\n<p>물론 <code class=\"language-text\">Next.js</code> 또한 SSG와 SSR에 중점을 둔 좋은 프레임워크지만 Gatsby의 데이터 처리와 빠르게 개발 가\n능하게 해주는 방대한 플러그인들이 이와 차별화 된다고 생각했습니다.</p>\n<p>결론적으로 성능, 데이터 처리의 유연성, 광범위한 플러그인 생태계 및 활성화된 커뮤니티 및 문서에 중점\n을 둔 Gatsby를 선택하게 되었습니다.</p>\n<p>그런데 사용할수록 정말 만족하던 Gatsby였지만 유일하게 거슬리던 게 있었습니다. 스크롤 이벤트나 화면사\n이즈 정보를 가져오기 위해 <code class=\"language-text\">window</code> 객체를 사용했습니다. 그러나 Gatsby의 이중 환경에 의해 <code class=\"language-text\">window</code> 객\n체를 사용하려면 항상 존재 여부를 확인하는 방어 코드를 작성해야만 했습니다.</p>\n<h2 id=\"gatsby의-이중-환경-이해-및-window-객체-사용\" style=\"position:relative;\"><a href=\"#gatsby%EC%9D%98-%EC%9D%B4%EC%A4%91-%ED%99%98%EA%B2%BD-%EC%9D%B4%ED%95%B4-%EB%B0%8F-window-%EA%B0%9D%EC%B2%B4-%EC%82%AC%EC%9A%A9\" aria-label=\"gatsby의 이중 환경 이해 및 window 객체 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby의 이중 환경 이해 및 window 객체 사용</h2>\n<p>Gatsby는 애플리케이션을 빠르게 개발하기 위해 <strong>개발 환경</strong>에서 작업할 때 <strong>브라우저에서 실행</strong>되어\nHMR, 실시간 프리뷰와 같은 기능을 제공하여 개발자 경험을 향상시킵니다. 그러나 <strong>빌드 프로세스</strong> 중에\n<strong>Node.js 환경</strong>에서 작동하여 최적화된 정적 파일을 생성하고 로컬 파일과 같은 다양한 소스에서 데이터\n를 가져와 처리합니다. 이러한 최적화는 더 빠른 로드 시간과 더 나은 성능을 제공할 수 있게 되므로 유저\n에게 좋은 경험을 줄 수 있게 해줍니다.</p>\n<p>다만 이러한 Gatsby의 이중 환경으로 인해 Gastby를 사용해 개발할 때는 브라우저 환경에서만 사용할 수 있\n는 <code class=\"language-text\">window</code> 객체를 사용할 때 주의해야 합니다. 만약 <code class=\"language-text\">window</code> 객체를 사용해야 한다면 아래와 같은 방법\n들을 사용해야 합니다.</p>\n<h3 id=\"window-객체에-대한-방어-코드\" style=\"position:relative;\"><a href=\"#window-%EA%B0%9D%EC%B2%B4%EC%97%90-%EB%8C%80%ED%95%9C-%EB%B0%A9%EC%96%B4-%EC%BD%94%EB%93%9C\" aria-label=\"window 객체에 대한 방어 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>window 객체에 대한 방어 코드</h3>\n<p>위에서 설명했듯이, 개발 중에는 CSR과 동일한 환경에서 동작하기 때문에 window 객체가 존재하지만 빌드중\n에는 Node 환경에서 window 객체가 존재하지 않습니다. 따라서 Gatsby 프로젝트가 두 환경에서 원활하게실\n행되도록 하려면 <code class=\"language-text\">window</code> 객체를 사용할 때 방어 코드를 작성하는 것이 중요합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isBrowser <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> window <span class=\"token operator\">!==</span> <span class=\"token string\">\"undefined\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> loggedIn <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isBrowser<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span>localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"isLoggedIn\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"true\"</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Am I logged in? </span><span class=\"token punctuation\">{</span>loggedIn<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드는 Gatsby가 빌드하는 동안 코드가 실행되지 않도록 <code class=\"language-text\">window</code> 객체가 정의되어 있는지 확인하는 것\n을 의미합니다. 이렇게 하지 않으면 빌드 프로세스 중 오류가 발생합니다.</p>\n<h3 id=\"useeffect-훅-내부에서-사용\" style=\"position:relative;\"><a href=\"#useeffect-%ED%9B%85-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9\" aria-label=\"useeffect 훅 내부에서 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useEffect 훅 내부에서 사용</h3>\n<p><code class=\"language-text\">useEffect</code> 훅은 구성 요소가 렌더링된 후 클라이언트 측(브라우저 환경)에서만 실행됩니다. 이렇게 하면\n방어 코드를 작성하지 않고도 <code class=\"language-text\">useEffect</code> 훅 내부에선 안전하게 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleScroll</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> passive<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"browser-monads-패키지-사용\" style=\"position:relative;\"><a href=\"#browser-monads-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%82%AC%EC%9A%A9\" aria-label=\"browser monads 패키지 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>browser-monads 패키지 사용</h3>\n<p><code class=\"language-text\">browser-monads</code> 패키지는 내부적으로 방어 코드를 처리하는 일련의 모나드 함수를 제공하여 Gatsby 프로\n젝트에서 <code class=\"language-text\">window</code> 객체로 작업하는 프로세스를 단순화합니다. <code class=\"language-text\">browser-monads</code> 를 사용하면 <code class=\"language-text\">window</code> 객\n체에 액세스하는 문제를 해결하는 데 도움이 됩니다. 이 패키지는 브라우저와 Node.js 환경 모두에서 코드\n가 원활하게 작동하도록 보장하기 때문입니다.</p>\n<p>그럼 어떻게 두 환경에서 코드가 원활하게 작동하도록 보장할까요? <code class=\"language-text\">browser-monads</code> 패키지가 이를 달성하\n는 방법은 다음과 같습니다.</p>\n<ol>\n<li>해당 패키지에서는 window, document와 같은 몇 가지 모나드를 반환합니다.</li>\n<li>브라우저 환경에서 사용될 때 내보낸 모나드는 실제 <code class=\"language-text\">window</code> 및 <code class=\"language-text\">document</code> 객체에 대한 참조이므로 필\n요한 기능을 사용할 수 있습니다.</li>\n<li>브라우저가 아닌 환경(ex: Node.js 또는 SSR 중)에서는 <code class=\"language-text\">nothing</code> 의 인스턴스가 됩니다. 즉, 이러한 객\n체의 속성이나 메서드에 참조하려고 하면 오류가 발생하지 않고 단순히 “nothing” 값을 반환합니다.\n<code class=\"language-text\">nothing</code> 인스턴스는 호출하는 메서드에 관계없이 항상 자신을 반환하는 기본 프록시입니다. 즉, 인스\n턴스가 존재하지 않는 경우 적합한 대체 자원입니다.</li>\n<li>따라서 패키지에서 제공하는 모나드를 사용하면 실행 환경이나 방어 코드 작성에 대해 걱정할 필요 없이\n코드를 작성할 수 있습니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// https://github.com/slmgc/Nothing/blob/master/src/index.js</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> Nothing <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Nothing<span class=\"token punctuation\">;</span>\n  fn<span class=\"token punctuation\">.</span>toString <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">.</span>toLocaleString <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">[</span>Symbol<span class=\"token punctuation\">.</span>toPrimitive<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  fn<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">valueOf</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">freeze</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">get</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o<span class=\"token punctuation\">,</span> key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> o<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> Nothing<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">toBool</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>o <span class=\"token operator\">&amp;&amp;</span> o<span class=\"token punctuation\">.</span><span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNothing</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> o <span class=\"token operator\">===</span> Nothing<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isSomething</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>o <span class=\"token operator\">===</span> Nothing <span class=\"token operator\">||</span> o <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">serialize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">===</span> Nothing <span class=\"token operator\">?</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">:</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">deserialize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">s</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">?</span> Nothing <span class=\"token operator\">:</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>사용하는 방법은 다음과 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> window <span class=\"token punctuation\">}</span> from ‘browser<span class=\"token operator\">-</span>monads’\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Location: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>비브라우저 환경에서 코드를 실행하더라도 <code class=\"language-text\">browser-monads</code> 패키지에서 제공하는 모나드가 정상적으로 처\n리하므로 오류가 발생하지 않습니다.</p>\n<p>이처럼 <code class=\"language-text\">browser-monads</code> 패키지를 사용해 오류 가능성을 줄이면서 코드 가독성과 유지보수성을 향상시킬수\n있었습니다.</p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>요약하자면, Gatsby의 이중 환경 특성은 <code class=\"language-text\">window</code> 객체를 사용할 때 주의를 요합니다. <code class=\"language-text\">useEffect</code> 훅 내에\n서 <code class=\"language-text\">window</code> 객체를 사용하면 안전합니다. 만약 <code class=\"language-text\">useEffect</code> 훅 외부에서 사용할 거라면 방어 코드를 작성\n하거나 <code class=\"language-text\">browser-monads</code> 패키지를 활용하면 두 환경에서 원활한 경험을 보장할 수 있습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://www.gatsbyjs.com/docs/debugging-html-builds/\">https://www.gatsbyjs.com/docs/debugging-html-builds/</a></li>\n<li><a href=\"https://medium.com/@Jense5_/use-document-and-window-with-gatsby-e9a92ee31f36\">https://medium.com/@Jense5_/use-document-and-window-with-gatsby-e9a92ee31f36</a></li>\n<li><a href=\"https://github.com/slmgc/Nothing\">https://github.com/slmgc/Nothing</a></li>\n</ul>",
      "gatsby%EB%A5%BC-%EC%84%A0%ED%83%9D%ED%95%9C-%EC%9D%B4%EC%9C%A0#Gatsby를 선택한 이유": "<h2 id=\"들어가며\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\" aria-label=\"들어가며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>들어가며</h2>\n<p>Gatsby는 개발 환경에서는 브라우저, 빌드 프로세스 중엔 Node.js 환경에서 실행됩니다. 이러한 특성으로인\n해 브라우저 환경에서만 사용할 수 있는 전역 객체인 <code class=\"language-text\">window</code> 객체를 사용할 때 혼란을 초래할 수 있습니\n다.</p>\n<p>이 글에서는 Gatsby가 작동하는 방식과 그렇게 작동하는 이유, <code class=\"language-text\">useEffect</code> 훅 외부에서 <code class=\"language-text\">window</code> 객체를사\n용할 때 방어 코드의 필요성, <code class=\"language-text\">useEffect</code> 훅에서 <code class=\"language-text\">window</code> 객체를 사용하는 것이 허용되는 이유 및\n<a href=\"https://www.npmjs.com/package/browser-monads\">browser-monads</a> 패키지를 사용하여 방어 코드를 작성하\n지 않고 브라우저와 비브라우저 환경 모두에서 원활하게 작동하는 코드를 작성하는 방법을 알아보겠습니다.</p>\n<h2 id=\"gatsby를-선택한-이유\" style=\"position:relative;\"><a href=\"#gatsby%EB%A5%BC-%EC%84%A0%ED%83%9D%ED%95%9C-%EC%9D%B4%EC%9C%A0\" aria-label=\"gatsby를 선택한 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby를 선택한 이유</h2>\n<p>얼마 전, 개발 블로그를 만들기 위해 크게 아래와 같은 이유로 <code class=\"language-text\">Gatsby</code>를 선택해 개발하게 되었습니다.</p>\n<ul>\n<li><strong>높은 성능</strong>: Gatsby는 정적 HTML 파일을 생성하여 매우 빠른 페이지 로드와 향상된 사용자 경험을 제\n공합니다. 또한 이미지 최적화, 코드 스플리팅, 지연 로딩도 간단하게 할 수 있게 기본 제공해줍니다.</li>\n<li><strong>정적 사이트 생성(SSG)</strong>: React의 SSR 기능을 활용하여 빌드 프로세스 중에 정적 파일을 생성합니다.\n이렇게 되면 CSR에 비해 더 나은 SEO, 더 빠른 페이지 로드가 가능합니다.</li>\n<li><strong>뛰어난 데이터 결합</strong>: GraphQL을 사용하여 CMS, API 및 로컬 파일과 같은 다양한 소스에서 데이터를가\n져올 수 있습니다. 이러한 유연성은 개발 블로그를 만드는 데 큰 이점을 줄 것 같았습니다.</li>\n<li><strong>플러그인 생태계</strong>: 프로젝트의 기능을 향상하거나 확장하기 위해 쉽게 추가 가능한 방대한 플러그인생\n태계를 제공합니다. 이 모듈식 접근 방식은 개발 시간을 절약하고 깔끔한 코드베이스를 유지하는 데 많은\n도움이 되었습니다.</li>\n</ul>\n<p>물론 <code class=\"language-text\">Next.js</code> 또한 SSG와 SSR에 중점을 둔 좋은 프레임워크지만 Gatsby의 데이터 처리와 빠르게 개발 가\n능하게 해주는 방대한 플러그인들이 이와 차별화 된다고 생각했습니다.</p>\n<p>결론적으로 성능, 데이터 처리의 유연성, 광범위한 플러그인 생태계 및 활성화된 커뮤니티 및 문서에 중점\n을 둔 Gatsby를 선택하게 되었습니다.</p>\n<p>그런데 사용할수록 정말 만족하던 Gatsby였지만 유일하게 거슬리던 게 있었습니다. 스크롤 이벤트나 화면사\n이즈 정보를 가져오기 위해 <code class=\"language-text\">window</code> 객체를 사용했습니다. 그러나 Gatsby의 이중 환경에 의해 <code class=\"language-text\">window</code> 객\n체를 사용하려면 항상 존재 여부를 확인하는 방어 코드를 작성해야만 했습니다.</p>\n<h2 id=\"gatsby의-이중-환경-이해-및-window-객체-사용\" style=\"position:relative;\"><a href=\"#gatsby%EC%9D%98-%EC%9D%B4%EC%A4%91-%ED%99%98%EA%B2%BD-%EC%9D%B4%ED%95%B4-%EB%B0%8F-window-%EA%B0%9D%EC%B2%B4-%EC%82%AC%EC%9A%A9\" aria-label=\"gatsby의 이중 환경 이해 및 window 객체 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby의 이중 환경 이해 및 window 객체 사용</h2>\n<p>Gatsby는 애플리케이션을 빠르게 개발하기 위해 <strong>개발 환경</strong>에서 작업할 때 <strong>브라우저에서 실행</strong>되어\nHMR, 실시간 프리뷰와 같은 기능을 제공하여 개발자 경험을 향상시킵니다. 그러나 <strong>빌드 프로세스</strong> 중에\n<strong>Node.js 환경</strong>에서 작동하여 최적화된 정적 파일을 생성하고 로컬 파일과 같은 다양한 소스에서 데이터\n를 가져와 처리합니다. 이러한 최적화는 더 빠른 로드 시간과 더 나은 성능을 제공할 수 있게 되므로 유저\n에게 좋은 경험을 줄 수 있게 해줍니다.</p>\n<p>다만 이러한 Gatsby의 이중 환경으로 인해 Gastby를 사용해 개발할 때는 브라우저 환경에서만 사용할 수 있\n는 <code class=\"language-text\">window</code> 객체를 사용할 때 주의해야 합니다. 만약 <code class=\"language-text\">window</code> 객체를 사용해야 한다면 아래와 같은 방법\n들을 사용해야 합니다.</p>\n<h3 id=\"window-객체에-대한-방어-코드\" style=\"position:relative;\"><a href=\"#window-%EA%B0%9D%EC%B2%B4%EC%97%90-%EB%8C%80%ED%95%9C-%EB%B0%A9%EC%96%B4-%EC%BD%94%EB%93%9C\" aria-label=\"window 객체에 대한 방어 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>window 객체에 대한 방어 코드</h3>\n<p>위에서 설명했듯이, 개발 중에는 CSR과 동일한 환경에서 동작하기 때문에 window 객체가 존재하지만 빌드중\n에는 Node 환경에서 window 객체가 존재하지 않습니다. 따라서 Gatsby 프로젝트가 두 환경에서 원활하게실\n행되도록 하려면 <code class=\"language-text\">window</code> 객체를 사용할 때 방어 코드를 작성하는 것이 중요합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isBrowser <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> window <span class=\"token operator\">!==</span> <span class=\"token string\">\"undefined\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> loggedIn <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isBrowser<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span>localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"isLoggedIn\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"true\"</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Am I logged in? </span><span class=\"token punctuation\">{</span>loggedIn<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드는 Gatsby가 빌드하는 동안 코드가 실행되지 않도록 <code class=\"language-text\">window</code> 객체가 정의되어 있는지 확인하는 것\n을 의미합니다. 이렇게 하지 않으면 빌드 프로세스 중 오류가 발생합니다.</p>\n<h3 id=\"useeffect-훅-내부에서-사용\" style=\"position:relative;\"><a href=\"#useeffect-%ED%9B%85-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9\" aria-label=\"useeffect 훅 내부에서 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useEffect 훅 내부에서 사용</h3>\n<p><code class=\"language-text\">useEffect</code> 훅은 구성 요소가 렌더링된 후 클라이언트 측(브라우저 환경)에서만 실행됩니다. 이렇게 하면\n방어 코드를 작성하지 않고도 <code class=\"language-text\">useEffect</code> 훅 내부에선 안전하게 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleScroll</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> passive<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"browser-monads-패키지-사용\" style=\"position:relative;\"><a href=\"#browser-monads-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%82%AC%EC%9A%A9\" aria-label=\"browser monads 패키지 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>browser-monads 패키지 사용</h3>\n<p><code class=\"language-text\">browser-monads</code> 패키지는 내부적으로 방어 코드를 처리하는 일련의 모나드 함수를 제공하여 Gatsby 프로\n젝트에서 <code class=\"language-text\">window</code> 객체로 작업하는 프로세스를 단순화합니다. <code class=\"language-text\">browser-monads</code> 를 사용하면 <code class=\"language-text\">window</code> 객\n체에 액세스하는 문제를 해결하는 데 도움이 됩니다. 이 패키지는 브라우저와 Node.js 환경 모두에서 코드\n가 원활하게 작동하도록 보장하기 때문입니다.</p>\n<p>그럼 어떻게 두 환경에서 코드가 원활하게 작동하도록 보장할까요? <code class=\"language-text\">browser-monads</code> 패키지가 이를 달성하\n는 방법은 다음과 같습니다.</p>\n<ol>\n<li>해당 패키지에서는 window, document와 같은 몇 가지 모나드를 반환합니다.</li>\n<li>브라우저 환경에서 사용될 때 내보낸 모나드는 실제 <code class=\"language-text\">window</code> 및 <code class=\"language-text\">document</code> 객체에 대한 참조이므로 필\n요한 기능을 사용할 수 있습니다.</li>\n<li>브라우저가 아닌 환경(ex: Node.js 또는 SSR 중)에서는 <code class=\"language-text\">nothing</code> 의 인스턴스가 됩니다. 즉, 이러한 객\n체의 속성이나 메서드에 참조하려고 하면 오류가 발생하지 않고 단순히 “nothing” 값을 반환합니다.\n<code class=\"language-text\">nothing</code> 인스턴스는 호출하는 메서드에 관계없이 항상 자신을 반환하는 기본 프록시입니다. 즉, 인스\n턴스가 존재하지 않는 경우 적합한 대체 자원입니다.</li>\n<li>따라서 패키지에서 제공하는 모나드를 사용하면 실행 환경이나 방어 코드 작성에 대해 걱정할 필요 없이\n코드를 작성할 수 있습니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// https://github.com/slmgc/Nothing/blob/master/src/index.js</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> Nothing <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Nothing<span class=\"token punctuation\">;</span>\n  fn<span class=\"token punctuation\">.</span>toString <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">.</span>toLocaleString <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">[</span>Symbol<span class=\"token punctuation\">.</span>toPrimitive<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  fn<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">valueOf</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">freeze</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">get</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o<span class=\"token punctuation\">,</span> key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> o<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> Nothing<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">toBool</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>o <span class=\"token operator\">&amp;&amp;</span> o<span class=\"token punctuation\">.</span><span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNothing</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> o <span class=\"token operator\">===</span> Nothing<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isSomething</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>o <span class=\"token operator\">===</span> Nothing <span class=\"token operator\">||</span> o <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">serialize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">===</span> Nothing <span class=\"token operator\">?</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">:</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">deserialize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">s</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">?</span> Nothing <span class=\"token operator\">:</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>사용하는 방법은 다음과 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> window <span class=\"token punctuation\">}</span> from ‘browser<span class=\"token operator\">-</span>monads’\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Location: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>비브라우저 환경에서 코드를 실행하더라도 <code class=\"language-text\">browser-monads</code> 패키지에서 제공하는 모나드가 정상적으로 처\n리하므로 오류가 발생하지 않습니다.</p>\n<p>이처럼 <code class=\"language-text\">browser-monads</code> 패키지를 사용해 오류 가능성을 줄이면서 코드 가독성과 유지보수성을 향상시킬수\n있었습니다.</p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>요약하자면, Gatsby의 이중 환경 특성은 <code class=\"language-text\">window</code> 객체를 사용할 때 주의를 요합니다. <code class=\"language-text\">useEffect</code> 훅 내에\n서 <code class=\"language-text\">window</code> 객체를 사용하면 안전합니다. 만약 <code class=\"language-text\">useEffect</code> 훅 외부에서 사용할 거라면 방어 코드를 작성\n하거나 <code class=\"language-text\">browser-monads</code> 패키지를 활용하면 두 환경에서 원활한 경험을 보장할 수 있습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://www.gatsbyjs.com/docs/debugging-html-builds/\">https://www.gatsbyjs.com/docs/debugging-html-builds/</a></li>\n<li><a href=\"https://medium.com/@Jense5_/use-document-and-window-with-gatsby-e9a92ee31f36\">https://medium.com/@Jense5_/use-document-and-window-with-gatsby-e9a92ee31f36</a></li>\n<li><a href=\"https://github.com/slmgc/Nothing\">https://github.com/slmgc/Nothing</a></li>\n</ul>",
      "gatsby%EC%9D%98-%EC%9D%B4%EC%A4%91-%ED%99%98%EA%B2%BD-%EC%9D%B4%ED%95%B4-%EB%B0%8F-window-%EA%B0%9D%EC%B2%B4-%EC%82%AC%EC%9A%A9#Gatsby의 이중 환경 이해 및 window 객체 사용": "<h2 id=\"들어가며\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\" aria-label=\"들어가며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>들어가며</h2>\n<p>Gatsby는 개발 환경에서는 브라우저, 빌드 프로세스 중엔 Node.js 환경에서 실행됩니다. 이러한 특성으로인\n해 브라우저 환경에서만 사용할 수 있는 전역 객체인 <code class=\"language-text\">window</code> 객체를 사용할 때 혼란을 초래할 수 있습니\n다.</p>\n<p>이 글에서는 Gatsby가 작동하는 방식과 그렇게 작동하는 이유, <code class=\"language-text\">useEffect</code> 훅 외부에서 <code class=\"language-text\">window</code> 객체를사\n용할 때 방어 코드의 필요성, <code class=\"language-text\">useEffect</code> 훅에서 <code class=\"language-text\">window</code> 객체를 사용하는 것이 허용되는 이유 및\n<a href=\"https://www.npmjs.com/package/browser-monads\">browser-monads</a> 패키지를 사용하여 방어 코드를 작성하\n지 않고 브라우저와 비브라우저 환경 모두에서 원활하게 작동하는 코드를 작성하는 방법을 알아보겠습니다.</p>\n<h2 id=\"gatsby를-선택한-이유\" style=\"position:relative;\"><a href=\"#gatsby%EB%A5%BC-%EC%84%A0%ED%83%9D%ED%95%9C-%EC%9D%B4%EC%9C%A0\" aria-label=\"gatsby를 선택한 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby를 선택한 이유</h2>\n<p>얼마 전, 개발 블로그를 만들기 위해 크게 아래와 같은 이유로 <code class=\"language-text\">Gatsby</code>를 선택해 개발하게 되었습니다.</p>\n<ul>\n<li><strong>높은 성능</strong>: Gatsby는 정적 HTML 파일을 생성하여 매우 빠른 페이지 로드와 향상된 사용자 경험을 제\n공합니다. 또한 이미지 최적화, 코드 스플리팅, 지연 로딩도 간단하게 할 수 있게 기본 제공해줍니다.</li>\n<li><strong>정적 사이트 생성(SSG)</strong>: React의 SSR 기능을 활용하여 빌드 프로세스 중에 정적 파일을 생성합니다.\n이렇게 되면 CSR에 비해 더 나은 SEO, 더 빠른 페이지 로드가 가능합니다.</li>\n<li><strong>뛰어난 데이터 결합</strong>: GraphQL을 사용하여 CMS, API 및 로컬 파일과 같은 다양한 소스에서 데이터를가\n져올 수 있습니다. 이러한 유연성은 개발 블로그를 만드는 데 큰 이점을 줄 것 같았습니다.</li>\n<li><strong>플러그인 생태계</strong>: 프로젝트의 기능을 향상하거나 확장하기 위해 쉽게 추가 가능한 방대한 플러그인생\n태계를 제공합니다. 이 모듈식 접근 방식은 개발 시간을 절약하고 깔끔한 코드베이스를 유지하는 데 많은\n도움이 되었습니다.</li>\n</ul>\n<p>물론 <code class=\"language-text\">Next.js</code> 또한 SSG와 SSR에 중점을 둔 좋은 프레임워크지만 Gatsby의 데이터 처리와 빠르게 개발 가\n능하게 해주는 방대한 플러그인들이 이와 차별화 된다고 생각했습니다.</p>\n<p>결론적으로 성능, 데이터 처리의 유연성, 광범위한 플러그인 생태계 및 활성화된 커뮤니티 및 문서에 중점\n을 둔 Gatsby를 선택하게 되었습니다.</p>\n<p>그런데 사용할수록 정말 만족하던 Gatsby였지만 유일하게 거슬리던 게 있었습니다. 스크롤 이벤트나 화면사\n이즈 정보를 가져오기 위해 <code class=\"language-text\">window</code> 객체를 사용했습니다. 그러나 Gatsby의 이중 환경에 의해 <code class=\"language-text\">window</code> 객\n체를 사용하려면 항상 존재 여부를 확인하는 방어 코드를 작성해야만 했습니다.</p>\n<h2 id=\"gatsby의-이중-환경-이해-및-window-객체-사용\" style=\"position:relative;\"><a href=\"#gatsby%EC%9D%98-%EC%9D%B4%EC%A4%91-%ED%99%98%EA%B2%BD-%EC%9D%B4%ED%95%B4-%EB%B0%8F-window-%EA%B0%9D%EC%B2%B4-%EC%82%AC%EC%9A%A9\" aria-label=\"gatsby의 이중 환경 이해 및 window 객체 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby의 이중 환경 이해 및 window 객체 사용</h2>\n<p>Gatsby는 애플리케이션을 빠르게 개발하기 위해 <strong>개발 환경</strong>에서 작업할 때 <strong>브라우저에서 실행</strong>되어\nHMR, 실시간 프리뷰와 같은 기능을 제공하여 개발자 경험을 향상시킵니다. 그러나 <strong>빌드 프로세스</strong> 중에\n<strong>Node.js 환경</strong>에서 작동하여 최적화된 정적 파일을 생성하고 로컬 파일과 같은 다양한 소스에서 데이터\n를 가져와 처리합니다. 이러한 최적화는 더 빠른 로드 시간과 더 나은 성능을 제공할 수 있게 되므로 유저\n에게 좋은 경험을 줄 수 있게 해줍니다.</p>\n<p>다만 이러한 Gatsby의 이중 환경으로 인해 Gastby를 사용해 개발할 때는 브라우저 환경에서만 사용할 수 있\n는 <code class=\"language-text\">window</code> 객체를 사용할 때 주의해야 합니다. 만약 <code class=\"language-text\">window</code> 객체를 사용해야 한다면 아래와 같은 방법\n들을 사용해야 합니다.</p>\n<h3 id=\"window-객체에-대한-방어-코드\" style=\"position:relative;\"><a href=\"#window-%EA%B0%9D%EC%B2%B4%EC%97%90-%EB%8C%80%ED%95%9C-%EB%B0%A9%EC%96%B4-%EC%BD%94%EB%93%9C\" aria-label=\"window 객체에 대한 방어 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>window 객체에 대한 방어 코드</h3>\n<p>위에서 설명했듯이, 개발 중에는 CSR과 동일한 환경에서 동작하기 때문에 window 객체가 존재하지만 빌드중\n에는 Node 환경에서 window 객체가 존재하지 않습니다. 따라서 Gatsby 프로젝트가 두 환경에서 원활하게실\n행되도록 하려면 <code class=\"language-text\">window</code> 객체를 사용할 때 방어 코드를 작성하는 것이 중요합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isBrowser <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> window <span class=\"token operator\">!==</span> <span class=\"token string\">\"undefined\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> loggedIn <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isBrowser<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span>localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"isLoggedIn\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"true\"</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Am I logged in? </span><span class=\"token punctuation\">{</span>loggedIn<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드는 Gatsby가 빌드하는 동안 코드가 실행되지 않도록 <code class=\"language-text\">window</code> 객체가 정의되어 있는지 확인하는 것\n을 의미합니다. 이렇게 하지 않으면 빌드 프로세스 중 오류가 발생합니다.</p>\n<h3 id=\"useeffect-훅-내부에서-사용\" style=\"position:relative;\"><a href=\"#useeffect-%ED%9B%85-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9\" aria-label=\"useeffect 훅 내부에서 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useEffect 훅 내부에서 사용</h3>\n<p><code class=\"language-text\">useEffect</code> 훅은 구성 요소가 렌더링된 후 클라이언트 측(브라우저 환경)에서만 실행됩니다. 이렇게 하면\n방어 코드를 작성하지 않고도 <code class=\"language-text\">useEffect</code> 훅 내부에선 안전하게 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleScroll</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> passive<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"browser-monads-패키지-사용\" style=\"position:relative;\"><a href=\"#browser-monads-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%82%AC%EC%9A%A9\" aria-label=\"browser monads 패키지 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>browser-monads 패키지 사용</h3>\n<p><code class=\"language-text\">browser-monads</code> 패키지는 내부적으로 방어 코드를 처리하는 일련의 모나드 함수를 제공하여 Gatsby 프로\n젝트에서 <code class=\"language-text\">window</code> 객체로 작업하는 프로세스를 단순화합니다. <code class=\"language-text\">browser-monads</code> 를 사용하면 <code class=\"language-text\">window</code> 객\n체에 액세스하는 문제를 해결하는 데 도움이 됩니다. 이 패키지는 브라우저와 Node.js 환경 모두에서 코드\n가 원활하게 작동하도록 보장하기 때문입니다.</p>\n<p>그럼 어떻게 두 환경에서 코드가 원활하게 작동하도록 보장할까요? <code class=\"language-text\">browser-monads</code> 패키지가 이를 달성하\n는 방법은 다음과 같습니다.</p>\n<ol>\n<li>해당 패키지에서는 window, document와 같은 몇 가지 모나드를 반환합니다.</li>\n<li>브라우저 환경에서 사용될 때 내보낸 모나드는 실제 <code class=\"language-text\">window</code> 및 <code class=\"language-text\">document</code> 객체에 대한 참조이므로 필\n요한 기능을 사용할 수 있습니다.</li>\n<li>브라우저가 아닌 환경(ex: Node.js 또는 SSR 중)에서는 <code class=\"language-text\">nothing</code> 의 인스턴스가 됩니다. 즉, 이러한 객\n체의 속성이나 메서드에 참조하려고 하면 오류가 발생하지 않고 단순히 “nothing” 값을 반환합니다.\n<code class=\"language-text\">nothing</code> 인스턴스는 호출하는 메서드에 관계없이 항상 자신을 반환하는 기본 프록시입니다. 즉, 인스\n턴스가 존재하지 않는 경우 적합한 대체 자원입니다.</li>\n<li>따라서 패키지에서 제공하는 모나드를 사용하면 실행 환경이나 방어 코드 작성에 대해 걱정할 필요 없이\n코드를 작성할 수 있습니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// https://github.com/slmgc/Nothing/blob/master/src/index.js</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> Nothing <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Nothing<span class=\"token punctuation\">;</span>\n  fn<span class=\"token punctuation\">.</span>toString <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">.</span>toLocaleString <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">[</span>Symbol<span class=\"token punctuation\">.</span>toPrimitive<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  fn<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">valueOf</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">freeze</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">get</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o<span class=\"token punctuation\">,</span> key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> o<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> Nothing<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">toBool</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>o <span class=\"token operator\">&amp;&amp;</span> o<span class=\"token punctuation\">.</span><span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNothing</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> o <span class=\"token operator\">===</span> Nothing<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isSomething</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>o <span class=\"token operator\">===</span> Nothing <span class=\"token operator\">||</span> o <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">serialize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">===</span> Nothing <span class=\"token operator\">?</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">:</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">deserialize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">s</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">?</span> Nothing <span class=\"token operator\">:</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>사용하는 방법은 다음과 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> window <span class=\"token punctuation\">}</span> from ‘browser<span class=\"token operator\">-</span>monads’\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Location: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>비브라우저 환경에서 코드를 실행하더라도 <code class=\"language-text\">browser-monads</code> 패키지에서 제공하는 모나드가 정상적으로 처\n리하므로 오류가 발생하지 않습니다.</p>\n<p>이처럼 <code class=\"language-text\">browser-monads</code> 패키지를 사용해 오류 가능성을 줄이면서 코드 가독성과 유지보수성을 향상시킬수\n있었습니다.</p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>요약하자면, Gatsby의 이중 환경 특성은 <code class=\"language-text\">window</code> 객체를 사용할 때 주의를 요합니다. <code class=\"language-text\">useEffect</code> 훅 내에\n서 <code class=\"language-text\">window</code> 객체를 사용하면 안전합니다. 만약 <code class=\"language-text\">useEffect</code> 훅 외부에서 사용할 거라면 방어 코드를 작성\n하거나 <code class=\"language-text\">browser-monads</code> 패키지를 활용하면 두 환경에서 원활한 경험을 보장할 수 있습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://www.gatsbyjs.com/docs/debugging-html-builds/\">https://www.gatsbyjs.com/docs/debugging-html-builds/</a></li>\n<li><a href=\"https://medium.com/@Jense5_/use-document-and-window-with-gatsby-e9a92ee31f36\">https://medium.com/@Jense5_/use-document-and-window-with-gatsby-e9a92ee31f36</a></li>\n<li><a href=\"https://github.com/slmgc/Nothing\">https://github.com/slmgc/Nothing</a></li>\n</ul>",
      "window-%EA%B0%9D%EC%B2%B4%EC%97%90-%EB%8C%80%ED%95%9C-%EB%B0%A9%EC%96%B4-%EC%BD%94%EB%93%9C#window 객체에 대한 방어 코드": "<h2 id=\"들어가며\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\" aria-label=\"들어가며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>들어가며</h2>\n<p>Gatsby는 개발 환경에서는 브라우저, 빌드 프로세스 중엔 Node.js 환경에서 실행됩니다. 이러한 특성으로인\n해 브라우저 환경에서만 사용할 수 있는 전역 객체인 <code class=\"language-text\">window</code> 객체를 사용할 때 혼란을 초래할 수 있습니\n다.</p>\n<p>이 글에서는 Gatsby가 작동하는 방식과 그렇게 작동하는 이유, <code class=\"language-text\">useEffect</code> 훅 외부에서 <code class=\"language-text\">window</code> 객체를사\n용할 때 방어 코드의 필요성, <code class=\"language-text\">useEffect</code> 훅에서 <code class=\"language-text\">window</code> 객체를 사용하는 것이 허용되는 이유 및\n<a href=\"https://www.npmjs.com/package/browser-monads\">browser-monads</a> 패키지를 사용하여 방어 코드를 작성하\n지 않고 브라우저와 비브라우저 환경 모두에서 원활하게 작동하는 코드를 작성하는 방법을 알아보겠습니다.</p>\n<h2 id=\"gatsby를-선택한-이유\" style=\"position:relative;\"><a href=\"#gatsby%EB%A5%BC-%EC%84%A0%ED%83%9D%ED%95%9C-%EC%9D%B4%EC%9C%A0\" aria-label=\"gatsby를 선택한 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby를 선택한 이유</h2>\n<p>얼마 전, 개발 블로그를 만들기 위해 크게 아래와 같은 이유로 <code class=\"language-text\">Gatsby</code>를 선택해 개발하게 되었습니다.</p>\n<ul>\n<li><strong>높은 성능</strong>: Gatsby는 정적 HTML 파일을 생성하여 매우 빠른 페이지 로드와 향상된 사용자 경험을 제\n공합니다. 또한 이미지 최적화, 코드 스플리팅, 지연 로딩도 간단하게 할 수 있게 기본 제공해줍니다.</li>\n<li><strong>정적 사이트 생성(SSG)</strong>: React의 SSR 기능을 활용하여 빌드 프로세스 중에 정적 파일을 생성합니다.\n이렇게 되면 CSR에 비해 더 나은 SEO, 더 빠른 페이지 로드가 가능합니다.</li>\n<li><strong>뛰어난 데이터 결합</strong>: GraphQL을 사용하여 CMS, API 및 로컬 파일과 같은 다양한 소스에서 데이터를가\n져올 수 있습니다. 이러한 유연성은 개발 블로그를 만드는 데 큰 이점을 줄 것 같았습니다.</li>\n<li><strong>플러그인 생태계</strong>: 프로젝트의 기능을 향상하거나 확장하기 위해 쉽게 추가 가능한 방대한 플러그인생\n태계를 제공합니다. 이 모듈식 접근 방식은 개발 시간을 절약하고 깔끔한 코드베이스를 유지하는 데 많은\n도움이 되었습니다.</li>\n</ul>\n<p>물론 <code class=\"language-text\">Next.js</code> 또한 SSG와 SSR에 중점을 둔 좋은 프레임워크지만 Gatsby의 데이터 처리와 빠르게 개발 가\n능하게 해주는 방대한 플러그인들이 이와 차별화 된다고 생각했습니다.</p>\n<p>결론적으로 성능, 데이터 처리의 유연성, 광범위한 플러그인 생태계 및 활성화된 커뮤니티 및 문서에 중점\n을 둔 Gatsby를 선택하게 되었습니다.</p>\n<p>그런데 사용할수록 정말 만족하던 Gatsby였지만 유일하게 거슬리던 게 있었습니다. 스크롤 이벤트나 화면사\n이즈 정보를 가져오기 위해 <code class=\"language-text\">window</code> 객체를 사용했습니다. 그러나 Gatsby의 이중 환경에 의해 <code class=\"language-text\">window</code> 객\n체를 사용하려면 항상 존재 여부를 확인하는 방어 코드를 작성해야만 했습니다.</p>\n<h2 id=\"gatsby의-이중-환경-이해-및-window-객체-사용\" style=\"position:relative;\"><a href=\"#gatsby%EC%9D%98-%EC%9D%B4%EC%A4%91-%ED%99%98%EA%B2%BD-%EC%9D%B4%ED%95%B4-%EB%B0%8F-window-%EA%B0%9D%EC%B2%B4-%EC%82%AC%EC%9A%A9\" aria-label=\"gatsby의 이중 환경 이해 및 window 객체 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby의 이중 환경 이해 및 window 객체 사용</h2>\n<p>Gatsby는 애플리케이션을 빠르게 개발하기 위해 <strong>개발 환경</strong>에서 작업할 때 <strong>브라우저에서 실행</strong>되어\nHMR, 실시간 프리뷰와 같은 기능을 제공하여 개발자 경험을 향상시킵니다. 그러나 <strong>빌드 프로세스</strong> 중에\n<strong>Node.js 환경</strong>에서 작동하여 최적화된 정적 파일을 생성하고 로컬 파일과 같은 다양한 소스에서 데이터\n를 가져와 처리합니다. 이러한 최적화는 더 빠른 로드 시간과 더 나은 성능을 제공할 수 있게 되므로 유저\n에게 좋은 경험을 줄 수 있게 해줍니다.</p>\n<p>다만 이러한 Gatsby의 이중 환경으로 인해 Gastby를 사용해 개발할 때는 브라우저 환경에서만 사용할 수 있\n는 <code class=\"language-text\">window</code> 객체를 사용할 때 주의해야 합니다. 만약 <code class=\"language-text\">window</code> 객체를 사용해야 한다면 아래와 같은 방법\n들을 사용해야 합니다.</p>\n<h3 id=\"window-객체에-대한-방어-코드\" style=\"position:relative;\"><a href=\"#window-%EA%B0%9D%EC%B2%B4%EC%97%90-%EB%8C%80%ED%95%9C-%EB%B0%A9%EC%96%B4-%EC%BD%94%EB%93%9C\" aria-label=\"window 객체에 대한 방어 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>window 객체에 대한 방어 코드</h3>\n<p>위에서 설명했듯이, 개발 중에는 CSR과 동일한 환경에서 동작하기 때문에 window 객체가 존재하지만 빌드중\n에는 Node 환경에서 window 객체가 존재하지 않습니다. 따라서 Gatsby 프로젝트가 두 환경에서 원활하게실\n행되도록 하려면 <code class=\"language-text\">window</code> 객체를 사용할 때 방어 코드를 작성하는 것이 중요합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isBrowser <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> window <span class=\"token operator\">!==</span> <span class=\"token string\">\"undefined\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> loggedIn <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isBrowser<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span>localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"isLoggedIn\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"true\"</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Am I logged in? </span><span class=\"token punctuation\">{</span>loggedIn<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드는 Gatsby가 빌드하는 동안 코드가 실행되지 않도록 <code class=\"language-text\">window</code> 객체가 정의되어 있는지 확인하는 것\n을 의미합니다. 이렇게 하지 않으면 빌드 프로세스 중 오류가 발생합니다.</p>\n<h3 id=\"useeffect-훅-내부에서-사용\" style=\"position:relative;\"><a href=\"#useeffect-%ED%9B%85-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9\" aria-label=\"useeffect 훅 내부에서 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useEffect 훅 내부에서 사용</h3>\n<p><code class=\"language-text\">useEffect</code> 훅은 구성 요소가 렌더링된 후 클라이언트 측(브라우저 환경)에서만 실행됩니다. 이렇게 하면\n방어 코드를 작성하지 않고도 <code class=\"language-text\">useEffect</code> 훅 내부에선 안전하게 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleScroll</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> passive<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"browser-monads-패키지-사용\" style=\"position:relative;\"><a href=\"#browser-monads-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%82%AC%EC%9A%A9\" aria-label=\"browser monads 패키지 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>browser-monads 패키지 사용</h3>\n<p><code class=\"language-text\">browser-monads</code> 패키지는 내부적으로 방어 코드를 처리하는 일련의 모나드 함수를 제공하여 Gatsby 프로\n젝트에서 <code class=\"language-text\">window</code> 객체로 작업하는 프로세스를 단순화합니다. <code class=\"language-text\">browser-monads</code> 를 사용하면 <code class=\"language-text\">window</code> 객\n체에 액세스하는 문제를 해결하는 데 도움이 됩니다. 이 패키지는 브라우저와 Node.js 환경 모두에서 코드\n가 원활하게 작동하도록 보장하기 때문입니다.</p>\n<p>그럼 어떻게 두 환경에서 코드가 원활하게 작동하도록 보장할까요? <code class=\"language-text\">browser-monads</code> 패키지가 이를 달성하\n는 방법은 다음과 같습니다.</p>\n<ol>\n<li>해당 패키지에서는 window, document와 같은 몇 가지 모나드를 반환합니다.</li>\n<li>브라우저 환경에서 사용될 때 내보낸 모나드는 실제 <code class=\"language-text\">window</code> 및 <code class=\"language-text\">document</code> 객체에 대한 참조이므로 필\n요한 기능을 사용할 수 있습니다.</li>\n<li>브라우저가 아닌 환경(ex: Node.js 또는 SSR 중)에서는 <code class=\"language-text\">nothing</code> 의 인스턴스가 됩니다. 즉, 이러한 객\n체의 속성이나 메서드에 참조하려고 하면 오류가 발생하지 않고 단순히 “nothing” 값을 반환합니다.\n<code class=\"language-text\">nothing</code> 인스턴스는 호출하는 메서드에 관계없이 항상 자신을 반환하는 기본 프록시입니다. 즉, 인스\n턴스가 존재하지 않는 경우 적합한 대체 자원입니다.</li>\n<li>따라서 패키지에서 제공하는 모나드를 사용하면 실행 환경이나 방어 코드 작성에 대해 걱정할 필요 없이\n코드를 작성할 수 있습니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// https://github.com/slmgc/Nothing/blob/master/src/index.js</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> Nothing <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Nothing<span class=\"token punctuation\">;</span>\n  fn<span class=\"token punctuation\">.</span>toString <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">.</span>toLocaleString <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">[</span>Symbol<span class=\"token punctuation\">.</span>toPrimitive<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  fn<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">valueOf</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">freeze</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">get</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o<span class=\"token punctuation\">,</span> key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> o<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> Nothing<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">toBool</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>o <span class=\"token operator\">&amp;&amp;</span> o<span class=\"token punctuation\">.</span><span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNothing</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> o <span class=\"token operator\">===</span> Nothing<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isSomething</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>o <span class=\"token operator\">===</span> Nothing <span class=\"token operator\">||</span> o <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">serialize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">===</span> Nothing <span class=\"token operator\">?</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">:</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">deserialize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">s</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">?</span> Nothing <span class=\"token operator\">:</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>사용하는 방법은 다음과 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> window <span class=\"token punctuation\">}</span> from ‘browser<span class=\"token operator\">-</span>monads’\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Location: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>비브라우저 환경에서 코드를 실행하더라도 <code class=\"language-text\">browser-monads</code> 패키지에서 제공하는 모나드가 정상적으로 처\n리하므로 오류가 발생하지 않습니다.</p>\n<p>이처럼 <code class=\"language-text\">browser-monads</code> 패키지를 사용해 오류 가능성을 줄이면서 코드 가독성과 유지보수성을 향상시킬수\n있었습니다.</p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>요약하자면, Gatsby의 이중 환경 특성은 <code class=\"language-text\">window</code> 객체를 사용할 때 주의를 요합니다. <code class=\"language-text\">useEffect</code> 훅 내에\n서 <code class=\"language-text\">window</code> 객체를 사용하면 안전합니다. 만약 <code class=\"language-text\">useEffect</code> 훅 외부에서 사용할 거라면 방어 코드를 작성\n하거나 <code class=\"language-text\">browser-monads</code> 패키지를 활용하면 두 환경에서 원활한 경험을 보장할 수 있습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://www.gatsbyjs.com/docs/debugging-html-builds/\">https://www.gatsbyjs.com/docs/debugging-html-builds/</a></li>\n<li><a href=\"https://medium.com/@Jense5_/use-document-and-window-with-gatsby-e9a92ee31f36\">https://medium.com/@Jense5_/use-document-and-window-with-gatsby-e9a92ee31f36</a></li>\n<li><a href=\"https://github.com/slmgc/Nothing\">https://github.com/slmgc/Nothing</a></li>\n</ul>",
      "useeffect-%ED%9B%85-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9#useEffect 훅 내부에서 사용": "<h2 id=\"들어가며\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\" aria-label=\"들어가며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>들어가며</h2>\n<p>Gatsby는 개발 환경에서는 브라우저, 빌드 프로세스 중엔 Node.js 환경에서 실행됩니다. 이러한 특성으로인\n해 브라우저 환경에서만 사용할 수 있는 전역 객체인 <code class=\"language-text\">window</code> 객체를 사용할 때 혼란을 초래할 수 있습니\n다.</p>\n<p>이 글에서는 Gatsby가 작동하는 방식과 그렇게 작동하는 이유, <code class=\"language-text\">useEffect</code> 훅 외부에서 <code class=\"language-text\">window</code> 객체를사\n용할 때 방어 코드의 필요성, <code class=\"language-text\">useEffect</code> 훅에서 <code class=\"language-text\">window</code> 객체를 사용하는 것이 허용되는 이유 및\n<a href=\"https://www.npmjs.com/package/browser-monads\">browser-monads</a> 패키지를 사용하여 방어 코드를 작성하\n지 않고 브라우저와 비브라우저 환경 모두에서 원활하게 작동하는 코드를 작성하는 방법을 알아보겠습니다.</p>\n<h2 id=\"gatsby를-선택한-이유\" style=\"position:relative;\"><a href=\"#gatsby%EB%A5%BC-%EC%84%A0%ED%83%9D%ED%95%9C-%EC%9D%B4%EC%9C%A0\" aria-label=\"gatsby를 선택한 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby를 선택한 이유</h2>\n<p>얼마 전, 개발 블로그를 만들기 위해 크게 아래와 같은 이유로 <code class=\"language-text\">Gatsby</code>를 선택해 개발하게 되었습니다.</p>\n<ul>\n<li><strong>높은 성능</strong>: Gatsby는 정적 HTML 파일을 생성하여 매우 빠른 페이지 로드와 향상된 사용자 경험을 제\n공합니다. 또한 이미지 최적화, 코드 스플리팅, 지연 로딩도 간단하게 할 수 있게 기본 제공해줍니다.</li>\n<li><strong>정적 사이트 생성(SSG)</strong>: React의 SSR 기능을 활용하여 빌드 프로세스 중에 정적 파일을 생성합니다.\n이렇게 되면 CSR에 비해 더 나은 SEO, 더 빠른 페이지 로드가 가능합니다.</li>\n<li><strong>뛰어난 데이터 결합</strong>: GraphQL을 사용하여 CMS, API 및 로컬 파일과 같은 다양한 소스에서 데이터를가\n져올 수 있습니다. 이러한 유연성은 개발 블로그를 만드는 데 큰 이점을 줄 것 같았습니다.</li>\n<li><strong>플러그인 생태계</strong>: 프로젝트의 기능을 향상하거나 확장하기 위해 쉽게 추가 가능한 방대한 플러그인생\n태계를 제공합니다. 이 모듈식 접근 방식은 개발 시간을 절약하고 깔끔한 코드베이스를 유지하는 데 많은\n도움이 되었습니다.</li>\n</ul>\n<p>물론 <code class=\"language-text\">Next.js</code> 또한 SSG와 SSR에 중점을 둔 좋은 프레임워크지만 Gatsby의 데이터 처리와 빠르게 개발 가\n능하게 해주는 방대한 플러그인들이 이와 차별화 된다고 생각했습니다.</p>\n<p>결론적으로 성능, 데이터 처리의 유연성, 광범위한 플러그인 생태계 및 활성화된 커뮤니티 및 문서에 중점\n을 둔 Gatsby를 선택하게 되었습니다.</p>\n<p>그런데 사용할수록 정말 만족하던 Gatsby였지만 유일하게 거슬리던 게 있었습니다. 스크롤 이벤트나 화면사\n이즈 정보를 가져오기 위해 <code class=\"language-text\">window</code> 객체를 사용했습니다. 그러나 Gatsby의 이중 환경에 의해 <code class=\"language-text\">window</code> 객\n체를 사용하려면 항상 존재 여부를 확인하는 방어 코드를 작성해야만 했습니다.</p>\n<h2 id=\"gatsby의-이중-환경-이해-및-window-객체-사용\" style=\"position:relative;\"><a href=\"#gatsby%EC%9D%98-%EC%9D%B4%EC%A4%91-%ED%99%98%EA%B2%BD-%EC%9D%B4%ED%95%B4-%EB%B0%8F-window-%EA%B0%9D%EC%B2%B4-%EC%82%AC%EC%9A%A9\" aria-label=\"gatsby의 이중 환경 이해 및 window 객체 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby의 이중 환경 이해 및 window 객체 사용</h2>\n<p>Gatsby는 애플리케이션을 빠르게 개발하기 위해 <strong>개발 환경</strong>에서 작업할 때 <strong>브라우저에서 실행</strong>되어\nHMR, 실시간 프리뷰와 같은 기능을 제공하여 개발자 경험을 향상시킵니다. 그러나 <strong>빌드 프로세스</strong> 중에\n<strong>Node.js 환경</strong>에서 작동하여 최적화된 정적 파일을 생성하고 로컬 파일과 같은 다양한 소스에서 데이터\n를 가져와 처리합니다. 이러한 최적화는 더 빠른 로드 시간과 더 나은 성능을 제공할 수 있게 되므로 유저\n에게 좋은 경험을 줄 수 있게 해줍니다.</p>\n<p>다만 이러한 Gatsby의 이중 환경으로 인해 Gastby를 사용해 개발할 때는 브라우저 환경에서만 사용할 수 있\n는 <code class=\"language-text\">window</code> 객체를 사용할 때 주의해야 합니다. 만약 <code class=\"language-text\">window</code> 객체를 사용해야 한다면 아래와 같은 방법\n들을 사용해야 합니다.</p>\n<h3 id=\"window-객체에-대한-방어-코드\" style=\"position:relative;\"><a href=\"#window-%EA%B0%9D%EC%B2%B4%EC%97%90-%EB%8C%80%ED%95%9C-%EB%B0%A9%EC%96%B4-%EC%BD%94%EB%93%9C\" aria-label=\"window 객체에 대한 방어 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>window 객체에 대한 방어 코드</h3>\n<p>위에서 설명했듯이, 개발 중에는 CSR과 동일한 환경에서 동작하기 때문에 window 객체가 존재하지만 빌드중\n에는 Node 환경에서 window 객체가 존재하지 않습니다. 따라서 Gatsby 프로젝트가 두 환경에서 원활하게실\n행되도록 하려면 <code class=\"language-text\">window</code> 객체를 사용할 때 방어 코드를 작성하는 것이 중요합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isBrowser <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> window <span class=\"token operator\">!==</span> <span class=\"token string\">\"undefined\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> loggedIn <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isBrowser<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span>localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"isLoggedIn\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"true\"</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Am I logged in? </span><span class=\"token punctuation\">{</span>loggedIn<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드는 Gatsby가 빌드하는 동안 코드가 실행되지 않도록 <code class=\"language-text\">window</code> 객체가 정의되어 있는지 확인하는 것\n을 의미합니다. 이렇게 하지 않으면 빌드 프로세스 중 오류가 발생합니다.</p>\n<h3 id=\"useeffect-훅-내부에서-사용\" style=\"position:relative;\"><a href=\"#useeffect-%ED%9B%85-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9\" aria-label=\"useeffect 훅 내부에서 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useEffect 훅 내부에서 사용</h3>\n<p><code class=\"language-text\">useEffect</code> 훅은 구성 요소가 렌더링된 후 클라이언트 측(브라우저 환경)에서만 실행됩니다. 이렇게 하면\n방어 코드를 작성하지 않고도 <code class=\"language-text\">useEffect</code> 훅 내부에선 안전하게 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleScroll</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> passive<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"browser-monads-패키지-사용\" style=\"position:relative;\"><a href=\"#browser-monads-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%82%AC%EC%9A%A9\" aria-label=\"browser monads 패키지 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>browser-monads 패키지 사용</h3>\n<p><code class=\"language-text\">browser-monads</code> 패키지는 내부적으로 방어 코드를 처리하는 일련의 모나드 함수를 제공하여 Gatsby 프로\n젝트에서 <code class=\"language-text\">window</code> 객체로 작업하는 프로세스를 단순화합니다. <code class=\"language-text\">browser-monads</code> 를 사용하면 <code class=\"language-text\">window</code> 객\n체에 액세스하는 문제를 해결하는 데 도움이 됩니다. 이 패키지는 브라우저와 Node.js 환경 모두에서 코드\n가 원활하게 작동하도록 보장하기 때문입니다.</p>\n<p>그럼 어떻게 두 환경에서 코드가 원활하게 작동하도록 보장할까요? <code class=\"language-text\">browser-monads</code> 패키지가 이를 달성하\n는 방법은 다음과 같습니다.</p>\n<ol>\n<li>해당 패키지에서는 window, document와 같은 몇 가지 모나드를 반환합니다.</li>\n<li>브라우저 환경에서 사용될 때 내보낸 모나드는 실제 <code class=\"language-text\">window</code> 및 <code class=\"language-text\">document</code> 객체에 대한 참조이므로 필\n요한 기능을 사용할 수 있습니다.</li>\n<li>브라우저가 아닌 환경(ex: Node.js 또는 SSR 중)에서는 <code class=\"language-text\">nothing</code> 의 인스턴스가 됩니다. 즉, 이러한 객\n체의 속성이나 메서드에 참조하려고 하면 오류가 발생하지 않고 단순히 “nothing” 값을 반환합니다.\n<code class=\"language-text\">nothing</code> 인스턴스는 호출하는 메서드에 관계없이 항상 자신을 반환하는 기본 프록시입니다. 즉, 인스\n턴스가 존재하지 않는 경우 적합한 대체 자원입니다.</li>\n<li>따라서 패키지에서 제공하는 모나드를 사용하면 실행 환경이나 방어 코드 작성에 대해 걱정할 필요 없이\n코드를 작성할 수 있습니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// https://github.com/slmgc/Nothing/blob/master/src/index.js</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> Nothing <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Nothing<span class=\"token punctuation\">;</span>\n  fn<span class=\"token punctuation\">.</span>toString <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">.</span>toLocaleString <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">[</span>Symbol<span class=\"token punctuation\">.</span>toPrimitive<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  fn<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">valueOf</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">freeze</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">get</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o<span class=\"token punctuation\">,</span> key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> o<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> Nothing<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">toBool</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>o <span class=\"token operator\">&amp;&amp;</span> o<span class=\"token punctuation\">.</span><span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNothing</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> o <span class=\"token operator\">===</span> Nothing<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isSomething</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>o <span class=\"token operator\">===</span> Nothing <span class=\"token operator\">||</span> o <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">serialize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">===</span> Nothing <span class=\"token operator\">?</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">:</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">deserialize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">s</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">?</span> Nothing <span class=\"token operator\">:</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>사용하는 방법은 다음과 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> window <span class=\"token punctuation\">}</span> from ‘browser<span class=\"token operator\">-</span>monads’\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Location: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>비브라우저 환경에서 코드를 실행하더라도 <code class=\"language-text\">browser-monads</code> 패키지에서 제공하는 모나드가 정상적으로 처\n리하므로 오류가 발생하지 않습니다.</p>\n<p>이처럼 <code class=\"language-text\">browser-monads</code> 패키지를 사용해 오류 가능성을 줄이면서 코드 가독성과 유지보수성을 향상시킬수\n있었습니다.</p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>요약하자면, Gatsby의 이중 환경 특성은 <code class=\"language-text\">window</code> 객체를 사용할 때 주의를 요합니다. <code class=\"language-text\">useEffect</code> 훅 내에\n서 <code class=\"language-text\">window</code> 객체를 사용하면 안전합니다. 만약 <code class=\"language-text\">useEffect</code> 훅 외부에서 사용할 거라면 방어 코드를 작성\n하거나 <code class=\"language-text\">browser-monads</code> 패키지를 활용하면 두 환경에서 원활한 경험을 보장할 수 있습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://www.gatsbyjs.com/docs/debugging-html-builds/\">https://www.gatsbyjs.com/docs/debugging-html-builds/</a></li>\n<li><a href=\"https://medium.com/@Jense5_/use-document-and-window-with-gatsby-e9a92ee31f36\">https://medium.com/@Jense5_/use-document-and-window-with-gatsby-e9a92ee31f36</a></li>\n<li><a href=\"https://github.com/slmgc/Nothing\">https://github.com/slmgc/Nothing</a></li>\n</ul>",
      "browser-monads-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%82%AC%EC%9A%A9#browser-monads 패키지 사용": "<h2 id=\"들어가며\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\" aria-label=\"들어가며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>들어가며</h2>\n<p>Gatsby는 개발 환경에서는 브라우저, 빌드 프로세스 중엔 Node.js 환경에서 실행됩니다. 이러한 특성으로인\n해 브라우저 환경에서만 사용할 수 있는 전역 객체인 <code class=\"language-text\">window</code> 객체를 사용할 때 혼란을 초래할 수 있습니\n다.</p>\n<p>이 글에서는 Gatsby가 작동하는 방식과 그렇게 작동하는 이유, <code class=\"language-text\">useEffect</code> 훅 외부에서 <code class=\"language-text\">window</code> 객체를사\n용할 때 방어 코드의 필요성, <code class=\"language-text\">useEffect</code> 훅에서 <code class=\"language-text\">window</code> 객체를 사용하는 것이 허용되는 이유 및\n<a href=\"https://www.npmjs.com/package/browser-monads\">browser-monads</a> 패키지를 사용하여 방어 코드를 작성하\n지 않고 브라우저와 비브라우저 환경 모두에서 원활하게 작동하는 코드를 작성하는 방법을 알아보겠습니다.</p>\n<h2 id=\"gatsby를-선택한-이유\" style=\"position:relative;\"><a href=\"#gatsby%EB%A5%BC-%EC%84%A0%ED%83%9D%ED%95%9C-%EC%9D%B4%EC%9C%A0\" aria-label=\"gatsby를 선택한 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby를 선택한 이유</h2>\n<p>얼마 전, 개발 블로그를 만들기 위해 크게 아래와 같은 이유로 <code class=\"language-text\">Gatsby</code>를 선택해 개발하게 되었습니다.</p>\n<ul>\n<li><strong>높은 성능</strong>: Gatsby는 정적 HTML 파일을 생성하여 매우 빠른 페이지 로드와 향상된 사용자 경험을 제\n공합니다. 또한 이미지 최적화, 코드 스플리팅, 지연 로딩도 간단하게 할 수 있게 기본 제공해줍니다.</li>\n<li><strong>정적 사이트 생성(SSG)</strong>: React의 SSR 기능을 활용하여 빌드 프로세스 중에 정적 파일을 생성합니다.\n이렇게 되면 CSR에 비해 더 나은 SEO, 더 빠른 페이지 로드가 가능합니다.</li>\n<li><strong>뛰어난 데이터 결합</strong>: GraphQL을 사용하여 CMS, API 및 로컬 파일과 같은 다양한 소스에서 데이터를가\n져올 수 있습니다. 이러한 유연성은 개발 블로그를 만드는 데 큰 이점을 줄 것 같았습니다.</li>\n<li><strong>플러그인 생태계</strong>: 프로젝트의 기능을 향상하거나 확장하기 위해 쉽게 추가 가능한 방대한 플러그인생\n태계를 제공합니다. 이 모듈식 접근 방식은 개발 시간을 절약하고 깔끔한 코드베이스를 유지하는 데 많은\n도움이 되었습니다.</li>\n</ul>\n<p>물론 <code class=\"language-text\">Next.js</code> 또한 SSG와 SSR에 중점을 둔 좋은 프레임워크지만 Gatsby의 데이터 처리와 빠르게 개발 가\n능하게 해주는 방대한 플러그인들이 이와 차별화 된다고 생각했습니다.</p>\n<p>결론적으로 성능, 데이터 처리의 유연성, 광범위한 플러그인 생태계 및 활성화된 커뮤니티 및 문서에 중점\n을 둔 Gatsby를 선택하게 되었습니다.</p>\n<p>그런데 사용할수록 정말 만족하던 Gatsby였지만 유일하게 거슬리던 게 있었습니다. 스크롤 이벤트나 화면사\n이즈 정보를 가져오기 위해 <code class=\"language-text\">window</code> 객체를 사용했습니다. 그러나 Gatsby의 이중 환경에 의해 <code class=\"language-text\">window</code> 객\n체를 사용하려면 항상 존재 여부를 확인하는 방어 코드를 작성해야만 했습니다.</p>\n<h2 id=\"gatsby의-이중-환경-이해-및-window-객체-사용\" style=\"position:relative;\"><a href=\"#gatsby%EC%9D%98-%EC%9D%B4%EC%A4%91-%ED%99%98%EA%B2%BD-%EC%9D%B4%ED%95%B4-%EB%B0%8F-window-%EA%B0%9D%EC%B2%B4-%EC%82%AC%EC%9A%A9\" aria-label=\"gatsby의 이중 환경 이해 및 window 객체 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby의 이중 환경 이해 및 window 객체 사용</h2>\n<p>Gatsby는 애플리케이션을 빠르게 개발하기 위해 <strong>개발 환경</strong>에서 작업할 때 <strong>브라우저에서 실행</strong>되어\nHMR, 실시간 프리뷰와 같은 기능을 제공하여 개발자 경험을 향상시킵니다. 그러나 <strong>빌드 프로세스</strong> 중에\n<strong>Node.js 환경</strong>에서 작동하여 최적화된 정적 파일을 생성하고 로컬 파일과 같은 다양한 소스에서 데이터\n를 가져와 처리합니다. 이러한 최적화는 더 빠른 로드 시간과 더 나은 성능을 제공할 수 있게 되므로 유저\n에게 좋은 경험을 줄 수 있게 해줍니다.</p>\n<p>다만 이러한 Gatsby의 이중 환경으로 인해 Gastby를 사용해 개발할 때는 브라우저 환경에서만 사용할 수 있\n는 <code class=\"language-text\">window</code> 객체를 사용할 때 주의해야 합니다. 만약 <code class=\"language-text\">window</code> 객체를 사용해야 한다면 아래와 같은 방법\n들을 사용해야 합니다.</p>\n<h3 id=\"window-객체에-대한-방어-코드\" style=\"position:relative;\"><a href=\"#window-%EA%B0%9D%EC%B2%B4%EC%97%90-%EB%8C%80%ED%95%9C-%EB%B0%A9%EC%96%B4-%EC%BD%94%EB%93%9C\" aria-label=\"window 객체에 대한 방어 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>window 객체에 대한 방어 코드</h3>\n<p>위에서 설명했듯이, 개발 중에는 CSR과 동일한 환경에서 동작하기 때문에 window 객체가 존재하지만 빌드중\n에는 Node 환경에서 window 객체가 존재하지 않습니다. 따라서 Gatsby 프로젝트가 두 환경에서 원활하게실\n행되도록 하려면 <code class=\"language-text\">window</code> 객체를 사용할 때 방어 코드를 작성하는 것이 중요합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isBrowser <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> window <span class=\"token operator\">!==</span> <span class=\"token string\">\"undefined\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> loggedIn <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isBrowser<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span>localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"isLoggedIn\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"true\"</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Am I logged in? </span><span class=\"token punctuation\">{</span>loggedIn<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드는 Gatsby가 빌드하는 동안 코드가 실행되지 않도록 <code class=\"language-text\">window</code> 객체가 정의되어 있는지 확인하는 것\n을 의미합니다. 이렇게 하지 않으면 빌드 프로세스 중 오류가 발생합니다.</p>\n<h3 id=\"useeffect-훅-내부에서-사용\" style=\"position:relative;\"><a href=\"#useeffect-%ED%9B%85-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9\" aria-label=\"useeffect 훅 내부에서 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useEffect 훅 내부에서 사용</h3>\n<p><code class=\"language-text\">useEffect</code> 훅은 구성 요소가 렌더링된 후 클라이언트 측(브라우저 환경)에서만 실행됩니다. 이렇게 하면\n방어 코드를 작성하지 않고도 <code class=\"language-text\">useEffect</code> 훅 내부에선 안전하게 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleScroll</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> passive<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"browser-monads-패키지-사용\" style=\"position:relative;\"><a href=\"#browser-monads-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%82%AC%EC%9A%A9\" aria-label=\"browser monads 패키지 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>browser-monads 패키지 사용</h3>\n<p><code class=\"language-text\">browser-monads</code> 패키지는 내부적으로 방어 코드를 처리하는 일련의 모나드 함수를 제공하여 Gatsby 프로\n젝트에서 <code class=\"language-text\">window</code> 객체로 작업하는 프로세스를 단순화합니다. <code class=\"language-text\">browser-monads</code> 를 사용하면 <code class=\"language-text\">window</code> 객\n체에 액세스하는 문제를 해결하는 데 도움이 됩니다. 이 패키지는 브라우저와 Node.js 환경 모두에서 코드\n가 원활하게 작동하도록 보장하기 때문입니다.</p>\n<p>그럼 어떻게 두 환경에서 코드가 원활하게 작동하도록 보장할까요? <code class=\"language-text\">browser-monads</code> 패키지가 이를 달성하\n는 방법은 다음과 같습니다.</p>\n<ol>\n<li>해당 패키지에서는 window, document와 같은 몇 가지 모나드를 반환합니다.</li>\n<li>브라우저 환경에서 사용될 때 내보낸 모나드는 실제 <code class=\"language-text\">window</code> 및 <code class=\"language-text\">document</code> 객체에 대한 참조이므로 필\n요한 기능을 사용할 수 있습니다.</li>\n<li>브라우저가 아닌 환경(ex: Node.js 또는 SSR 중)에서는 <code class=\"language-text\">nothing</code> 의 인스턴스가 됩니다. 즉, 이러한 객\n체의 속성이나 메서드에 참조하려고 하면 오류가 발생하지 않고 단순히 “nothing” 값을 반환합니다.\n<code class=\"language-text\">nothing</code> 인스턴스는 호출하는 메서드에 관계없이 항상 자신을 반환하는 기본 프록시입니다. 즉, 인스\n턴스가 존재하지 않는 경우 적합한 대체 자원입니다.</li>\n<li>따라서 패키지에서 제공하는 모나드를 사용하면 실행 환경이나 방어 코드 작성에 대해 걱정할 필요 없이\n코드를 작성할 수 있습니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// https://github.com/slmgc/Nothing/blob/master/src/index.js</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> Nothing <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Nothing<span class=\"token punctuation\">;</span>\n  fn<span class=\"token punctuation\">.</span>toString <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">.</span>toLocaleString <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">[</span>Symbol<span class=\"token punctuation\">.</span>toPrimitive<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  fn<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">valueOf</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">freeze</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">get</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o<span class=\"token punctuation\">,</span> key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> o<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> Nothing<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">toBool</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>o <span class=\"token operator\">&amp;&amp;</span> o<span class=\"token punctuation\">.</span><span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNothing</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> o <span class=\"token operator\">===</span> Nothing<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isSomething</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>o <span class=\"token operator\">===</span> Nothing <span class=\"token operator\">||</span> o <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">serialize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">===</span> Nothing <span class=\"token operator\">?</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">:</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">deserialize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">s</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">?</span> Nothing <span class=\"token operator\">:</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>사용하는 방법은 다음과 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> window <span class=\"token punctuation\">}</span> from ‘browser<span class=\"token operator\">-</span>monads’\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Location: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>비브라우저 환경에서 코드를 실행하더라도 <code class=\"language-text\">browser-monads</code> 패키지에서 제공하는 모나드가 정상적으로 처\n리하므로 오류가 발생하지 않습니다.</p>\n<p>이처럼 <code class=\"language-text\">browser-monads</code> 패키지를 사용해 오류 가능성을 줄이면서 코드 가독성과 유지보수성을 향상시킬수\n있었습니다.</p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>요약하자면, Gatsby의 이중 환경 특성은 <code class=\"language-text\">window</code> 객체를 사용할 때 주의를 요합니다. <code class=\"language-text\">useEffect</code> 훅 내에\n서 <code class=\"language-text\">window</code> 객체를 사용하면 안전합니다. 만약 <code class=\"language-text\">useEffect</code> 훅 외부에서 사용할 거라면 방어 코드를 작성\n하거나 <code class=\"language-text\">browser-monads</code> 패키지를 활용하면 두 환경에서 원활한 경험을 보장할 수 있습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://www.gatsbyjs.com/docs/debugging-html-builds/\">https://www.gatsbyjs.com/docs/debugging-html-builds/</a></li>\n<li><a href=\"https://medium.com/@Jense5_/use-document-and-window-with-gatsby-e9a92ee31f36\">https://medium.com/@Jense5_/use-document-and-window-with-gatsby-e9a92ee31f36</a></li>\n<li><a href=\"https://github.com/slmgc/Nothing\">https://github.com/slmgc/Nothing</a></li>\n</ul>",
      "%EA%B2%B0%EB%A1%A0#결론": "<h2 id=\"들어가며\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\" aria-label=\"들어가며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>들어가며</h2>\n<p>Gatsby는 개발 환경에서는 브라우저, 빌드 프로세스 중엔 Node.js 환경에서 실행됩니다. 이러한 특성으로인\n해 브라우저 환경에서만 사용할 수 있는 전역 객체인 <code class=\"language-text\">window</code> 객체를 사용할 때 혼란을 초래할 수 있습니\n다.</p>\n<p>이 글에서는 Gatsby가 작동하는 방식과 그렇게 작동하는 이유, <code class=\"language-text\">useEffect</code> 훅 외부에서 <code class=\"language-text\">window</code> 객체를사\n용할 때 방어 코드의 필요성, <code class=\"language-text\">useEffect</code> 훅에서 <code class=\"language-text\">window</code> 객체를 사용하는 것이 허용되는 이유 및\n<a href=\"https://www.npmjs.com/package/browser-monads\">browser-monads</a> 패키지를 사용하여 방어 코드를 작성하\n지 않고 브라우저와 비브라우저 환경 모두에서 원활하게 작동하는 코드를 작성하는 방법을 알아보겠습니다.</p>\n<h2 id=\"gatsby를-선택한-이유\" style=\"position:relative;\"><a href=\"#gatsby%EB%A5%BC-%EC%84%A0%ED%83%9D%ED%95%9C-%EC%9D%B4%EC%9C%A0\" aria-label=\"gatsby를 선택한 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby를 선택한 이유</h2>\n<p>얼마 전, 개발 블로그를 만들기 위해 크게 아래와 같은 이유로 <code class=\"language-text\">Gatsby</code>를 선택해 개발하게 되었습니다.</p>\n<ul>\n<li><strong>높은 성능</strong>: Gatsby는 정적 HTML 파일을 생성하여 매우 빠른 페이지 로드와 향상된 사용자 경험을 제\n공합니다. 또한 이미지 최적화, 코드 스플리팅, 지연 로딩도 간단하게 할 수 있게 기본 제공해줍니다.</li>\n<li><strong>정적 사이트 생성(SSG)</strong>: React의 SSR 기능을 활용하여 빌드 프로세스 중에 정적 파일을 생성합니다.\n이렇게 되면 CSR에 비해 더 나은 SEO, 더 빠른 페이지 로드가 가능합니다.</li>\n<li><strong>뛰어난 데이터 결합</strong>: GraphQL을 사용하여 CMS, API 및 로컬 파일과 같은 다양한 소스에서 데이터를가\n져올 수 있습니다. 이러한 유연성은 개발 블로그를 만드는 데 큰 이점을 줄 것 같았습니다.</li>\n<li><strong>플러그인 생태계</strong>: 프로젝트의 기능을 향상하거나 확장하기 위해 쉽게 추가 가능한 방대한 플러그인생\n태계를 제공합니다. 이 모듈식 접근 방식은 개발 시간을 절약하고 깔끔한 코드베이스를 유지하는 데 많은\n도움이 되었습니다.</li>\n</ul>\n<p>물론 <code class=\"language-text\">Next.js</code> 또한 SSG와 SSR에 중점을 둔 좋은 프레임워크지만 Gatsby의 데이터 처리와 빠르게 개발 가\n능하게 해주는 방대한 플러그인들이 이와 차별화 된다고 생각했습니다.</p>\n<p>결론적으로 성능, 데이터 처리의 유연성, 광범위한 플러그인 생태계 및 활성화된 커뮤니티 및 문서에 중점\n을 둔 Gatsby를 선택하게 되었습니다.</p>\n<p>그런데 사용할수록 정말 만족하던 Gatsby였지만 유일하게 거슬리던 게 있었습니다. 스크롤 이벤트나 화면사\n이즈 정보를 가져오기 위해 <code class=\"language-text\">window</code> 객체를 사용했습니다. 그러나 Gatsby의 이중 환경에 의해 <code class=\"language-text\">window</code> 객\n체를 사용하려면 항상 존재 여부를 확인하는 방어 코드를 작성해야만 했습니다.</p>\n<h2 id=\"gatsby의-이중-환경-이해-및-window-객체-사용\" style=\"position:relative;\"><a href=\"#gatsby%EC%9D%98-%EC%9D%B4%EC%A4%91-%ED%99%98%EA%B2%BD-%EC%9D%B4%ED%95%B4-%EB%B0%8F-window-%EA%B0%9D%EC%B2%B4-%EC%82%AC%EC%9A%A9\" aria-label=\"gatsby의 이중 환경 이해 및 window 객체 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby의 이중 환경 이해 및 window 객체 사용</h2>\n<p>Gatsby는 애플리케이션을 빠르게 개발하기 위해 <strong>개발 환경</strong>에서 작업할 때 <strong>브라우저에서 실행</strong>되어\nHMR, 실시간 프리뷰와 같은 기능을 제공하여 개발자 경험을 향상시킵니다. 그러나 <strong>빌드 프로세스</strong> 중에\n<strong>Node.js 환경</strong>에서 작동하여 최적화된 정적 파일을 생성하고 로컬 파일과 같은 다양한 소스에서 데이터\n를 가져와 처리합니다. 이러한 최적화는 더 빠른 로드 시간과 더 나은 성능을 제공할 수 있게 되므로 유저\n에게 좋은 경험을 줄 수 있게 해줍니다.</p>\n<p>다만 이러한 Gatsby의 이중 환경으로 인해 Gastby를 사용해 개발할 때는 브라우저 환경에서만 사용할 수 있\n는 <code class=\"language-text\">window</code> 객체를 사용할 때 주의해야 합니다. 만약 <code class=\"language-text\">window</code> 객체를 사용해야 한다면 아래와 같은 방법\n들을 사용해야 합니다.</p>\n<h3 id=\"window-객체에-대한-방어-코드\" style=\"position:relative;\"><a href=\"#window-%EA%B0%9D%EC%B2%B4%EC%97%90-%EB%8C%80%ED%95%9C-%EB%B0%A9%EC%96%B4-%EC%BD%94%EB%93%9C\" aria-label=\"window 객체에 대한 방어 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>window 객체에 대한 방어 코드</h3>\n<p>위에서 설명했듯이, 개발 중에는 CSR과 동일한 환경에서 동작하기 때문에 window 객체가 존재하지만 빌드중\n에는 Node 환경에서 window 객체가 존재하지 않습니다. 따라서 Gatsby 프로젝트가 두 환경에서 원활하게실\n행되도록 하려면 <code class=\"language-text\">window</code> 객체를 사용할 때 방어 코드를 작성하는 것이 중요합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isBrowser <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> window <span class=\"token operator\">!==</span> <span class=\"token string\">\"undefined\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> loggedIn <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isBrowser<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span>localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"isLoggedIn\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"true\"</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Am I logged in? </span><span class=\"token punctuation\">{</span>loggedIn<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드는 Gatsby가 빌드하는 동안 코드가 실행되지 않도록 <code class=\"language-text\">window</code> 객체가 정의되어 있는지 확인하는 것\n을 의미합니다. 이렇게 하지 않으면 빌드 프로세스 중 오류가 발생합니다.</p>\n<h3 id=\"useeffect-훅-내부에서-사용\" style=\"position:relative;\"><a href=\"#useeffect-%ED%9B%85-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9\" aria-label=\"useeffect 훅 내부에서 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useEffect 훅 내부에서 사용</h3>\n<p><code class=\"language-text\">useEffect</code> 훅은 구성 요소가 렌더링된 후 클라이언트 측(브라우저 환경)에서만 실행됩니다. 이렇게 하면\n방어 코드를 작성하지 않고도 <code class=\"language-text\">useEffect</code> 훅 내부에선 안전하게 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleScroll</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> passive<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"browser-monads-패키지-사용\" style=\"position:relative;\"><a href=\"#browser-monads-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%82%AC%EC%9A%A9\" aria-label=\"browser monads 패키지 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>browser-monads 패키지 사용</h3>\n<p><code class=\"language-text\">browser-monads</code> 패키지는 내부적으로 방어 코드를 처리하는 일련의 모나드 함수를 제공하여 Gatsby 프로\n젝트에서 <code class=\"language-text\">window</code> 객체로 작업하는 프로세스를 단순화합니다. <code class=\"language-text\">browser-monads</code> 를 사용하면 <code class=\"language-text\">window</code> 객\n체에 액세스하는 문제를 해결하는 데 도움이 됩니다. 이 패키지는 브라우저와 Node.js 환경 모두에서 코드\n가 원활하게 작동하도록 보장하기 때문입니다.</p>\n<p>그럼 어떻게 두 환경에서 코드가 원활하게 작동하도록 보장할까요? <code class=\"language-text\">browser-monads</code> 패키지가 이를 달성하\n는 방법은 다음과 같습니다.</p>\n<ol>\n<li>해당 패키지에서는 window, document와 같은 몇 가지 모나드를 반환합니다.</li>\n<li>브라우저 환경에서 사용될 때 내보낸 모나드는 실제 <code class=\"language-text\">window</code> 및 <code class=\"language-text\">document</code> 객체에 대한 참조이므로 필\n요한 기능을 사용할 수 있습니다.</li>\n<li>브라우저가 아닌 환경(ex: Node.js 또는 SSR 중)에서는 <code class=\"language-text\">nothing</code> 의 인스턴스가 됩니다. 즉, 이러한 객\n체의 속성이나 메서드에 참조하려고 하면 오류가 발생하지 않고 단순히 “nothing” 값을 반환합니다.\n<code class=\"language-text\">nothing</code> 인스턴스는 호출하는 메서드에 관계없이 항상 자신을 반환하는 기본 프록시입니다. 즉, 인스\n턴스가 존재하지 않는 경우 적합한 대체 자원입니다.</li>\n<li>따라서 패키지에서 제공하는 모나드를 사용하면 실행 환경이나 방어 코드 작성에 대해 걱정할 필요 없이\n코드를 작성할 수 있습니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// https://github.com/slmgc/Nothing/blob/master/src/index.js</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> Nothing <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Nothing<span class=\"token punctuation\">;</span>\n  fn<span class=\"token punctuation\">.</span>toString <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">.</span>toLocaleString <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">[</span>Symbol<span class=\"token punctuation\">.</span>toPrimitive<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  fn<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">valueOf</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">freeze</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">get</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o<span class=\"token punctuation\">,</span> key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> o<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> Nothing<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">toBool</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>o <span class=\"token operator\">&amp;&amp;</span> o<span class=\"token punctuation\">.</span><span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNothing</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> o <span class=\"token operator\">===</span> Nothing<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isSomething</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>o <span class=\"token operator\">===</span> Nothing <span class=\"token operator\">||</span> o <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">serialize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">===</span> Nothing <span class=\"token operator\">?</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">:</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">deserialize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">s</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">?</span> Nothing <span class=\"token operator\">:</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>사용하는 방법은 다음과 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> window <span class=\"token punctuation\">}</span> from ‘browser<span class=\"token operator\">-</span>monads’\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Location: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>비브라우저 환경에서 코드를 실행하더라도 <code class=\"language-text\">browser-monads</code> 패키지에서 제공하는 모나드가 정상적으로 처\n리하므로 오류가 발생하지 않습니다.</p>\n<p>이처럼 <code class=\"language-text\">browser-monads</code> 패키지를 사용해 오류 가능성을 줄이면서 코드 가독성과 유지보수성을 향상시킬수\n있었습니다.</p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>요약하자면, Gatsby의 이중 환경 특성은 <code class=\"language-text\">window</code> 객체를 사용할 때 주의를 요합니다. <code class=\"language-text\">useEffect</code> 훅 내에\n서 <code class=\"language-text\">window</code> 객체를 사용하면 안전합니다. 만약 <code class=\"language-text\">useEffect</code> 훅 외부에서 사용할 거라면 방어 코드를 작성\n하거나 <code class=\"language-text\">browser-monads</code> 패키지를 활용하면 두 환경에서 원활한 경험을 보장할 수 있습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://www.gatsbyjs.com/docs/debugging-html-builds/\">https://www.gatsbyjs.com/docs/debugging-html-builds/</a></li>\n<li><a href=\"https://medium.com/@Jense5_/use-document-and-window-with-gatsby-e9a92ee31f36\">https://medium.com/@Jense5_/use-document-and-window-with-gatsby-e9a92ee31f36</a></li>\n<li><a href=\"https://github.com/slmgc/Nothing\">https://github.com/slmgc/Nothing</a></li>\n</ul>",
      "%EC%B0%B8%EA%B3%A0#참고": "<h2 id=\"들어가며\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0\" aria-label=\"들어가며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>들어가며</h2>\n<p>Gatsby는 개발 환경에서는 브라우저, 빌드 프로세스 중엔 Node.js 환경에서 실행됩니다. 이러한 특성으로인\n해 브라우저 환경에서만 사용할 수 있는 전역 객체인 <code class=\"language-text\">window</code> 객체를 사용할 때 혼란을 초래할 수 있습니\n다.</p>\n<p>이 글에서는 Gatsby가 작동하는 방식과 그렇게 작동하는 이유, <code class=\"language-text\">useEffect</code> 훅 외부에서 <code class=\"language-text\">window</code> 객체를사\n용할 때 방어 코드의 필요성, <code class=\"language-text\">useEffect</code> 훅에서 <code class=\"language-text\">window</code> 객체를 사용하는 것이 허용되는 이유 및\n<a href=\"https://www.npmjs.com/package/browser-monads\">browser-monads</a> 패키지를 사용하여 방어 코드를 작성하\n지 않고 브라우저와 비브라우저 환경 모두에서 원활하게 작동하는 코드를 작성하는 방법을 알아보겠습니다.</p>\n<h2 id=\"gatsby를-선택한-이유\" style=\"position:relative;\"><a href=\"#gatsby%EB%A5%BC-%EC%84%A0%ED%83%9D%ED%95%9C-%EC%9D%B4%EC%9C%A0\" aria-label=\"gatsby를 선택한 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby를 선택한 이유</h2>\n<p>얼마 전, 개발 블로그를 만들기 위해 크게 아래와 같은 이유로 <code class=\"language-text\">Gatsby</code>를 선택해 개발하게 되었습니다.</p>\n<ul>\n<li><strong>높은 성능</strong>: Gatsby는 정적 HTML 파일을 생성하여 매우 빠른 페이지 로드와 향상된 사용자 경험을 제\n공합니다. 또한 이미지 최적화, 코드 스플리팅, 지연 로딩도 간단하게 할 수 있게 기본 제공해줍니다.</li>\n<li><strong>정적 사이트 생성(SSG)</strong>: React의 SSR 기능을 활용하여 빌드 프로세스 중에 정적 파일을 생성합니다.\n이렇게 되면 CSR에 비해 더 나은 SEO, 더 빠른 페이지 로드가 가능합니다.</li>\n<li><strong>뛰어난 데이터 결합</strong>: GraphQL을 사용하여 CMS, API 및 로컬 파일과 같은 다양한 소스에서 데이터를가\n져올 수 있습니다. 이러한 유연성은 개발 블로그를 만드는 데 큰 이점을 줄 것 같았습니다.</li>\n<li><strong>플러그인 생태계</strong>: 프로젝트의 기능을 향상하거나 확장하기 위해 쉽게 추가 가능한 방대한 플러그인생\n태계를 제공합니다. 이 모듈식 접근 방식은 개발 시간을 절약하고 깔끔한 코드베이스를 유지하는 데 많은\n도움이 되었습니다.</li>\n</ul>\n<p>물론 <code class=\"language-text\">Next.js</code> 또한 SSG와 SSR에 중점을 둔 좋은 프레임워크지만 Gatsby의 데이터 처리와 빠르게 개발 가\n능하게 해주는 방대한 플러그인들이 이와 차별화 된다고 생각했습니다.</p>\n<p>결론적으로 성능, 데이터 처리의 유연성, 광범위한 플러그인 생태계 및 활성화된 커뮤니티 및 문서에 중점\n을 둔 Gatsby를 선택하게 되었습니다.</p>\n<p>그런데 사용할수록 정말 만족하던 Gatsby였지만 유일하게 거슬리던 게 있었습니다. 스크롤 이벤트나 화면사\n이즈 정보를 가져오기 위해 <code class=\"language-text\">window</code> 객체를 사용했습니다. 그러나 Gatsby의 이중 환경에 의해 <code class=\"language-text\">window</code> 객\n체를 사용하려면 항상 존재 여부를 확인하는 방어 코드를 작성해야만 했습니다.</p>\n<h2 id=\"gatsby의-이중-환경-이해-및-window-객체-사용\" style=\"position:relative;\"><a href=\"#gatsby%EC%9D%98-%EC%9D%B4%EC%A4%91-%ED%99%98%EA%B2%BD-%EC%9D%B4%ED%95%B4-%EB%B0%8F-window-%EA%B0%9D%EC%B2%B4-%EC%82%AC%EC%9A%A9\" aria-label=\"gatsby의 이중 환경 이해 및 window 객체 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby의 이중 환경 이해 및 window 객체 사용</h2>\n<p>Gatsby는 애플리케이션을 빠르게 개발하기 위해 <strong>개발 환경</strong>에서 작업할 때 <strong>브라우저에서 실행</strong>되어\nHMR, 실시간 프리뷰와 같은 기능을 제공하여 개발자 경험을 향상시킵니다. 그러나 <strong>빌드 프로세스</strong> 중에\n<strong>Node.js 환경</strong>에서 작동하여 최적화된 정적 파일을 생성하고 로컬 파일과 같은 다양한 소스에서 데이터\n를 가져와 처리합니다. 이러한 최적화는 더 빠른 로드 시간과 더 나은 성능을 제공할 수 있게 되므로 유저\n에게 좋은 경험을 줄 수 있게 해줍니다.</p>\n<p>다만 이러한 Gatsby의 이중 환경으로 인해 Gastby를 사용해 개발할 때는 브라우저 환경에서만 사용할 수 있\n는 <code class=\"language-text\">window</code> 객체를 사용할 때 주의해야 합니다. 만약 <code class=\"language-text\">window</code> 객체를 사용해야 한다면 아래와 같은 방법\n들을 사용해야 합니다.</p>\n<h3 id=\"window-객체에-대한-방어-코드\" style=\"position:relative;\"><a href=\"#window-%EA%B0%9D%EC%B2%B4%EC%97%90-%EB%8C%80%ED%95%9C-%EB%B0%A9%EC%96%B4-%EC%BD%94%EB%93%9C\" aria-label=\"window 객체에 대한 방어 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>window 객체에 대한 방어 코드</h3>\n<p>위에서 설명했듯이, 개발 중에는 CSR과 동일한 환경에서 동작하기 때문에 window 객체가 존재하지만 빌드중\n에는 Node 환경에서 window 객체가 존재하지 않습니다. 따라서 Gatsby 프로젝트가 두 환경에서 원활하게실\n행되도록 하려면 <code class=\"language-text\">window</code> 객체를 사용할 때 방어 코드를 작성하는 것이 중요합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> isBrowser <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> window <span class=\"token operator\">!==</span> <span class=\"token string\">\"undefined\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> loggedIn <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isBrowser<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span>localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"isLoggedIn\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"true\"</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Am I logged in? </span><span class=\"token punctuation\">{</span>loggedIn<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드는 Gatsby가 빌드하는 동안 코드가 실행되지 않도록 <code class=\"language-text\">window</code> 객체가 정의되어 있는지 확인하는 것\n을 의미합니다. 이렇게 하지 않으면 빌드 프로세스 중 오류가 발생합니다.</p>\n<h3 id=\"useeffect-훅-내부에서-사용\" style=\"position:relative;\"><a href=\"#useeffect-%ED%9B%85-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9\" aria-label=\"useeffect 훅 내부에서 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useEffect 훅 내부에서 사용</h3>\n<p><code class=\"language-text\">useEffect</code> 훅은 구성 요소가 렌더링된 후 클라이언트 측(브라우저 환경)에서만 실행됩니다. 이렇게 하면\n방어 코드를 작성하지 않고도 <code class=\"language-text\">useEffect</code> 훅 내부에선 안전하게 사용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleScroll</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> passive<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"browser-monads-패키지-사용\" style=\"position:relative;\"><a href=\"#browser-monads-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%82%AC%EC%9A%A9\" aria-label=\"browser monads 패키지 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>browser-monads 패키지 사용</h3>\n<p><code class=\"language-text\">browser-monads</code> 패키지는 내부적으로 방어 코드를 처리하는 일련의 모나드 함수를 제공하여 Gatsby 프로\n젝트에서 <code class=\"language-text\">window</code> 객체로 작업하는 프로세스를 단순화합니다. <code class=\"language-text\">browser-monads</code> 를 사용하면 <code class=\"language-text\">window</code> 객\n체에 액세스하는 문제를 해결하는 데 도움이 됩니다. 이 패키지는 브라우저와 Node.js 환경 모두에서 코드\n가 원활하게 작동하도록 보장하기 때문입니다.</p>\n<p>그럼 어떻게 두 환경에서 코드가 원활하게 작동하도록 보장할까요? <code class=\"language-text\">browser-monads</code> 패키지가 이를 달성하\n는 방법은 다음과 같습니다.</p>\n<ol>\n<li>해당 패키지에서는 window, document와 같은 몇 가지 모나드를 반환합니다.</li>\n<li>브라우저 환경에서 사용될 때 내보낸 모나드는 실제 <code class=\"language-text\">window</code> 및 <code class=\"language-text\">document</code> 객체에 대한 참조이므로 필\n요한 기능을 사용할 수 있습니다.</li>\n<li>브라우저가 아닌 환경(ex: Node.js 또는 SSR 중)에서는 <code class=\"language-text\">nothing</code> 의 인스턴스가 됩니다. 즉, 이러한 객\n체의 속성이나 메서드에 참조하려고 하면 오류가 발생하지 않고 단순히 “nothing” 값을 반환합니다.\n<code class=\"language-text\">nothing</code> 인스턴스는 호출하는 메서드에 관계없이 항상 자신을 반환하는 기본 프록시입니다. 즉, 인스\n턴스가 존재하지 않는 경우 적합한 대체 자원입니다.</li>\n<li>따라서 패키지에서 제공하는 모나드를 사용하면 실행 환경이나 방어 코드 작성에 대해 걱정할 필요 없이\n코드를 작성할 수 있습니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// https://github.com/slmgc/Nothing/blob/master/src/index.js</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> Nothing <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Nothing<span class=\"token punctuation\">;</span>\n  fn<span class=\"token punctuation\">.</span>toString <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">.</span>toLocaleString <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">[</span>Symbol<span class=\"token punctuation\">.</span>toPrimitive<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  fn<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">valueOf</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">freeze</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">get</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o<span class=\"token punctuation\">,</span> key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> o<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> Nothing<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">toBool</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>o <span class=\"token operator\">&amp;&amp;</span> o<span class=\"token punctuation\">.</span><span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNothing</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> o <span class=\"token operator\">===</span> Nothing<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isSomething</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>o <span class=\"token operator\">===</span> Nothing <span class=\"token operator\">||</span> o <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">serialize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">===</span> Nothing <span class=\"token operator\">?</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">:</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">deserialize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">s</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">k<span class=\"token punctuation\">,</span> v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>v <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">?</span> Nothing <span class=\"token operator\">:</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>사용하는 방법은 다음과 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> window <span class=\"token punctuation\">}</span> from ‘browser<span class=\"token operator\">-</span>monads’\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Location: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>비브라우저 환경에서 코드를 실행하더라도 <code class=\"language-text\">browser-monads</code> 패키지에서 제공하는 모나드가 정상적으로 처\n리하므로 오류가 발생하지 않습니다.</p>\n<p>이처럼 <code class=\"language-text\">browser-monads</code> 패키지를 사용해 오류 가능성을 줄이면서 코드 가독성과 유지보수성을 향상시킬수\n있었습니다.</p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>요약하자면, Gatsby의 이중 환경 특성은 <code class=\"language-text\">window</code> 객체를 사용할 때 주의를 요합니다. <code class=\"language-text\">useEffect</code> 훅 내에\n서 <code class=\"language-text\">window</code> 객체를 사용하면 안전합니다. 만약 <code class=\"language-text\">useEffect</code> 훅 외부에서 사용할 거라면 방어 코드를 작성\n하거나 <code class=\"language-text\">browser-monads</code> 패키지를 활용하면 두 환경에서 원활한 경험을 보장할 수 있습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://www.gatsbyjs.com/docs/debugging-html-builds/\">https://www.gatsbyjs.com/docs/debugging-html-builds/</a></li>\n<li><a href=\"https://medium.com/@Jense5_/use-document-and-window-with-gatsby-e9a92ee31f36\">https://medium.com/@Jense5_/use-document-and-window-with-gatsby-e9a92ee31f36</a></li>\n<li><a href=\"https://github.com/slmgc/Nothing\">https://github.com/slmgc/Nothing</a></li>\n</ul>"
    }
  },
  {
    "route": "https://lazy-dev.netlify.app/developments/develop-chrome-extension-synchronize-tab-scrolling/",
    "data": {
      "%EC%9A%94%EA%B5%AC-%EC%82%AC%ED%95%AD#요구 사항": "<h2 id=\"요구-사항\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EA%B5%AC-%EC%82%AC%ED%95%AD\" aria-label=\"요구 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요구 사항</h2>\n<p>익스텐션의 기능을 먼저 정리해보겠습니다.</p>\n<ul>\n<li>탭 정보 리스트\n<ul>\n<li>열려 있는 탭을 체크 가능한 리스트 형태로 보여줘야 합니다.</li>\n<li>유저에게 제공되는 정보는 favicon과 title입니다.</li>\n<li>newTab은 리스트에 보여주지 않습니다.</li>\n<li>정렬은 브라우저에서 탭이 열려있는 순서(index 오름차순)입니다.</li>\n<li>제목이 넘친다면 한 줄 말줄임 처리합니다.</li>\n<li>탭 제목 또는 URL로 검색할 수 있도록 합니다. (대략적으로 문자열 일치 파악)</li>\n</ul>\n</li>\n<li>동기화 시작\n<ul>\n<li>2개 이상의 탭을 선택한 경우 시작할 수 있습니다.</li>\n<li>1개만 선택한 경우 버튼을 클릭할 수 없으며 가이드 메시지가 표시됩니다.</li>\n</ul>\n</li>\n<li>동기화 해제\n<ul>\n<li>동기화 중인 탭 중 하나라도 제거되면 중지됩니다.</li>\n<li>동기화 중인 탭 중 URL이 변경되면 중지됩니다.</li>\n</ul>\n</li>\n<li>데이터 유지\n<ul>\n<li>팝업을 껐다 켜도 데이터가 유지되어야 합니다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"기능-구현\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84\" aria-label=\"기능 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기능 구현</h2>\n<h3 id=\"탭-정보-리스트\" style=\"position:relative;\"><a href=\"#%ED%83%AD-%EC%A0%95%EB%B3%B4-%EB%A6%AC%EC%8A%A4%ED%8A%B8\" aria-label=\"탭 정보 리스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>탭 정보 리스트</h3>\n<p>탭의 <code class=\"language-text\">title</code>속성은 manifest에 tabs 권한이 포함된 경우에만 존재합니다. 따라서 manifest에 권한 설정이\n필요합니다.</p>\n<p><a href=\"https://developer.chrome.com/docs/extensions/reference/tabs/#method-query\">chrome.tabs API</a> 를\n이용해서 모든 탭의 정보들을 가져올 수 있습니다. newtab은 스크롤을 동기화하는 데 사용할 탭이 아니므로\n제외하고 반환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useTabList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>queryInfo<span class=\"token operator\">?</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span>QueryInfo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    queryKey<span class=\"token operator\">:</span> tabsKeys<span class=\"token punctuation\">.</span><span class=\"token function\">list</span><span class=\"token punctuation\">(</span>queryInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">queryFn</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> tabs <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>queryInfo <span class=\"token operator\">??</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// Returns \"tabs\", excluding items with URL 'chrome://newtab/'.</span>\n      <span class=\"token keyword\">return</span> tabs<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> tab<span class=\"token punctuation\">.</span>url <span class=\"token operator\">!==</span> <span class=\"token string\">'chrome://newtab/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    suspense<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>참고로 탭이 생성, 업데이트, 삭제 되었을 때 함수를 실행하고 싶다면 아래 사진의 함수를 통해\n가능합니다. 하지만 저의 목표는 원문과 번역문의 스크롤 위치를 동기화하기 원하는 저같은 사용자를 돕기\n위함입니다. 따라서 이 함수들을 이용해 구현하는 경우는 없으므로 넘어가겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 636px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVR42j2T65KjOAyFeY1u7hhfJdnGBAIhIUlP7+x01fyY93+aFemadR1cKhey5eNPmZCdBKFROq8OBdl2lTKdwV5p0csWgtJWCNF0bVOVZcOjrruu46XMapN8QgfGk/V0um7j5TqsSzglG9FvU7ieYIowJxN9b0z9d1RVlXnnb9Mtglc4GJ/m22P9+LU8/knzKsGG+xbuF9pm2hZcJxhCUzf/52edbIRtFAqI8tDQ1827srUhoayw0NGgIEjR10LURZ4fSd/pTZ0FGx6nZzSxd0njOO8/968/l8/f43lXwQ+fT/+4wraE5063C6ShKqoiL6uyYmVK9xScJQXRwWDDTJYcDgDRKichOTohnQCT06AMHKaGCZTtDclMax0pEKIhviKldaI0xvOUltmAxnOkZcDJ4xRgCiYiDGhQ9kqwDsP2aUcF0kZ+qPFyH9f9tD3n2w+pNawznCczJg5wW9w8GoSj5urltlCtME1RFCUrL/K3t/z9/TW/lWWZv+XFe87rPH+L47/J7HbXWeRnsphsOCONTrvjVhCNJR1fK5DssKALhlnyo00bceU02qwVbada9r1tD1XsZpnXTdm0zAHzVDV1xVFz/NCwuq7teo44aDKjDRumeINed0JDHFkGfNdLHbzyKBFYvbU171S9Ci75e5XtLRt2HzBoSkwYs7U8/52vdzY/Pq/+trJoO/vLrIw60Gj4/OPkAxImrIeWHw0HiUlh4sYoNHTOS2m4K3idHVEWe+4Q8JqJCDMMK2on+eSwj49ognRJQTrff14+vpbHr/X5payjx9Xfb26ZGS/aN7dMhuiwpTgcZ0hUjMSGOyYs2DgHwy3G/TR6ZRgjTRNhYlyMP5MJltILL5Q8Z0pJxgvQWs+EQZyT8xSmRMnbCHAKOCKeCEZPc+AttGMnBe/ba3GUfT89gvFctsExLTtDtn58DfMmwfn7ZqcR1vPRFUxbinVZf3dFVVX/AWMCszvKXuKYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chrome.tabs.api properties\"\n        title=\"\"\n        src=\"/static/1696468700438.0815157850153/9be90/func-list.png\"\n        srcset=\"/static/1696468700438.0815157850153/63868/func-list.png 250w,\n/static/1696468700438.0815157850153/0b533/func-list.png 500w,\n/static/1696468700438.0815157850153/9be90/func-list.png 636w\"\n        sizes=\"(max-width: 636px) 100vw, 636px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>사용 편의성을 위해 유저가 새 창을 띄우는 게 아닌, 간단한 <strong>팝업</strong>을 통해 이용할 수 있도록\n하겠습니다. <code class=\"language-text\">useTabList</code> 를 통해 받아온 데이터를 이용해 <code class=\"language-text\">popup.html</code> 파일을 작성하면 아이콘을 눌렀을\n때 나오는 팝업을 아래와 같이 구성할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 626px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOUlEQVR42o2TWY8hYRSG69oau6JQo1AUbV/SlkxsibTY9SRmjJjhh7j2q+dRnxaJmHgvTs63nP090tsLyGazuVzuJqvV2rsJKfAcwWDQ7XYXi8VGoxEOh/GiKEqhUDAMo9ls1ut1KRKJcBUxoTwgFAolk0kCxmKxTCaDNEzgsVQqSavVSlVVHtLpdOYLxh2413Wdy5skc03TRqORtN/v8dfpdNrtdq/X63a76LzxKWVCN5G6A+6i0ehyuZR2ux2RKaBSqWDWarXohPjxDKSDyWKxkLbbrSgskUho8TgxUZJ3wNFNEbqIPJ1OJRw4HI74t7ishCIJlbbRWCTPQr+1E50wUROY9Hp9aTabBYKBZuNdzeuF8fdqpcJIqoyyViuZQGdUHOk5MSkK3eVy9ft9ibqtVivOfF6v0+F0ezzM1vMlPQ9HzHw+n81mGwwG0nw+x6xYKhspbT/tMzJmSEuYhxgVwek2YcmIo+CcLMuXyNSM1/xbPqqpnV5dTyUxpC9kKDqEGU3CTIxAOIV817QtFgsHv8/ncro8Xi+5ee8kroVyq8Lv91PpJW1hTBshsywHBQSxn4HPdPsSGXrejF8EBdvt9ovxx2RhtZK27H8ZBL8ar378VJQwu/DI4UeIP6zHlWG/fu9r1epwOGQlkB8mxuMxcjKZsDoTE+KSaCwPrYI26/Vami8/NS0OjRgvu8GGQCBBKcjEsWFCXJbLZcE5sris5Pl83mw2x+Pxr4k//4X4czgcWKfT6fQPRrHKCqheT4sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tab-list\"\n        title=\"\"\n        src=\"/static/1696468700438.4026157850154/af590/tab-list.png\"\n        srcset=\"/static/1696468700438.4026157850154/63868/tab-list.png 250w,\n/static/1696468700438.4026157850154/0b533/tab-list.png 500w,\n/static/1696468700438.4026157850154/af590/tab-list.png 626w\"\n        sizes=\"(max-width: 626px) 100vw, 626px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그리고 탭이 많을 때 빠르게 찾을 수 있도록 <strong>검색 기능</strong>을 넣었습니다. 대략적인 문자열만 입력해도\n결과를 찾을 수 있는 퍼지 검색(fuzzy-search) 알고리즘을 적용하기 위해\n<a href=\"https://www.fusejs.io/\">Fuse.js</a>를 사용했습니다. 이로써 사용자가 단어 철자를 정확히 입력하지 않아도\n원하는 검색 결과를 찾을 수 있습니다.</p>\n<h3 id=\"동기화-시작\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%EC%8B%9C%EC%9E%91\" aria-label=\"동기화 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 시작</h3>\n<p>선택한 탭 id를 받아 해당 탭에 스크롤 이벤트를 등록합니다. 그리고 스크롤이 감지되면 수치를 백분율로\n나타내고 다른 탭을 그만큼 스크롤합니다. 이는 백그라운드 스크립트와 콘텐츠 스크립트를 활용하여 구현할\n수 있습니다.</p>\n<p>동기화를 시작할 수 없는 상황은 다음과 같습니다.</p>\n<ul>\n<li>이미 동기화 중일 때</li>\n<li>유저가 선택한 탭이 2개 미만일 때</li>\n</ul>\n<p>선택된 탭이 2개 미만일 경우 또는 이미 동기화 중이라면 버튼을 <code class=\"language-text\">disabled</code> 처리하겠습니다.</p>\n<h3 id=\"동기화-해제\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%ED%95%B4%EC%A0%9C\" aria-label=\"동기화 해제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 해제</h3>\n<p>동기화가 해제되어야 하는 상황은 다음과 같습니다.</p>\n<ul>\n<li>동기화 중일 때</li>\n<li>동기화 중인 탭이 제거되었을 때</li>\n<li>동기화 중인 탭의 URL이 변경되었을 때</li>\n</ul>\n<h3 id=\"데이터-유지\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9C%A0%EC%A7%80\" aria-label=\"데이터 유지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 유지</h3>\n<p>팝업을 껐다 켜도 데이터를 유지해야 합니다. 동기화를 시작했다면 팝업을 언제든 다시 켜도 어떤 탭이\n동기화되고 있는지 유저에게 알려주기 위한 동작을 하기 위해선 말이죠.</p>\n<p>이때 <a href=\"https://developer.chrome.com/docs/extensions/reference/storage/\">chrome.storage API</a> 를\n활용해서 데이터 및 상태를 유지할 수 있습니다. 이 API를 사용하려면 tab처럼 manifest에 <code class=\"language-text\">storage</code>\n권한을 설정해줘야 합니다.</p>\n<p>백그라운드 스크립트에서 어떤 탭들이 동기화 중인지 저장하고 가져올 수 있는 함수를 만들어 사용하면\n되겠습니다.</p>\n<h2 id=\"최적화\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%A0%81%ED%99%94\" aria-label=\"최적화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최적화</h2>\n<p>아래 코드는 스크롤 이벤트가 발생하면 scrollY의 %값을 <code class=\"language-text\">syncScroll</code> 커맨드와 함께 전달하는 함수입니다.</p>\n<p>%값으로 적용한 이유는 똑같은 내용의 글을 번역한 것이어도 언어별로 전달하는 문자의 양이 차이가\n납니다. 그러므로 스크롤한 값 그대로 적용하는 것보단 %값을 적용해 최대한 번역문과 원문 글의 문장을\n비슷하게 읽어 내려갈 수 있게끔 하기 위함입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onScrollHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Scroll event triggered'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n      window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollYPercentage <span class=\"token operator\">=</span> scrollPosition <span class=\"token operator\">/</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'Scroll event triggered, sending syncScroll message with percentage:'</span><span class=\"token punctuation\">,</span>\n      scrollYPercentage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      command<span class=\"token operator\">:</span> <span class=\"token string\">'syncScroll'</span><span class=\"token punctuation\">,</span>\n      data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in onScrollHandler: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>err<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"throttle-활용\" style=\"position:relative;\"><a href=\"#throttle-%ED%99%9C%EC%9A%A9\" aria-label=\"throttle 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Throttle 활용</h3>\n<p>위 함수를 스크롤 이벤트에 등록하고 실행을 해보면 아래 움짤처럼 굉장히 잦은 호출이 일어납니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/not-optimize.gif\" alt=\"잦은 호출 현상 예시\"></p>\n<p>저 함수의 목적은 스크롤이 발생하면 scrollY의 백분율 값을 계산해서 메시지를 보내는 것입니다. 그냥\n자연스럽게 다른 탭도 함께 스크롤 될 수 있도록 하면 되기에 이 경우, <code class=\"language-text\">throttle</code> 을 활용해서 메시지를\n적절한 타이밍에 보내도록 했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> throttle <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      timer <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/images/chrome-extension-sync-tab/throttle.gif\" alt=\"최적화 후 예시\"></p>\n<p>확실히 이제 호출이 자주 일어나지 않습니다. 하지만 움짤을 자세히 보면 또 다른 문제가 있는데요.</p>\n<p>한쪽 탭을 스크롤하면 다른 탭도 스크롤 위치를 맞추기 위해 자동으로 스크롤 됩니다. 그럼 다른 탭에서도\n스크롤이 발생하여 유저가 직접 스크롤하고 있는 탭(동기화 중인 탭)에 스크롤 위치를 맞추라는 메시지를\n보내게 됩니다. 그렇게 아래 움짤처럼 서로 스크롤을 맞추기 위해 <strong>무한 루프</strong>에 빠지게 됩니다. (받는\n쪽의 tabId를 보면 양쪽 모두 번갈아가며 스크롤 위치 데이터를 받고 스크롤 위치를 조정하고 있는 것을\n확인할 수 있습니다.)</p>\n<h3 id=\"debounce-활용\" style=\"position:relative;\"><a href=\"#debounce-%ED%99%9C%EC%9A%A9\" aria-label=\"debounce 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debounce 활용</h3>\n<p>이 문제를 개선하기 위해 선택한 탭들의 스크롤을 동일하게 맞추는 과정을 간단하게 살펴보겠습니다.</p>\n<ol>\n<li>유저가 서로 스크롤이 동기화되기 원하는 탭들을 선택하면 <code class=\"language-text\">startSync</code> 커맨드와 함께 탭의 id를 배열\n형태로 전달합니다.</li>\n<li>받은 탭의 id를 기반으로 해당 탭에 <code class=\"language-text\">startSyncTab</code> 커맨드를 전달합니다.</li>\n<li><code class=\"language-text\">startSyncTab</code> 을 전달 받으면 스크롤이 발생했을 때 scrollY의 퍼센트값을 계산해서 <code class=\"language-text\">syncScroll</code>\n커맨드를 보내는 함수(onScrollHandler)를 등록합니다.</li>\n<li><code class=\"language-text\">syncScroll</code> 을 전달 받으면 현재 스크롤 중인 탭을 제외하고 동기화 중인 모든 탭에\n<code class=\"language-text\">syncScrollForTab</code> 커맨드와 함께 scrollYPercentage 값을 전달합니다.</li>\n<li><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 <code class=\"language-text\">window.scrollTo()</code> 함수를 사용해 원하는 위치로 스크롤합니다.</li>\n</ol>\n<p>위 과정들을 거쳐 각 탭의 스크롤이 동기화 됩니다.</p>\n<p>이 문제는 <strong>사용자의 스크롤</strong>과 <code class=\"language-text\">**window.scrollTo()</code> 함수를 이용해 동작하는 스크롤**을 구별하는\n플래그 역할을 하는 변수와 <code class=\"language-text\">debounce</code> 함수를 통해 개선할 수 있습니다. 천천히 개선하는 과정을\n구현해보겠습니다.</p>\n<p>먼저, 플래그 역할을 하는 <code class=\"language-text\">scrolling</code> 변수를 선언하고 <code class=\"language-text\">false</code> 로 초기화하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">let</span> scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 스크롤 위치를 동기화하는데 여기서 <code class=\"language-text\">scrolling: true</code> 로\n설정하겠습니다. 그리고 스크롤 이벤트에 등록한 함수에 <code class=\"language-text\">scrolling: true</code> 라면 메시지를 보내지 않도록\n하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>scrolling<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Received syncScrollForTab message with data\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n    scrollYPercentage <span class=\"token operator\">*</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    top<span class=\"token operator\">:</span> scrollPosition<span class=\"token punctuation\">,</span>\n    behavior<span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>마지막으로 <code class=\"language-text\">scrolling: false</code> 로 변경하는데 이 부분에 <code class=\"language-text\">debounce</code> 를 적용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> debounce <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resetScrolling <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Scrolling reset to\"</span><span class=\"token punctuation\">,</span> scrolling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token function\">resetScrolling</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 스크롤 이벤트가 발생하게 되면 아래처럼 실행됩니다.</p>\n<p>스크롤 이벤트가 발생 → <code class=\"language-text\">syncScroll</code> 커맨드를 받아 동기화 중인 모든 탭에 <code class=\"language-text\">syncScrollForTab</code> 커맨드와\n함께 scrollYPercentage 값을 전달 → <code class=\"language-text\">scrolling: true</code> 로 설정 및 스크롤 위치 조정 후 <code class=\"language-text\">resetScrolling</code>\n함수 실행 → 스크롤 이벤트 발생 → <code class=\"language-text\">scrolling</code> 이 true이므로 동작 생략</p>\n<p>움짤로 확인해보겠습니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/flag.gif\" alt=\"모든 최적화 후 예시\"></p>\n<p>1 id를 가진 탭에서 메시지를 보내면 2 id를 가진 탭이 메시지를 받아 <code class=\"language-text\">window.scrollTo()</code> 함수를 이용해\n스크롤 위치를 동기화합니다. 반대로 2 id를 가진 탭이 메시지를 보내면 1 id를 가진 탭에서 메시지를 받아\n스크롤 위치를 동기화하는 것을 볼 수 있습니다.</p>\n<p>스크롤 위치도 자연스럽게 동기화 되고 문제가 개선되었습니다.</p>\n<h2 id=\"uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-오류-해결\" style=\"position:relative;\"><a href=\"#uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0\" aria-label=\"uncaught in promise error could not establish connection receiving end does not exist 오류 해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>‘Uncaught (in promise) Error: Could not establish connection. Receiving end does not exist.’ 오류 해결</h2>\n<h3 id=\"오류-발견\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%A5%98-%EB%B0%9C%EA%B2%AC\" aria-label=\"오류 발견 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오류 발견</h3>\n<p>처음 기획 했던 대로 기본 기능을 모두 구현했습니다. 그러나 콘솔에서 예기치 않은 오류가 발생합니다.\n디버깅을 위해 앱을 설치하고 열려있던 탭을 선택 후 동기화 시작 버튼을 누르면 에러가 발생합니다.\n그리고 탭 간 스크롤이 동기화되지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Uncaught <span class=\"token punctuation\">(</span>in promise<span class=\"token punctuation\">)</span> Error: Could not establish connection. Receiving end does not exist.</code></pre></div>\n<h3 id=\"이-오류가-발생하는-이유\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"이 오류가 발생하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류가 발생하는 이유?</h3>\n<p>이 오류는 일반적으로 백그라운드 스크립트에서 <code class=\"language-text\">chrome.tabs.sendMessage</code>메서드가 호출될 때 콘텐츠\n스크립트가 탭에 <strong>수신되지 않거나 아직 초기화되지 않은</strong> 경우에 나타납니다.</p>\n<p>특히\n<a href=\"https://groups.google.com/a/chromium.org/g/chromium-extensions/c/BH5_4OKxM3s/m/7lqiiKT9AQAJ\">Chromium-dev 그룹에 올라온 대화</a>에서\n해당 문제에 대해 명확히 파악할 수 있습니다.</p>\n<blockquote>\n<p>Content scripts declared in manifest.json or registered in chrome.scripting.registerContentScripts\nrun only when the tab is loaded or reloaded (e.g. via Ctrl-R), so when you install or update your\nextension the existing tabs don't run your new content scripts automatically in Chrome (they do in\nFirefox though), whereas the old content scripts that were running previously lose the ability to\nconnect to the extension.</p>\n</blockquote>\n<p>쉽게 설명하면 콘텐츠 스크립트를 등록하는 <code class=\"language-text\">chrome.scripting.registerContentScripts</code>는 새로고침 또는\n탭이 로드될 때만 실행됩니다. 따라서 익스텐션을 설치하기 전인 이전 탭에는 수동으로 콘텐츠 스크립트를\n등록하지 않으면 서로 메시지를 주고 받을 수 없다는 것입니다.</p>\n<p>위 설명에 따르면 익스텐션을 설치하기 전에 존재하던 탭에는 콘텐츠 스크립트가 실행되지 않습니다.\n이러한 탭으로 메시지를 보내려고 할 때 수신단(콘텐츠 스크립트)이 없으므로 오류가 발생한 것이죠.</p>\n<h3 id=\"이-오류를-어떻게-해결할-수-있을까\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EA%B2%B0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"이 오류를 어떻게 해결할 수 있을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류를 어떻게 해결할 수 있을까?</h3>\n<p>핵심은 메시지를 보내려는 탭에 콘텐츠 스크립트가 삽입되어 있어야 하는 것입니다. 콘텐츠 스크립트를\n삽입하는 방법은 아래 3가지 방법이 있겠네요.</p>\n<ol>\n<li>설치 전 열려있던 탭을 강제로 새로고침하여 콘텐츠 스크립트를 삽입합니다.</li>\n<li>익스텐션 설치 시, 콘텐츠 스크립트를 기존 탭에 삽입합니다.</li>\n<li>콘텐츠 스크립트가 필요한 작업 요청 시 콘텐츠 스크립트를 삽입합니다.</li>\n</ol>\n<p>제 생각엔 세 번째 방법이 적절할 것 같습니다. 첫 번째 방법은 사용자의 데이터가 유실될 위험이\n있습니다. 두 번째 방법은 설치하기 전에 존재했던 모든 페이지에 콘텐츠 스크립트를 적용하게 됩니다.\n어차피 사용자가 원하는 탭에 콘텐츠 스크립트를 삽입해서 메시지를 주고 받으면 됩니다. 따라서 필요한\n탭에 콘텐츠 스크립트를 삽입하는 세 번째 방법을 선택했습니다.</p>\n<h3 id=\"구현\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현</h3>\n<ol>\n<li><code class=\"language-text\">chrome.tabs.sendMessage</code>를 사용하여 메시지를 보내기 전에 <code class=\"language-text\">chrome.scripting.executeScript</code>를\n사용해 콘텐츠 스크립트를 유저가 선택한 탭에 삽입합니다.</li>\n<li>스크립트 삽입이 성공하면 메시지를 계속 전송할 수 있게 됩니다.</li>\n</ol>\n<p>간단한 코드로 살펴보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// background.ts</span>\n\nchrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>onMessage<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> sender<span class=\"token punctuation\">,</span> sendResponse<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Popup에서 'startSync' 커맨드와 함께 유저가 선택한 탭의 id들을 전달하면 여기서 받습니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> checkedTabIds<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\n    checkedTabIds<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 탭이 존재하고 접근 가능한지 확인합니다.</span>\n      chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.tabs.get: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 콘텐츠 스크립트를 해당 탭에 삽입합니다.</span>\n        chrome<span class=\"token punctuation\">.</span>scripting<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">{</span>\n            target<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> tabId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            files<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/pages/content/index.js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n                <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.scripting.executeScript: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">.</span>message<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// 주입이 성공하면 메시지를 보냅니다.</span>\n            chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n              command<span class=\"token operator\">:</span> <span class=\"token string\">\"startSyncTab\"</span><span class=\"token punctuation\">,</span>\n              data<span class=\"token operator\">:</span> tabId<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 scripting을 사용한다고 manifest의 permissions에 포함하면 됩니다.</p>\n<p>이렇게 유저가 선택한 탭에 메시지를 보내기 전에 콘텐츠 스크립트를 삽입함으로써 발생한 오류를 해결할\n수 있었습니다.</p>\n<h2 id=\"다국어-지원\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EA%B5%AD%EC%96%B4-%EC%A7%80%EC%9B%90\" aria-label=\"다국어 지원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다국어 지원</h2>\n<p>다국어를 지원하는 방법은 아주 간단합니다.</p>\n<p>로케일을 추가할 때마다 <code class=\"language-text\">_locales/_localeCode_</code> 폴더 아래에 <code class=\"language-text\">messages.json</code> 파일에 문자열을 작성하면\n됩니다. 여기서 <code class=\"language-text\">localeCode</code>는 영어의 <code class=\"language-text\">en</code>과 같은 국가코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extName\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Synchronize Tab Scrolling - 여러 탭의 스크롤 위치를 동일하게 유지\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extDescription\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"여러 탭을 선택하고 스크롤 위치를 동기화할 수 있습니다.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"startSync\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"동기화 시작\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">manifest.json</code> 에선 <code class=\"language-text\">__MSG_messagename__</code> 처럼 문자열을 작성해 적용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"__MSG_extName__\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 <code class=\"language-text\">messages.json</code> 파일의 메시지를 간편하게 사용하기 위한 함수를 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">EnMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/en/messages.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">KoMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/ko/messages.json'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">MessageKey</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> EnMessage <span class=\"token operator\">|</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> KoMessage<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">t</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> MessageKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> chrome<span class=\"token punctuation\">.</span>i18n<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>en, ko 메시지들을 가져와 문자열로 보여줍니다. 아래는 사용 예시입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> t <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@src/chrome/i18n\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Popup</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>나머지 정보들은\n<a href=\"https://developer.chrome.com/docs/extensions/reference/i18n/#how-to-support-multiple-languages\">developer.chrome: how-to-support-multiple-languages</a>\n에서 자세히 확인하실 수 있습니다.</p>",
      "%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84#기능 구현": "<h2 id=\"요구-사항\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EA%B5%AC-%EC%82%AC%ED%95%AD\" aria-label=\"요구 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요구 사항</h2>\n<p>익스텐션의 기능을 먼저 정리해보겠습니다.</p>\n<ul>\n<li>탭 정보 리스트\n<ul>\n<li>열려 있는 탭을 체크 가능한 리스트 형태로 보여줘야 합니다.</li>\n<li>유저에게 제공되는 정보는 favicon과 title입니다.</li>\n<li>newTab은 리스트에 보여주지 않습니다.</li>\n<li>정렬은 브라우저에서 탭이 열려있는 순서(index 오름차순)입니다.</li>\n<li>제목이 넘친다면 한 줄 말줄임 처리합니다.</li>\n<li>탭 제목 또는 URL로 검색할 수 있도록 합니다. (대략적으로 문자열 일치 파악)</li>\n</ul>\n</li>\n<li>동기화 시작\n<ul>\n<li>2개 이상의 탭을 선택한 경우 시작할 수 있습니다.</li>\n<li>1개만 선택한 경우 버튼을 클릭할 수 없으며 가이드 메시지가 표시됩니다.</li>\n</ul>\n</li>\n<li>동기화 해제\n<ul>\n<li>동기화 중인 탭 중 하나라도 제거되면 중지됩니다.</li>\n<li>동기화 중인 탭 중 URL이 변경되면 중지됩니다.</li>\n</ul>\n</li>\n<li>데이터 유지\n<ul>\n<li>팝업을 껐다 켜도 데이터가 유지되어야 합니다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"기능-구현\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84\" aria-label=\"기능 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기능 구현</h2>\n<h3 id=\"탭-정보-리스트\" style=\"position:relative;\"><a href=\"#%ED%83%AD-%EC%A0%95%EB%B3%B4-%EB%A6%AC%EC%8A%A4%ED%8A%B8\" aria-label=\"탭 정보 리스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>탭 정보 리스트</h3>\n<p>탭의 <code class=\"language-text\">title</code>속성은 manifest에 tabs 권한이 포함된 경우에만 존재합니다. 따라서 manifest에 권한 설정이\n필요합니다.</p>\n<p><a href=\"https://developer.chrome.com/docs/extensions/reference/tabs/#method-query\">chrome.tabs API</a> 를\n이용해서 모든 탭의 정보들을 가져올 수 있습니다. newtab은 스크롤을 동기화하는 데 사용할 탭이 아니므로\n제외하고 반환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useTabList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>queryInfo<span class=\"token operator\">?</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span>QueryInfo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    queryKey<span class=\"token operator\">:</span> tabsKeys<span class=\"token punctuation\">.</span><span class=\"token function\">list</span><span class=\"token punctuation\">(</span>queryInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">queryFn</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> tabs <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>queryInfo <span class=\"token operator\">??</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// Returns \"tabs\", excluding items with URL 'chrome://newtab/'.</span>\n      <span class=\"token keyword\">return</span> tabs<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> tab<span class=\"token punctuation\">.</span>url <span class=\"token operator\">!==</span> <span class=\"token string\">'chrome://newtab/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    suspense<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>참고로 탭이 생성, 업데이트, 삭제 되었을 때 함수를 실행하고 싶다면 아래 사진의 함수를 통해\n가능합니다. 하지만 저의 목표는 원문과 번역문의 스크롤 위치를 동기화하기 원하는 저같은 사용자를 돕기\n위함입니다. 따라서 이 함수들을 이용해 구현하는 경우는 없으므로 넘어가겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 636px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVR42j2T65KjOAyFeY1u7hhfJdnGBAIhIUlP7+x01fyY93+aFemadR1cKhey5eNPmZCdBKFROq8OBdl2lTKdwV5p0csWgtJWCNF0bVOVZcOjrruu46XMapN8QgfGk/V0um7j5TqsSzglG9FvU7ieYIowJxN9b0z9d1RVlXnnb9Mtglc4GJ/m22P9+LU8/knzKsGG+xbuF9pm2hZcJxhCUzf/52edbIRtFAqI8tDQ1827srUhoayw0NGgIEjR10LURZ4fSd/pTZ0FGx6nZzSxd0njOO8/968/l8/f43lXwQ+fT/+4wraE5063C6ShKqoiL6uyYmVK9xScJQXRwWDDTJYcDgDRKichOTohnQCT06AMHKaGCZTtDclMax0pEKIhviKldaI0xvOUltmAxnOkZcDJ4xRgCiYiDGhQ9kqwDsP2aUcF0kZ+qPFyH9f9tD3n2w+pNawznCczJg5wW9w8GoSj5urltlCtME1RFCUrL/K3t/z9/TW/lWWZv+XFe87rPH+L47/J7HbXWeRnsphsOCONTrvjVhCNJR1fK5DssKALhlnyo00bceU02qwVbada9r1tD1XsZpnXTdm0zAHzVDV1xVFz/NCwuq7teo44aDKjDRumeINed0JDHFkGfNdLHbzyKBFYvbU171S9Ci75e5XtLRt2HzBoSkwYs7U8/52vdzY/Pq/+trJoO/vLrIw60Gj4/OPkAxImrIeWHw0HiUlh4sYoNHTOS2m4K3idHVEWe+4Q8JqJCDMMK2on+eSwj49ognRJQTrff14+vpbHr/X5payjx9Xfb26ZGS/aN7dMhuiwpTgcZ0hUjMSGOyYs2DgHwy3G/TR6ZRgjTRNhYlyMP5MJltILL5Q8Z0pJxgvQWs+EQZyT8xSmRMnbCHAKOCKeCEZPc+AttGMnBe/ba3GUfT89gvFctsExLTtDtn58DfMmwfn7ZqcR1vPRFUxbinVZf3dFVVX/AWMCszvKXuKYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chrome.tabs.api properties\"\n        title=\"\"\n        src=\"/static/1696468700438.0815157850153/9be90/func-list.png\"\n        srcset=\"/static/1696468700438.0815157850153/63868/func-list.png 250w,\n/static/1696468700438.0815157850153/0b533/func-list.png 500w,\n/static/1696468700438.0815157850153/9be90/func-list.png 636w\"\n        sizes=\"(max-width: 636px) 100vw, 636px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>사용 편의성을 위해 유저가 새 창을 띄우는 게 아닌, 간단한 <strong>팝업</strong>을 통해 이용할 수 있도록\n하겠습니다. <code class=\"language-text\">useTabList</code> 를 통해 받아온 데이터를 이용해 <code class=\"language-text\">popup.html</code> 파일을 작성하면 아이콘을 눌렀을\n때 나오는 팝업을 아래와 같이 구성할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 626px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOUlEQVR42o2TWY8hYRSG69oau6JQo1AUbV/SlkxsibTY9SRmjJjhh7j2q+dRnxaJmHgvTs63nP090tsLyGazuVzuJqvV2rsJKfAcwWDQ7XYXi8VGoxEOh/GiKEqhUDAMo9ls1ut1KRKJcBUxoTwgFAolk0kCxmKxTCaDNEzgsVQqSavVSlVVHtLpdOYLxh2413Wdy5skc03TRqORtN/v8dfpdNrtdq/X63a76LzxKWVCN5G6A+6i0ehyuZR2ux2RKaBSqWDWarXohPjxDKSDyWKxkLbbrSgskUho8TgxUZJ3wNFNEbqIPJ1OJRw4HI74t7ishCIJlbbRWCTPQr+1E50wUROY9Hp9aTabBYKBZuNdzeuF8fdqpcJIqoyyViuZQGdUHOk5MSkK3eVy9ft9ibqtVivOfF6v0+F0ezzM1vMlPQ9HzHw+n81mGwwG0nw+x6xYKhspbT/tMzJmSEuYhxgVwek2YcmIo+CcLMuXyNSM1/xbPqqpnV5dTyUxpC9kKDqEGU3CTIxAOIV817QtFgsHv8/ncro8Xi+5ee8kroVyq8Lv91PpJW1hTBshsywHBQSxn4HPdPsSGXrejF8EBdvt9ovxx2RhtZK27H8ZBL8ar378VJQwu/DI4UeIP6zHlWG/fu9r1epwOGQlkB8mxuMxcjKZsDoTE+KSaCwPrYI26/Vami8/NS0OjRgvu8GGQCBBKcjEsWFCXJbLZcE5sris5Pl83mw2x+Pxr4k//4X4czgcWKfT6fQPRrHKCqheT4sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tab-list\"\n        title=\"\"\n        src=\"/static/1696468700438.4026157850154/af590/tab-list.png\"\n        srcset=\"/static/1696468700438.4026157850154/63868/tab-list.png 250w,\n/static/1696468700438.4026157850154/0b533/tab-list.png 500w,\n/static/1696468700438.4026157850154/af590/tab-list.png 626w\"\n        sizes=\"(max-width: 626px) 100vw, 626px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그리고 탭이 많을 때 빠르게 찾을 수 있도록 <strong>검색 기능</strong>을 넣었습니다. 대략적인 문자열만 입력해도\n결과를 찾을 수 있는 퍼지 검색(fuzzy-search) 알고리즘을 적용하기 위해\n<a href=\"https://www.fusejs.io/\">Fuse.js</a>를 사용했습니다. 이로써 사용자가 단어 철자를 정확히 입력하지 않아도\n원하는 검색 결과를 찾을 수 있습니다.</p>\n<h3 id=\"동기화-시작\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%EC%8B%9C%EC%9E%91\" aria-label=\"동기화 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 시작</h3>\n<p>선택한 탭 id를 받아 해당 탭에 스크롤 이벤트를 등록합니다. 그리고 스크롤이 감지되면 수치를 백분율로\n나타내고 다른 탭을 그만큼 스크롤합니다. 이는 백그라운드 스크립트와 콘텐츠 스크립트를 활용하여 구현할\n수 있습니다.</p>\n<p>동기화를 시작할 수 없는 상황은 다음과 같습니다.</p>\n<ul>\n<li>이미 동기화 중일 때</li>\n<li>유저가 선택한 탭이 2개 미만일 때</li>\n</ul>\n<p>선택된 탭이 2개 미만일 경우 또는 이미 동기화 중이라면 버튼을 <code class=\"language-text\">disabled</code> 처리하겠습니다.</p>\n<h3 id=\"동기화-해제\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%ED%95%B4%EC%A0%9C\" aria-label=\"동기화 해제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 해제</h3>\n<p>동기화가 해제되어야 하는 상황은 다음과 같습니다.</p>\n<ul>\n<li>동기화 중일 때</li>\n<li>동기화 중인 탭이 제거되었을 때</li>\n<li>동기화 중인 탭의 URL이 변경되었을 때</li>\n</ul>\n<h3 id=\"데이터-유지\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9C%A0%EC%A7%80\" aria-label=\"데이터 유지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 유지</h3>\n<p>팝업을 껐다 켜도 데이터를 유지해야 합니다. 동기화를 시작했다면 팝업을 언제든 다시 켜도 어떤 탭이\n동기화되고 있는지 유저에게 알려주기 위한 동작을 하기 위해선 말이죠.</p>\n<p>이때 <a href=\"https://developer.chrome.com/docs/extensions/reference/storage/\">chrome.storage API</a> 를\n활용해서 데이터 및 상태를 유지할 수 있습니다. 이 API를 사용하려면 tab처럼 manifest에 <code class=\"language-text\">storage</code>\n권한을 설정해줘야 합니다.</p>\n<p>백그라운드 스크립트에서 어떤 탭들이 동기화 중인지 저장하고 가져올 수 있는 함수를 만들어 사용하면\n되겠습니다.</p>\n<h2 id=\"최적화\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%A0%81%ED%99%94\" aria-label=\"최적화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최적화</h2>\n<p>아래 코드는 스크롤 이벤트가 발생하면 scrollY의 %값을 <code class=\"language-text\">syncScroll</code> 커맨드와 함께 전달하는 함수입니다.</p>\n<p>%값으로 적용한 이유는 똑같은 내용의 글을 번역한 것이어도 언어별로 전달하는 문자의 양이 차이가\n납니다. 그러므로 스크롤한 값 그대로 적용하는 것보단 %값을 적용해 최대한 번역문과 원문 글의 문장을\n비슷하게 읽어 내려갈 수 있게끔 하기 위함입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onScrollHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Scroll event triggered'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n      window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollYPercentage <span class=\"token operator\">=</span> scrollPosition <span class=\"token operator\">/</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'Scroll event triggered, sending syncScroll message with percentage:'</span><span class=\"token punctuation\">,</span>\n      scrollYPercentage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      command<span class=\"token operator\">:</span> <span class=\"token string\">'syncScroll'</span><span class=\"token punctuation\">,</span>\n      data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in onScrollHandler: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>err<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"throttle-활용\" style=\"position:relative;\"><a href=\"#throttle-%ED%99%9C%EC%9A%A9\" aria-label=\"throttle 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Throttle 활용</h3>\n<p>위 함수를 스크롤 이벤트에 등록하고 실행을 해보면 아래 움짤처럼 굉장히 잦은 호출이 일어납니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/not-optimize.gif\" alt=\"잦은 호출 현상 예시\"></p>\n<p>저 함수의 목적은 스크롤이 발생하면 scrollY의 백분율 값을 계산해서 메시지를 보내는 것입니다. 그냥\n자연스럽게 다른 탭도 함께 스크롤 될 수 있도록 하면 되기에 이 경우, <code class=\"language-text\">throttle</code> 을 활용해서 메시지를\n적절한 타이밍에 보내도록 했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> throttle <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      timer <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/images/chrome-extension-sync-tab/throttle.gif\" alt=\"최적화 후 예시\"></p>\n<p>확실히 이제 호출이 자주 일어나지 않습니다. 하지만 움짤을 자세히 보면 또 다른 문제가 있는데요.</p>\n<p>한쪽 탭을 스크롤하면 다른 탭도 스크롤 위치를 맞추기 위해 자동으로 스크롤 됩니다. 그럼 다른 탭에서도\n스크롤이 발생하여 유저가 직접 스크롤하고 있는 탭(동기화 중인 탭)에 스크롤 위치를 맞추라는 메시지를\n보내게 됩니다. 그렇게 아래 움짤처럼 서로 스크롤을 맞추기 위해 <strong>무한 루프</strong>에 빠지게 됩니다. (받는\n쪽의 tabId를 보면 양쪽 모두 번갈아가며 스크롤 위치 데이터를 받고 스크롤 위치를 조정하고 있는 것을\n확인할 수 있습니다.)</p>\n<h3 id=\"debounce-활용\" style=\"position:relative;\"><a href=\"#debounce-%ED%99%9C%EC%9A%A9\" aria-label=\"debounce 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debounce 활용</h3>\n<p>이 문제를 개선하기 위해 선택한 탭들의 스크롤을 동일하게 맞추는 과정을 간단하게 살펴보겠습니다.</p>\n<ol>\n<li>유저가 서로 스크롤이 동기화되기 원하는 탭들을 선택하면 <code class=\"language-text\">startSync</code> 커맨드와 함께 탭의 id를 배열\n형태로 전달합니다.</li>\n<li>받은 탭의 id를 기반으로 해당 탭에 <code class=\"language-text\">startSyncTab</code> 커맨드를 전달합니다.</li>\n<li><code class=\"language-text\">startSyncTab</code> 을 전달 받으면 스크롤이 발생했을 때 scrollY의 퍼센트값을 계산해서 <code class=\"language-text\">syncScroll</code>\n커맨드를 보내는 함수(onScrollHandler)를 등록합니다.</li>\n<li><code class=\"language-text\">syncScroll</code> 을 전달 받으면 현재 스크롤 중인 탭을 제외하고 동기화 중인 모든 탭에\n<code class=\"language-text\">syncScrollForTab</code> 커맨드와 함께 scrollYPercentage 값을 전달합니다.</li>\n<li><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 <code class=\"language-text\">window.scrollTo()</code> 함수를 사용해 원하는 위치로 스크롤합니다.</li>\n</ol>\n<p>위 과정들을 거쳐 각 탭의 스크롤이 동기화 됩니다.</p>\n<p>이 문제는 <strong>사용자의 스크롤</strong>과 <code class=\"language-text\">**window.scrollTo()</code> 함수를 이용해 동작하는 스크롤**을 구별하는\n플래그 역할을 하는 변수와 <code class=\"language-text\">debounce</code> 함수를 통해 개선할 수 있습니다. 천천히 개선하는 과정을\n구현해보겠습니다.</p>\n<p>먼저, 플래그 역할을 하는 <code class=\"language-text\">scrolling</code> 변수를 선언하고 <code class=\"language-text\">false</code> 로 초기화하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">let</span> scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 스크롤 위치를 동기화하는데 여기서 <code class=\"language-text\">scrolling: true</code> 로\n설정하겠습니다. 그리고 스크롤 이벤트에 등록한 함수에 <code class=\"language-text\">scrolling: true</code> 라면 메시지를 보내지 않도록\n하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>scrolling<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Received syncScrollForTab message with data\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n    scrollYPercentage <span class=\"token operator\">*</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    top<span class=\"token operator\">:</span> scrollPosition<span class=\"token punctuation\">,</span>\n    behavior<span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>마지막으로 <code class=\"language-text\">scrolling: false</code> 로 변경하는데 이 부분에 <code class=\"language-text\">debounce</code> 를 적용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> debounce <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resetScrolling <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Scrolling reset to\"</span><span class=\"token punctuation\">,</span> scrolling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token function\">resetScrolling</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 스크롤 이벤트가 발생하게 되면 아래처럼 실행됩니다.</p>\n<p>스크롤 이벤트가 발생 → <code class=\"language-text\">syncScroll</code> 커맨드를 받아 동기화 중인 모든 탭에 <code class=\"language-text\">syncScrollForTab</code> 커맨드와\n함께 scrollYPercentage 값을 전달 → <code class=\"language-text\">scrolling: true</code> 로 설정 및 스크롤 위치 조정 후 <code class=\"language-text\">resetScrolling</code>\n함수 실행 → 스크롤 이벤트 발생 → <code class=\"language-text\">scrolling</code> 이 true이므로 동작 생략</p>\n<p>움짤로 확인해보겠습니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/flag.gif\" alt=\"모든 최적화 후 예시\"></p>\n<p>1 id를 가진 탭에서 메시지를 보내면 2 id를 가진 탭이 메시지를 받아 <code class=\"language-text\">window.scrollTo()</code> 함수를 이용해\n스크롤 위치를 동기화합니다. 반대로 2 id를 가진 탭이 메시지를 보내면 1 id를 가진 탭에서 메시지를 받아\n스크롤 위치를 동기화하는 것을 볼 수 있습니다.</p>\n<p>스크롤 위치도 자연스럽게 동기화 되고 문제가 개선되었습니다.</p>\n<h2 id=\"uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-오류-해결\" style=\"position:relative;\"><a href=\"#uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0\" aria-label=\"uncaught in promise error could not establish connection receiving end does not exist 오류 해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>‘Uncaught (in promise) Error: Could not establish connection. Receiving end does not exist.’ 오류 해결</h2>\n<h3 id=\"오류-발견\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%A5%98-%EB%B0%9C%EA%B2%AC\" aria-label=\"오류 발견 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오류 발견</h3>\n<p>처음 기획 했던 대로 기본 기능을 모두 구현했습니다. 그러나 콘솔에서 예기치 않은 오류가 발생합니다.\n디버깅을 위해 앱을 설치하고 열려있던 탭을 선택 후 동기화 시작 버튼을 누르면 에러가 발생합니다.\n그리고 탭 간 스크롤이 동기화되지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Uncaught <span class=\"token punctuation\">(</span>in promise<span class=\"token punctuation\">)</span> Error: Could not establish connection. Receiving end does not exist.</code></pre></div>\n<h3 id=\"이-오류가-발생하는-이유\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"이 오류가 발생하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류가 발생하는 이유?</h3>\n<p>이 오류는 일반적으로 백그라운드 스크립트에서 <code class=\"language-text\">chrome.tabs.sendMessage</code>메서드가 호출될 때 콘텐츠\n스크립트가 탭에 <strong>수신되지 않거나 아직 초기화되지 않은</strong> 경우에 나타납니다.</p>\n<p>특히\n<a href=\"https://groups.google.com/a/chromium.org/g/chromium-extensions/c/BH5_4OKxM3s/m/7lqiiKT9AQAJ\">Chromium-dev 그룹에 올라온 대화</a>에서\n해당 문제에 대해 명확히 파악할 수 있습니다.</p>\n<blockquote>\n<p>Content scripts declared in manifest.json or registered in chrome.scripting.registerContentScripts\nrun only when the tab is loaded or reloaded (e.g. via Ctrl-R), so when you install or update your\nextension the existing tabs don't run your new content scripts automatically in Chrome (they do in\nFirefox though), whereas the old content scripts that were running previously lose the ability to\nconnect to the extension.</p>\n</blockquote>\n<p>쉽게 설명하면 콘텐츠 스크립트를 등록하는 <code class=\"language-text\">chrome.scripting.registerContentScripts</code>는 새로고침 또는\n탭이 로드될 때만 실행됩니다. 따라서 익스텐션을 설치하기 전인 이전 탭에는 수동으로 콘텐츠 스크립트를\n등록하지 않으면 서로 메시지를 주고 받을 수 없다는 것입니다.</p>\n<p>위 설명에 따르면 익스텐션을 설치하기 전에 존재하던 탭에는 콘텐츠 스크립트가 실행되지 않습니다.\n이러한 탭으로 메시지를 보내려고 할 때 수신단(콘텐츠 스크립트)이 없으므로 오류가 발생한 것이죠.</p>\n<h3 id=\"이-오류를-어떻게-해결할-수-있을까\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EA%B2%B0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"이 오류를 어떻게 해결할 수 있을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류를 어떻게 해결할 수 있을까?</h3>\n<p>핵심은 메시지를 보내려는 탭에 콘텐츠 스크립트가 삽입되어 있어야 하는 것입니다. 콘텐츠 스크립트를\n삽입하는 방법은 아래 3가지 방법이 있겠네요.</p>\n<ol>\n<li>설치 전 열려있던 탭을 강제로 새로고침하여 콘텐츠 스크립트를 삽입합니다.</li>\n<li>익스텐션 설치 시, 콘텐츠 스크립트를 기존 탭에 삽입합니다.</li>\n<li>콘텐츠 스크립트가 필요한 작업 요청 시 콘텐츠 스크립트를 삽입합니다.</li>\n</ol>\n<p>제 생각엔 세 번째 방법이 적절할 것 같습니다. 첫 번째 방법은 사용자의 데이터가 유실될 위험이\n있습니다. 두 번째 방법은 설치하기 전에 존재했던 모든 페이지에 콘텐츠 스크립트를 적용하게 됩니다.\n어차피 사용자가 원하는 탭에 콘텐츠 스크립트를 삽입해서 메시지를 주고 받으면 됩니다. 따라서 필요한\n탭에 콘텐츠 스크립트를 삽입하는 세 번째 방법을 선택했습니다.</p>\n<h3 id=\"구현\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현</h3>\n<ol>\n<li><code class=\"language-text\">chrome.tabs.sendMessage</code>를 사용하여 메시지를 보내기 전에 <code class=\"language-text\">chrome.scripting.executeScript</code>를\n사용해 콘텐츠 스크립트를 유저가 선택한 탭에 삽입합니다.</li>\n<li>스크립트 삽입이 성공하면 메시지를 계속 전송할 수 있게 됩니다.</li>\n</ol>\n<p>간단한 코드로 살펴보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// background.ts</span>\n\nchrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>onMessage<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> sender<span class=\"token punctuation\">,</span> sendResponse<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Popup에서 'startSync' 커맨드와 함께 유저가 선택한 탭의 id들을 전달하면 여기서 받습니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> checkedTabIds<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\n    checkedTabIds<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 탭이 존재하고 접근 가능한지 확인합니다.</span>\n      chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.tabs.get: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 콘텐츠 스크립트를 해당 탭에 삽입합니다.</span>\n        chrome<span class=\"token punctuation\">.</span>scripting<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">{</span>\n            target<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> tabId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            files<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/pages/content/index.js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n                <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.scripting.executeScript: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">.</span>message<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// 주입이 성공하면 메시지를 보냅니다.</span>\n            chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n              command<span class=\"token operator\">:</span> <span class=\"token string\">\"startSyncTab\"</span><span class=\"token punctuation\">,</span>\n              data<span class=\"token operator\">:</span> tabId<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 scripting을 사용한다고 manifest의 permissions에 포함하면 됩니다.</p>\n<p>이렇게 유저가 선택한 탭에 메시지를 보내기 전에 콘텐츠 스크립트를 삽입함으로써 발생한 오류를 해결할\n수 있었습니다.</p>\n<h2 id=\"다국어-지원\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EA%B5%AD%EC%96%B4-%EC%A7%80%EC%9B%90\" aria-label=\"다국어 지원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다국어 지원</h2>\n<p>다국어를 지원하는 방법은 아주 간단합니다.</p>\n<p>로케일을 추가할 때마다 <code class=\"language-text\">_locales/_localeCode_</code> 폴더 아래에 <code class=\"language-text\">messages.json</code> 파일에 문자열을 작성하면\n됩니다. 여기서 <code class=\"language-text\">localeCode</code>는 영어의 <code class=\"language-text\">en</code>과 같은 국가코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extName\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Synchronize Tab Scrolling - 여러 탭의 스크롤 위치를 동일하게 유지\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extDescription\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"여러 탭을 선택하고 스크롤 위치를 동기화할 수 있습니다.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"startSync\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"동기화 시작\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">manifest.json</code> 에선 <code class=\"language-text\">__MSG_messagename__</code> 처럼 문자열을 작성해 적용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"__MSG_extName__\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 <code class=\"language-text\">messages.json</code> 파일의 메시지를 간편하게 사용하기 위한 함수를 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">EnMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/en/messages.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">KoMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/ko/messages.json'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">MessageKey</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> EnMessage <span class=\"token operator\">|</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> KoMessage<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">t</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> MessageKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> chrome<span class=\"token punctuation\">.</span>i18n<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>en, ko 메시지들을 가져와 문자열로 보여줍니다. 아래는 사용 예시입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> t <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@src/chrome/i18n\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Popup</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>나머지 정보들은\n<a href=\"https://developer.chrome.com/docs/extensions/reference/i18n/#how-to-support-multiple-languages\">developer.chrome: how-to-support-multiple-languages</a>\n에서 자세히 확인하실 수 있습니다.</p>",
      "%ED%83%AD-%EC%A0%95%EB%B3%B4-%EB%A6%AC%EC%8A%A4%ED%8A%B8#탭 정보 리스트": "<h2 id=\"요구-사항\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EA%B5%AC-%EC%82%AC%ED%95%AD\" aria-label=\"요구 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요구 사항</h2>\n<p>익스텐션의 기능을 먼저 정리해보겠습니다.</p>\n<ul>\n<li>탭 정보 리스트\n<ul>\n<li>열려 있는 탭을 체크 가능한 리스트 형태로 보여줘야 합니다.</li>\n<li>유저에게 제공되는 정보는 favicon과 title입니다.</li>\n<li>newTab은 리스트에 보여주지 않습니다.</li>\n<li>정렬은 브라우저에서 탭이 열려있는 순서(index 오름차순)입니다.</li>\n<li>제목이 넘친다면 한 줄 말줄임 처리합니다.</li>\n<li>탭 제목 또는 URL로 검색할 수 있도록 합니다. (대략적으로 문자열 일치 파악)</li>\n</ul>\n</li>\n<li>동기화 시작\n<ul>\n<li>2개 이상의 탭을 선택한 경우 시작할 수 있습니다.</li>\n<li>1개만 선택한 경우 버튼을 클릭할 수 없으며 가이드 메시지가 표시됩니다.</li>\n</ul>\n</li>\n<li>동기화 해제\n<ul>\n<li>동기화 중인 탭 중 하나라도 제거되면 중지됩니다.</li>\n<li>동기화 중인 탭 중 URL이 변경되면 중지됩니다.</li>\n</ul>\n</li>\n<li>데이터 유지\n<ul>\n<li>팝업을 껐다 켜도 데이터가 유지되어야 합니다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"기능-구현\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84\" aria-label=\"기능 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기능 구현</h2>\n<h3 id=\"탭-정보-리스트\" style=\"position:relative;\"><a href=\"#%ED%83%AD-%EC%A0%95%EB%B3%B4-%EB%A6%AC%EC%8A%A4%ED%8A%B8\" aria-label=\"탭 정보 리스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>탭 정보 리스트</h3>\n<p>탭의 <code class=\"language-text\">title</code>속성은 manifest에 tabs 권한이 포함된 경우에만 존재합니다. 따라서 manifest에 권한 설정이\n필요합니다.</p>\n<p><a href=\"https://developer.chrome.com/docs/extensions/reference/tabs/#method-query\">chrome.tabs API</a> 를\n이용해서 모든 탭의 정보들을 가져올 수 있습니다. newtab은 스크롤을 동기화하는 데 사용할 탭이 아니므로\n제외하고 반환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useTabList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>queryInfo<span class=\"token operator\">?</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span>QueryInfo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    queryKey<span class=\"token operator\">:</span> tabsKeys<span class=\"token punctuation\">.</span><span class=\"token function\">list</span><span class=\"token punctuation\">(</span>queryInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">queryFn</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> tabs <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>queryInfo <span class=\"token operator\">??</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// Returns \"tabs\", excluding items with URL 'chrome://newtab/'.</span>\n      <span class=\"token keyword\">return</span> tabs<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> tab<span class=\"token punctuation\">.</span>url <span class=\"token operator\">!==</span> <span class=\"token string\">'chrome://newtab/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    suspense<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>참고로 탭이 생성, 업데이트, 삭제 되었을 때 함수를 실행하고 싶다면 아래 사진의 함수를 통해\n가능합니다. 하지만 저의 목표는 원문과 번역문의 스크롤 위치를 동기화하기 원하는 저같은 사용자를 돕기\n위함입니다. 따라서 이 함수들을 이용해 구현하는 경우는 없으므로 넘어가겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 636px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVR42j2T65KjOAyFeY1u7hhfJdnGBAIhIUlP7+x01fyY93+aFemadR1cKhey5eNPmZCdBKFROq8OBdl2lTKdwV5p0csWgtJWCNF0bVOVZcOjrruu46XMapN8QgfGk/V0um7j5TqsSzglG9FvU7ieYIowJxN9b0z9d1RVlXnnb9Mtglc4GJ/m22P9+LU8/knzKsGG+xbuF9pm2hZcJxhCUzf/52edbIRtFAqI8tDQ1827srUhoayw0NGgIEjR10LURZ4fSd/pTZ0FGx6nZzSxd0njOO8/968/l8/f43lXwQ+fT/+4wraE5063C6ShKqoiL6uyYmVK9xScJQXRwWDDTJYcDgDRKichOTohnQCT06AMHKaGCZTtDclMax0pEKIhviKldaI0xvOUltmAxnOkZcDJ4xRgCiYiDGhQ9kqwDsP2aUcF0kZ+qPFyH9f9tD3n2w+pNawznCczJg5wW9w8GoSj5urltlCtME1RFCUrL/K3t/z9/TW/lWWZv+XFe87rPH+L47/J7HbXWeRnsphsOCONTrvjVhCNJR1fK5DssKALhlnyo00bceU02qwVbada9r1tD1XsZpnXTdm0zAHzVDV1xVFz/NCwuq7teo44aDKjDRumeINed0JDHFkGfNdLHbzyKBFYvbU171S9Ci75e5XtLRt2HzBoSkwYs7U8/52vdzY/Pq/+trJoO/vLrIw60Gj4/OPkAxImrIeWHw0HiUlh4sYoNHTOS2m4K3idHVEWe+4Q8JqJCDMMK2on+eSwj49ognRJQTrff14+vpbHr/X5payjx9Xfb26ZGS/aN7dMhuiwpTgcZ0hUjMSGOyYs2DgHwy3G/TR6ZRgjTRNhYlyMP5MJltILL5Q8Z0pJxgvQWs+EQZyT8xSmRMnbCHAKOCKeCEZPc+AttGMnBe/ba3GUfT89gvFctsExLTtDtn58DfMmwfn7ZqcR1vPRFUxbinVZf3dFVVX/AWMCszvKXuKYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chrome.tabs.api properties\"\n        title=\"\"\n        src=\"/static/1696468700438.0815157850153/9be90/func-list.png\"\n        srcset=\"/static/1696468700438.0815157850153/63868/func-list.png 250w,\n/static/1696468700438.0815157850153/0b533/func-list.png 500w,\n/static/1696468700438.0815157850153/9be90/func-list.png 636w\"\n        sizes=\"(max-width: 636px) 100vw, 636px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>사용 편의성을 위해 유저가 새 창을 띄우는 게 아닌, 간단한 <strong>팝업</strong>을 통해 이용할 수 있도록\n하겠습니다. <code class=\"language-text\">useTabList</code> 를 통해 받아온 데이터를 이용해 <code class=\"language-text\">popup.html</code> 파일을 작성하면 아이콘을 눌렀을\n때 나오는 팝업을 아래와 같이 구성할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 626px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOUlEQVR42o2TWY8hYRSG69oau6JQo1AUbV/SlkxsibTY9SRmjJjhh7j2q+dRnxaJmHgvTs63nP090tsLyGazuVzuJqvV2rsJKfAcwWDQ7XYXi8VGoxEOh/GiKEqhUDAMo9ls1ut1KRKJcBUxoTwgFAolk0kCxmKxTCaDNEzgsVQqSavVSlVVHtLpdOYLxh2413Wdy5skc03TRqORtN/v8dfpdNrtdq/X63a76LzxKWVCN5G6A+6i0ehyuZR2ux2RKaBSqWDWarXohPjxDKSDyWKxkLbbrSgskUho8TgxUZJ3wNFNEbqIPJ1OJRw4HI74t7ishCIJlbbRWCTPQr+1E50wUROY9Hp9aTabBYKBZuNdzeuF8fdqpcJIqoyyViuZQGdUHOk5MSkK3eVy9ft9ibqtVivOfF6v0+F0ezzM1vMlPQ9HzHw+n81mGwwG0nw+x6xYKhspbT/tMzJmSEuYhxgVwek2YcmIo+CcLMuXyNSM1/xbPqqpnV5dTyUxpC9kKDqEGU3CTIxAOIV817QtFgsHv8/ncro8Xi+5ee8kroVyq8Lv91PpJW1hTBshsywHBQSxn4HPdPsSGXrejF8EBdvt9ovxx2RhtZK27H8ZBL8ar378VJQwu/DI4UeIP6zHlWG/fu9r1epwOGQlkB8mxuMxcjKZsDoTE+KSaCwPrYI26/Vami8/NS0OjRgvu8GGQCBBKcjEsWFCXJbLZcE5sris5Pl83mw2x+Pxr4k//4X4czgcWKfT6fQPRrHKCqheT4sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tab-list\"\n        title=\"\"\n        src=\"/static/1696468700438.4026157850154/af590/tab-list.png\"\n        srcset=\"/static/1696468700438.4026157850154/63868/tab-list.png 250w,\n/static/1696468700438.4026157850154/0b533/tab-list.png 500w,\n/static/1696468700438.4026157850154/af590/tab-list.png 626w\"\n        sizes=\"(max-width: 626px) 100vw, 626px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그리고 탭이 많을 때 빠르게 찾을 수 있도록 <strong>검색 기능</strong>을 넣었습니다. 대략적인 문자열만 입력해도\n결과를 찾을 수 있는 퍼지 검색(fuzzy-search) 알고리즘을 적용하기 위해\n<a href=\"https://www.fusejs.io/\">Fuse.js</a>를 사용했습니다. 이로써 사용자가 단어 철자를 정확히 입력하지 않아도\n원하는 검색 결과를 찾을 수 있습니다.</p>\n<h3 id=\"동기화-시작\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%EC%8B%9C%EC%9E%91\" aria-label=\"동기화 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 시작</h3>\n<p>선택한 탭 id를 받아 해당 탭에 스크롤 이벤트를 등록합니다. 그리고 스크롤이 감지되면 수치를 백분율로\n나타내고 다른 탭을 그만큼 스크롤합니다. 이는 백그라운드 스크립트와 콘텐츠 스크립트를 활용하여 구현할\n수 있습니다.</p>\n<p>동기화를 시작할 수 없는 상황은 다음과 같습니다.</p>\n<ul>\n<li>이미 동기화 중일 때</li>\n<li>유저가 선택한 탭이 2개 미만일 때</li>\n</ul>\n<p>선택된 탭이 2개 미만일 경우 또는 이미 동기화 중이라면 버튼을 <code class=\"language-text\">disabled</code> 처리하겠습니다.</p>\n<h3 id=\"동기화-해제\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%ED%95%B4%EC%A0%9C\" aria-label=\"동기화 해제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 해제</h3>\n<p>동기화가 해제되어야 하는 상황은 다음과 같습니다.</p>\n<ul>\n<li>동기화 중일 때</li>\n<li>동기화 중인 탭이 제거되었을 때</li>\n<li>동기화 중인 탭의 URL이 변경되었을 때</li>\n</ul>\n<h3 id=\"데이터-유지\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9C%A0%EC%A7%80\" aria-label=\"데이터 유지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 유지</h3>\n<p>팝업을 껐다 켜도 데이터를 유지해야 합니다. 동기화를 시작했다면 팝업을 언제든 다시 켜도 어떤 탭이\n동기화되고 있는지 유저에게 알려주기 위한 동작을 하기 위해선 말이죠.</p>\n<p>이때 <a href=\"https://developer.chrome.com/docs/extensions/reference/storage/\">chrome.storage API</a> 를\n활용해서 데이터 및 상태를 유지할 수 있습니다. 이 API를 사용하려면 tab처럼 manifest에 <code class=\"language-text\">storage</code>\n권한을 설정해줘야 합니다.</p>\n<p>백그라운드 스크립트에서 어떤 탭들이 동기화 중인지 저장하고 가져올 수 있는 함수를 만들어 사용하면\n되겠습니다.</p>\n<h2 id=\"최적화\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%A0%81%ED%99%94\" aria-label=\"최적화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최적화</h2>\n<p>아래 코드는 스크롤 이벤트가 발생하면 scrollY의 %값을 <code class=\"language-text\">syncScroll</code> 커맨드와 함께 전달하는 함수입니다.</p>\n<p>%값으로 적용한 이유는 똑같은 내용의 글을 번역한 것이어도 언어별로 전달하는 문자의 양이 차이가\n납니다. 그러므로 스크롤한 값 그대로 적용하는 것보단 %값을 적용해 최대한 번역문과 원문 글의 문장을\n비슷하게 읽어 내려갈 수 있게끔 하기 위함입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onScrollHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Scroll event triggered'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n      window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollYPercentage <span class=\"token operator\">=</span> scrollPosition <span class=\"token operator\">/</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'Scroll event triggered, sending syncScroll message with percentage:'</span><span class=\"token punctuation\">,</span>\n      scrollYPercentage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      command<span class=\"token operator\">:</span> <span class=\"token string\">'syncScroll'</span><span class=\"token punctuation\">,</span>\n      data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in onScrollHandler: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>err<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"throttle-활용\" style=\"position:relative;\"><a href=\"#throttle-%ED%99%9C%EC%9A%A9\" aria-label=\"throttle 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Throttle 활용</h3>\n<p>위 함수를 스크롤 이벤트에 등록하고 실행을 해보면 아래 움짤처럼 굉장히 잦은 호출이 일어납니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/not-optimize.gif\" alt=\"잦은 호출 현상 예시\"></p>\n<p>저 함수의 목적은 스크롤이 발생하면 scrollY의 백분율 값을 계산해서 메시지를 보내는 것입니다. 그냥\n자연스럽게 다른 탭도 함께 스크롤 될 수 있도록 하면 되기에 이 경우, <code class=\"language-text\">throttle</code> 을 활용해서 메시지를\n적절한 타이밍에 보내도록 했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> throttle <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      timer <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/images/chrome-extension-sync-tab/throttle.gif\" alt=\"최적화 후 예시\"></p>\n<p>확실히 이제 호출이 자주 일어나지 않습니다. 하지만 움짤을 자세히 보면 또 다른 문제가 있는데요.</p>\n<p>한쪽 탭을 스크롤하면 다른 탭도 스크롤 위치를 맞추기 위해 자동으로 스크롤 됩니다. 그럼 다른 탭에서도\n스크롤이 발생하여 유저가 직접 스크롤하고 있는 탭(동기화 중인 탭)에 스크롤 위치를 맞추라는 메시지를\n보내게 됩니다. 그렇게 아래 움짤처럼 서로 스크롤을 맞추기 위해 <strong>무한 루프</strong>에 빠지게 됩니다. (받는\n쪽의 tabId를 보면 양쪽 모두 번갈아가며 스크롤 위치 데이터를 받고 스크롤 위치를 조정하고 있는 것을\n확인할 수 있습니다.)</p>\n<h3 id=\"debounce-활용\" style=\"position:relative;\"><a href=\"#debounce-%ED%99%9C%EC%9A%A9\" aria-label=\"debounce 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debounce 활용</h3>\n<p>이 문제를 개선하기 위해 선택한 탭들의 스크롤을 동일하게 맞추는 과정을 간단하게 살펴보겠습니다.</p>\n<ol>\n<li>유저가 서로 스크롤이 동기화되기 원하는 탭들을 선택하면 <code class=\"language-text\">startSync</code> 커맨드와 함께 탭의 id를 배열\n형태로 전달합니다.</li>\n<li>받은 탭의 id를 기반으로 해당 탭에 <code class=\"language-text\">startSyncTab</code> 커맨드를 전달합니다.</li>\n<li><code class=\"language-text\">startSyncTab</code> 을 전달 받으면 스크롤이 발생했을 때 scrollY의 퍼센트값을 계산해서 <code class=\"language-text\">syncScroll</code>\n커맨드를 보내는 함수(onScrollHandler)를 등록합니다.</li>\n<li><code class=\"language-text\">syncScroll</code> 을 전달 받으면 현재 스크롤 중인 탭을 제외하고 동기화 중인 모든 탭에\n<code class=\"language-text\">syncScrollForTab</code> 커맨드와 함께 scrollYPercentage 값을 전달합니다.</li>\n<li><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 <code class=\"language-text\">window.scrollTo()</code> 함수를 사용해 원하는 위치로 스크롤합니다.</li>\n</ol>\n<p>위 과정들을 거쳐 각 탭의 스크롤이 동기화 됩니다.</p>\n<p>이 문제는 <strong>사용자의 스크롤</strong>과 <code class=\"language-text\">**window.scrollTo()</code> 함수를 이용해 동작하는 스크롤**을 구별하는\n플래그 역할을 하는 변수와 <code class=\"language-text\">debounce</code> 함수를 통해 개선할 수 있습니다. 천천히 개선하는 과정을\n구현해보겠습니다.</p>\n<p>먼저, 플래그 역할을 하는 <code class=\"language-text\">scrolling</code> 변수를 선언하고 <code class=\"language-text\">false</code> 로 초기화하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">let</span> scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 스크롤 위치를 동기화하는데 여기서 <code class=\"language-text\">scrolling: true</code> 로\n설정하겠습니다. 그리고 스크롤 이벤트에 등록한 함수에 <code class=\"language-text\">scrolling: true</code> 라면 메시지를 보내지 않도록\n하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>scrolling<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Received syncScrollForTab message with data\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n    scrollYPercentage <span class=\"token operator\">*</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    top<span class=\"token operator\">:</span> scrollPosition<span class=\"token punctuation\">,</span>\n    behavior<span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>마지막으로 <code class=\"language-text\">scrolling: false</code> 로 변경하는데 이 부분에 <code class=\"language-text\">debounce</code> 를 적용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> debounce <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resetScrolling <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Scrolling reset to\"</span><span class=\"token punctuation\">,</span> scrolling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token function\">resetScrolling</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 스크롤 이벤트가 발생하게 되면 아래처럼 실행됩니다.</p>\n<p>스크롤 이벤트가 발생 → <code class=\"language-text\">syncScroll</code> 커맨드를 받아 동기화 중인 모든 탭에 <code class=\"language-text\">syncScrollForTab</code> 커맨드와\n함께 scrollYPercentage 값을 전달 → <code class=\"language-text\">scrolling: true</code> 로 설정 및 스크롤 위치 조정 후 <code class=\"language-text\">resetScrolling</code>\n함수 실행 → 스크롤 이벤트 발생 → <code class=\"language-text\">scrolling</code> 이 true이므로 동작 생략</p>\n<p>움짤로 확인해보겠습니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/flag.gif\" alt=\"모든 최적화 후 예시\"></p>\n<p>1 id를 가진 탭에서 메시지를 보내면 2 id를 가진 탭이 메시지를 받아 <code class=\"language-text\">window.scrollTo()</code> 함수를 이용해\n스크롤 위치를 동기화합니다. 반대로 2 id를 가진 탭이 메시지를 보내면 1 id를 가진 탭에서 메시지를 받아\n스크롤 위치를 동기화하는 것을 볼 수 있습니다.</p>\n<p>스크롤 위치도 자연스럽게 동기화 되고 문제가 개선되었습니다.</p>\n<h2 id=\"uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-오류-해결\" style=\"position:relative;\"><a href=\"#uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0\" aria-label=\"uncaught in promise error could not establish connection receiving end does not exist 오류 해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>‘Uncaught (in promise) Error: Could not establish connection. Receiving end does not exist.’ 오류 해결</h2>\n<h3 id=\"오류-발견\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%A5%98-%EB%B0%9C%EA%B2%AC\" aria-label=\"오류 발견 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오류 발견</h3>\n<p>처음 기획 했던 대로 기본 기능을 모두 구현했습니다. 그러나 콘솔에서 예기치 않은 오류가 발생합니다.\n디버깅을 위해 앱을 설치하고 열려있던 탭을 선택 후 동기화 시작 버튼을 누르면 에러가 발생합니다.\n그리고 탭 간 스크롤이 동기화되지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Uncaught <span class=\"token punctuation\">(</span>in promise<span class=\"token punctuation\">)</span> Error: Could not establish connection. Receiving end does not exist.</code></pre></div>\n<h3 id=\"이-오류가-발생하는-이유\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"이 오류가 발생하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류가 발생하는 이유?</h3>\n<p>이 오류는 일반적으로 백그라운드 스크립트에서 <code class=\"language-text\">chrome.tabs.sendMessage</code>메서드가 호출될 때 콘텐츠\n스크립트가 탭에 <strong>수신되지 않거나 아직 초기화되지 않은</strong> 경우에 나타납니다.</p>\n<p>특히\n<a href=\"https://groups.google.com/a/chromium.org/g/chromium-extensions/c/BH5_4OKxM3s/m/7lqiiKT9AQAJ\">Chromium-dev 그룹에 올라온 대화</a>에서\n해당 문제에 대해 명확히 파악할 수 있습니다.</p>\n<blockquote>\n<p>Content scripts declared in manifest.json or registered in chrome.scripting.registerContentScripts\nrun only when the tab is loaded or reloaded (e.g. via Ctrl-R), so when you install or update your\nextension the existing tabs don't run your new content scripts automatically in Chrome (they do in\nFirefox though), whereas the old content scripts that were running previously lose the ability to\nconnect to the extension.</p>\n</blockquote>\n<p>쉽게 설명하면 콘텐츠 스크립트를 등록하는 <code class=\"language-text\">chrome.scripting.registerContentScripts</code>는 새로고침 또는\n탭이 로드될 때만 실행됩니다. 따라서 익스텐션을 설치하기 전인 이전 탭에는 수동으로 콘텐츠 스크립트를\n등록하지 않으면 서로 메시지를 주고 받을 수 없다는 것입니다.</p>\n<p>위 설명에 따르면 익스텐션을 설치하기 전에 존재하던 탭에는 콘텐츠 스크립트가 실행되지 않습니다.\n이러한 탭으로 메시지를 보내려고 할 때 수신단(콘텐츠 스크립트)이 없으므로 오류가 발생한 것이죠.</p>\n<h3 id=\"이-오류를-어떻게-해결할-수-있을까\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EA%B2%B0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"이 오류를 어떻게 해결할 수 있을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류를 어떻게 해결할 수 있을까?</h3>\n<p>핵심은 메시지를 보내려는 탭에 콘텐츠 스크립트가 삽입되어 있어야 하는 것입니다. 콘텐츠 스크립트를\n삽입하는 방법은 아래 3가지 방법이 있겠네요.</p>\n<ol>\n<li>설치 전 열려있던 탭을 강제로 새로고침하여 콘텐츠 스크립트를 삽입합니다.</li>\n<li>익스텐션 설치 시, 콘텐츠 스크립트를 기존 탭에 삽입합니다.</li>\n<li>콘텐츠 스크립트가 필요한 작업 요청 시 콘텐츠 스크립트를 삽입합니다.</li>\n</ol>\n<p>제 생각엔 세 번째 방법이 적절할 것 같습니다. 첫 번째 방법은 사용자의 데이터가 유실될 위험이\n있습니다. 두 번째 방법은 설치하기 전에 존재했던 모든 페이지에 콘텐츠 스크립트를 적용하게 됩니다.\n어차피 사용자가 원하는 탭에 콘텐츠 스크립트를 삽입해서 메시지를 주고 받으면 됩니다. 따라서 필요한\n탭에 콘텐츠 스크립트를 삽입하는 세 번째 방법을 선택했습니다.</p>\n<h3 id=\"구현\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현</h3>\n<ol>\n<li><code class=\"language-text\">chrome.tabs.sendMessage</code>를 사용하여 메시지를 보내기 전에 <code class=\"language-text\">chrome.scripting.executeScript</code>를\n사용해 콘텐츠 스크립트를 유저가 선택한 탭에 삽입합니다.</li>\n<li>스크립트 삽입이 성공하면 메시지를 계속 전송할 수 있게 됩니다.</li>\n</ol>\n<p>간단한 코드로 살펴보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// background.ts</span>\n\nchrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>onMessage<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> sender<span class=\"token punctuation\">,</span> sendResponse<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Popup에서 'startSync' 커맨드와 함께 유저가 선택한 탭의 id들을 전달하면 여기서 받습니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> checkedTabIds<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\n    checkedTabIds<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 탭이 존재하고 접근 가능한지 확인합니다.</span>\n      chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.tabs.get: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 콘텐츠 스크립트를 해당 탭에 삽입합니다.</span>\n        chrome<span class=\"token punctuation\">.</span>scripting<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">{</span>\n            target<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> tabId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            files<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/pages/content/index.js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n                <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.scripting.executeScript: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">.</span>message<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// 주입이 성공하면 메시지를 보냅니다.</span>\n            chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n              command<span class=\"token operator\">:</span> <span class=\"token string\">\"startSyncTab\"</span><span class=\"token punctuation\">,</span>\n              data<span class=\"token operator\">:</span> tabId<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 scripting을 사용한다고 manifest의 permissions에 포함하면 됩니다.</p>\n<p>이렇게 유저가 선택한 탭에 메시지를 보내기 전에 콘텐츠 스크립트를 삽입함으로써 발생한 오류를 해결할\n수 있었습니다.</p>\n<h2 id=\"다국어-지원\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EA%B5%AD%EC%96%B4-%EC%A7%80%EC%9B%90\" aria-label=\"다국어 지원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다국어 지원</h2>\n<p>다국어를 지원하는 방법은 아주 간단합니다.</p>\n<p>로케일을 추가할 때마다 <code class=\"language-text\">_locales/_localeCode_</code> 폴더 아래에 <code class=\"language-text\">messages.json</code> 파일에 문자열을 작성하면\n됩니다. 여기서 <code class=\"language-text\">localeCode</code>는 영어의 <code class=\"language-text\">en</code>과 같은 국가코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extName\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Synchronize Tab Scrolling - 여러 탭의 스크롤 위치를 동일하게 유지\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extDescription\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"여러 탭을 선택하고 스크롤 위치를 동기화할 수 있습니다.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"startSync\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"동기화 시작\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">manifest.json</code> 에선 <code class=\"language-text\">__MSG_messagename__</code> 처럼 문자열을 작성해 적용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"__MSG_extName__\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 <code class=\"language-text\">messages.json</code> 파일의 메시지를 간편하게 사용하기 위한 함수를 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">EnMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/en/messages.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">KoMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/ko/messages.json'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">MessageKey</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> EnMessage <span class=\"token operator\">|</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> KoMessage<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">t</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> MessageKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> chrome<span class=\"token punctuation\">.</span>i18n<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>en, ko 메시지들을 가져와 문자열로 보여줍니다. 아래는 사용 예시입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> t <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@src/chrome/i18n\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Popup</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>나머지 정보들은\n<a href=\"https://developer.chrome.com/docs/extensions/reference/i18n/#how-to-support-multiple-languages\">developer.chrome: how-to-support-multiple-languages</a>\n에서 자세히 확인하실 수 있습니다.</p>",
      "%EB%8F%99%EA%B8%B0%ED%99%94-%EC%8B%9C%EC%9E%91#동기화 시작": "<h2 id=\"요구-사항\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EA%B5%AC-%EC%82%AC%ED%95%AD\" aria-label=\"요구 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요구 사항</h2>\n<p>익스텐션의 기능을 먼저 정리해보겠습니다.</p>\n<ul>\n<li>탭 정보 리스트\n<ul>\n<li>열려 있는 탭을 체크 가능한 리스트 형태로 보여줘야 합니다.</li>\n<li>유저에게 제공되는 정보는 favicon과 title입니다.</li>\n<li>newTab은 리스트에 보여주지 않습니다.</li>\n<li>정렬은 브라우저에서 탭이 열려있는 순서(index 오름차순)입니다.</li>\n<li>제목이 넘친다면 한 줄 말줄임 처리합니다.</li>\n<li>탭 제목 또는 URL로 검색할 수 있도록 합니다. (대략적으로 문자열 일치 파악)</li>\n</ul>\n</li>\n<li>동기화 시작\n<ul>\n<li>2개 이상의 탭을 선택한 경우 시작할 수 있습니다.</li>\n<li>1개만 선택한 경우 버튼을 클릭할 수 없으며 가이드 메시지가 표시됩니다.</li>\n</ul>\n</li>\n<li>동기화 해제\n<ul>\n<li>동기화 중인 탭 중 하나라도 제거되면 중지됩니다.</li>\n<li>동기화 중인 탭 중 URL이 변경되면 중지됩니다.</li>\n</ul>\n</li>\n<li>데이터 유지\n<ul>\n<li>팝업을 껐다 켜도 데이터가 유지되어야 합니다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"기능-구현\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84\" aria-label=\"기능 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기능 구현</h2>\n<h3 id=\"탭-정보-리스트\" style=\"position:relative;\"><a href=\"#%ED%83%AD-%EC%A0%95%EB%B3%B4-%EB%A6%AC%EC%8A%A4%ED%8A%B8\" aria-label=\"탭 정보 리스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>탭 정보 리스트</h3>\n<p>탭의 <code class=\"language-text\">title</code>속성은 manifest에 tabs 권한이 포함된 경우에만 존재합니다. 따라서 manifest에 권한 설정이\n필요합니다.</p>\n<p><a href=\"https://developer.chrome.com/docs/extensions/reference/tabs/#method-query\">chrome.tabs API</a> 를\n이용해서 모든 탭의 정보들을 가져올 수 있습니다. newtab은 스크롤을 동기화하는 데 사용할 탭이 아니므로\n제외하고 반환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useTabList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>queryInfo<span class=\"token operator\">?</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span>QueryInfo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    queryKey<span class=\"token operator\">:</span> tabsKeys<span class=\"token punctuation\">.</span><span class=\"token function\">list</span><span class=\"token punctuation\">(</span>queryInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">queryFn</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> tabs <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>queryInfo <span class=\"token operator\">??</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// Returns \"tabs\", excluding items with URL 'chrome://newtab/'.</span>\n      <span class=\"token keyword\">return</span> tabs<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> tab<span class=\"token punctuation\">.</span>url <span class=\"token operator\">!==</span> <span class=\"token string\">'chrome://newtab/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    suspense<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>참고로 탭이 생성, 업데이트, 삭제 되었을 때 함수를 실행하고 싶다면 아래 사진의 함수를 통해\n가능합니다. 하지만 저의 목표는 원문과 번역문의 스크롤 위치를 동기화하기 원하는 저같은 사용자를 돕기\n위함입니다. 따라서 이 함수들을 이용해 구현하는 경우는 없으므로 넘어가겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 636px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVR42j2T65KjOAyFeY1u7hhfJdnGBAIhIUlP7+x01fyY93+aFemadR1cKhey5eNPmZCdBKFROq8OBdl2lTKdwV5p0csWgtJWCNF0bVOVZcOjrruu46XMapN8QgfGk/V0um7j5TqsSzglG9FvU7ieYIowJxN9b0z9d1RVlXnnb9Mtglc4GJ/m22P9+LU8/knzKsGG+xbuF9pm2hZcJxhCUzf/52edbIRtFAqI8tDQ1827srUhoayw0NGgIEjR10LURZ4fSd/pTZ0FGx6nZzSxd0njOO8/968/l8/f43lXwQ+fT/+4wraE5063C6ShKqoiL6uyYmVK9xScJQXRwWDDTJYcDgDRKichOTohnQCT06AMHKaGCZTtDclMax0pEKIhviKldaI0xvOUltmAxnOkZcDJ4xRgCiYiDGhQ9kqwDsP2aUcF0kZ+qPFyH9f9tD3n2w+pNawznCczJg5wW9w8GoSj5urltlCtME1RFCUrL/K3t/z9/TW/lWWZv+XFe87rPH+L47/J7HbXWeRnsphsOCONTrvjVhCNJR1fK5DssKALhlnyo00bceU02qwVbada9r1tD1XsZpnXTdm0zAHzVDV1xVFz/NCwuq7teo44aDKjDRumeINed0JDHFkGfNdLHbzyKBFYvbU171S9Ci75e5XtLRt2HzBoSkwYs7U8/52vdzY/Pq/+trJoO/vLrIw60Gj4/OPkAxImrIeWHw0HiUlh4sYoNHTOS2m4K3idHVEWe+4Q8JqJCDMMK2on+eSwj49ognRJQTrff14+vpbHr/X5payjx9Xfb26ZGS/aN7dMhuiwpTgcZ0hUjMSGOyYs2DgHwy3G/TR6ZRgjTRNhYlyMP5MJltILL5Q8Z0pJxgvQWs+EQZyT8xSmRMnbCHAKOCKeCEZPc+AttGMnBe/ba3GUfT89gvFctsExLTtDtn58DfMmwfn7ZqcR1vPRFUxbinVZf3dFVVX/AWMCszvKXuKYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chrome.tabs.api properties\"\n        title=\"\"\n        src=\"/static/1696468700438.0815157850153/9be90/func-list.png\"\n        srcset=\"/static/1696468700438.0815157850153/63868/func-list.png 250w,\n/static/1696468700438.0815157850153/0b533/func-list.png 500w,\n/static/1696468700438.0815157850153/9be90/func-list.png 636w\"\n        sizes=\"(max-width: 636px) 100vw, 636px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>사용 편의성을 위해 유저가 새 창을 띄우는 게 아닌, 간단한 <strong>팝업</strong>을 통해 이용할 수 있도록\n하겠습니다. <code class=\"language-text\">useTabList</code> 를 통해 받아온 데이터를 이용해 <code class=\"language-text\">popup.html</code> 파일을 작성하면 아이콘을 눌렀을\n때 나오는 팝업을 아래와 같이 구성할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 626px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOUlEQVR42o2TWY8hYRSG69oau6JQo1AUbV/SlkxsibTY9SRmjJjhh7j2q+dRnxaJmHgvTs63nP090tsLyGazuVzuJqvV2rsJKfAcwWDQ7XYXi8VGoxEOh/GiKEqhUDAMo9ls1ut1KRKJcBUxoTwgFAolk0kCxmKxTCaDNEzgsVQqSavVSlVVHtLpdOYLxh2413Wdy5skc03TRqORtN/v8dfpdNrtdq/X63a76LzxKWVCN5G6A+6i0ehyuZR2ux2RKaBSqWDWarXohPjxDKSDyWKxkLbbrSgskUho8TgxUZJ3wNFNEbqIPJ1OJRw4HI74t7ishCIJlbbRWCTPQr+1E50wUROY9Hp9aTabBYKBZuNdzeuF8fdqpcJIqoyyViuZQGdUHOk5MSkK3eVy9ft9ibqtVivOfF6v0+F0ezzM1vMlPQ9HzHw+n81mGwwG0nw+x6xYKhspbT/tMzJmSEuYhxgVwek2YcmIo+CcLMuXyNSM1/xbPqqpnV5dTyUxpC9kKDqEGU3CTIxAOIV817QtFgsHv8/ncro8Xi+5ee8kroVyq8Lv91PpJW1hTBshsywHBQSxn4HPdPsSGXrejF8EBdvt9ovxx2RhtZK27H8ZBL8ar378VJQwu/DI4UeIP6zHlWG/fu9r1epwOGQlkB8mxuMxcjKZsDoTE+KSaCwPrYI26/Vami8/NS0OjRgvu8GGQCBBKcjEsWFCXJbLZcE5sris5Pl83mw2x+Pxr4k//4X4czgcWKfT6fQPRrHKCqheT4sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tab-list\"\n        title=\"\"\n        src=\"/static/1696468700438.4026157850154/af590/tab-list.png\"\n        srcset=\"/static/1696468700438.4026157850154/63868/tab-list.png 250w,\n/static/1696468700438.4026157850154/0b533/tab-list.png 500w,\n/static/1696468700438.4026157850154/af590/tab-list.png 626w\"\n        sizes=\"(max-width: 626px) 100vw, 626px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그리고 탭이 많을 때 빠르게 찾을 수 있도록 <strong>검색 기능</strong>을 넣었습니다. 대략적인 문자열만 입력해도\n결과를 찾을 수 있는 퍼지 검색(fuzzy-search) 알고리즘을 적용하기 위해\n<a href=\"https://www.fusejs.io/\">Fuse.js</a>를 사용했습니다. 이로써 사용자가 단어 철자를 정확히 입력하지 않아도\n원하는 검색 결과를 찾을 수 있습니다.</p>\n<h3 id=\"동기화-시작\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%EC%8B%9C%EC%9E%91\" aria-label=\"동기화 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 시작</h3>\n<p>선택한 탭 id를 받아 해당 탭에 스크롤 이벤트를 등록합니다. 그리고 스크롤이 감지되면 수치를 백분율로\n나타내고 다른 탭을 그만큼 스크롤합니다. 이는 백그라운드 스크립트와 콘텐츠 스크립트를 활용하여 구현할\n수 있습니다.</p>\n<p>동기화를 시작할 수 없는 상황은 다음과 같습니다.</p>\n<ul>\n<li>이미 동기화 중일 때</li>\n<li>유저가 선택한 탭이 2개 미만일 때</li>\n</ul>\n<p>선택된 탭이 2개 미만일 경우 또는 이미 동기화 중이라면 버튼을 <code class=\"language-text\">disabled</code> 처리하겠습니다.</p>\n<h3 id=\"동기화-해제\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%ED%95%B4%EC%A0%9C\" aria-label=\"동기화 해제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 해제</h3>\n<p>동기화가 해제되어야 하는 상황은 다음과 같습니다.</p>\n<ul>\n<li>동기화 중일 때</li>\n<li>동기화 중인 탭이 제거되었을 때</li>\n<li>동기화 중인 탭의 URL이 변경되었을 때</li>\n</ul>\n<h3 id=\"데이터-유지\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9C%A0%EC%A7%80\" aria-label=\"데이터 유지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 유지</h3>\n<p>팝업을 껐다 켜도 데이터를 유지해야 합니다. 동기화를 시작했다면 팝업을 언제든 다시 켜도 어떤 탭이\n동기화되고 있는지 유저에게 알려주기 위한 동작을 하기 위해선 말이죠.</p>\n<p>이때 <a href=\"https://developer.chrome.com/docs/extensions/reference/storage/\">chrome.storage API</a> 를\n활용해서 데이터 및 상태를 유지할 수 있습니다. 이 API를 사용하려면 tab처럼 manifest에 <code class=\"language-text\">storage</code>\n권한을 설정해줘야 합니다.</p>\n<p>백그라운드 스크립트에서 어떤 탭들이 동기화 중인지 저장하고 가져올 수 있는 함수를 만들어 사용하면\n되겠습니다.</p>\n<h2 id=\"최적화\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%A0%81%ED%99%94\" aria-label=\"최적화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최적화</h2>\n<p>아래 코드는 스크롤 이벤트가 발생하면 scrollY의 %값을 <code class=\"language-text\">syncScroll</code> 커맨드와 함께 전달하는 함수입니다.</p>\n<p>%값으로 적용한 이유는 똑같은 내용의 글을 번역한 것이어도 언어별로 전달하는 문자의 양이 차이가\n납니다. 그러므로 스크롤한 값 그대로 적용하는 것보단 %값을 적용해 최대한 번역문과 원문 글의 문장을\n비슷하게 읽어 내려갈 수 있게끔 하기 위함입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onScrollHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Scroll event triggered'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n      window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollYPercentage <span class=\"token operator\">=</span> scrollPosition <span class=\"token operator\">/</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'Scroll event triggered, sending syncScroll message with percentage:'</span><span class=\"token punctuation\">,</span>\n      scrollYPercentage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      command<span class=\"token operator\">:</span> <span class=\"token string\">'syncScroll'</span><span class=\"token punctuation\">,</span>\n      data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in onScrollHandler: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>err<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"throttle-활용\" style=\"position:relative;\"><a href=\"#throttle-%ED%99%9C%EC%9A%A9\" aria-label=\"throttle 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Throttle 활용</h3>\n<p>위 함수를 스크롤 이벤트에 등록하고 실행을 해보면 아래 움짤처럼 굉장히 잦은 호출이 일어납니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/not-optimize.gif\" alt=\"잦은 호출 현상 예시\"></p>\n<p>저 함수의 목적은 스크롤이 발생하면 scrollY의 백분율 값을 계산해서 메시지를 보내는 것입니다. 그냥\n자연스럽게 다른 탭도 함께 스크롤 될 수 있도록 하면 되기에 이 경우, <code class=\"language-text\">throttle</code> 을 활용해서 메시지를\n적절한 타이밍에 보내도록 했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> throttle <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      timer <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/images/chrome-extension-sync-tab/throttle.gif\" alt=\"최적화 후 예시\"></p>\n<p>확실히 이제 호출이 자주 일어나지 않습니다. 하지만 움짤을 자세히 보면 또 다른 문제가 있는데요.</p>\n<p>한쪽 탭을 스크롤하면 다른 탭도 스크롤 위치를 맞추기 위해 자동으로 스크롤 됩니다. 그럼 다른 탭에서도\n스크롤이 발생하여 유저가 직접 스크롤하고 있는 탭(동기화 중인 탭)에 스크롤 위치를 맞추라는 메시지를\n보내게 됩니다. 그렇게 아래 움짤처럼 서로 스크롤을 맞추기 위해 <strong>무한 루프</strong>에 빠지게 됩니다. (받는\n쪽의 tabId를 보면 양쪽 모두 번갈아가며 스크롤 위치 데이터를 받고 스크롤 위치를 조정하고 있는 것을\n확인할 수 있습니다.)</p>\n<h3 id=\"debounce-활용\" style=\"position:relative;\"><a href=\"#debounce-%ED%99%9C%EC%9A%A9\" aria-label=\"debounce 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debounce 활용</h3>\n<p>이 문제를 개선하기 위해 선택한 탭들의 스크롤을 동일하게 맞추는 과정을 간단하게 살펴보겠습니다.</p>\n<ol>\n<li>유저가 서로 스크롤이 동기화되기 원하는 탭들을 선택하면 <code class=\"language-text\">startSync</code> 커맨드와 함께 탭의 id를 배열\n형태로 전달합니다.</li>\n<li>받은 탭의 id를 기반으로 해당 탭에 <code class=\"language-text\">startSyncTab</code> 커맨드를 전달합니다.</li>\n<li><code class=\"language-text\">startSyncTab</code> 을 전달 받으면 스크롤이 발생했을 때 scrollY의 퍼센트값을 계산해서 <code class=\"language-text\">syncScroll</code>\n커맨드를 보내는 함수(onScrollHandler)를 등록합니다.</li>\n<li><code class=\"language-text\">syncScroll</code> 을 전달 받으면 현재 스크롤 중인 탭을 제외하고 동기화 중인 모든 탭에\n<code class=\"language-text\">syncScrollForTab</code> 커맨드와 함께 scrollYPercentage 값을 전달합니다.</li>\n<li><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 <code class=\"language-text\">window.scrollTo()</code> 함수를 사용해 원하는 위치로 스크롤합니다.</li>\n</ol>\n<p>위 과정들을 거쳐 각 탭의 스크롤이 동기화 됩니다.</p>\n<p>이 문제는 <strong>사용자의 스크롤</strong>과 <code class=\"language-text\">**window.scrollTo()</code> 함수를 이용해 동작하는 스크롤**을 구별하는\n플래그 역할을 하는 변수와 <code class=\"language-text\">debounce</code> 함수를 통해 개선할 수 있습니다. 천천히 개선하는 과정을\n구현해보겠습니다.</p>\n<p>먼저, 플래그 역할을 하는 <code class=\"language-text\">scrolling</code> 변수를 선언하고 <code class=\"language-text\">false</code> 로 초기화하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">let</span> scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 스크롤 위치를 동기화하는데 여기서 <code class=\"language-text\">scrolling: true</code> 로\n설정하겠습니다. 그리고 스크롤 이벤트에 등록한 함수에 <code class=\"language-text\">scrolling: true</code> 라면 메시지를 보내지 않도록\n하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>scrolling<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Received syncScrollForTab message with data\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n    scrollYPercentage <span class=\"token operator\">*</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    top<span class=\"token operator\">:</span> scrollPosition<span class=\"token punctuation\">,</span>\n    behavior<span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>마지막으로 <code class=\"language-text\">scrolling: false</code> 로 변경하는데 이 부분에 <code class=\"language-text\">debounce</code> 를 적용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> debounce <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resetScrolling <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Scrolling reset to\"</span><span class=\"token punctuation\">,</span> scrolling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token function\">resetScrolling</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 스크롤 이벤트가 발생하게 되면 아래처럼 실행됩니다.</p>\n<p>스크롤 이벤트가 발생 → <code class=\"language-text\">syncScroll</code> 커맨드를 받아 동기화 중인 모든 탭에 <code class=\"language-text\">syncScrollForTab</code> 커맨드와\n함께 scrollYPercentage 값을 전달 → <code class=\"language-text\">scrolling: true</code> 로 설정 및 스크롤 위치 조정 후 <code class=\"language-text\">resetScrolling</code>\n함수 실행 → 스크롤 이벤트 발생 → <code class=\"language-text\">scrolling</code> 이 true이므로 동작 생략</p>\n<p>움짤로 확인해보겠습니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/flag.gif\" alt=\"모든 최적화 후 예시\"></p>\n<p>1 id를 가진 탭에서 메시지를 보내면 2 id를 가진 탭이 메시지를 받아 <code class=\"language-text\">window.scrollTo()</code> 함수를 이용해\n스크롤 위치를 동기화합니다. 반대로 2 id를 가진 탭이 메시지를 보내면 1 id를 가진 탭에서 메시지를 받아\n스크롤 위치를 동기화하는 것을 볼 수 있습니다.</p>\n<p>스크롤 위치도 자연스럽게 동기화 되고 문제가 개선되었습니다.</p>\n<h2 id=\"uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-오류-해결\" style=\"position:relative;\"><a href=\"#uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0\" aria-label=\"uncaught in promise error could not establish connection receiving end does not exist 오류 해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>‘Uncaught (in promise) Error: Could not establish connection. Receiving end does not exist.’ 오류 해결</h2>\n<h3 id=\"오류-발견\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%A5%98-%EB%B0%9C%EA%B2%AC\" aria-label=\"오류 발견 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오류 발견</h3>\n<p>처음 기획 했던 대로 기본 기능을 모두 구현했습니다. 그러나 콘솔에서 예기치 않은 오류가 발생합니다.\n디버깅을 위해 앱을 설치하고 열려있던 탭을 선택 후 동기화 시작 버튼을 누르면 에러가 발생합니다.\n그리고 탭 간 스크롤이 동기화되지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Uncaught <span class=\"token punctuation\">(</span>in promise<span class=\"token punctuation\">)</span> Error: Could not establish connection. Receiving end does not exist.</code></pre></div>\n<h3 id=\"이-오류가-발생하는-이유\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"이 오류가 발생하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류가 발생하는 이유?</h3>\n<p>이 오류는 일반적으로 백그라운드 스크립트에서 <code class=\"language-text\">chrome.tabs.sendMessage</code>메서드가 호출될 때 콘텐츠\n스크립트가 탭에 <strong>수신되지 않거나 아직 초기화되지 않은</strong> 경우에 나타납니다.</p>\n<p>특히\n<a href=\"https://groups.google.com/a/chromium.org/g/chromium-extensions/c/BH5_4OKxM3s/m/7lqiiKT9AQAJ\">Chromium-dev 그룹에 올라온 대화</a>에서\n해당 문제에 대해 명확히 파악할 수 있습니다.</p>\n<blockquote>\n<p>Content scripts declared in manifest.json or registered in chrome.scripting.registerContentScripts\nrun only when the tab is loaded or reloaded (e.g. via Ctrl-R), so when you install or update your\nextension the existing tabs don't run your new content scripts automatically in Chrome (they do in\nFirefox though), whereas the old content scripts that were running previously lose the ability to\nconnect to the extension.</p>\n</blockquote>\n<p>쉽게 설명하면 콘텐츠 스크립트를 등록하는 <code class=\"language-text\">chrome.scripting.registerContentScripts</code>는 새로고침 또는\n탭이 로드될 때만 실행됩니다. 따라서 익스텐션을 설치하기 전인 이전 탭에는 수동으로 콘텐츠 스크립트를\n등록하지 않으면 서로 메시지를 주고 받을 수 없다는 것입니다.</p>\n<p>위 설명에 따르면 익스텐션을 설치하기 전에 존재하던 탭에는 콘텐츠 스크립트가 실행되지 않습니다.\n이러한 탭으로 메시지를 보내려고 할 때 수신단(콘텐츠 스크립트)이 없으므로 오류가 발생한 것이죠.</p>\n<h3 id=\"이-오류를-어떻게-해결할-수-있을까\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EA%B2%B0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"이 오류를 어떻게 해결할 수 있을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류를 어떻게 해결할 수 있을까?</h3>\n<p>핵심은 메시지를 보내려는 탭에 콘텐츠 스크립트가 삽입되어 있어야 하는 것입니다. 콘텐츠 스크립트를\n삽입하는 방법은 아래 3가지 방법이 있겠네요.</p>\n<ol>\n<li>설치 전 열려있던 탭을 강제로 새로고침하여 콘텐츠 스크립트를 삽입합니다.</li>\n<li>익스텐션 설치 시, 콘텐츠 스크립트를 기존 탭에 삽입합니다.</li>\n<li>콘텐츠 스크립트가 필요한 작업 요청 시 콘텐츠 스크립트를 삽입합니다.</li>\n</ol>\n<p>제 생각엔 세 번째 방법이 적절할 것 같습니다. 첫 번째 방법은 사용자의 데이터가 유실될 위험이\n있습니다. 두 번째 방법은 설치하기 전에 존재했던 모든 페이지에 콘텐츠 스크립트를 적용하게 됩니다.\n어차피 사용자가 원하는 탭에 콘텐츠 스크립트를 삽입해서 메시지를 주고 받으면 됩니다. 따라서 필요한\n탭에 콘텐츠 스크립트를 삽입하는 세 번째 방법을 선택했습니다.</p>\n<h3 id=\"구현\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현</h3>\n<ol>\n<li><code class=\"language-text\">chrome.tabs.sendMessage</code>를 사용하여 메시지를 보내기 전에 <code class=\"language-text\">chrome.scripting.executeScript</code>를\n사용해 콘텐츠 스크립트를 유저가 선택한 탭에 삽입합니다.</li>\n<li>스크립트 삽입이 성공하면 메시지를 계속 전송할 수 있게 됩니다.</li>\n</ol>\n<p>간단한 코드로 살펴보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// background.ts</span>\n\nchrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>onMessage<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> sender<span class=\"token punctuation\">,</span> sendResponse<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Popup에서 'startSync' 커맨드와 함께 유저가 선택한 탭의 id들을 전달하면 여기서 받습니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> checkedTabIds<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\n    checkedTabIds<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 탭이 존재하고 접근 가능한지 확인합니다.</span>\n      chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.tabs.get: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 콘텐츠 스크립트를 해당 탭에 삽입합니다.</span>\n        chrome<span class=\"token punctuation\">.</span>scripting<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">{</span>\n            target<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> tabId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            files<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/pages/content/index.js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n                <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.scripting.executeScript: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">.</span>message<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// 주입이 성공하면 메시지를 보냅니다.</span>\n            chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n              command<span class=\"token operator\">:</span> <span class=\"token string\">\"startSyncTab\"</span><span class=\"token punctuation\">,</span>\n              data<span class=\"token operator\">:</span> tabId<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 scripting을 사용한다고 manifest의 permissions에 포함하면 됩니다.</p>\n<p>이렇게 유저가 선택한 탭에 메시지를 보내기 전에 콘텐츠 스크립트를 삽입함으로써 발생한 오류를 해결할\n수 있었습니다.</p>\n<h2 id=\"다국어-지원\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EA%B5%AD%EC%96%B4-%EC%A7%80%EC%9B%90\" aria-label=\"다국어 지원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다국어 지원</h2>\n<p>다국어를 지원하는 방법은 아주 간단합니다.</p>\n<p>로케일을 추가할 때마다 <code class=\"language-text\">_locales/_localeCode_</code> 폴더 아래에 <code class=\"language-text\">messages.json</code> 파일에 문자열을 작성하면\n됩니다. 여기서 <code class=\"language-text\">localeCode</code>는 영어의 <code class=\"language-text\">en</code>과 같은 국가코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extName\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Synchronize Tab Scrolling - 여러 탭의 스크롤 위치를 동일하게 유지\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extDescription\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"여러 탭을 선택하고 스크롤 위치를 동기화할 수 있습니다.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"startSync\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"동기화 시작\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">manifest.json</code> 에선 <code class=\"language-text\">__MSG_messagename__</code> 처럼 문자열을 작성해 적용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"__MSG_extName__\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 <code class=\"language-text\">messages.json</code> 파일의 메시지를 간편하게 사용하기 위한 함수를 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">EnMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/en/messages.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">KoMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/ko/messages.json'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">MessageKey</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> EnMessage <span class=\"token operator\">|</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> KoMessage<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">t</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> MessageKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> chrome<span class=\"token punctuation\">.</span>i18n<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>en, ko 메시지들을 가져와 문자열로 보여줍니다. 아래는 사용 예시입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> t <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@src/chrome/i18n\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Popup</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>나머지 정보들은\n<a href=\"https://developer.chrome.com/docs/extensions/reference/i18n/#how-to-support-multiple-languages\">developer.chrome: how-to-support-multiple-languages</a>\n에서 자세히 확인하실 수 있습니다.</p>",
      "%EB%8F%99%EA%B8%B0%ED%99%94-%ED%95%B4%EC%A0%9C#동기화 해제": "<h2 id=\"요구-사항\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EA%B5%AC-%EC%82%AC%ED%95%AD\" aria-label=\"요구 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요구 사항</h2>\n<p>익스텐션의 기능을 먼저 정리해보겠습니다.</p>\n<ul>\n<li>탭 정보 리스트\n<ul>\n<li>열려 있는 탭을 체크 가능한 리스트 형태로 보여줘야 합니다.</li>\n<li>유저에게 제공되는 정보는 favicon과 title입니다.</li>\n<li>newTab은 리스트에 보여주지 않습니다.</li>\n<li>정렬은 브라우저에서 탭이 열려있는 순서(index 오름차순)입니다.</li>\n<li>제목이 넘친다면 한 줄 말줄임 처리합니다.</li>\n<li>탭 제목 또는 URL로 검색할 수 있도록 합니다. (대략적으로 문자열 일치 파악)</li>\n</ul>\n</li>\n<li>동기화 시작\n<ul>\n<li>2개 이상의 탭을 선택한 경우 시작할 수 있습니다.</li>\n<li>1개만 선택한 경우 버튼을 클릭할 수 없으며 가이드 메시지가 표시됩니다.</li>\n</ul>\n</li>\n<li>동기화 해제\n<ul>\n<li>동기화 중인 탭 중 하나라도 제거되면 중지됩니다.</li>\n<li>동기화 중인 탭 중 URL이 변경되면 중지됩니다.</li>\n</ul>\n</li>\n<li>데이터 유지\n<ul>\n<li>팝업을 껐다 켜도 데이터가 유지되어야 합니다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"기능-구현\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84\" aria-label=\"기능 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기능 구현</h2>\n<h3 id=\"탭-정보-리스트\" style=\"position:relative;\"><a href=\"#%ED%83%AD-%EC%A0%95%EB%B3%B4-%EB%A6%AC%EC%8A%A4%ED%8A%B8\" aria-label=\"탭 정보 리스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>탭 정보 리스트</h3>\n<p>탭의 <code class=\"language-text\">title</code>속성은 manifest에 tabs 권한이 포함된 경우에만 존재합니다. 따라서 manifest에 권한 설정이\n필요합니다.</p>\n<p><a href=\"https://developer.chrome.com/docs/extensions/reference/tabs/#method-query\">chrome.tabs API</a> 를\n이용해서 모든 탭의 정보들을 가져올 수 있습니다. newtab은 스크롤을 동기화하는 데 사용할 탭이 아니므로\n제외하고 반환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useTabList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>queryInfo<span class=\"token operator\">?</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span>QueryInfo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    queryKey<span class=\"token operator\">:</span> tabsKeys<span class=\"token punctuation\">.</span><span class=\"token function\">list</span><span class=\"token punctuation\">(</span>queryInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">queryFn</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> tabs <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>queryInfo <span class=\"token operator\">??</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// Returns \"tabs\", excluding items with URL 'chrome://newtab/'.</span>\n      <span class=\"token keyword\">return</span> tabs<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> tab<span class=\"token punctuation\">.</span>url <span class=\"token operator\">!==</span> <span class=\"token string\">'chrome://newtab/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    suspense<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>참고로 탭이 생성, 업데이트, 삭제 되었을 때 함수를 실행하고 싶다면 아래 사진의 함수를 통해\n가능합니다. 하지만 저의 목표는 원문과 번역문의 스크롤 위치를 동기화하기 원하는 저같은 사용자를 돕기\n위함입니다. 따라서 이 함수들을 이용해 구현하는 경우는 없으므로 넘어가겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 636px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVR42j2T65KjOAyFeY1u7hhfJdnGBAIhIUlP7+x01fyY93+aFemadR1cKhey5eNPmZCdBKFROq8OBdl2lTKdwV5p0csWgtJWCNF0bVOVZcOjrruu46XMapN8QgfGk/V0um7j5TqsSzglG9FvU7ieYIowJxN9b0z9d1RVlXnnb9Mtglc4GJ/m22P9+LU8/knzKsGG+xbuF9pm2hZcJxhCUzf/52edbIRtFAqI8tDQ1827srUhoayw0NGgIEjR10LURZ4fSd/pTZ0FGx6nZzSxd0njOO8/968/l8/f43lXwQ+fT/+4wraE5063C6ShKqoiL6uyYmVK9xScJQXRwWDDTJYcDgDRKichOTohnQCT06AMHKaGCZTtDclMax0pEKIhviKldaI0xvOUltmAxnOkZcDJ4xRgCiYiDGhQ9kqwDsP2aUcF0kZ+qPFyH9f9tD3n2w+pNawznCczJg5wW9w8GoSj5urltlCtME1RFCUrL/K3t/z9/TW/lWWZv+XFe87rPH+L47/J7HbXWeRnsphsOCONTrvjVhCNJR1fK5DssKALhlnyo00bceU02qwVbada9r1tD1XsZpnXTdm0zAHzVDV1xVFz/NCwuq7teo44aDKjDRumeINed0JDHFkGfNdLHbzyKBFYvbU171S9Ci75e5XtLRt2HzBoSkwYs7U8/52vdzY/Pq/+trJoO/vLrIw60Gj4/OPkAxImrIeWHw0HiUlh4sYoNHTOS2m4K3idHVEWe+4Q8JqJCDMMK2on+eSwj49ognRJQTrff14+vpbHr/X5payjx9Xfb26ZGS/aN7dMhuiwpTgcZ0hUjMSGOyYs2DgHwy3G/TR6ZRgjTRNhYlyMP5MJltILL5Q8Z0pJxgvQWs+EQZyT8xSmRMnbCHAKOCKeCEZPc+AttGMnBe/ba3GUfT89gvFctsExLTtDtn58DfMmwfn7ZqcR1vPRFUxbinVZf3dFVVX/AWMCszvKXuKYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chrome.tabs.api properties\"\n        title=\"\"\n        src=\"/static/1696468700438.0815157850153/9be90/func-list.png\"\n        srcset=\"/static/1696468700438.0815157850153/63868/func-list.png 250w,\n/static/1696468700438.0815157850153/0b533/func-list.png 500w,\n/static/1696468700438.0815157850153/9be90/func-list.png 636w\"\n        sizes=\"(max-width: 636px) 100vw, 636px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>사용 편의성을 위해 유저가 새 창을 띄우는 게 아닌, 간단한 <strong>팝업</strong>을 통해 이용할 수 있도록\n하겠습니다. <code class=\"language-text\">useTabList</code> 를 통해 받아온 데이터를 이용해 <code class=\"language-text\">popup.html</code> 파일을 작성하면 아이콘을 눌렀을\n때 나오는 팝업을 아래와 같이 구성할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 626px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOUlEQVR42o2TWY8hYRSG69oau6JQo1AUbV/SlkxsibTY9SRmjJjhh7j2q+dRnxaJmHgvTs63nP090tsLyGazuVzuJqvV2rsJKfAcwWDQ7XYXi8VGoxEOh/GiKEqhUDAMo9ls1ut1KRKJcBUxoTwgFAolk0kCxmKxTCaDNEzgsVQqSavVSlVVHtLpdOYLxh2413Wdy5skc03TRqORtN/v8dfpdNrtdq/X63a76LzxKWVCN5G6A+6i0ehyuZR2ux2RKaBSqWDWarXohPjxDKSDyWKxkLbbrSgskUho8TgxUZJ3wNFNEbqIPJ1OJRw4HI74t7ishCIJlbbRWCTPQr+1E50wUROY9Hp9aTabBYKBZuNdzeuF8fdqpcJIqoyyViuZQGdUHOk5MSkK3eVy9ft9ibqtVivOfF6v0+F0ezzM1vMlPQ9HzHw+n81mGwwG0nw+x6xYKhspbT/tMzJmSEuYhxgVwek2YcmIo+CcLMuXyNSM1/xbPqqpnV5dTyUxpC9kKDqEGU3CTIxAOIV817QtFgsHv8/ncro8Xi+5ee8kroVyq8Lv91PpJW1hTBshsywHBQSxn4HPdPsSGXrejF8EBdvt9ovxx2RhtZK27H8ZBL8ar378VJQwu/DI4UeIP6zHlWG/fu9r1epwOGQlkB8mxuMxcjKZsDoTE+KSaCwPrYI26/Vami8/NS0OjRgvu8GGQCBBKcjEsWFCXJbLZcE5sris5Pl83mw2x+Pxr4k//4X4czgcWKfT6fQPRrHKCqheT4sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tab-list\"\n        title=\"\"\n        src=\"/static/1696468700438.4026157850154/af590/tab-list.png\"\n        srcset=\"/static/1696468700438.4026157850154/63868/tab-list.png 250w,\n/static/1696468700438.4026157850154/0b533/tab-list.png 500w,\n/static/1696468700438.4026157850154/af590/tab-list.png 626w\"\n        sizes=\"(max-width: 626px) 100vw, 626px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그리고 탭이 많을 때 빠르게 찾을 수 있도록 <strong>검색 기능</strong>을 넣었습니다. 대략적인 문자열만 입력해도\n결과를 찾을 수 있는 퍼지 검색(fuzzy-search) 알고리즘을 적용하기 위해\n<a href=\"https://www.fusejs.io/\">Fuse.js</a>를 사용했습니다. 이로써 사용자가 단어 철자를 정확히 입력하지 않아도\n원하는 검색 결과를 찾을 수 있습니다.</p>\n<h3 id=\"동기화-시작\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%EC%8B%9C%EC%9E%91\" aria-label=\"동기화 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 시작</h3>\n<p>선택한 탭 id를 받아 해당 탭에 스크롤 이벤트를 등록합니다. 그리고 스크롤이 감지되면 수치를 백분율로\n나타내고 다른 탭을 그만큼 스크롤합니다. 이는 백그라운드 스크립트와 콘텐츠 스크립트를 활용하여 구현할\n수 있습니다.</p>\n<p>동기화를 시작할 수 없는 상황은 다음과 같습니다.</p>\n<ul>\n<li>이미 동기화 중일 때</li>\n<li>유저가 선택한 탭이 2개 미만일 때</li>\n</ul>\n<p>선택된 탭이 2개 미만일 경우 또는 이미 동기화 중이라면 버튼을 <code class=\"language-text\">disabled</code> 처리하겠습니다.</p>\n<h3 id=\"동기화-해제\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%ED%95%B4%EC%A0%9C\" aria-label=\"동기화 해제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 해제</h3>\n<p>동기화가 해제되어야 하는 상황은 다음과 같습니다.</p>\n<ul>\n<li>동기화 중일 때</li>\n<li>동기화 중인 탭이 제거되었을 때</li>\n<li>동기화 중인 탭의 URL이 변경되었을 때</li>\n</ul>\n<h3 id=\"데이터-유지\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9C%A0%EC%A7%80\" aria-label=\"데이터 유지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 유지</h3>\n<p>팝업을 껐다 켜도 데이터를 유지해야 합니다. 동기화를 시작했다면 팝업을 언제든 다시 켜도 어떤 탭이\n동기화되고 있는지 유저에게 알려주기 위한 동작을 하기 위해선 말이죠.</p>\n<p>이때 <a href=\"https://developer.chrome.com/docs/extensions/reference/storage/\">chrome.storage API</a> 를\n활용해서 데이터 및 상태를 유지할 수 있습니다. 이 API를 사용하려면 tab처럼 manifest에 <code class=\"language-text\">storage</code>\n권한을 설정해줘야 합니다.</p>\n<p>백그라운드 스크립트에서 어떤 탭들이 동기화 중인지 저장하고 가져올 수 있는 함수를 만들어 사용하면\n되겠습니다.</p>\n<h2 id=\"최적화\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%A0%81%ED%99%94\" aria-label=\"최적화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최적화</h2>\n<p>아래 코드는 스크롤 이벤트가 발생하면 scrollY의 %값을 <code class=\"language-text\">syncScroll</code> 커맨드와 함께 전달하는 함수입니다.</p>\n<p>%값으로 적용한 이유는 똑같은 내용의 글을 번역한 것이어도 언어별로 전달하는 문자의 양이 차이가\n납니다. 그러므로 스크롤한 값 그대로 적용하는 것보단 %값을 적용해 최대한 번역문과 원문 글의 문장을\n비슷하게 읽어 내려갈 수 있게끔 하기 위함입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onScrollHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Scroll event triggered'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n      window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollYPercentage <span class=\"token operator\">=</span> scrollPosition <span class=\"token operator\">/</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'Scroll event triggered, sending syncScroll message with percentage:'</span><span class=\"token punctuation\">,</span>\n      scrollYPercentage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      command<span class=\"token operator\">:</span> <span class=\"token string\">'syncScroll'</span><span class=\"token punctuation\">,</span>\n      data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in onScrollHandler: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>err<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"throttle-활용\" style=\"position:relative;\"><a href=\"#throttle-%ED%99%9C%EC%9A%A9\" aria-label=\"throttle 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Throttle 활용</h3>\n<p>위 함수를 스크롤 이벤트에 등록하고 실행을 해보면 아래 움짤처럼 굉장히 잦은 호출이 일어납니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/not-optimize.gif\" alt=\"잦은 호출 현상 예시\"></p>\n<p>저 함수의 목적은 스크롤이 발생하면 scrollY의 백분율 값을 계산해서 메시지를 보내는 것입니다. 그냥\n자연스럽게 다른 탭도 함께 스크롤 될 수 있도록 하면 되기에 이 경우, <code class=\"language-text\">throttle</code> 을 활용해서 메시지를\n적절한 타이밍에 보내도록 했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> throttle <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      timer <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/images/chrome-extension-sync-tab/throttle.gif\" alt=\"최적화 후 예시\"></p>\n<p>확실히 이제 호출이 자주 일어나지 않습니다. 하지만 움짤을 자세히 보면 또 다른 문제가 있는데요.</p>\n<p>한쪽 탭을 스크롤하면 다른 탭도 스크롤 위치를 맞추기 위해 자동으로 스크롤 됩니다. 그럼 다른 탭에서도\n스크롤이 발생하여 유저가 직접 스크롤하고 있는 탭(동기화 중인 탭)에 스크롤 위치를 맞추라는 메시지를\n보내게 됩니다. 그렇게 아래 움짤처럼 서로 스크롤을 맞추기 위해 <strong>무한 루프</strong>에 빠지게 됩니다. (받는\n쪽의 tabId를 보면 양쪽 모두 번갈아가며 스크롤 위치 데이터를 받고 스크롤 위치를 조정하고 있는 것을\n확인할 수 있습니다.)</p>\n<h3 id=\"debounce-활용\" style=\"position:relative;\"><a href=\"#debounce-%ED%99%9C%EC%9A%A9\" aria-label=\"debounce 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debounce 활용</h3>\n<p>이 문제를 개선하기 위해 선택한 탭들의 스크롤을 동일하게 맞추는 과정을 간단하게 살펴보겠습니다.</p>\n<ol>\n<li>유저가 서로 스크롤이 동기화되기 원하는 탭들을 선택하면 <code class=\"language-text\">startSync</code> 커맨드와 함께 탭의 id를 배열\n형태로 전달합니다.</li>\n<li>받은 탭의 id를 기반으로 해당 탭에 <code class=\"language-text\">startSyncTab</code> 커맨드를 전달합니다.</li>\n<li><code class=\"language-text\">startSyncTab</code> 을 전달 받으면 스크롤이 발생했을 때 scrollY의 퍼센트값을 계산해서 <code class=\"language-text\">syncScroll</code>\n커맨드를 보내는 함수(onScrollHandler)를 등록합니다.</li>\n<li><code class=\"language-text\">syncScroll</code> 을 전달 받으면 현재 스크롤 중인 탭을 제외하고 동기화 중인 모든 탭에\n<code class=\"language-text\">syncScrollForTab</code> 커맨드와 함께 scrollYPercentage 값을 전달합니다.</li>\n<li><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 <code class=\"language-text\">window.scrollTo()</code> 함수를 사용해 원하는 위치로 스크롤합니다.</li>\n</ol>\n<p>위 과정들을 거쳐 각 탭의 스크롤이 동기화 됩니다.</p>\n<p>이 문제는 <strong>사용자의 스크롤</strong>과 <code class=\"language-text\">**window.scrollTo()</code> 함수를 이용해 동작하는 스크롤**을 구별하는\n플래그 역할을 하는 변수와 <code class=\"language-text\">debounce</code> 함수를 통해 개선할 수 있습니다. 천천히 개선하는 과정을\n구현해보겠습니다.</p>\n<p>먼저, 플래그 역할을 하는 <code class=\"language-text\">scrolling</code> 변수를 선언하고 <code class=\"language-text\">false</code> 로 초기화하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">let</span> scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 스크롤 위치를 동기화하는데 여기서 <code class=\"language-text\">scrolling: true</code> 로\n설정하겠습니다. 그리고 스크롤 이벤트에 등록한 함수에 <code class=\"language-text\">scrolling: true</code> 라면 메시지를 보내지 않도록\n하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>scrolling<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Received syncScrollForTab message with data\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n    scrollYPercentage <span class=\"token operator\">*</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    top<span class=\"token operator\">:</span> scrollPosition<span class=\"token punctuation\">,</span>\n    behavior<span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>마지막으로 <code class=\"language-text\">scrolling: false</code> 로 변경하는데 이 부분에 <code class=\"language-text\">debounce</code> 를 적용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> debounce <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resetScrolling <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Scrolling reset to\"</span><span class=\"token punctuation\">,</span> scrolling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token function\">resetScrolling</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 스크롤 이벤트가 발생하게 되면 아래처럼 실행됩니다.</p>\n<p>스크롤 이벤트가 발생 → <code class=\"language-text\">syncScroll</code> 커맨드를 받아 동기화 중인 모든 탭에 <code class=\"language-text\">syncScrollForTab</code> 커맨드와\n함께 scrollYPercentage 값을 전달 → <code class=\"language-text\">scrolling: true</code> 로 설정 및 스크롤 위치 조정 후 <code class=\"language-text\">resetScrolling</code>\n함수 실행 → 스크롤 이벤트 발생 → <code class=\"language-text\">scrolling</code> 이 true이므로 동작 생략</p>\n<p>움짤로 확인해보겠습니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/flag.gif\" alt=\"모든 최적화 후 예시\"></p>\n<p>1 id를 가진 탭에서 메시지를 보내면 2 id를 가진 탭이 메시지를 받아 <code class=\"language-text\">window.scrollTo()</code> 함수를 이용해\n스크롤 위치를 동기화합니다. 반대로 2 id를 가진 탭이 메시지를 보내면 1 id를 가진 탭에서 메시지를 받아\n스크롤 위치를 동기화하는 것을 볼 수 있습니다.</p>\n<p>스크롤 위치도 자연스럽게 동기화 되고 문제가 개선되었습니다.</p>\n<h2 id=\"uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-오류-해결\" style=\"position:relative;\"><a href=\"#uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0\" aria-label=\"uncaught in promise error could not establish connection receiving end does not exist 오류 해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>‘Uncaught (in promise) Error: Could not establish connection. Receiving end does not exist.’ 오류 해결</h2>\n<h3 id=\"오류-발견\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%A5%98-%EB%B0%9C%EA%B2%AC\" aria-label=\"오류 발견 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오류 발견</h3>\n<p>처음 기획 했던 대로 기본 기능을 모두 구현했습니다. 그러나 콘솔에서 예기치 않은 오류가 발생합니다.\n디버깅을 위해 앱을 설치하고 열려있던 탭을 선택 후 동기화 시작 버튼을 누르면 에러가 발생합니다.\n그리고 탭 간 스크롤이 동기화되지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Uncaught <span class=\"token punctuation\">(</span>in promise<span class=\"token punctuation\">)</span> Error: Could not establish connection. Receiving end does not exist.</code></pre></div>\n<h3 id=\"이-오류가-발생하는-이유\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"이 오류가 발생하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류가 발생하는 이유?</h3>\n<p>이 오류는 일반적으로 백그라운드 스크립트에서 <code class=\"language-text\">chrome.tabs.sendMessage</code>메서드가 호출될 때 콘텐츠\n스크립트가 탭에 <strong>수신되지 않거나 아직 초기화되지 않은</strong> 경우에 나타납니다.</p>\n<p>특히\n<a href=\"https://groups.google.com/a/chromium.org/g/chromium-extensions/c/BH5_4OKxM3s/m/7lqiiKT9AQAJ\">Chromium-dev 그룹에 올라온 대화</a>에서\n해당 문제에 대해 명확히 파악할 수 있습니다.</p>\n<blockquote>\n<p>Content scripts declared in manifest.json or registered in chrome.scripting.registerContentScripts\nrun only when the tab is loaded or reloaded (e.g. via Ctrl-R), so when you install or update your\nextension the existing tabs don't run your new content scripts automatically in Chrome (they do in\nFirefox though), whereas the old content scripts that were running previously lose the ability to\nconnect to the extension.</p>\n</blockquote>\n<p>쉽게 설명하면 콘텐츠 스크립트를 등록하는 <code class=\"language-text\">chrome.scripting.registerContentScripts</code>는 새로고침 또는\n탭이 로드될 때만 실행됩니다. 따라서 익스텐션을 설치하기 전인 이전 탭에는 수동으로 콘텐츠 스크립트를\n등록하지 않으면 서로 메시지를 주고 받을 수 없다는 것입니다.</p>\n<p>위 설명에 따르면 익스텐션을 설치하기 전에 존재하던 탭에는 콘텐츠 스크립트가 실행되지 않습니다.\n이러한 탭으로 메시지를 보내려고 할 때 수신단(콘텐츠 스크립트)이 없으므로 오류가 발생한 것이죠.</p>\n<h3 id=\"이-오류를-어떻게-해결할-수-있을까\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EA%B2%B0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"이 오류를 어떻게 해결할 수 있을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류를 어떻게 해결할 수 있을까?</h3>\n<p>핵심은 메시지를 보내려는 탭에 콘텐츠 스크립트가 삽입되어 있어야 하는 것입니다. 콘텐츠 스크립트를\n삽입하는 방법은 아래 3가지 방법이 있겠네요.</p>\n<ol>\n<li>설치 전 열려있던 탭을 강제로 새로고침하여 콘텐츠 스크립트를 삽입합니다.</li>\n<li>익스텐션 설치 시, 콘텐츠 스크립트를 기존 탭에 삽입합니다.</li>\n<li>콘텐츠 스크립트가 필요한 작업 요청 시 콘텐츠 스크립트를 삽입합니다.</li>\n</ol>\n<p>제 생각엔 세 번째 방법이 적절할 것 같습니다. 첫 번째 방법은 사용자의 데이터가 유실될 위험이\n있습니다. 두 번째 방법은 설치하기 전에 존재했던 모든 페이지에 콘텐츠 스크립트를 적용하게 됩니다.\n어차피 사용자가 원하는 탭에 콘텐츠 스크립트를 삽입해서 메시지를 주고 받으면 됩니다. 따라서 필요한\n탭에 콘텐츠 스크립트를 삽입하는 세 번째 방법을 선택했습니다.</p>\n<h3 id=\"구현\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현</h3>\n<ol>\n<li><code class=\"language-text\">chrome.tabs.sendMessage</code>를 사용하여 메시지를 보내기 전에 <code class=\"language-text\">chrome.scripting.executeScript</code>를\n사용해 콘텐츠 스크립트를 유저가 선택한 탭에 삽입합니다.</li>\n<li>스크립트 삽입이 성공하면 메시지를 계속 전송할 수 있게 됩니다.</li>\n</ol>\n<p>간단한 코드로 살펴보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// background.ts</span>\n\nchrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>onMessage<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> sender<span class=\"token punctuation\">,</span> sendResponse<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Popup에서 'startSync' 커맨드와 함께 유저가 선택한 탭의 id들을 전달하면 여기서 받습니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> checkedTabIds<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\n    checkedTabIds<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 탭이 존재하고 접근 가능한지 확인합니다.</span>\n      chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.tabs.get: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 콘텐츠 스크립트를 해당 탭에 삽입합니다.</span>\n        chrome<span class=\"token punctuation\">.</span>scripting<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">{</span>\n            target<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> tabId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            files<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/pages/content/index.js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n                <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.scripting.executeScript: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">.</span>message<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// 주입이 성공하면 메시지를 보냅니다.</span>\n            chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n              command<span class=\"token operator\">:</span> <span class=\"token string\">\"startSyncTab\"</span><span class=\"token punctuation\">,</span>\n              data<span class=\"token operator\">:</span> tabId<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 scripting을 사용한다고 manifest의 permissions에 포함하면 됩니다.</p>\n<p>이렇게 유저가 선택한 탭에 메시지를 보내기 전에 콘텐츠 스크립트를 삽입함으로써 발생한 오류를 해결할\n수 있었습니다.</p>\n<h2 id=\"다국어-지원\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EA%B5%AD%EC%96%B4-%EC%A7%80%EC%9B%90\" aria-label=\"다국어 지원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다국어 지원</h2>\n<p>다국어를 지원하는 방법은 아주 간단합니다.</p>\n<p>로케일을 추가할 때마다 <code class=\"language-text\">_locales/_localeCode_</code> 폴더 아래에 <code class=\"language-text\">messages.json</code> 파일에 문자열을 작성하면\n됩니다. 여기서 <code class=\"language-text\">localeCode</code>는 영어의 <code class=\"language-text\">en</code>과 같은 국가코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extName\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Synchronize Tab Scrolling - 여러 탭의 스크롤 위치를 동일하게 유지\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extDescription\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"여러 탭을 선택하고 스크롤 위치를 동기화할 수 있습니다.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"startSync\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"동기화 시작\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">manifest.json</code> 에선 <code class=\"language-text\">__MSG_messagename__</code> 처럼 문자열을 작성해 적용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"__MSG_extName__\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 <code class=\"language-text\">messages.json</code> 파일의 메시지를 간편하게 사용하기 위한 함수를 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">EnMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/en/messages.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">KoMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/ko/messages.json'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">MessageKey</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> EnMessage <span class=\"token operator\">|</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> KoMessage<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">t</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> MessageKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> chrome<span class=\"token punctuation\">.</span>i18n<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>en, ko 메시지들을 가져와 문자열로 보여줍니다. 아래는 사용 예시입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> t <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@src/chrome/i18n\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Popup</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>나머지 정보들은\n<a href=\"https://developer.chrome.com/docs/extensions/reference/i18n/#how-to-support-multiple-languages\">developer.chrome: how-to-support-multiple-languages</a>\n에서 자세히 확인하실 수 있습니다.</p>",
      "%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9C%A0%EC%A7%80#데이터 유지": "<h2 id=\"요구-사항\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EA%B5%AC-%EC%82%AC%ED%95%AD\" aria-label=\"요구 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요구 사항</h2>\n<p>익스텐션의 기능을 먼저 정리해보겠습니다.</p>\n<ul>\n<li>탭 정보 리스트\n<ul>\n<li>열려 있는 탭을 체크 가능한 리스트 형태로 보여줘야 합니다.</li>\n<li>유저에게 제공되는 정보는 favicon과 title입니다.</li>\n<li>newTab은 리스트에 보여주지 않습니다.</li>\n<li>정렬은 브라우저에서 탭이 열려있는 순서(index 오름차순)입니다.</li>\n<li>제목이 넘친다면 한 줄 말줄임 처리합니다.</li>\n<li>탭 제목 또는 URL로 검색할 수 있도록 합니다. (대략적으로 문자열 일치 파악)</li>\n</ul>\n</li>\n<li>동기화 시작\n<ul>\n<li>2개 이상의 탭을 선택한 경우 시작할 수 있습니다.</li>\n<li>1개만 선택한 경우 버튼을 클릭할 수 없으며 가이드 메시지가 표시됩니다.</li>\n</ul>\n</li>\n<li>동기화 해제\n<ul>\n<li>동기화 중인 탭 중 하나라도 제거되면 중지됩니다.</li>\n<li>동기화 중인 탭 중 URL이 변경되면 중지됩니다.</li>\n</ul>\n</li>\n<li>데이터 유지\n<ul>\n<li>팝업을 껐다 켜도 데이터가 유지되어야 합니다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"기능-구현\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84\" aria-label=\"기능 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기능 구현</h2>\n<h3 id=\"탭-정보-리스트\" style=\"position:relative;\"><a href=\"#%ED%83%AD-%EC%A0%95%EB%B3%B4-%EB%A6%AC%EC%8A%A4%ED%8A%B8\" aria-label=\"탭 정보 리스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>탭 정보 리스트</h3>\n<p>탭의 <code class=\"language-text\">title</code>속성은 manifest에 tabs 권한이 포함된 경우에만 존재합니다. 따라서 manifest에 권한 설정이\n필요합니다.</p>\n<p><a href=\"https://developer.chrome.com/docs/extensions/reference/tabs/#method-query\">chrome.tabs API</a> 를\n이용해서 모든 탭의 정보들을 가져올 수 있습니다. newtab은 스크롤을 동기화하는 데 사용할 탭이 아니므로\n제외하고 반환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useTabList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>queryInfo<span class=\"token operator\">?</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span>QueryInfo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    queryKey<span class=\"token operator\">:</span> tabsKeys<span class=\"token punctuation\">.</span><span class=\"token function\">list</span><span class=\"token punctuation\">(</span>queryInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">queryFn</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> tabs <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>queryInfo <span class=\"token operator\">??</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// Returns \"tabs\", excluding items with URL 'chrome://newtab/'.</span>\n      <span class=\"token keyword\">return</span> tabs<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> tab<span class=\"token punctuation\">.</span>url <span class=\"token operator\">!==</span> <span class=\"token string\">'chrome://newtab/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    suspense<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>참고로 탭이 생성, 업데이트, 삭제 되었을 때 함수를 실행하고 싶다면 아래 사진의 함수를 통해\n가능합니다. 하지만 저의 목표는 원문과 번역문의 스크롤 위치를 동기화하기 원하는 저같은 사용자를 돕기\n위함입니다. 따라서 이 함수들을 이용해 구현하는 경우는 없으므로 넘어가겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 636px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVR42j2T65KjOAyFeY1u7hhfJdnGBAIhIUlP7+x01fyY93+aFemadR1cKhey5eNPmZCdBKFROq8OBdl2lTKdwV5p0csWgtJWCNF0bVOVZcOjrruu46XMapN8QgfGk/V0um7j5TqsSzglG9FvU7ieYIowJxN9b0z9d1RVlXnnb9Mtglc4GJ/m22P9+LU8/knzKsGG+xbuF9pm2hZcJxhCUzf/52edbIRtFAqI8tDQ1827srUhoayw0NGgIEjR10LURZ4fSd/pTZ0FGx6nZzSxd0njOO8/968/l8/f43lXwQ+fT/+4wraE5063C6ShKqoiL6uyYmVK9xScJQXRwWDDTJYcDgDRKichOTohnQCT06AMHKaGCZTtDclMax0pEKIhviKldaI0xvOUltmAxnOkZcDJ4xRgCiYiDGhQ9kqwDsP2aUcF0kZ+qPFyH9f9tD3n2w+pNawznCczJg5wW9w8GoSj5urltlCtME1RFCUrL/K3t/z9/TW/lWWZv+XFe87rPH+L47/J7HbXWeRnsphsOCONTrvjVhCNJR1fK5DssKALhlnyo00bceU02qwVbada9r1tD1XsZpnXTdm0zAHzVDV1xVFz/NCwuq7teo44aDKjDRumeINed0JDHFkGfNdLHbzyKBFYvbU171S9Ci75e5XtLRt2HzBoSkwYs7U8/52vdzY/Pq/+trJoO/vLrIw60Gj4/OPkAxImrIeWHw0HiUlh4sYoNHTOS2m4K3idHVEWe+4Q8JqJCDMMK2on+eSwj49ognRJQTrff14+vpbHr/X5payjx9Xfb26ZGS/aN7dMhuiwpTgcZ0hUjMSGOyYs2DgHwy3G/TR6ZRgjTRNhYlyMP5MJltILL5Q8Z0pJxgvQWs+EQZyT8xSmRMnbCHAKOCKeCEZPc+AttGMnBe/ba3GUfT89gvFctsExLTtDtn58DfMmwfn7ZqcR1vPRFUxbinVZf3dFVVX/AWMCszvKXuKYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chrome.tabs.api properties\"\n        title=\"\"\n        src=\"/static/1696468700438.0815157850153/9be90/func-list.png\"\n        srcset=\"/static/1696468700438.0815157850153/63868/func-list.png 250w,\n/static/1696468700438.0815157850153/0b533/func-list.png 500w,\n/static/1696468700438.0815157850153/9be90/func-list.png 636w\"\n        sizes=\"(max-width: 636px) 100vw, 636px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>사용 편의성을 위해 유저가 새 창을 띄우는 게 아닌, 간단한 <strong>팝업</strong>을 통해 이용할 수 있도록\n하겠습니다. <code class=\"language-text\">useTabList</code> 를 통해 받아온 데이터를 이용해 <code class=\"language-text\">popup.html</code> 파일을 작성하면 아이콘을 눌렀을\n때 나오는 팝업을 아래와 같이 구성할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 626px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOUlEQVR42o2TWY8hYRSG69oau6JQo1AUbV/SlkxsibTY9SRmjJjhh7j2q+dRnxaJmHgvTs63nP090tsLyGazuVzuJqvV2rsJKfAcwWDQ7XYXi8VGoxEOh/GiKEqhUDAMo9ls1ut1KRKJcBUxoTwgFAolk0kCxmKxTCaDNEzgsVQqSavVSlVVHtLpdOYLxh2413Wdy5skc03TRqORtN/v8dfpdNrtdq/X63a76LzxKWVCN5G6A+6i0ehyuZR2ux2RKaBSqWDWarXohPjxDKSDyWKxkLbbrSgskUho8TgxUZJ3wNFNEbqIPJ1OJRw4HI74t7ishCIJlbbRWCTPQr+1E50wUROY9Hp9aTabBYKBZuNdzeuF8fdqpcJIqoyyViuZQGdUHOk5MSkK3eVy9ft9ibqtVivOfF6v0+F0ezzM1vMlPQ9HzHw+n81mGwwG0nw+x6xYKhspbT/tMzJmSEuYhxgVwek2YcmIo+CcLMuXyNSM1/xbPqqpnV5dTyUxpC9kKDqEGU3CTIxAOIV817QtFgsHv8/ncro8Xi+5ee8kroVyq8Lv91PpJW1hTBshsywHBQSxn4HPdPsSGXrejF8EBdvt9ovxx2RhtZK27H8ZBL8ar378VJQwu/DI4UeIP6zHlWG/fu9r1epwOGQlkB8mxuMxcjKZsDoTE+KSaCwPrYI26/Vami8/NS0OjRgvu8GGQCBBKcjEsWFCXJbLZcE5sris5Pl83mw2x+Pxr4k//4X4czgcWKfT6fQPRrHKCqheT4sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tab-list\"\n        title=\"\"\n        src=\"/static/1696468700438.4026157850154/af590/tab-list.png\"\n        srcset=\"/static/1696468700438.4026157850154/63868/tab-list.png 250w,\n/static/1696468700438.4026157850154/0b533/tab-list.png 500w,\n/static/1696468700438.4026157850154/af590/tab-list.png 626w\"\n        sizes=\"(max-width: 626px) 100vw, 626px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그리고 탭이 많을 때 빠르게 찾을 수 있도록 <strong>검색 기능</strong>을 넣었습니다. 대략적인 문자열만 입력해도\n결과를 찾을 수 있는 퍼지 검색(fuzzy-search) 알고리즘을 적용하기 위해\n<a href=\"https://www.fusejs.io/\">Fuse.js</a>를 사용했습니다. 이로써 사용자가 단어 철자를 정확히 입력하지 않아도\n원하는 검색 결과를 찾을 수 있습니다.</p>\n<h3 id=\"동기화-시작\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%EC%8B%9C%EC%9E%91\" aria-label=\"동기화 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 시작</h3>\n<p>선택한 탭 id를 받아 해당 탭에 스크롤 이벤트를 등록합니다. 그리고 스크롤이 감지되면 수치를 백분율로\n나타내고 다른 탭을 그만큼 스크롤합니다. 이는 백그라운드 스크립트와 콘텐츠 스크립트를 활용하여 구현할\n수 있습니다.</p>\n<p>동기화를 시작할 수 없는 상황은 다음과 같습니다.</p>\n<ul>\n<li>이미 동기화 중일 때</li>\n<li>유저가 선택한 탭이 2개 미만일 때</li>\n</ul>\n<p>선택된 탭이 2개 미만일 경우 또는 이미 동기화 중이라면 버튼을 <code class=\"language-text\">disabled</code> 처리하겠습니다.</p>\n<h3 id=\"동기화-해제\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%ED%95%B4%EC%A0%9C\" aria-label=\"동기화 해제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 해제</h3>\n<p>동기화가 해제되어야 하는 상황은 다음과 같습니다.</p>\n<ul>\n<li>동기화 중일 때</li>\n<li>동기화 중인 탭이 제거되었을 때</li>\n<li>동기화 중인 탭의 URL이 변경되었을 때</li>\n</ul>\n<h3 id=\"데이터-유지\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9C%A0%EC%A7%80\" aria-label=\"데이터 유지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 유지</h3>\n<p>팝업을 껐다 켜도 데이터를 유지해야 합니다. 동기화를 시작했다면 팝업을 언제든 다시 켜도 어떤 탭이\n동기화되고 있는지 유저에게 알려주기 위한 동작을 하기 위해선 말이죠.</p>\n<p>이때 <a href=\"https://developer.chrome.com/docs/extensions/reference/storage/\">chrome.storage API</a> 를\n활용해서 데이터 및 상태를 유지할 수 있습니다. 이 API를 사용하려면 tab처럼 manifest에 <code class=\"language-text\">storage</code>\n권한을 설정해줘야 합니다.</p>\n<p>백그라운드 스크립트에서 어떤 탭들이 동기화 중인지 저장하고 가져올 수 있는 함수를 만들어 사용하면\n되겠습니다.</p>\n<h2 id=\"최적화\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%A0%81%ED%99%94\" aria-label=\"최적화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최적화</h2>\n<p>아래 코드는 스크롤 이벤트가 발생하면 scrollY의 %값을 <code class=\"language-text\">syncScroll</code> 커맨드와 함께 전달하는 함수입니다.</p>\n<p>%값으로 적용한 이유는 똑같은 내용의 글을 번역한 것이어도 언어별로 전달하는 문자의 양이 차이가\n납니다. 그러므로 스크롤한 값 그대로 적용하는 것보단 %값을 적용해 최대한 번역문과 원문 글의 문장을\n비슷하게 읽어 내려갈 수 있게끔 하기 위함입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onScrollHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Scroll event triggered'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n      window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollYPercentage <span class=\"token operator\">=</span> scrollPosition <span class=\"token operator\">/</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'Scroll event triggered, sending syncScroll message with percentage:'</span><span class=\"token punctuation\">,</span>\n      scrollYPercentage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      command<span class=\"token operator\">:</span> <span class=\"token string\">'syncScroll'</span><span class=\"token punctuation\">,</span>\n      data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in onScrollHandler: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>err<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"throttle-활용\" style=\"position:relative;\"><a href=\"#throttle-%ED%99%9C%EC%9A%A9\" aria-label=\"throttle 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Throttle 활용</h3>\n<p>위 함수를 스크롤 이벤트에 등록하고 실행을 해보면 아래 움짤처럼 굉장히 잦은 호출이 일어납니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/not-optimize.gif\" alt=\"잦은 호출 현상 예시\"></p>\n<p>저 함수의 목적은 스크롤이 발생하면 scrollY의 백분율 값을 계산해서 메시지를 보내는 것입니다. 그냥\n자연스럽게 다른 탭도 함께 스크롤 될 수 있도록 하면 되기에 이 경우, <code class=\"language-text\">throttle</code> 을 활용해서 메시지를\n적절한 타이밍에 보내도록 했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> throttle <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      timer <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/images/chrome-extension-sync-tab/throttle.gif\" alt=\"최적화 후 예시\"></p>\n<p>확실히 이제 호출이 자주 일어나지 않습니다. 하지만 움짤을 자세히 보면 또 다른 문제가 있는데요.</p>\n<p>한쪽 탭을 스크롤하면 다른 탭도 스크롤 위치를 맞추기 위해 자동으로 스크롤 됩니다. 그럼 다른 탭에서도\n스크롤이 발생하여 유저가 직접 스크롤하고 있는 탭(동기화 중인 탭)에 스크롤 위치를 맞추라는 메시지를\n보내게 됩니다. 그렇게 아래 움짤처럼 서로 스크롤을 맞추기 위해 <strong>무한 루프</strong>에 빠지게 됩니다. (받는\n쪽의 tabId를 보면 양쪽 모두 번갈아가며 스크롤 위치 데이터를 받고 스크롤 위치를 조정하고 있는 것을\n확인할 수 있습니다.)</p>\n<h3 id=\"debounce-활용\" style=\"position:relative;\"><a href=\"#debounce-%ED%99%9C%EC%9A%A9\" aria-label=\"debounce 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debounce 활용</h3>\n<p>이 문제를 개선하기 위해 선택한 탭들의 스크롤을 동일하게 맞추는 과정을 간단하게 살펴보겠습니다.</p>\n<ol>\n<li>유저가 서로 스크롤이 동기화되기 원하는 탭들을 선택하면 <code class=\"language-text\">startSync</code> 커맨드와 함께 탭의 id를 배열\n형태로 전달합니다.</li>\n<li>받은 탭의 id를 기반으로 해당 탭에 <code class=\"language-text\">startSyncTab</code> 커맨드를 전달합니다.</li>\n<li><code class=\"language-text\">startSyncTab</code> 을 전달 받으면 스크롤이 발생했을 때 scrollY의 퍼센트값을 계산해서 <code class=\"language-text\">syncScroll</code>\n커맨드를 보내는 함수(onScrollHandler)를 등록합니다.</li>\n<li><code class=\"language-text\">syncScroll</code> 을 전달 받으면 현재 스크롤 중인 탭을 제외하고 동기화 중인 모든 탭에\n<code class=\"language-text\">syncScrollForTab</code> 커맨드와 함께 scrollYPercentage 값을 전달합니다.</li>\n<li><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 <code class=\"language-text\">window.scrollTo()</code> 함수를 사용해 원하는 위치로 스크롤합니다.</li>\n</ol>\n<p>위 과정들을 거쳐 각 탭의 스크롤이 동기화 됩니다.</p>\n<p>이 문제는 <strong>사용자의 스크롤</strong>과 <code class=\"language-text\">**window.scrollTo()</code> 함수를 이용해 동작하는 스크롤**을 구별하는\n플래그 역할을 하는 변수와 <code class=\"language-text\">debounce</code> 함수를 통해 개선할 수 있습니다. 천천히 개선하는 과정을\n구현해보겠습니다.</p>\n<p>먼저, 플래그 역할을 하는 <code class=\"language-text\">scrolling</code> 변수를 선언하고 <code class=\"language-text\">false</code> 로 초기화하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">let</span> scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 스크롤 위치를 동기화하는데 여기서 <code class=\"language-text\">scrolling: true</code> 로\n설정하겠습니다. 그리고 스크롤 이벤트에 등록한 함수에 <code class=\"language-text\">scrolling: true</code> 라면 메시지를 보내지 않도록\n하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>scrolling<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Received syncScrollForTab message with data\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n    scrollYPercentage <span class=\"token operator\">*</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    top<span class=\"token operator\">:</span> scrollPosition<span class=\"token punctuation\">,</span>\n    behavior<span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>마지막으로 <code class=\"language-text\">scrolling: false</code> 로 변경하는데 이 부분에 <code class=\"language-text\">debounce</code> 를 적용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> debounce <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resetScrolling <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Scrolling reset to\"</span><span class=\"token punctuation\">,</span> scrolling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token function\">resetScrolling</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 스크롤 이벤트가 발생하게 되면 아래처럼 실행됩니다.</p>\n<p>스크롤 이벤트가 발생 → <code class=\"language-text\">syncScroll</code> 커맨드를 받아 동기화 중인 모든 탭에 <code class=\"language-text\">syncScrollForTab</code> 커맨드와\n함께 scrollYPercentage 값을 전달 → <code class=\"language-text\">scrolling: true</code> 로 설정 및 스크롤 위치 조정 후 <code class=\"language-text\">resetScrolling</code>\n함수 실행 → 스크롤 이벤트 발생 → <code class=\"language-text\">scrolling</code> 이 true이므로 동작 생략</p>\n<p>움짤로 확인해보겠습니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/flag.gif\" alt=\"모든 최적화 후 예시\"></p>\n<p>1 id를 가진 탭에서 메시지를 보내면 2 id를 가진 탭이 메시지를 받아 <code class=\"language-text\">window.scrollTo()</code> 함수를 이용해\n스크롤 위치를 동기화합니다. 반대로 2 id를 가진 탭이 메시지를 보내면 1 id를 가진 탭에서 메시지를 받아\n스크롤 위치를 동기화하는 것을 볼 수 있습니다.</p>\n<p>스크롤 위치도 자연스럽게 동기화 되고 문제가 개선되었습니다.</p>\n<h2 id=\"uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-오류-해결\" style=\"position:relative;\"><a href=\"#uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0\" aria-label=\"uncaught in promise error could not establish connection receiving end does not exist 오류 해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>‘Uncaught (in promise) Error: Could not establish connection. Receiving end does not exist.’ 오류 해결</h2>\n<h3 id=\"오류-발견\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%A5%98-%EB%B0%9C%EA%B2%AC\" aria-label=\"오류 발견 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오류 발견</h3>\n<p>처음 기획 했던 대로 기본 기능을 모두 구현했습니다. 그러나 콘솔에서 예기치 않은 오류가 발생합니다.\n디버깅을 위해 앱을 설치하고 열려있던 탭을 선택 후 동기화 시작 버튼을 누르면 에러가 발생합니다.\n그리고 탭 간 스크롤이 동기화되지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Uncaught <span class=\"token punctuation\">(</span>in promise<span class=\"token punctuation\">)</span> Error: Could not establish connection. Receiving end does not exist.</code></pre></div>\n<h3 id=\"이-오류가-발생하는-이유\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"이 오류가 발생하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류가 발생하는 이유?</h3>\n<p>이 오류는 일반적으로 백그라운드 스크립트에서 <code class=\"language-text\">chrome.tabs.sendMessage</code>메서드가 호출될 때 콘텐츠\n스크립트가 탭에 <strong>수신되지 않거나 아직 초기화되지 않은</strong> 경우에 나타납니다.</p>\n<p>특히\n<a href=\"https://groups.google.com/a/chromium.org/g/chromium-extensions/c/BH5_4OKxM3s/m/7lqiiKT9AQAJ\">Chromium-dev 그룹에 올라온 대화</a>에서\n해당 문제에 대해 명확히 파악할 수 있습니다.</p>\n<blockquote>\n<p>Content scripts declared in manifest.json or registered in chrome.scripting.registerContentScripts\nrun only when the tab is loaded or reloaded (e.g. via Ctrl-R), so when you install or update your\nextension the existing tabs don't run your new content scripts automatically in Chrome (they do in\nFirefox though), whereas the old content scripts that were running previously lose the ability to\nconnect to the extension.</p>\n</blockquote>\n<p>쉽게 설명하면 콘텐츠 스크립트를 등록하는 <code class=\"language-text\">chrome.scripting.registerContentScripts</code>는 새로고침 또는\n탭이 로드될 때만 실행됩니다. 따라서 익스텐션을 설치하기 전인 이전 탭에는 수동으로 콘텐츠 스크립트를\n등록하지 않으면 서로 메시지를 주고 받을 수 없다는 것입니다.</p>\n<p>위 설명에 따르면 익스텐션을 설치하기 전에 존재하던 탭에는 콘텐츠 스크립트가 실행되지 않습니다.\n이러한 탭으로 메시지를 보내려고 할 때 수신단(콘텐츠 스크립트)이 없으므로 오류가 발생한 것이죠.</p>\n<h3 id=\"이-오류를-어떻게-해결할-수-있을까\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EA%B2%B0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"이 오류를 어떻게 해결할 수 있을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류를 어떻게 해결할 수 있을까?</h3>\n<p>핵심은 메시지를 보내려는 탭에 콘텐츠 스크립트가 삽입되어 있어야 하는 것입니다. 콘텐츠 스크립트를\n삽입하는 방법은 아래 3가지 방법이 있겠네요.</p>\n<ol>\n<li>설치 전 열려있던 탭을 강제로 새로고침하여 콘텐츠 스크립트를 삽입합니다.</li>\n<li>익스텐션 설치 시, 콘텐츠 스크립트를 기존 탭에 삽입합니다.</li>\n<li>콘텐츠 스크립트가 필요한 작업 요청 시 콘텐츠 스크립트를 삽입합니다.</li>\n</ol>\n<p>제 생각엔 세 번째 방법이 적절할 것 같습니다. 첫 번째 방법은 사용자의 데이터가 유실될 위험이\n있습니다. 두 번째 방법은 설치하기 전에 존재했던 모든 페이지에 콘텐츠 스크립트를 적용하게 됩니다.\n어차피 사용자가 원하는 탭에 콘텐츠 스크립트를 삽입해서 메시지를 주고 받으면 됩니다. 따라서 필요한\n탭에 콘텐츠 스크립트를 삽입하는 세 번째 방법을 선택했습니다.</p>\n<h3 id=\"구현\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현</h3>\n<ol>\n<li><code class=\"language-text\">chrome.tabs.sendMessage</code>를 사용하여 메시지를 보내기 전에 <code class=\"language-text\">chrome.scripting.executeScript</code>를\n사용해 콘텐츠 스크립트를 유저가 선택한 탭에 삽입합니다.</li>\n<li>스크립트 삽입이 성공하면 메시지를 계속 전송할 수 있게 됩니다.</li>\n</ol>\n<p>간단한 코드로 살펴보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// background.ts</span>\n\nchrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>onMessage<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> sender<span class=\"token punctuation\">,</span> sendResponse<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Popup에서 'startSync' 커맨드와 함께 유저가 선택한 탭의 id들을 전달하면 여기서 받습니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> checkedTabIds<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\n    checkedTabIds<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 탭이 존재하고 접근 가능한지 확인합니다.</span>\n      chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.tabs.get: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 콘텐츠 스크립트를 해당 탭에 삽입합니다.</span>\n        chrome<span class=\"token punctuation\">.</span>scripting<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">{</span>\n            target<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> tabId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            files<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/pages/content/index.js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n                <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.scripting.executeScript: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">.</span>message<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// 주입이 성공하면 메시지를 보냅니다.</span>\n            chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n              command<span class=\"token operator\">:</span> <span class=\"token string\">\"startSyncTab\"</span><span class=\"token punctuation\">,</span>\n              data<span class=\"token operator\">:</span> tabId<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 scripting을 사용한다고 manifest의 permissions에 포함하면 됩니다.</p>\n<p>이렇게 유저가 선택한 탭에 메시지를 보내기 전에 콘텐츠 스크립트를 삽입함으로써 발생한 오류를 해결할\n수 있었습니다.</p>\n<h2 id=\"다국어-지원\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EA%B5%AD%EC%96%B4-%EC%A7%80%EC%9B%90\" aria-label=\"다국어 지원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다국어 지원</h2>\n<p>다국어를 지원하는 방법은 아주 간단합니다.</p>\n<p>로케일을 추가할 때마다 <code class=\"language-text\">_locales/_localeCode_</code> 폴더 아래에 <code class=\"language-text\">messages.json</code> 파일에 문자열을 작성하면\n됩니다. 여기서 <code class=\"language-text\">localeCode</code>는 영어의 <code class=\"language-text\">en</code>과 같은 국가코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extName\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Synchronize Tab Scrolling - 여러 탭의 스크롤 위치를 동일하게 유지\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extDescription\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"여러 탭을 선택하고 스크롤 위치를 동기화할 수 있습니다.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"startSync\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"동기화 시작\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">manifest.json</code> 에선 <code class=\"language-text\">__MSG_messagename__</code> 처럼 문자열을 작성해 적용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"__MSG_extName__\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 <code class=\"language-text\">messages.json</code> 파일의 메시지를 간편하게 사용하기 위한 함수를 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">EnMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/en/messages.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">KoMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/ko/messages.json'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">MessageKey</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> EnMessage <span class=\"token operator\">|</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> KoMessage<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">t</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> MessageKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> chrome<span class=\"token punctuation\">.</span>i18n<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>en, ko 메시지들을 가져와 문자열로 보여줍니다. 아래는 사용 예시입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> t <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@src/chrome/i18n\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Popup</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>나머지 정보들은\n<a href=\"https://developer.chrome.com/docs/extensions/reference/i18n/#how-to-support-multiple-languages\">developer.chrome: how-to-support-multiple-languages</a>\n에서 자세히 확인하실 수 있습니다.</p>",
      "%EC%B5%9C%EC%A0%81%ED%99%94#최적화": "<h2 id=\"요구-사항\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EA%B5%AC-%EC%82%AC%ED%95%AD\" aria-label=\"요구 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요구 사항</h2>\n<p>익스텐션의 기능을 먼저 정리해보겠습니다.</p>\n<ul>\n<li>탭 정보 리스트\n<ul>\n<li>열려 있는 탭을 체크 가능한 리스트 형태로 보여줘야 합니다.</li>\n<li>유저에게 제공되는 정보는 favicon과 title입니다.</li>\n<li>newTab은 리스트에 보여주지 않습니다.</li>\n<li>정렬은 브라우저에서 탭이 열려있는 순서(index 오름차순)입니다.</li>\n<li>제목이 넘친다면 한 줄 말줄임 처리합니다.</li>\n<li>탭 제목 또는 URL로 검색할 수 있도록 합니다. (대략적으로 문자열 일치 파악)</li>\n</ul>\n</li>\n<li>동기화 시작\n<ul>\n<li>2개 이상의 탭을 선택한 경우 시작할 수 있습니다.</li>\n<li>1개만 선택한 경우 버튼을 클릭할 수 없으며 가이드 메시지가 표시됩니다.</li>\n</ul>\n</li>\n<li>동기화 해제\n<ul>\n<li>동기화 중인 탭 중 하나라도 제거되면 중지됩니다.</li>\n<li>동기화 중인 탭 중 URL이 변경되면 중지됩니다.</li>\n</ul>\n</li>\n<li>데이터 유지\n<ul>\n<li>팝업을 껐다 켜도 데이터가 유지되어야 합니다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"기능-구현\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84\" aria-label=\"기능 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기능 구현</h2>\n<h3 id=\"탭-정보-리스트\" style=\"position:relative;\"><a href=\"#%ED%83%AD-%EC%A0%95%EB%B3%B4-%EB%A6%AC%EC%8A%A4%ED%8A%B8\" aria-label=\"탭 정보 리스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>탭 정보 리스트</h3>\n<p>탭의 <code class=\"language-text\">title</code>속성은 manifest에 tabs 권한이 포함된 경우에만 존재합니다. 따라서 manifest에 권한 설정이\n필요합니다.</p>\n<p><a href=\"https://developer.chrome.com/docs/extensions/reference/tabs/#method-query\">chrome.tabs API</a> 를\n이용해서 모든 탭의 정보들을 가져올 수 있습니다. newtab은 스크롤을 동기화하는 데 사용할 탭이 아니므로\n제외하고 반환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useTabList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>queryInfo<span class=\"token operator\">?</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span>QueryInfo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    queryKey<span class=\"token operator\">:</span> tabsKeys<span class=\"token punctuation\">.</span><span class=\"token function\">list</span><span class=\"token punctuation\">(</span>queryInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">queryFn</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> tabs <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>queryInfo <span class=\"token operator\">??</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// Returns \"tabs\", excluding items with URL 'chrome://newtab/'.</span>\n      <span class=\"token keyword\">return</span> tabs<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> tab<span class=\"token punctuation\">.</span>url <span class=\"token operator\">!==</span> <span class=\"token string\">'chrome://newtab/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    suspense<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>참고로 탭이 생성, 업데이트, 삭제 되었을 때 함수를 실행하고 싶다면 아래 사진의 함수를 통해\n가능합니다. 하지만 저의 목표는 원문과 번역문의 스크롤 위치를 동기화하기 원하는 저같은 사용자를 돕기\n위함입니다. 따라서 이 함수들을 이용해 구현하는 경우는 없으므로 넘어가겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 636px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVR42j2T65KjOAyFeY1u7hhfJdnGBAIhIUlP7+x01fyY93+aFemadR1cKhey5eNPmZCdBKFROq8OBdl2lTKdwV5p0csWgtJWCNF0bVOVZcOjrruu46XMapN8QgfGk/V0um7j5TqsSzglG9FvU7ieYIowJxN9b0z9d1RVlXnnb9Mtglc4GJ/m22P9+LU8/knzKsGG+xbuF9pm2hZcJxhCUzf/52edbIRtFAqI8tDQ1827srUhoayw0NGgIEjR10LURZ4fSd/pTZ0FGx6nZzSxd0njOO8/968/l8/f43lXwQ+fT/+4wraE5063C6ShKqoiL6uyYmVK9xScJQXRwWDDTJYcDgDRKichOTohnQCT06AMHKaGCZTtDclMax0pEKIhviKldaI0xvOUltmAxnOkZcDJ4xRgCiYiDGhQ9kqwDsP2aUcF0kZ+qPFyH9f9tD3n2w+pNawznCczJg5wW9w8GoSj5urltlCtME1RFCUrL/K3t/z9/TW/lWWZv+XFe87rPH+L47/J7HbXWeRnsphsOCONTrvjVhCNJR1fK5DssKALhlnyo00bceU02qwVbada9r1tD1XsZpnXTdm0zAHzVDV1xVFz/NCwuq7teo44aDKjDRumeINed0JDHFkGfNdLHbzyKBFYvbU171S9Ci75e5XtLRt2HzBoSkwYs7U8/52vdzY/Pq/+trJoO/vLrIw60Gj4/OPkAxImrIeWHw0HiUlh4sYoNHTOS2m4K3idHVEWe+4Q8JqJCDMMK2on+eSwj49ognRJQTrff14+vpbHr/X5payjx9Xfb26ZGS/aN7dMhuiwpTgcZ0hUjMSGOyYs2DgHwy3G/TR6ZRgjTRNhYlyMP5MJltILL5Q8Z0pJxgvQWs+EQZyT8xSmRMnbCHAKOCKeCEZPc+AttGMnBe/ba3GUfT89gvFctsExLTtDtn58DfMmwfn7ZqcR1vPRFUxbinVZf3dFVVX/AWMCszvKXuKYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chrome.tabs.api properties\"\n        title=\"\"\n        src=\"/static/1696468700438.0815157850153/9be90/func-list.png\"\n        srcset=\"/static/1696468700438.0815157850153/63868/func-list.png 250w,\n/static/1696468700438.0815157850153/0b533/func-list.png 500w,\n/static/1696468700438.0815157850153/9be90/func-list.png 636w\"\n        sizes=\"(max-width: 636px) 100vw, 636px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>사용 편의성을 위해 유저가 새 창을 띄우는 게 아닌, 간단한 <strong>팝업</strong>을 통해 이용할 수 있도록\n하겠습니다. <code class=\"language-text\">useTabList</code> 를 통해 받아온 데이터를 이용해 <code class=\"language-text\">popup.html</code> 파일을 작성하면 아이콘을 눌렀을\n때 나오는 팝업을 아래와 같이 구성할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 626px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOUlEQVR42o2TWY8hYRSG69oau6JQo1AUbV/SlkxsibTY9SRmjJjhh7j2q+dRnxaJmHgvTs63nP090tsLyGazuVzuJqvV2rsJKfAcwWDQ7XYXi8VGoxEOh/GiKEqhUDAMo9ls1ut1KRKJcBUxoTwgFAolk0kCxmKxTCaDNEzgsVQqSavVSlVVHtLpdOYLxh2413Wdy5skc03TRqORtN/v8dfpdNrtdq/X63a76LzxKWVCN5G6A+6i0ehyuZR2ux2RKaBSqWDWarXohPjxDKSDyWKxkLbbrSgskUho8TgxUZJ3wNFNEbqIPJ1OJRw4HI74t7ishCIJlbbRWCTPQr+1E50wUROY9Hp9aTabBYKBZuNdzeuF8fdqpcJIqoyyViuZQGdUHOk5MSkK3eVy9ft9ibqtVivOfF6v0+F0ezzM1vMlPQ9HzHw+n81mGwwG0nw+x6xYKhspbT/tMzJmSEuYhxgVwek2YcmIo+CcLMuXyNSM1/xbPqqpnV5dTyUxpC9kKDqEGU3CTIxAOIV817QtFgsHv8/ncro8Xi+5ee8kroVyq8Lv91PpJW1hTBshsywHBQSxn4HPdPsSGXrejF8EBdvt9ovxx2RhtZK27H8ZBL8ar378VJQwu/DI4UeIP6zHlWG/fu9r1epwOGQlkB8mxuMxcjKZsDoTE+KSaCwPrYI26/Vami8/NS0OjRgvu8GGQCBBKcjEsWFCXJbLZcE5sris5Pl83mw2x+Pxr4k//4X4czgcWKfT6fQPRrHKCqheT4sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tab-list\"\n        title=\"\"\n        src=\"/static/1696468700438.4026157850154/af590/tab-list.png\"\n        srcset=\"/static/1696468700438.4026157850154/63868/tab-list.png 250w,\n/static/1696468700438.4026157850154/0b533/tab-list.png 500w,\n/static/1696468700438.4026157850154/af590/tab-list.png 626w\"\n        sizes=\"(max-width: 626px) 100vw, 626px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그리고 탭이 많을 때 빠르게 찾을 수 있도록 <strong>검색 기능</strong>을 넣었습니다. 대략적인 문자열만 입력해도\n결과를 찾을 수 있는 퍼지 검색(fuzzy-search) 알고리즘을 적용하기 위해\n<a href=\"https://www.fusejs.io/\">Fuse.js</a>를 사용했습니다. 이로써 사용자가 단어 철자를 정확히 입력하지 않아도\n원하는 검색 결과를 찾을 수 있습니다.</p>\n<h3 id=\"동기화-시작\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%EC%8B%9C%EC%9E%91\" aria-label=\"동기화 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 시작</h3>\n<p>선택한 탭 id를 받아 해당 탭에 스크롤 이벤트를 등록합니다. 그리고 스크롤이 감지되면 수치를 백분율로\n나타내고 다른 탭을 그만큼 스크롤합니다. 이는 백그라운드 스크립트와 콘텐츠 스크립트를 활용하여 구현할\n수 있습니다.</p>\n<p>동기화를 시작할 수 없는 상황은 다음과 같습니다.</p>\n<ul>\n<li>이미 동기화 중일 때</li>\n<li>유저가 선택한 탭이 2개 미만일 때</li>\n</ul>\n<p>선택된 탭이 2개 미만일 경우 또는 이미 동기화 중이라면 버튼을 <code class=\"language-text\">disabled</code> 처리하겠습니다.</p>\n<h3 id=\"동기화-해제\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%ED%95%B4%EC%A0%9C\" aria-label=\"동기화 해제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 해제</h3>\n<p>동기화가 해제되어야 하는 상황은 다음과 같습니다.</p>\n<ul>\n<li>동기화 중일 때</li>\n<li>동기화 중인 탭이 제거되었을 때</li>\n<li>동기화 중인 탭의 URL이 변경되었을 때</li>\n</ul>\n<h3 id=\"데이터-유지\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9C%A0%EC%A7%80\" aria-label=\"데이터 유지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 유지</h3>\n<p>팝업을 껐다 켜도 데이터를 유지해야 합니다. 동기화를 시작했다면 팝업을 언제든 다시 켜도 어떤 탭이\n동기화되고 있는지 유저에게 알려주기 위한 동작을 하기 위해선 말이죠.</p>\n<p>이때 <a href=\"https://developer.chrome.com/docs/extensions/reference/storage/\">chrome.storage API</a> 를\n활용해서 데이터 및 상태를 유지할 수 있습니다. 이 API를 사용하려면 tab처럼 manifest에 <code class=\"language-text\">storage</code>\n권한을 설정해줘야 합니다.</p>\n<p>백그라운드 스크립트에서 어떤 탭들이 동기화 중인지 저장하고 가져올 수 있는 함수를 만들어 사용하면\n되겠습니다.</p>\n<h2 id=\"최적화\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%A0%81%ED%99%94\" aria-label=\"최적화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최적화</h2>\n<p>아래 코드는 스크롤 이벤트가 발생하면 scrollY의 %값을 <code class=\"language-text\">syncScroll</code> 커맨드와 함께 전달하는 함수입니다.</p>\n<p>%값으로 적용한 이유는 똑같은 내용의 글을 번역한 것이어도 언어별로 전달하는 문자의 양이 차이가\n납니다. 그러므로 스크롤한 값 그대로 적용하는 것보단 %값을 적용해 최대한 번역문과 원문 글의 문장을\n비슷하게 읽어 내려갈 수 있게끔 하기 위함입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onScrollHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Scroll event triggered'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n      window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollYPercentage <span class=\"token operator\">=</span> scrollPosition <span class=\"token operator\">/</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'Scroll event triggered, sending syncScroll message with percentage:'</span><span class=\"token punctuation\">,</span>\n      scrollYPercentage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      command<span class=\"token operator\">:</span> <span class=\"token string\">'syncScroll'</span><span class=\"token punctuation\">,</span>\n      data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in onScrollHandler: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>err<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"throttle-활용\" style=\"position:relative;\"><a href=\"#throttle-%ED%99%9C%EC%9A%A9\" aria-label=\"throttle 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Throttle 활용</h3>\n<p>위 함수를 스크롤 이벤트에 등록하고 실행을 해보면 아래 움짤처럼 굉장히 잦은 호출이 일어납니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/not-optimize.gif\" alt=\"잦은 호출 현상 예시\"></p>\n<p>저 함수의 목적은 스크롤이 발생하면 scrollY의 백분율 값을 계산해서 메시지를 보내는 것입니다. 그냥\n자연스럽게 다른 탭도 함께 스크롤 될 수 있도록 하면 되기에 이 경우, <code class=\"language-text\">throttle</code> 을 활용해서 메시지를\n적절한 타이밍에 보내도록 했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> throttle <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      timer <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/images/chrome-extension-sync-tab/throttle.gif\" alt=\"최적화 후 예시\"></p>\n<p>확실히 이제 호출이 자주 일어나지 않습니다. 하지만 움짤을 자세히 보면 또 다른 문제가 있는데요.</p>\n<p>한쪽 탭을 스크롤하면 다른 탭도 스크롤 위치를 맞추기 위해 자동으로 스크롤 됩니다. 그럼 다른 탭에서도\n스크롤이 발생하여 유저가 직접 스크롤하고 있는 탭(동기화 중인 탭)에 스크롤 위치를 맞추라는 메시지를\n보내게 됩니다. 그렇게 아래 움짤처럼 서로 스크롤을 맞추기 위해 <strong>무한 루프</strong>에 빠지게 됩니다. (받는\n쪽의 tabId를 보면 양쪽 모두 번갈아가며 스크롤 위치 데이터를 받고 스크롤 위치를 조정하고 있는 것을\n확인할 수 있습니다.)</p>\n<h3 id=\"debounce-활용\" style=\"position:relative;\"><a href=\"#debounce-%ED%99%9C%EC%9A%A9\" aria-label=\"debounce 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debounce 활용</h3>\n<p>이 문제를 개선하기 위해 선택한 탭들의 스크롤을 동일하게 맞추는 과정을 간단하게 살펴보겠습니다.</p>\n<ol>\n<li>유저가 서로 스크롤이 동기화되기 원하는 탭들을 선택하면 <code class=\"language-text\">startSync</code> 커맨드와 함께 탭의 id를 배열\n형태로 전달합니다.</li>\n<li>받은 탭의 id를 기반으로 해당 탭에 <code class=\"language-text\">startSyncTab</code> 커맨드를 전달합니다.</li>\n<li><code class=\"language-text\">startSyncTab</code> 을 전달 받으면 스크롤이 발생했을 때 scrollY의 퍼센트값을 계산해서 <code class=\"language-text\">syncScroll</code>\n커맨드를 보내는 함수(onScrollHandler)를 등록합니다.</li>\n<li><code class=\"language-text\">syncScroll</code> 을 전달 받으면 현재 스크롤 중인 탭을 제외하고 동기화 중인 모든 탭에\n<code class=\"language-text\">syncScrollForTab</code> 커맨드와 함께 scrollYPercentage 값을 전달합니다.</li>\n<li><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 <code class=\"language-text\">window.scrollTo()</code> 함수를 사용해 원하는 위치로 스크롤합니다.</li>\n</ol>\n<p>위 과정들을 거쳐 각 탭의 스크롤이 동기화 됩니다.</p>\n<p>이 문제는 <strong>사용자의 스크롤</strong>과 <code class=\"language-text\">**window.scrollTo()</code> 함수를 이용해 동작하는 스크롤**을 구별하는\n플래그 역할을 하는 변수와 <code class=\"language-text\">debounce</code> 함수를 통해 개선할 수 있습니다. 천천히 개선하는 과정을\n구현해보겠습니다.</p>\n<p>먼저, 플래그 역할을 하는 <code class=\"language-text\">scrolling</code> 변수를 선언하고 <code class=\"language-text\">false</code> 로 초기화하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">let</span> scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 스크롤 위치를 동기화하는데 여기서 <code class=\"language-text\">scrolling: true</code> 로\n설정하겠습니다. 그리고 스크롤 이벤트에 등록한 함수에 <code class=\"language-text\">scrolling: true</code> 라면 메시지를 보내지 않도록\n하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>scrolling<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Received syncScrollForTab message with data\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n    scrollYPercentage <span class=\"token operator\">*</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    top<span class=\"token operator\">:</span> scrollPosition<span class=\"token punctuation\">,</span>\n    behavior<span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>마지막으로 <code class=\"language-text\">scrolling: false</code> 로 변경하는데 이 부분에 <code class=\"language-text\">debounce</code> 를 적용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> debounce <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resetScrolling <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Scrolling reset to\"</span><span class=\"token punctuation\">,</span> scrolling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token function\">resetScrolling</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 스크롤 이벤트가 발생하게 되면 아래처럼 실행됩니다.</p>\n<p>스크롤 이벤트가 발생 → <code class=\"language-text\">syncScroll</code> 커맨드를 받아 동기화 중인 모든 탭에 <code class=\"language-text\">syncScrollForTab</code> 커맨드와\n함께 scrollYPercentage 값을 전달 → <code class=\"language-text\">scrolling: true</code> 로 설정 및 스크롤 위치 조정 후 <code class=\"language-text\">resetScrolling</code>\n함수 실행 → 스크롤 이벤트 발생 → <code class=\"language-text\">scrolling</code> 이 true이므로 동작 생략</p>\n<p>움짤로 확인해보겠습니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/flag.gif\" alt=\"모든 최적화 후 예시\"></p>\n<p>1 id를 가진 탭에서 메시지를 보내면 2 id를 가진 탭이 메시지를 받아 <code class=\"language-text\">window.scrollTo()</code> 함수를 이용해\n스크롤 위치를 동기화합니다. 반대로 2 id를 가진 탭이 메시지를 보내면 1 id를 가진 탭에서 메시지를 받아\n스크롤 위치를 동기화하는 것을 볼 수 있습니다.</p>\n<p>스크롤 위치도 자연스럽게 동기화 되고 문제가 개선되었습니다.</p>\n<h2 id=\"uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-오류-해결\" style=\"position:relative;\"><a href=\"#uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0\" aria-label=\"uncaught in promise error could not establish connection receiving end does not exist 오류 해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>‘Uncaught (in promise) Error: Could not establish connection. Receiving end does not exist.’ 오류 해결</h2>\n<h3 id=\"오류-발견\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%A5%98-%EB%B0%9C%EA%B2%AC\" aria-label=\"오류 발견 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오류 발견</h3>\n<p>처음 기획 했던 대로 기본 기능을 모두 구현했습니다. 그러나 콘솔에서 예기치 않은 오류가 발생합니다.\n디버깅을 위해 앱을 설치하고 열려있던 탭을 선택 후 동기화 시작 버튼을 누르면 에러가 발생합니다.\n그리고 탭 간 스크롤이 동기화되지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Uncaught <span class=\"token punctuation\">(</span>in promise<span class=\"token punctuation\">)</span> Error: Could not establish connection. Receiving end does not exist.</code></pre></div>\n<h3 id=\"이-오류가-발생하는-이유\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"이 오류가 발생하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류가 발생하는 이유?</h3>\n<p>이 오류는 일반적으로 백그라운드 스크립트에서 <code class=\"language-text\">chrome.tabs.sendMessage</code>메서드가 호출될 때 콘텐츠\n스크립트가 탭에 <strong>수신되지 않거나 아직 초기화되지 않은</strong> 경우에 나타납니다.</p>\n<p>특히\n<a href=\"https://groups.google.com/a/chromium.org/g/chromium-extensions/c/BH5_4OKxM3s/m/7lqiiKT9AQAJ\">Chromium-dev 그룹에 올라온 대화</a>에서\n해당 문제에 대해 명확히 파악할 수 있습니다.</p>\n<blockquote>\n<p>Content scripts declared in manifest.json or registered in chrome.scripting.registerContentScripts\nrun only when the tab is loaded or reloaded (e.g. via Ctrl-R), so when you install or update your\nextension the existing tabs don't run your new content scripts automatically in Chrome (they do in\nFirefox though), whereas the old content scripts that were running previously lose the ability to\nconnect to the extension.</p>\n</blockquote>\n<p>쉽게 설명하면 콘텐츠 스크립트를 등록하는 <code class=\"language-text\">chrome.scripting.registerContentScripts</code>는 새로고침 또는\n탭이 로드될 때만 실행됩니다. 따라서 익스텐션을 설치하기 전인 이전 탭에는 수동으로 콘텐츠 스크립트를\n등록하지 않으면 서로 메시지를 주고 받을 수 없다는 것입니다.</p>\n<p>위 설명에 따르면 익스텐션을 설치하기 전에 존재하던 탭에는 콘텐츠 스크립트가 실행되지 않습니다.\n이러한 탭으로 메시지를 보내려고 할 때 수신단(콘텐츠 스크립트)이 없으므로 오류가 발생한 것이죠.</p>\n<h3 id=\"이-오류를-어떻게-해결할-수-있을까\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EA%B2%B0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"이 오류를 어떻게 해결할 수 있을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류를 어떻게 해결할 수 있을까?</h3>\n<p>핵심은 메시지를 보내려는 탭에 콘텐츠 스크립트가 삽입되어 있어야 하는 것입니다. 콘텐츠 스크립트를\n삽입하는 방법은 아래 3가지 방법이 있겠네요.</p>\n<ol>\n<li>설치 전 열려있던 탭을 강제로 새로고침하여 콘텐츠 스크립트를 삽입합니다.</li>\n<li>익스텐션 설치 시, 콘텐츠 스크립트를 기존 탭에 삽입합니다.</li>\n<li>콘텐츠 스크립트가 필요한 작업 요청 시 콘텐츠 스크립트를 삽입합니다.</li>\n</ol>\n<p>제 생각엔 세 번째 방법이 적절할 것 같습니다. 첫 번째 방법은 사용자의 데이터가 유실될 위험이\n있습니다. 두 번째 방법은 설치하기 전에 존재했던 모든 페이지에 콘텐츠 스크립트를 적용하게 됩니다.\n어차피 사용자가 원하는 탭에 콘텐츠 스크립트를 삽입해서 메시지를 주고 받으면 됩니다. 따라서 필요한\n탭에 콘텐츠 스크립트를 삽입하는 세 번째 방법을 선택했습니다.</p>\n<h3 id=\"구현\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현</h3>\n<ol>\n<li><code class=\"language-text\">chrome.tabs.sendMessage</code>를 사용하여 메시지를 보내기 전에 <code class=\"language-text\">chrome.scripting.executeScript</code>를\n사용해 콘텐츠 스크립트를 유저가 선택한 탭에 삽입합니다.</li>\n<li>스크립트 삽입이 성공하면 메시지를 계속 전송할 수 있게 됩니다.</li>\n</ol>\n<p>간단한 코드로 살펴보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// background.ts</span>\n\nchrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>onMessage<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> sender<span class=\"token punctuation\">,</span> sendResponse<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Popup에서 'startSync' 커맨드와 함께 유저가 선택한 탭의 id들을 전달하면 여기서 받습니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> checkedTabIds<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\n    checkedTabIds<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 탭이 존재하고 접근 가능한지 확인합니다.</span>\n      chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.tabs.get: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 콘텐츠 스크립트를 해당 탭에 삽입합니다.</span>\n        chrome<span class=\"token punctuation\">.</span>scripting<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">{</span>\n            target<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> tabId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            files<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/pages/content/index.js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n                <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.scripting.executeScript: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">.</span>message<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// 주입이 성공하면 메시지를 보냅니다.</span>\n            chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n              command<span class=\"token operator\">:</span> <span class=\"token string\">\"startSyncTab\"</span><span class=\"token punctuation\">,</span>\n              data<span class=\"token operator\">:</span> tabId<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 scripting을 사용한다고 manifest의 permissions에 포함하면 됩니다.</p>\n<p>이렇게 유저가 선택한 탭에 메시지를 보내기 전에 콘텐츠 스크립트를 삽입함으로써 발생한 오류를 해결할\n수 있었습니다.</p>\n<h2 id=\"다국어-지원\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EA%B5%AD%EC%96%B4-%EC%A7%80%EC%9B%90\" aria-label=\"다국어 지원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다국어 지원</h2>\n<p>다국어를 지원하는 방법은 아주 간단합니다.</p>\n<p>로케일을 추가할 때마다 <code class=\"language-text\">_locales/_localeCode_</code> 폴더 아래에 <code class=\"language-text\">messages.json</code> 파일에 문자열을 작성하면\n됩니다. 여기서 <code class=\"language-text\">localeCode</code>는 영어의 <code class=\"language-text\">en</code>과 같은 국가코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extName\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Synchronize Tab Scrolling - 여러 탭의 스크롤 위치를 동일하게 유지\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extDescription\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"여러 탭을 선택하고 스크롤 위치를 동기화할 수 있습니다.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"startSync\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"동기화 시작\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">manifest.json</code> 에선 <code class=\"language-text\">__MSG_messagename__</code> 처럼 문자열을 작성해 적용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"__MSG_extName__\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 <code class=\"language-text\">messages.json</code> 파일의 메시지를 간편하게 사용하기 위한 함수를 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">EnMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/en/messages.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">KoMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/ko/messages.json'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">MessageKey</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> EnMessage <span class=\"token operator\">|</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> KoMessage<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">t</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> MessageKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> chrome<span class=\"token punctuation\">.</span>i18n<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>en, ko 메시지들을 가져와 문자열로 보여줍니다. 아래는 사용 예시입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> t <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@src/chrome/i18n\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Popup</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>나머지 정보들은\n<a href=\"https://developer.chrome.com/docs/extensions/reference/i18n/#how-to-support-multiple-languages\">developer.chrome: how-to-support-multiple-languages</a>\n에서 자세히 확인하실 수 있습니다.</p>",
      "throttle-%ED%99%9C%EC%9A%A9#Throttle 활용": "<h2 id=\"요구-사항\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EA%B5%AC-%EC%82%AC%ED%95%AD\" aria-label=\"요구 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요구 사항</h2>\n<p>익스텐션의 기능을 먼저 정리해보겠습니다.</p>\n<ul>\n<li>탭 정보 리스트\n<ul>\n<li>열려 있는 탭을 체크 가능한 리스트 형태로 보여줘야 합니다.</li>\n<li>유저에게 제공되는 정보는 favicon과 title입니다.</li>\n<li>newTab은 리스트에 보여주지 않습니다.</li>\n<li>정렬은 브라우저에서 탭이 열려있는 순서(index 오름차순)입니다.</li>\n<li>제목이 넘친다면 한 줄 말줄임 처리합니다.</li>\n<li>탭 제목 또는 URL로 검색할 수 있도록 합니다. (대략적으로 문자열 일치 파악)</li>\n</ul>\n</li>\n<li>동기화 시작\n<ul>\n<li>2개 이상의 탭을 선택한 경우 시작할 수 있습니다.</li>\n<li>1개만 선택한 경우 버튼을 클릭할 수 없으며 가이드 메시지가 표시됩니다.</li>\n</ul>\n</li>\n<li>동기화 해제\n<ul>\n<li>동기화 중인 탭 중 하나라도 제거되면 중지됩니다.</li>\n<li>동기화 중인 탭 중 URL이 변경되면 중지됩니다.</li>\n</ul>\n</li>\n<li>데이터 유지\n<ul>\n<li>팝업을 껐다 켜도 데이터가 유지되어야 합니다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"기능-구현\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84\" aria-label=\"기능 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기능 구현</h2>\n<h3 id=\"탭-정보-리스트\" style=\"position:relative;\"><a href=\"#%ED%83%AD-%EC%A0%95%EB%B3%B4-%EB%A6%AC%EC%8A%A4%ED%8A%B8\" aria-label=\"탭 정보 리스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>탭 정보 리스트</h3>\n<p>탭의 <code class=\"language-text\">title</code>속성은 manifest에 tabs 권한이 포함된 경우에만 존재합니다. 따라서 manifest에 권한 설정이\n필요합니다.</p>\n<p><a href=\"https://developer.chrome.com/docs/extensions/reference/tabs/#method-query\">chrome.tabs API</a> 를\n이용해서 모든 탭의 정보들을 가져올 수 있습니다. newtab은 스크롤을 동기화하는 데 사용할 탭이 아니므로\n제외하고 반환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useTabList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>queryInfo<span class=\"token operator\">?</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span>QueryInfo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    queryKey<span class=\"token operator\">:</span> tabsKeys<span class=\"token punctuation\">.</span><span class=\"token function\">list</span><span class=\"token punctuation\">(</span>queryInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">queryFn</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> tabs <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>queryInfo <span class=\"token operator\">??</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// Returns \"tabs\", excluding items with URL 'chrome://newtab/'.</span>\n      <span class=\"token keyword\">return</span> tabs<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> tab<span class=\"token punctuation\">.</span>url <span class=\"token operator\">!==</span> <span class=\"token string\">'chrome://newtab/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    suspense<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>참고로 탭이 생성, 업데이트, 삭제 되었을 때 함수를 실행하고 싶다면 아래 사진의 함수를 통해\n가능합니다. 하지만 저의 목표는 원문과 번역문의 스크롤 위치를 동기화하기 원하는 저같은 사용자를 돕기\n위함입니다. 따라서 이 함수들을 이용해 구현하는 경우는 없으므로 넘어가겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 636px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVR42j2T65KjOAyFeY1u7hhfJdnGBAIhIUlP7+x01fyY93+aFemadR1cKhey5eNPmZCdBKFROq8OBdl2lTKdwV5p0csWgtJWCNF0bVOVZcOjrruu46XMapN8QgfGk/V0um7j5TqsSzglG9FvU7ieYIowJxN9b0z9d1RVlXnnb9Mtglc4GJ/m22P9+LU8/knzKsGG+xbuF9pm2hZcJxhCUzf/52edbIRtFAqI8tDQ1827srUhoayw0NGgIEjR10LURZ4fSd/pTZ0FGx6nZzSxd0njOO8/968/l8/f43lXwQ+fT/+4wraE5063C6ShKqoiL6uyYmVK9xScJQXRwWDDTJYcDgDRKichOTohnQCT06AMHKaGCZTtDclMax0pEKIhviKldaI0xvOUltmAxnOkZcDJ4xRgCiYiDGhQ9kqwDsP2aUcF0kZ+qPFyH9f9tD3n2w+pNawznCczJg5wW9w8GoSj5urltlCtME1RFCUrL/K3t/z9/TW/lWWZv+XFe87rPH+L47/J7HbXWeRnsphsOCONTrvjVhCNJR1fK5DssKALhlnyo00bceU02qwVbada9r1tD1XsZpnXTdm0zAHzVDV1xVFz/NCwuq7teo44aDKjDRumeINed0JDHFkGfNdLHbzyKBFYvbU171S9Ci75e5XtLRt2HzBoSkwYs7U8/52vdzY/Pq/+trJoO/vLrIw60Gj4/OPkAxImrIeWHw0HiUlh4sYoNHTOS2m4K3idHVEWe+4Q8JqJCDMMK2on+eSwj49ognRJQTrff14+vpbHr/X5payjx9Xfb26ZGS/aN7dMhuiwpTgcZ0hUjMSGOyYs2DgHwy3G/TR6ZRgjTRNhYlyMP5MJltILL5Q8Z0pJxgvQWs+EQZyT8xSmRMnbCHAKOCKeCEZPc+AttGMnBe/ba3GUfT89gvFctsExLTtDtn58DfMmwfn7ZqcR1vPRFUxbinVZf3dFVVX/AWMCszvKXuKYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chrome.tabs.api properties\"\n        title=\"\"\n        src=\"/static/1696468700438.0815157850153/9be90/func-list.png\"\n        srcset=\"/static/1696468700438.0815157850153/63868/func-list.png 250w,\n/static/1696468700438.0815157850153/0b533/func-list.png 500w,\n/static/1696468700438.0815157850153/9be90/func-list.png 636w\"\n        sizes=\"(max-width: 636px) 100vw, 636px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>사용 편의성을 위해 유저가 새 창을 띄우는 게 아닌, 간단한 <strong>팝업</strong>을 통해 이용할 수 있도록\n하겠습니다. <code class=\"language-text\">useTabList</code> 를 통해 받아온 데이터를 이용해 <code class=\"language-text\">popup.html</code> 파일을 작성하면 아이콘을 눌렀을\n때 나오는 팝업을 아래와 같이 구성할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 626px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOUlEQVR42o2TWY8hYRSG69oau6JQo1AUbV/SlkxsibTY9SRmjJjhh7j2q+dRnxaJmHgvTs63nP090tsLyGazuVzuJqvV2rsJKfAcwWDQ7XYXi8VGoxEOh/GiKEqhUDAMo9ls1ut1KRKJcBUxoTwgFAolk0kCxmKxTCaDNEzgsVQqSavVSlVVHtLpdOYLxh2413Wdy5skc03TRqORtN/v8dfpdNrtdq/X63a76LzxKWVCN5G6A+6i0ehyuZR2ux2RKaBSqWDWarXohPjxDKSDyWKxkLbbrSgskUho8TgxUZJ3wNFNEbqIPJ1OJRw4HI74t7ishCIJlbbRWCTPQr+1E50wUROY9Hp9aTabBYKBZuNdzeuF8fdqpcJIqoyyViuZQGdUHOk5MSkK3eVy9ft9ibqtVivOfF6v0+F0ezzM1vMlPQ9HzHw+n81mGwwG0nw+x6xYKhspbT/tMzJmSEuYhxgVwek2YcmIo+CcLMuXyNSM1/xbPqqpnV5dTyUxpC9kKDqEGU3CTIxAOIV817QtFgsHv8/ncro8Xi+5ee8kroVyq8Lv91PpJW1hTBshsywHBQSxn4HPdPsSGXrejF8EBdvt9ovxx2RhtZK27H8ZBL8ar378VJQwu/DI4UeIP6zHlWG/fu9r1epwOGQlkB8mxuMxcjKZsDoTE+KSaCwPrYI26/Vami8/NS0OjRgvu8GGQCBBKcjEsWFCXJbLZcE5sris5Pl83mw2x+Pxr4k//4X4czgcWKfT6fQPRrHKCqheT4sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tab-list\"\n        title=\"\"\n        src=\"/static/1696468700438.4026157850154/af590/tab-list.png\"\n        srcset=\"/static/1696468700438.4026157850154/63868/tab-list.png 250w,\n/static/1696468700438.4026157850154/0b533/tab-list.png 500w,\n/static/1696468700438.4026157850154/af590/tab-list.png 626w\"\n        sizes=\"(max-width: 626px) 100vw, 626px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그리고 탭이 많을 때 빠르게 찾을 수 있도록 <strong>검색 기능</strong>을 넣었습니다. 대략적인 문자열만 입력해도\n결과를 찾을 수 있는 퍼지 검색(fuzzy-search) 알고리즘을 적용하기 위해\n<a href=\"https://www.fusejs.io/\">Fuse.js</a>를 사용했습니다. 이로써 사용자가 단어 철자를 정확히 입력하지 않아도\n원하는 검색 결과를 찾을 수 있습니다.</p>\n<h3 id=\"동기화-시작\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%EC%8B%9C%EC%9E%91\" aria-label=\"동기화 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 시작</h3>\n<p>선택한 탭 id를 받아 해당 탭에 스크롤 이벤트를 등록합니다. 그리고 스크롤이 감지되면 수치를 백분율로\n나타내고 다른 탭을 그만큼 스크롤합니다. 이는 백그라운드 스크립트와 콘텐츠 스크립트를 활용하여 구현할\n수 있습니다.</p>\n<p>동기화를 시작할 수 없는 상황은 다음과 같습니다.</p>\n<ul>\n<li>이미 동기화 중일 때</li>\n<li>유저가 선택한 탭이 2개 미만일 때</li>\n</ul>\n<p>선택된 탭이 2개 미만일 경우 또는 이미 동기화 중이라면 버튼을 <code class=\"language-text\">disabled</code> 처리하겠습니다.</p>\n<h3 id=\"동기화-해제\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%ED%95%B4%EC%A0%9C\" aria-label=\"동기화 해제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 해제</h3>\n<p>동기화가 해제되어야 하는 상황은 다음과 같습니다.</p>\n<ul>\n<li>동기화 중일 때</li>\n<li>동기화 중인 탭이 제거되었을 때</li>\n<li>동기화 중인 탭의 URL이 변경되었을 때</li>\n</ul>\n<h3 id=\"데이터-유지\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9C%A0%EC%A7%80\" aria-label=\"데이터 유지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 유지</h3>\n<p>팝업을 껐다 켜도 데이터를 유지해야 합니다. 동기화를 시작했다면 팝업을 언제든 다시 켜도 어떤 탭이\n동기화되고 있는지 유저에게 알려주기 위한 동작을 하기 위해선 말이죠.</p>\n<p>이때 <a href=\"https://developer.chrome.com/docs/extensions/reference/storage/\">chrome.storage API</a> 를\n활용해서 데이터 및 상태를 유지할 수 있습니다. 이 API를 사용하려면 tab처럼 manifest에 <code class=\"language-text\">storage</code>\n권한을 설정해줘야 합니다.</p>\n<p>백그라운드 스크립트에서 어떤 탭들이 동기화 중인지 저장하고 가져올 수 있는 함수를 만들어 사용하면\n되겠습니다.</p>\n<h2 id=\"최적화\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%A0%81%ED%99%94\" aria-label=\"최적화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최적화</h2>\n<p>아래 코드는 스크롤 이벤트가 발생하면 scrollY의 %값을 <code class=\"language-text\">syncScroll</code> 커맨드와 함께 전달하는 함수입니다.</p>\n<p>%값으로 적용한 이유는 똑같은 내용의 글을 번역한 것이어도 언어별로 전달하는 문자의 양이 차이가\n납니다. 그러므로 스크롤한 값 그대로 적용하는 것보단 %값을 적용해 최대한 번역문과 원문 글의 문장을\n비슷하게 읽어 내려갈 수 있게끔 하기 위함입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onScrollHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Scroll event triggered'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n      window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollYPercentage <span class=\"token operator\">=</span> scrollPosition <span class=\"token operator\">/</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'Scroll event triggered, sending syncScroll message with percentage:'</span><span class=\"token punctuation\">,</span>\n      scrollYPercentage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      command<span class=\"token operator\">:</span> <span class=\"token string\">'syncScroll'</span><span class=\"token punctuation\">,</span>\n      data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in onScrollHandler: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>err<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"throttle-활용\" style=\"position:relative;\"><a href=\"#throttle-%ED%99%9C%EC%9A%A9\" aria-label=\"throttle 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Throttle 활용</h3>\n<p>위 함수를 스크롤 이벤트에 등록하고 실행을 해보면 아래 움짤처럼 굉장히 잦은 호출이 일어납니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/not-optimize.gif\" alt=\"잦은 호출 현상 예시\"></p>\n<p>저 함수의 목적은 스크롤이 발생하면 scrollY의 백분율 값을 계산해서 메시지를 보내는 것입니다. 그냥\n자연스럽게 다른 탭도 함께 스크롤 될 수 있도록 하면 되기에 이 경우, <code class=\"language-text\">throttle</code> 을 활용해서 메시지를\n적절한 타이밍에 보내도록 했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> throttle <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      timer <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/images/chrome-extension-sync-tab/throttle.gif\" alt=\"최적화 후 예시\"></p>\n<p>확실히 이제 호출이 자주 일어나지 않습니다. 하지만 움짤을 자세히 보면 또 다른 문제가 있는데요.</p>\n<p>한쪽 탭을 스크롤하면 다른 탭도 스크롤 위치를 맞추기 위해 자동으로 스크롤 됩니다. 그럼 다른 탭에서도\n스크롤이 발생하여 유저가 직접 스크롤하고 있는 탭(동기화 중인 탭)에 스크롤 위치를 맞추라는 메시지를\n보내게 됩니다. 그렇게 아래 움짤처럼 서로 스크롤을 맞추기 위해 <strong>무한 루프</strong>에 빠지게 됩니다. (받는\n쪽의 tabId를 보면 양쪽 모두 번갈아가며 스크롤 위치 데이터를 받고 스크롤 위치를 조정하고 있는 것을\n확인할 수 있습니다.)</p>\n<h3 id=\"debounce-활용\" style=\"position:relative;\"><a href=\"#debounce-%ED%99%9C%EC%9A%A9\" aria-label=\"debounce 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debounce 활용</h3>\n<p>이 문제를 개선하기 위해 선택한 탭들의 스크롤을 동일하게 맞추는 과정을 간단하게 살펴보겠습니다.</p>\n<ol>\n<li>유저가 서로 스크롤이 동기화되기 원하는 탭들을 선택하면 <code class=\"language-text\">startSync</code> 커맨드와 함께 탭의 id를 배열\n형태로 전달합니다.</li>\n<li>받은 탭의 id를 기반으로 해당 탭에 <code class=\"language-text\">startSyncTab</code> 커맨드를 전달합니다.</li>\n<li><code class=\"language-text\">startSyncTab</code> 을 전달 받으면 스크롤이 발생했을 때 scrollY의 퍼센트값을 계산해서 <code class=\"language-text\">syncScroll</code>\n커맨드를 보내는 함수(onScrollHandler)를 등록합니다.</li>\n<li><code class=\"language-text\">syncScroll</code> 을 전달 받으면 현재 스크롤 중인 탭을 제외하고 동기화 중인 모든 탭에\n<code class=\"language-text\">syncScrollForTab</code> 커맨드와 함께 scrollYPercentage 값을 전달합니다.</li>\n<li><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 <code class=\"language-text\">window.scrollTo()</code> 함수를 사용해 원하는 위치로 스크롤합니다.</li>\n</ol>\n<p>위 과정들을 거쳐 각 탭의 스크롤이 동기화 됩니다.</p>\n<p>이 문제는 <strong>사용자의 스크롤</strong>과 <code class=\"language-text\">**window.scrollTo()</code> 함수를 이용해 동작하는 스크롤**을 구별하는\n플래그 역할을 하는 변수와 <code class=\"language-text\">debounce</code> 함수를 통해 개선할 수 있습니다. 천천히 개선하는 과정을\n구현해보겠습니다.</p>\n<p>먼저, 플래그 역할을 하는 <code class=\"language-text\">scrolling</code> 변수를 선언하고 <code class=\"language-text\">false</code> 로 초기화하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">let</span> scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 스크롤 위치를 동기화하는데 여기서 <code class=\"language-text\">scrolling: true</code> 로\n설정하겠습니다. 그리고 스크롤 이벤트에 등록한 함수에 <code class=\"language-text\">scrolling: true</code> 라면 메시지를 보내지 않도록\n하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>scrolling<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Received syncScrollForTab message with data\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n    scrollYPercentage <span class=\"token operator\">*</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    top<span class=\"token operator\">:</span> scrollPosition<span class=\"token punctuation\">,</span>\n    behavior<span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>마지막으로 <code class=\"language-text\">scrolling: false</code> 로 변경하는데 이 부분에 <code class=\"language-text\">debounce</code> 를 적용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> debounce <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resetScrolling <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Scrolling reset to\"</span><span class=\"token punctuation\">,</span> scrolling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token function\">resetScrolling</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 스크롤 이벤트가 발생하게 되면 아래처럼 실행됩니다.</p>\n<p>스크롤 이벤트가 발생 → <code class=\"language-text\">syncScroll</code> 커맨드를 받아 동기화 중인 모든 탭에 <code class=\"language-text\">syncScrollForTab</code> 커맨드와\n함께 scrollYPercentage 값을 전달 → <code class=\"language-text\">scrolling: true</code> 로 설정 및 스크롤 위치 조정 후 <code class=\"language-text\">resetScrolling</code>\n함수 실행 → 스크롤 이벤트 발생 → <code class=\"language-text\">scrolling</code> 이 true이므로 동작 생략</p>\n<p>움짤로 확인해보겠습니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/flag.gif\" alt=\"모든 최적화 후 예시\"></p>\n<p>1 id를 가진 탭에서 메시지를 보내면 2 id를 가진 탭이 메시지를 받아 <code class=\"language-text\">window.scrollTo()</code> 함수를 이용해\n스크롤 위치를 동기화합니다. 반대로 2 id를 가진 탭이 메시지를 보내면 1 id를 가진 탭에서 메시지를 받아\n스크롤 위치를 동기화하는 것을 볼 수 있습니다.</p>\n<p>스크롤 위치도 자연스럽게 동기화 되고 문제가 개선되었습니다.</p>\n<h2 id=\"uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-오류-해결\" style=\"position:relative;\"><a href=\"#uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0\" aria-label=\"uncaught in promise error could not establish connection receiving end does not exist 오류 해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>‘Uncaught (in promise) Error: Could not establish connection. Receiving end does not exist.’ 오류 해결</h2>\n<h3 id=\"오류-발견\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%A5%98-%EB%B0%9C%EA%B2%AC\" aria-label=\"오류 발견 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오류 발견</h3>\n<p>처음 기획 했던 대로 기본 기능을 모두 구현했습니다. 그러나 콘솔에서 예기치 않은 오류가 발생합니다.\n디버깅을 위해 앱을 설치하고 열려있던 탭을 선택 후 동기화 시작 버튼을 누르면 에러가 발생합니다.\n그리고 탭 간 스크롤이 동기화되지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Uncaught <span class=\"token punctuation\">(</span>in promise<span class=\"token punctuation\">)</span> Error: Could not establish connection. Receiving end does not exist.</code></pre></div>\n<h3 id=\"이-오류가-발생하는-이유\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"이 오류가 발생하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류가 발생하는 이유?</h3>\n<p>이 오류는 일반적으로 백그라운드 스크립트에서 <code class=\"language-text\">chrome.tabs.sendMessage</code>메서드가 호출될 때 콘텐츠\n스크립트가 탭에 <strong>수신되지 않거나 아직 초기화되지 않은</strong> 경우에 나타납니다.</p>\n<p>특히\n<a href=\"https://groups.google.com/a/chromium.org/g/chromium-extensions/c/BH5_4OKxM3s/m/7lqiiKT9AQAJ\">Chromium-dev 그룹에 올라온 대화</a>에서\n해당 문제에 대해 명확히 파악할 수 있습니다.</p>\n<blockquote>\n<p>Content scripts declared in manifest.json or registered in chrome.scripting.registerContentScripts\nrun only when the tab is loaded or reloaded (e.g. via Ctrl-R), so when you install or update your\nextension the existing tabs don't run your new content scripts automatically in Chrome (they do in\nFirefox though), whereas the old content scripts that were running previously lose the ability to\nconnect to the extension.</p>\n</blockquote>\n<p>쉽게 설명하면 콘텐츠 스크립트를 등록하는 <code class=\"language-text\">chrome.scripting.registerContentScripts</code>는 새로고침 또는\n탭이 로드될 때만 실행됩니다. 따라서 익스텐션을 설치하기 전인 이전 탭에는 수동으로 콘텐츠 스크립트를\n등록하지 않으면 서로 메시지를 주고 받을 수 없다는 것입니다.</p>\n<p>위 설명에 따르면 익스텐션을 설치하기 전에 존재하던 탭에는 콘텐츠 스크립트가 실행되지 않습니다.\n이러한 탭으로 메시지를 보내려고 할 때 수신단(콘텐츠 스크립트)이 없으므로 오류가 발생한 것이죠.</p>\n<h3 id=\"이-오류를-어떻게-해결할-수-있을까\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EA%B2%B0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"이 오류를 어떻게 해결할 수 있을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류를 어떻게 해결할 수 있을까?</h3>\n<p>핵심은 메시지를 보내려는 탭에 콘텐츠 스크립트가 삽입되어 있어야 하는 것입니다. 콘텐츠 스크립트를\n삽입하는 방법은 아래 3가지 방법이 있겠네요.</p>\n<ol>\n<li>설치 전 열려있던 탭을 강제로 새로고침하여 콘텐츠 스크립트를 삽입합니다.</li>\n<li>익스텐션 설치 시, 콘텐츠 스크립트를 기존 탭에 삽입합니다.</li>\n<li>콘텐츠 스크립트가 필요한 작업 요청 시 콘텐츠 스크립트를 삽입합니다.</li>\n</ol>\n<p>제 생각엔 세 번째 방법이 적절할 것 같습니다. 첫 번째 방법은 사용자의 데이터가 유실될 위험이\n있습니다. 두 번째 방법은 설치하기 전에 존재했던 모든 페이지에 콘텐츠 스크립트를 적용하게 됩니다.\n어차피 사용자가 원하는 탭에 콘텐츠 스크립트를 삽입해서 메시지를 주고 받으면 됩니다. 따라서 필요한\n탭에 콘텐츠 스크립트를 삽입하는 세 번째 방법을 선택했습니다.</p>\n<h3 id=\"구현\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현</h3>\n<ol>\n<li><code class=\"language-text\">chrome.tabs.sendMessage</code>를 사용하여 메시지를 보내기 전에 <code class=\"language-text\">chrome.scripting.executeScript</code>를\n사용해 콘텐츠 스크립트를 유저가 선택한 탭에 삽입합니다.</li>\n<li>스크립트 삽입이 성공하면 메시지를 계속 전송할 수 있게 됩니다.</li>\n</ol>\n<p>간단한 코드로 살펴보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// background.ts</span>\n\nchrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>onMessage<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> sender<span class=\"token punctuation\">,</span> sendResponse<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Popup에서 'startSync' 커맨드와 함께 유저가 선택한 탭의 id들을 전달하면 여기서 받습니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> checkedTabIds<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\n    checkedTabIds<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 탭이 존재하고 접근 가능한지 확인합니다.</span>\n      chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.tabs.get: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 콘텐츠 스크립트를 해당 탭에 삽입합니다.</span>\n        chrome<span class=\"token punctuation\">.</span>scripting<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">{</span>\n            target<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> tabId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            files<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/pages/content/index.js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n                <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.scripting.executeScript: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">.</span>message<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// 주입이 성공하면 메시지를 보냅니다.</span>\n            chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n              command<span class=\"token operator\">:</span> <span class=\"token string\">\"startSyncTab\"</span><span class=\"token punctuation\">,</span>\n              data<span class=\"token operator\">:</span> tabId<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 scripting을 사용한다고 manifest의 permissions에 포함하면 됩니다.</p>\n<p>이렇게 유저가 선택한 탭에 메시지를 보내기 전에 콘텐츠 스크립트를 삽입함으로써 발생한 오류를 해결할\n수 있었습니다.</p>\n<h2 id=\"다국어-지원\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EA%B5%AD%EC%96%B4-%EC%A7%80%EC%9B%90\" aria-label=\"다국어 지원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다국어 지원</h2>\n<p>다국어를 지원하는 방법은 아주 간단합니다.</p>\n<p>로케일을 추가할 때마다 <code class=\"language-text\">_locales/_localeCode_</code> 폴더 아래에 <code class=\"language-text\">messages.json</code> 파일에 문자열을 작성하면\n됩니다. 여기서 <code class=\"language-text\">localeCode</code>는 영어의 <code class=\"language-text\">en</code>과 같은 국가코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extName\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Synchronize Tab Scrolling - 여러 탭의 스크롤 위치를 동일하게 유지\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extDescription\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"여러 탭을 선택하고 스크롤 위치를 동기화할 수 있습니다.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"startSync\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"동기화 시작\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">manifest.json</code> 에선 <code class=\"language-text\">__MSG_messagename__</code> 처럼 문자열을 작성해 적용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"__MSG_extName__\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 <code class=\"language-text\">messages.json</code> 파일의 메시지를 간편하게 사용하기 위한 함수를 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">EnMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/en/messages.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">KoMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/ko/messages.json'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">MessageKey</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> EnMessage <span class=\"token operator\">|</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> KoMessage<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">t</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> MessageKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> chrome<span class=\"token punctuation\">.</span>i18n<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>en, ko 메시지들을 가져와 문자열로 보여줍니다. 아래는 사용 예시입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> t <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@src/chrome/i18n\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Popup</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>나머지 정보들은\n<a href=\"https://developer.chrome.com/docs/extensions/reference/i18n/#how-to-support-multiple-languages\">developer.chrome: how-to-support-multiple-languages</a>\n에서 자세히 확인하실 수 있습니다.</p>",
      "debounce-%ED%99%9C%EC%9A%A9#Debounce 활용": "<h2 id=\"요구-사항\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EA%B5%AC-%EC%82%AC%ED%95%AD\" aria-label=\"요구 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요구 사항</h2>\n<p>익스텐션의 기능을 먼저 정리해보겠습니다.</p>\n<ul>\n<li>탭 정보 리스트\n<ul>\n<li>열려 있는 탭을 체크 가능한 리스트 형태로 보여줘야 합니다.</li>\n<li>유저에게 제공되는 정보는 favicon과 title입니다.</li>\n<li>newTab은 리스트에 보여주지 않습니다.</li>\n<li>정렬은 브라우저에서 탭이 열려있는 순서(index 오름차순)입니다.</li>\n<li>제목이 넘친다면 한 줄 말줄임 처리합니다.</li>\n<li>탭 제목 또는 URL로 검색할 수 있도록 합니다. (대략적으로 문자열 일치 파악)</li>\n</ul>\n</li>\n<li>동기화 시작\n<ul>\n<li>2개 이상의 탭을 선택한 경우 시작할 수 있습니다.</li>\n<li>1개만 선택한 경우 버튼을 클릭할 수 없으며 가이드 메시지가 표시됩니다.</li>\n</ul>\n</li>\n<li>동기화 해제\n<ul>\n<li>동기화 중인 탭 중 하나라도 제거되면 중지됩니다.</li>\n<li>동기화 중인 탭 중 URL이 변경되면 중지됩니다.</li>\n</ul>\n</li>\n<li>데이터 유지\n<ul>\n<li>팝업을 껐다 켜도 데이터가 유지되어야 합니다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"기능-구현\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84\" aria-label=\"기능 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기능 구현</h2>\n<h3 id=\"탭-정보-리스트\" style=\"position:relative;\"><a href=\"#%ED%83%AD-%EC%A0%95%EB%B3%B4-%EB%A6%AC%EC%8A%A4%ED%8A%B8\" aria-label=\"탭 정보 리스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>탭 정보 리스트</h3>\n<p>탭의 <code class=\"language-text\">title</code>속성은 manifest에 tabs 권한이 포함된 경우에만 존재합니다. 따라서 manifest에 권한 설정이\n필요합니다.</p>\n<p><a href=\"https://developer.chrome.com/docs/extensions/reference/tabs/#method-query\">chrome.tabs API</a> 를\n이용해서 모든 탭의 정보들을 가져올 수 있습니다. newtab은 스크롤을 동기화하는 데 사용할 탭이 아니므로\n제외하고 반환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useTabList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>queryInfo<span class=\"token operator\">?</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span>QueryInfo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    queryKey<span class=\"token operator\">:</span> tabsKeys<span class=\"token punctuation\">.</span><span class=\"token function\">list</span><span class=\"token punctuation\">(</span>queryInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">queryFn</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> tabs <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>queryInfo <span class=\"token operator\">??</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// Returns \"tabs\", excluding items with URL 'chrome://newtab/'.</span>\n      <span class=\"token keyword\">return</span> tabs<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> tab<span class=\"token punctuation\">.</span>url <span class=\"token operator\">!==</span> <span class=\"token string\">'chrome://newtab/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    suspense<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>참고로 탭이 생성, 업데이트, 삭제 되었을 때 함수를 실행하고 싶다면 아래 사진의 함수를 통해\n가능합니다. 하지만 저의 목표는 원문과 번역문의 스크롤 위치를 동기화하기 원하는 저같은 사용자를 돕기\n위함입니다. 따라서 이 함수들을 이용해 구현하는 경우는 없으므로 넘어가겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 636px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVR42j2T65KjOAyFeY1u7hhfJdnGBAIhIUlP7+x01fyY93+aFemadR1cKhey5eNPmZCdBKFROq8OBdl2lTKdwV5p0csWgtJWCNF0bVOVZcOjrruu46XMapN8QgfGk/V0um7j5TqsSzglG9FvU7ieYIowJxN9b0z9d1RVlXnnb9Mtglc4GJ/m22P9+LU8/knzKsGG+xbuF9pm2hZcJxhCUzf/52edbIRtFAqI8tDQ1827srUhoayw0NGgIEjR10LURZ4fSd/pTZ0FGx6nZzSxd0njOO8/968/l8/f43lXwQ+fT/+4wraE5063C6ShKqoiL6uyYmVK9xScJQXRwWDDTJYcDgDRKichOTohnQCT06AMHKaGCZTtDclMax0pEKIhviKldaI0xvOUltmAxnOkZcDJ4xRgCiYiDGhQ9kqwDsP2aUcF0kZ+qPFyH9f9tD3n2w+pNawznCczJg5wW9w8GoSj5urltlCtME1RFCUrL/K3t/z9/TW/lWWZv+XFe87rPH+L47/J7HbXWeRnsphsOCONTrvjVhCNJR1fK5DssKALhlnyo00bceU02qwVbada9r1tD1XsZpnXTdm0zAHzVDV1xVFz/NCwuq7teo44aDKjDRumeINed0JDHFkGfNdLHbzyKBFYvbU171S9Ci75e5XtLRt2HzBoSkwYs7U8/52vdzY/Pq/+trJoO/vLrIw60Gj4/OPkAxImrIeWHw0HiUlh4sYoNHTOS2m4K3idHVEWe+4Q8JqJCDMMK2on+eSwj49ognRJQTrff14+vpbHr/X5payjx9Xfb26ZGS/aN7dMhuiwpTgcZ0hUjMSGOyYs2DgHwy3G/TR6ZRgjTRNhYlyMP5MJltILL5Q8Z0pJxgvQWs+EQZyT8xSmRMnbCHAKOCKeCEZPc+AttGMnBe/ba3GUfT89gvFctsExLTtDtn58DfMmwfn7ZqcR1vPRFUxbinVZf3dFVVX/AWMCszvKXuKYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chrome.tabs.api properties\"\n        title=\"\"\n        src=\"/static/1696468700438.0815157850153/9be90/func-list.png\"\n        srcset=\"/static/1696468700438.0815157850153/63868/func-list.png 250w,\n/static/1696468700438.0815157850153/0b533/func-list.png 500w,\n/static/1696468700438.0815157850153/9be90/func-list.png 636w\"\n        sizes=\"(max-width: 636px) 100vw, 636px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>사용 편의성을 위해 유저가 새 창을 띄우는 게 아닌, 간단한 <strong>팝업</strong>을 통해 이용할 수 있도록\n하겠습니다. <code class=\"language-text\">useTabList</code> 를 통해 받아온 데이터를 이용해 <code class=\"language-text\">popup.html</code> 파일을 작성하면 아이콘을 눌렀을\n때 나오는 팝업을 아래와 같이 구성할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 626px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOUlEQVR42o2TWY8hYRSG69oau6JQo1AUbV/SlkxsibTY9SRmjJjhh7j2q+dRnxaJmHgvTs63nP090tsLyGazuVzuJqvV2rsJKfAcwWDQ7XYXi8VGoxEOh/GiKEqhUDAMo9ls1ut1KRKJcBUxoTwgFAolk0kCxmKxTCaDNEzgsVQqSavVSlVVHtLpdOYLxh2413Wdy5skc03TRqORtN/v8dfpdNrtdq/X63a76LzxKWVCN5G6A+6i0ehyuZR2ux2RKaBSqWDWarXohPjxDKSDyWKxkLbbrSgskUho8TgxUZJ3wNFNEbqIPJ1OJRw4HI74t7ishCIJlbbRWCTPQr+1E50wUROY9Hp9aTabBYKBZuNdzeuF8fdqpcJIqoyyViuZQGdUHOk5MSkK3eVy9ft9ibqtVivOfF6v0+F0ezzM1vMlPQ9HzHw+n81mGwwG0nw+x6xYKhspbT/tMzJmSEuYhxgVwek2YcmIo+CcLMuXyNSM1/xbPqqpnV5dTyUxpC9kKDqEGU3CTIxAOIV817QtFgsHv8/ncro8Xi+5ee8kroVyq8Lv91PpJW1hTBshsywHBQSxn4HPdPsSGXrejF8EBdvt9ovxx2RhtZK27H8ZBL8ar378VJQwu/DI4UeIP6zHlWG/fu9r1epwOGQlkB8mxuMxcjKZsDoTE+KSaCwPrYI26/Vami8/NS0OjRgvu8GGQCBBKcjEsWFCXJbLZcE5sris5Pl83mw2x+Pxr4k//4X4czgcWKfT6fQPRrHKCqheT4sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tab-list\"\n        title=\"\"\n        src=\"/static/1696468700438.4026157850154/af590/tab-list.png\"\n        srcset=\"/static/1696468700438.4026157850154/63868/tab-list.png 250w,\n/static/1696468700438.4026157850154/0b533/tab-list.png 500w,\n/static/1696468700438.4026157850154/af590/tab-list.png 626w\"\n        sizes=\"(max-width: 626px) 100vw, 626px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그리고 탭이 많을 때 빠르게 찾을 수 있도록 <strong>검색 기능</strong>을 넣었습니다. 대략적인 문자열만 입력해도\n결과를 찾을 수 있는 퍼지 검색(fuzzy-search) 알고리즘을 적용하기 위해\n<a href=\"https://www.fusejs.io/\">Fuse.js</a>를 사용했습니다. 이로써 사용자가 단어 철자를 정확히 입력하지 않아도\n원하는 검색 결과를 찾을 수 있습니다.</p>\n<h3 id=\"동기화-시작\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%EC%8B%9C%EC%9E%91\" aria-label=\"동기화 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 시작</h3>\n<p>선택한 탭 id를 받아 해당 탭에 스크롤 이벤트를 등록합니다. 그리고 스크롤이 감지되면 수치를 백분율로\n나타내고 다른 탭을 그만큼 스크롤합니다. 이는 백그라운드 스크립트와 콘텐츠 스크립트를 활용하여 구현할\n수 있습니다.</p>\n<p>동기화를 시작할 수 없는 상황은 다음과 같습니다.</p>\n<ul>\n<li>이미 동기화 중일 때</li>\n<li>유저가 선택한 탭이 2개 미만일 때</li>\n</ul>\n<p>선택된 탭이 2개 미만일 경우 또는 이미 동기화 중이라면 버튼을 <code class=\"language-text\">disabled</code> 처리하겠습니다.</p>\n<h3 id=\"동기화-해제\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%ED%95%B4%EC%A0%9C\" aria-label=\"동기화 해제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 해제</h3>\n<p>동기화가 해제되어야 하는 상황은 다음과 같습니다.</p>\n<ul>\n<li>동기화 중일 때</li>\n<li>동기화 중인 탭이 제거되었을 때</li>\n<li>동기화 중인 탭의 URL이 변경되었을 때</li>\n</ul>\n<h3 id=\"데이터-유지\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9C%A0%EC%A7%80\" aria-label=\"데이터 유지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 유지</h3>\n<p>팝업을 껐다 켜도 데이터를 유지해야 합니다. 동기화를 시작했다면 팝업을 언제든 다시 켜도 어떤 탭이\n동기화되고 있는지 유저에게 알려주기 위한 동작을 하기 위해선 말이죠.</p>\n<p>이때 <a href=\"https://developer.chrome.com/docs/extensions/reference/storage/\">chrome.storage API</a> 를\n활용해서 데이터 및 상태를 유지할 수 있습니다. 이 API를 사용하려면 tab처럼 manifest에 <code class=\"language-text\">storage</code>\n권한을 설정해줘야 합니다.</p>\n<p>백그라운드 스크립트에서 어떤 탭들이 동기화 중인지 저장하고 가져올 수 있는 함수를 만들어 사용하면\n되겠습니다.</p>\n<h2 id=\"최적화\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%A0%81%ED%99%94\" aria-label=\"최적화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최적화</h2>\n<p>아래 코드는 스크롤 이벤트가 발생하면 scrollY의 %값을 <code class=\"language-text\">syncScroll</code> 커맨드와 함께 전달하는 함수입니다.</p>\n<p>%값으로 적용한 이유는 똑같은 내용의 글을 번역한 것이어도 언어별로 전달하는 문자의 양이 차이가\n납니다. 그러므로 스크롤한 값 그대로 적용하는 것보단 %값을 적용해 최대한 번역문과 원문 글의 문장을\n비슷하게 읽어 내려갈 수 있게끔 하기 위함입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onScrollHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Scroll event triggered'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n      window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollYPercentage <span class=\"token operator\">=</span> scrollPosition <span class=\"token operator\">/</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'Scroll event triggered, sending syncScroll message with percentage:'</span><span class=\"token punctuation\">,</span>\n      scrollYPercentage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      command<span class=\"token operator\">:</span> <span class=\"token string\">'syncScroll'</span><span class=\"token punctuation\">,</span>\n      data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in onScrollHandler: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>err<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"throttle-활용\" style=\"position:relative;\"><a href=\"#throttle-%ED%99%9C%EC%9A%A9\" aria-label=\"throttle 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Throttle 활용</h3>\n<p>위 함수를 스크롤 이벤트에 등록하고 실행을 해보면 아래 움짤처럼 굉장히 잦은 호출이 일어납니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/not-optimize.gif\" alt=\"잦은 호출 현상 예시\"></p>\n<p>저 함수의 목적은 스크롤이 발생하면 scrollY의 백분율 값을 계산해서 메시지를 보내는 것입니다. 그냥\n자연스럽게 다른 탭도 함께 스크롤 될 수 있도록 하면 되기에 이 경우, <code class=\"language-text\">throttle</code> 을 활용해서 메시지를\n적절한 타이밍에 보내도록 했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> throttle <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      timer <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/images/chrome-extension-sync-tab/throttle.gif\" alt=\"최적화 후 예시\"></p>\n<p>확실히 이제 호출이 자주 일어나지 않습니다. 하지만 움짤을 자세히 보면 또 다른 문제가 있는데요.</p>\n<p>한쪽 탭을 스크롤하면 다른 탭도 스크롤 위치를 맞추기 위해 자동으로 스크롤 됩니다. 그럼 다른 탭에서도\n스크롤이 발생하여 유저가 직접 스크롤하고 있는 탭(동기화 중인 탭)에 스크롤 위치를 맞추라는 메시지를\n보내게 됩니다. 그렇게 아래 움짤처럼 서로 스크롤을 맞추기 위해 <strong>무한 루프</strong>에 빠지게 됩니다. (받는\n쪽의 tabId를 보면 양쪽 모두 번갈아가며 스크롤 위치 데이터를 받고 스크롤 위치를 조정하고 있는 것을\n확인할 수 있습니다.)</p>\n<h3 id=\"debounce-활용\" style=\"position:relative;\"><a href=\"#debounce-%ED%99%9C%EC%9A%A9\" aria-label=\"debounce 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debounce 활용</h3>\n<p>이 문제를 개선하기 위해 선택한 탭들의 스크롤을 동일하게 맞추는 과정을 간단하게 살펴보겠습니다.</p>\n<ol>\n<li>유저가 서로 스크롤이 동기화되기 원하는 탭들을 선택하면 <code class=\"language-text\">startSync</code> 커맨드와 함께 탭의 id를 배열\n형태로 전달합니다.</li>\n<li>받은 탭의 id를 기반으로 해당 탭에 <code class=\"language-text\">startSyncTab</code> 커맨드를 전달합니다.</li>\n<li><code class=\"language-text\">startSyncTab</code> 을 전달 받으면 스크롤이 발생했을 때 scrollY의 퍼센트값을 계산해서 <code class=\"language-text\">syncScroll</code>\n커맨드를 보내는 함수(onScrollHandler)를 등록합니다.</li>\n<li><code class=\"language-text\">syncScroll</code> 을 전달 받으면 현재 스크롤 중인 탭을 제외하고 동기화 중인 모든 탭에\n<code class=\"language-text\">syncScrollForTab</code> 커맨드와 함께 scrollYPercentage 값을 전달합니다.</li>\n<li><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 <code class=\"language-text\">window.scrollTo()</code> 함수를 사용해 원하는 위치로 스크롤합니다.</li>\n</ol>\n<p>위 과정들을 거쳐 각 탭의 스크롤이 동기화 됩니다.</p>\n<p>이 문제는 <strong>사용자의 스크롤</strong>과 <code class=\"language-text\">**window.scrollTo()</code> 함수를 이용해 동작하는 스크롤**을 구별하는\n플래그 역할을 하는 변수와 <code class=\"language-text\">debounce</code> 함수를 통해 개선할 수 있습니다. 천천히 개선하는 과정을\n구현해보겠습니다.</p>\n<p>먼저, 플래그 역할을 하는 <code class=\"language-text\">scrolling</code> 변수를 선언하고 <code class=\"language-text\">false</code> 로 초기화하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">let</span> scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 스크롤 위치를 동기화하는데 여기서 <code class=\"language-text\">scrolling: true</code> 로\n설정하겠습니다. 그리고 스크롤 이벤트에 등록한 함수에 <code class=\"language-text\">scrolling: true</code> 라면 메시지를 보내지 않도록\n하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>scrolling<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Received syncScrollForTab message with data\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n    scrollYPercentage <span class=\"token operator\">*</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    top<span class=\"token operator\">:</span> scrollPosition<span class=\"token punctuation\">,</span>\n    behavior<span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>마지막으로 <code class=\"language-text\">scrolling: false</code> 로 변경하는데 이 부분에 <code class=\"language-text\">debounce</code> 를 적용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> debounce <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resetScrolling <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Scrolling reset to\"</span><span class=\"token punctuation\">,</span> scrolling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token function\">resetScrolling</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 스크롤 이벤트가 발생하게 되면 아래처럼 실행됩니다.</p>\n<p>스크롤 이벤트가 발생 → <code class=\"language-text\">syncScroll</code> 커맨드를 받아 동기화 중인 모든 탭에 <code class=\"language-text\">syncScrollForTab</code> 커맨드와\n함께 scrollYPercentage 값을 전달 → <code class=\"language-text\">scrolling: true</code> 로 설정 및 스크롤 위치 조정 후 <code class=\"language-text\">resetScrolling</code>\n함수 실행 → 스크롤 이벤트 발생 → <code class=\"language-text\">scrolling</code> 이 true이므로 동작 생략</p>\n<p>움짤로 확인해보겠습니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/flag.gif\" alt=\"모든 최적화 후 예시\"></p>\n<p>1 id를 가진 탭에서 메시지를 보내면 2 id를 가진 탭이 메시지를 받아 <code class=\"language-text\">window.scrollTo()</code> 함수를 이용해\n스크롤 위치를 동기화합니다. 반대로 2 id를 가진 탭이 메시지를 보내면 1 id를 가진 탭에서 메시지를 받아\n스크롤 위치를 동기화하는 것을 볼 수 있습니다.</p>\n<p>스크롤 위치도 자연스럽게 동기화 되고 문제가 개선되었습니다.</p>\n<h2 id=\"uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-오류-해결\" style=\"position:relative;\"><a href=\"#uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0\" aria-label=\"uncaught in promise error could not establish connection receiving end does not exist 오류 해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>‘Uncaught (in promise) Error: Could not establish connection. Receiving end does not exist.’ 오류 해결</h2>\n<h3 id=\"오류-발견\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%A5%98-%EB%B0%9C%EA%B2%AC\" aria-label=\"오류 발견 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오류 발견</h3>\n<p>처음 기획 했던 대로 기본 기능을 모두 구현했습니다. 그러나 콘솔에서 예기치 않은 오류가 발생합니다.\n디버깅을 위해 앱을 설치하고 열려있던 탭을 선택 후 동기화 시작 버튼을 누르면 에러가 발생합니다.\n그리고 탭 간 스크롤이 동기화되지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Uncaught <span class=\"token punctuation\">(</span>in promise<span class=\"token punctuation\">)</span> Error: Could not establish connection. Receiving end does not exist.</code></pre></div>\n<h3 id=\"이-오류가-발생하는-이유\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"이 오류가 발생하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류가 발생하는 이유?</h3>\n<p>이 오류는 일반적으로 백그라운드 스크립트에서 <code class=\"language-text\">chrome.tabs.sendMessage</code>메서드가 호출될 때 콘텐츠\n스크립트가 탭에 <strong>수신되지 않거나 아직 초기화되지 않은</strong> 경우에 나타납니다.</p>\n<p>특히\n<a href=\"https://groups.google.com/a/chromium.org/g/chromium-extensions/c/BH5_4OKxM3s/m/7lqiiKT9AQAJ\">Chromium-dev 그룹에 올라온 대화</a>에서\n해당 문제에 대해 명확히 파악할 수 있습니다.</p>\n<blockquote>\n<p>Content scripts declared in manifest.json or registered in chrome.scripting.registerContentScripts\nrun only when the tab is loaded or reloaded (e.g. via Ctrl-R), so when you install or update your\nextension the existing tabs don't run your new content scripts automatically in Chrome (they do in\nFirefox though), whereas the old content scripts that were running previously lose the ability to\nconnect to the extension.</p>\n</blockquote>\n<p>쉽게 설명하면 콘텐츠 스크립트를 등록하는 <code class=\"language-text\">chrome.scripting.registerContentScripts</code>는 새로고침 또는\n탭이 로드될 때만 실행됩니다. 따라서 익스텐션을 설치하기 전인 이전 탭에는 수동으로 콘텐츠 스크립트를\n등록하지 않으면 서로 메시지를 주고 받을 수 없다는 것입니다.</p>\n<p>위 설명에 따르면 익스텐션을 설치하기 전에 존재하던 탭에는 콘텐츠 스크립트가 실행되지 않습니다.\n이러한 탭으로 메시지를 보내려고 할 때 수신단(콘텐츠 스크립트)이 없으므로 오류가 발생한 것이죠.</p>\n<h3 id=\"이-오류를-어떻게-해결할-수-있을까\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EA%B2%B0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"이 오류를 어떻게 해결할 수 있을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류를 어떻게 해결할 수 있을까?</h3>\n<p>핵심은 메시지를 보내려는 탭에 콘텐츠 스크립트가 삽입되어 있어야 하는 것입니다. 콘텐츠 스크립트를\n삽입하는 방법은 아래 3가지 방법이 있겠네요.</p>\n<ol>\n<li>설치 전 열려있던 탭을 강제로 새로고침하여 콘텐츠 스크립트를 삽입합니다.</li>\n<li>익스텐션 설치 시, 콘텐츠 스크립트를 기존 탭에 삽입합니다.</li>\n<li>콘텐츠 스크립트가 필요한 작업 요청 시 콘텐츠 스크립트를 삽입합니다.</li>\n</ol>\n<p>제 생각엔 세 번째 방법이 적절할 것 같습니다. 첫 번째 방법은 사용자의 데이터가 유실될 위험이\n있습니다. 두 번째 방법은 설치하기 전에 존재했던 모든 페이지에 콘텐츠 스크립트를 적용하게 됩니다.\n어차피 사용자가 원하는 탭에 콘텐츠 스크립트를 삽입해서 메시지를 주고 받으면 됩니다. 따라서 필요한\n탭에 콘텐츠 스크립트를 삽입하는 세 번째 방법을 선택했습니다.</p>\n<h3 id=\"구현\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현</h3>\n<ol>\n<li><code class=\"language-text\">chrome.tabs.sendMessage</code>를 사용하여 메시지를 보내기 전에 <code class=\"language-text\">chrome.scripting.executeScript</code>를\n사용해 콘텐츠 스크립트를 유저가 선택한 탭에 삽입합니다.</li>\n<li>스크립트 삽입이 성공하면 메시지를 계속 전송할 수 있게 됩니다.</li>\n</ol>\n<p>간단한 코드로 살펴보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// background.ts</span>\n\nchrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>onMessage<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> sender<span class=\"token punctuation\">,</span> sendResponse<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Popup에서 'startSync' 커맨드와 함께 유저가 선택한 탭의 id들을 전달하면 여기서 받습니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> checkedTabIds<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\n    checkedTabIds<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 탭이 존재하고 접근 가능한지 확인합니다.</span>\n      chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.tabs.get: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 콘텐츠 스크립트를 해당 탭에 삽입합니다.</span>\n        chrome<span class=\"token punctuation\">.</span>scripting<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">{</span>\n            target<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> tabId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            files<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/pages/content/index.js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n                <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.scripting.executeScript: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">.</span>message<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// 주입이 성공하면 메시지를 보냅니다.</span>\n            chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n              command<span class=\"token operator\">:</span> <span class=\"token string\">\"startSyncTab\"</span><span class=\"token punctuation\">,</span>\n              data<span class=\"token operator\">:</span> tabId<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 scripting을 사용한다고 manifest의 permissions에 포함하면 됩니다.</p>\n<p>이렇게 유저가 선택한 탭에 메시지를 보내기 전에 콘텐츠 스크립트를 삽입함으로써 발생한 오류를 해결할\n수 있었습니다.</p>\n<h2 id=\"다국어-지원\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EA%B5%AD%EC%96%B4-%EC%A7%80%EC%9B%90\" aria-label=\"다국어 지원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다국어 지원</h2>\n<p>다국어를 지원하는 방법은 아주 간단합니다.</p>\n<p>로케일을 추가할 때마다 <code class=\"language-text\">_locales/_localeCode_</code> 폴더 아래에 <code class=\"language-text\">messages.json</code> 파일에 문자열을 작성하면\n됩니다. 여기서 <code class=\"language-text\">localeCode</code>는 영어의 <code class=\"language-text\">en</code>과 같은 국가코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extName\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Synchronize Tab Scrolling - 여러 탭의 스크롤 위치를 동일하게 유지\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extDescription\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"여러 탭을 선택하고 스크롤 위치를 동기화할 수 있습니다.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"startSync\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"동기화 시작\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">manifest.json</code> 에선 <code class=\"language-text\">__MSG_messagename__</code> 처럼 문자열을 작성해 적용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"__MSG_extName__\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 <code class=\"language-text\">messages.json</code> 파일의 메시지를 간편하게 사용하기 위한 함수를 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">EnMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/en/messages.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">KoMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/ko/messages.json'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">MessageKey</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> EnMessage <span class=\"token operator\">|</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> KoMessage<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">t</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> MessageKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> chrome<span class=\"token punctuation\">.</span>i18n<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>en, ko 메시지들을 가져와 문자열로 보여줍니다. 아래는 사용 예시입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> t <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@src/chrome/i18n\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Popup</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>나머지 정보들은\n<a href=\"https://developer.chrome.com/docs/extensions/reference/i18n/#how-to-support-multiple-languages\">developer.chrome: how-to-support-multiple-languages</a>\n에서 자세히 확인하실 수 있습니다.</p>",
      "uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0#‘Uncaught (in promise) Error: Could not establish connection. Receiving end does not exist.’ 오류 해결": "<h2 id=\"요구-사항\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EA%B5%AC-%EC%82%AC%ED%95%AD\" aria-label=\"요구 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요구 사항</h2>\n<p>익스텐션의 기능을 먼저 정리해보겠습니다.</p>\n<ul>\n<li>탭 정보 리스트\n<ul>\n<li>열려 있는 탭을 체크 가능한 리스트 형태로 보여줘야 합니다.</li>\n<li>유저에게 제공되는 정보는 favicon과 title입니다.</li>\n<li>newTab은 리스트에 보여주지 않습니다.</li>\n<li>정렬은 브라우저에서 탭이 열려있는 순서(index 오름차순)입니다.</li>\n<li>제목이 넘친다면 한 줄 말줄임 처리합니다.</li>\n<li>탭 제목 또는 URL로 검색할 수 있도록 합니다. (대략적으로 문자열 일치 파악)</li>\n</ul>\n</li>\n<li>동기화 시작\n<ul>\n<li>2개 이상의 탭을 선택한 경우 시작할 수 있습니다.</li>\n<li>1개만 선택한 경우 버튼을 클릭할 수 없으며 가이드 메시지가 표시됩니다.</li>\n</ul>\n</li>\n<li>동기화 해제\n<ul>\n<li>동기화 중인 탭 중 하나라도 제거되면 중지됩니다.</li>\n<li>동기화 중인 탭 중 URL이 변경되면 중지됩니다.</li>\n</ul>\n</li>\n<li>데이터 유지\n<ul>\n<li>팝업을 껐다 켜도 데이터가 유지되어야 합니다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"기능-구현\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84\" aria-label=\"기능 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기능 구현</h2>\n<h3 id=\"탭-정보-리스트\" style=\"position:relative;\"><a href=\"#%ED%83%AD-%EC%A0%95%EB%B3%B4-%EB%A6%AC%EC%8A%A4%ED%8A%B8\" aria-label=\"탭 정보 리스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>탭 정보 리스트</h3>\n<p>탭의 <code class=\"language-text\">title</code>속성은 manifest에 tabs 권한이 포함된 경우에만 존재합니다. 따라서 manifest에 권한 설정이\n필요합니다.</p>\n<p><a href=\"https://developer.chrome.com/docs/extensions/reference/tabs/#method-query\">chrome.tabs API</a> 를\n이용해서 모든 탭의 정보들을 가져올 수 있습니다. newtab은 스크롤을 동기화하는 데 사용할 탭이 아니므로\n제외하고 반환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useTabList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>queryInfo<span class=\"token operator\">?</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span>QueryInfo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    queryKey<span class=\"token operator\">:</span> tabsKeys<span class=\"token punctuation\">.</span><span class=\"token function\">list</span><span class=\"token punctuation\">(</span>queryInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">queryFn</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> tabs <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>queryInfo <span class=\"token operator\">??</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// Returns \"tabs\", excluding items with URL 'chrome://newtab/'.</span>\n      <span class=\"token keyword\">return</span> tabs<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> tab<span class=\"token punctuation\">.</span>url <span class=\"token operator\">!==</span> <span class=\"token string\">'chrome://newtab/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    suspense<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>참고로 탭이 생성, 업데이트, 삭제 되었을 때 함수를 실행하고 싶다면 아래 사진의 함수를 통해\n가능합니다. 하지만 저의 목표는 원문과 번역문의 스크롤 위치를 동기화하기 원하는 저같은 사용자를 돕기\n위함입니다. 따라서 이 함수들을 이용해 구현하는 경우는 없으므로 넘어가겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 636px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVR42j2T65KjOAyFeY1u7hhfJdnGBAIhIUlP7+x01fyY93+aFemadR1cKhey5eNPmZCdBKFROq8OBdl2lTKdwV5p0csWgtJWCNF0bVOVZcOjrruu46XMapN8QgfGk/V0um7j5TqsSzglG9FvU7ieYIowJxN9b0z9d1RVlXnnb9Mtglc4GJ/m22P9+LU8/knzKsGG+xbuF9pm2hZcJxhCUzf/52edbIRtFAqI8tDQ1827srUhoayw0NGgIEjR10LURZ4fSd/pTZ0FGx6nZzSxd0njOO8/968/l8/f43lXwQ+fT/+4wraE5063C6ShKqoiL6uyYmVK9xScJQXRwWDDTJYcDgDRKichOTohnQCT06AMHKaGCZTtDclMax0pEKIhviKldaI0xvOUltmAxnOkZcDJ4xRgCiYiDGhQ9kqwDsP2aUcF0kZ+qPFyH9f9tD3n2w+pNawznCczJg5wW9w8GoSj5urltlCtME1RFCUrL/K3t/z9/TW/lWWZv+XFe87rPH+L47/J7HbXWeRnsphsOCONTrvjVhCNJR1fK5DssKALhlnyo00bceU02qwVbada9r1tD1XsZpnXTdm0zAHzVDV1xVFz/NCwuq7teo44aDKjDRumeINed0JDHFkGfNdLHbzyKBFYvbU171S9Ci75e5XtLRt2HzBoSkwYs7U8/52vdzY/Pq/+trJoO/vLrIw60Gj4/OPkAxImrIeWHw0HiUlh4sYoNHTOS2m4K3idHVEWe+4Q8JqJCDMMK2on+eSwj49ognRJQTrff14+vpbHr/X5payjx9Xfb26ZGS/aN7dMhuiwpTgcZ0hUjMSGOyYs2DgHwy3G/TR6ZRgjTRNhYlyMP5MJltILL5Q8Z0pJxgvQWs+EQZyT8xSmRMnbCHAKOCKeCEZPc+AttGMnBe/ba3GUfT89gvFctsExLTtDtn58DfMmwfn7ZqcR1vPRFUxbinVZf3dFVVX/AWMCszvKXuKYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chrome.tabs.api properties\"\n        title=\"\"\n        src=\"/static/1696468700438.0815157850153/9be90/func-list.png\"\n        srcset=\"/static/1696468700438.0815157850153/63868/func-list.png 250w,\n/static/1696468700438.0815157850153/0b533/func-list.png 500w,\n/static/1696468700438.0815157850153/9be90/func-list.png 636w\"\n        sizes=\"(max-width: 636px) 100vw, 636px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>사용 편의성을 위해 유저가 새 창을 띄우는 게 아닌, 간단한 <strong>팝업</strong>을 통해 이용할 수 있도록\n하겠습니다. <code class=\"language-text\">useTabList</code> 를 통해 받아온 데이터를 이용해 <code class=\"language-text\">popup.html</code> 파일을 작성하면 아이콘을 눌렀을\n때 나오는 팝업을 아래와 같이 구성할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 626px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOUlEQVR42o2TWY8hYRSG69oau6JQo1AUbV/SlkxsibTY9SRmjJjhh7j2q+dRnxaJmHgvTs63nP090tsLyGazuVzuJqvV2rsJKfAcwWDQ7XYXi8VGoxEOh/GiKEqhUDAMo9ls1ut1KRKJcBUxoTwgFAolk0kCxmKxTCaDNEzgsVQqSavVSlVVHtLpdOYLxh2413Wdy5skc03TRqORtN/v8dfpdNrtdq/X63a76LzxKWVCN5G6A+6i0ehyuZR2ux2RKaBSqWDWarXohPjxDKSDyWKxkLbbrSgskUho8TgxUZJ3wNFNEbqIPJ1OJRw4HI74t7ishCIJlbbRWCTPQr+1E50wUROY9Hp9aTabBYKBZuNdzeuF8fdqpcJIqoyyViuZQGdUHOk5MSkK3eVy9ft9ibqtVivOfF6v0+F0ezzM1vMlPQ9HzHw+n81mGwwG0nw+x6xYKhspbT/tMzJmSEuYhxgVwek2YcmIo+CcLMuXyNSM1/xbPqqpnV5dTyUxpC9kKDqEGU3CTIxAOIV817QtFgsHv8/ncro8Xi+5ee8kroVyq8Lv91PpJW1hTBshsywHBQSxn4HPdPsSGXrejF8EBdvt9ovxx2RhtZK27H8ZBL8ar378VJQwu/DI4UeIP6zHlWG/fu9r1epwOGQlkB8mxuMxcjKZsDoTE+KSaCwPrYI26/Vami8/NS0OjRgvu8GGQCBBKcjEsWFCXJbLZcE5sris5Pl83mw2x+Pxr4k//4X4czgcWKfT6fQPRrHKCqheT4sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tab-list\"\n        title=\"\"\n        src=\"/static/1696468700438.4026157850154/af590/tab-list.png\"\n        srcset=\"/static/1696468700438.4026157850154/63868/tab-list.png 250w,\n/static/1696468700438.4026157850154/0b533/tab-list.png 500w,\n/static/1696468700438.4026157850154/af590/tab-list.png 626w\"\n        sizes=\"(max-width: 626px) 100vw, 626px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그리고 탭이 많을 때 빠르게 찾을 수 있도록 <strong>검색 기능</strong>을 넣었습니다. 대략적인 문자열만 입력해도\n결과를 찾을 수 있는 퍼지 검색(fuzzy-search) 알고리즘을 적용하기 위해\n<a href=\"https://www.fusejs.io/\">Fuse.js</a>를 사용했습니다. 이로써 사용자가 단어 철자를 정확히 입력하지 않아도\n원하는 검색 결과를 찾을 수 있습니다.</p>\n<h3 id=\"동기화-시작\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%EC%8B%9C%EC%9E%91\" aria-label=\"동기화 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 시작</h3>\n<p>선택한 탭 id를 받아 해당 탭에 스크롤 이벤트를 등록합니다. 그리고 스크롤이 감지되면 수치를 백분율로\n나타내고 다른 탭을 그만큼 스크롤합니다. 이는 백그라운드 스크립트와 콘텐츠 스크립트를 활용하여 구현할\n수 있습니다.</p>\n<p>동기화를 시작할 수 없는 상황은 다음과 같습니다.</p>\n<ul>\n<li>이미 동기화 중일 때</li>\n<li>유저가 선택한 탭이 2개 미만일 때</li>\n</ul>\n<p>선택된 탭이 2개 미만일 경우 또는 이미 동기화 중이라면 버튼을 <code class=\"language-text\">disabled</code> 처리하겠습니다.</p>\n<h3 id=\"동기화-해제\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%ED%95%B4%EC%A0%9C\" aria-label=\"동기화 해제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 해제</h3>\n<p>동기화가 해제되어야 하는 상황은 다음과 같습니다.</p>\n<ul>\n<li>동기화 중일 때</li>\n<li>동기화 중인 탭이 제거되었을 때</li>\n<li>동기화 중인 탭의 URL이 변경되었을 때</li>\n</ul>\n<h3 id=\"데이터-유지\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9C%A0%EC%A7%80\" aria-label=\"데이터 유지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 유지</h3>\n<p>팝업을 껐다 켜도 데이터를 유지해야 합니다. 동기화를 시작했다면 팝업을 언제든 다시 켜도 어떤 탭이\n동기화되고 있는지 유저에게 알려주기 위한 동작을 하기 위해선 말이죠.</p>\n<p>이때 <a href=\"https://developer.chrome.com/docs/extensions/reference/storage/\">chrome.storage API</a> 를\n활용해서 데이터 및 상태를 유지할 수 있습니다. 이 API를 사용하려면 tab처럼 manifest에 <code class=\"language-text\">storage</code>\n권한을 설정해줘야 합니다.</p>\n<p>백그라운드 스크립트에서 어떤 탭들이 동기화 중인지 저장하고 가져올 수 있는 함수를 만들어 사용하면\n되겠습니다.</p>\n<h2 id=\"최적화\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%A0%81%ED%99%94\" aria-label=\"최적화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최적화</h2>\n<p>아래 코드는 스크롤 이벤트가 발생하면 scrollY의 %값을 <code class=\"language-text\">syncScroll</code> 커맨드와 함께 전달하는 함수입니다.</p>\n<p>%값으로 적용한 이유는 똑같은 내용의 글을 번역한 것이어도 언어별로 전달하는 문자의 양이 차이가\n납니다. 그러므로 스크롤한 값 그대로 적용하는 것보단 %값을 적용해 최대한 번역문과 원문 글의 문장을\n비슷하게 읽어 내려갈 수 있게끔 하기 위함입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onScrollHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Scroll event triggered'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n      window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollYPercentage <span class=\"token operator\">=</span> scrollPosition <span class=\"token operator\">/</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'Scroll event triggered, sending syncScroll message with percentage:'</span><span class=\"token punctuation\">,</span>\n      scrollYPercentage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      command<span class=\"token operator\">:</span> <span class=\"token string\">'syncScroll'</span><span class=\"token punctuation\">,</span>\n      data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in onScrollHandler: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>err<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"throttle-활용\" style=\"position:relative;\"><a href=\"#throttle-%ED%99%9C%EC%9A%A9\" aria-label=\"throttle 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Throttle 활용</h3>\n<p>위 함수를 스크롤 이벤트에 등록하고 실행을 해보면 아래 움짤처럼 굉장히 잦은 호출이 일어납니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/not-optimize.gif\" alt=\"잦은 호출 현상 예시\"></p>\n<p>저 함수의 목적은 스크롤이 발생하면 scrollY의 백분율 값을 계산해서 메시지를 보내는 것입니다. 그냥\n자연스럽게 다른 탭도 함께 스크롤 될 수 있도록 하면 되기에 이 경우, <code class=\"language-text\">throttle</code> 을 활용해서 메시지를\n적절한 타이밍에 보내도록 했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> throttle <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      timer <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/images/chrome-extension-sync-tab/throttle.gif\" alt=\"최적화 후 예시\"></p>\n<p>확실히 이제 호출이 자주 일어나지 않습니다. 하지만 움짤을 자세히 보면 또 다른 문제가 있는데요.</p>\n<p>한쪽 탭을 스크롤하면 다른 탭도 스크롤 위치를 맞추기 위해 자동으로 스크롤 됩니다. 그럼 다른 탭에서도\n스크롤이 발생하여 유저가 직접 스크롤하고 있는 탭(동기화 중인 탭)에 스크롤 위치를 맞추라는 메시지를\n보내게 됩니다. 그렇게 아래 움짤처럼 서로 스크롤을 맞추기 위해 <strong>무한 루프</strong>에 빠지게 됩니다. (받는\n쪽의 tabId를 보면 양쪽 모두 번갈아가며 스크롤 위치 데이터를 받고 스크롤 위치를 조정하고 있는 것을\n확인할 수 있습니다.)</p>\n<h3 id=\"debounce-활용\" style=\"position:relative;\"><a href=\"#debounce-%ED%99%9C%EC%9A%A9\" aria-label=\"debounce 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debounce 활용</h3>\n<p>이 문제를 개선하기 위해 선택한 탭들의 스크롤을 동일하게 맞추는 과정을 간단하게 살펴보겠습니다.</p>\n<ol>\n<li>유저가 서로 스크롤이 동기화되기 원하는 탭들을 선택하면 <code class=\"language-text\">startSync</code> 커맨드와 함께 탭의 id를 배열\n형태로 전달합니다.</li>\n<li>받은 탭의 id를 기반으로 해당 탭에 <code class=\"language-text\">startSyncTab</code> 커맨드를 전달합니다.</li>\n<li><code class=\"language-text\">startSyncTab</code> 을 전달 받으면 스크롤이 발생했을 때 scrollY의 퍼센트값을 계산해서 <code class=\"language-text\">syncScroll</code>\n커맨드를 보내는 함수(onScrollHandler)를 등록합니다.</li>\n<li><code class=\"language-text\">syncScroll</code> 을 전달 받으면 현재 스크롤 중인 탭을 제외하고 동기화 중인 모든 탭에\n<code class=\"language-text\">syncScrollForTab</code> 커맨드와 함께 scrollYPercentage 값을 전달합니다.</li>\n<li><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 <code class=\"language-text\">window.scrollTo()</code> 함수를 사용해 원하는 위치로 스크롤합니다.</li>\n</ol>\n<p>위 과정들을 거쳐 각 탭의 스크롤이 동기화 됩니다.</p>\n<p>이 문제는 <strong>사용자의 스크롤</strong>과 <code class=\"language-text\">**window.scrollTo()</code> 함수를 이용해 동작하는 스크롤**을 구별하는\n플래그 역할을 하는 변수와 <code class=\"language-text\">debounce</code> 함수를 통해 개선할 수 있습니다. 천천히 개선하는 과정을\n구현해보겠습니다.</p>\n<p>먼저, 플래그 역할을 하는 <code class=\"language-text\">scrolling</code> 변수를 선언하고 <code class=\"language-text\">false</code> 로 초기화하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">let</span> scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 스크롤 위치를 동기화하는데 여기서 <code class=\"language-text\">scrolling: true</code> 로\n설정하겠습니다. 그리고 스크롤 이벤트에 등록한 함수에 <code class=\"language-text\">scrolling: true</code> 라면 메시지를 보내지 않도록\n하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>scrolling<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Received syncScrollForTab message with data\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n    scrollYPercentage <span class=\"token operator\">*</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    top<span class=\"token operator\">:</span> scrollPosition<span class=\"token punctuation\">,</span>\n    behavior<span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>마지막으로 <code class=\"language-text\">scrolling: false</code> 로 변경하는데 이 부분에 <code class=\"language-text\">debounce</code> 를 적용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> debounce <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resetScrolling <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Scrolling reset to\"</span><span class=\"token punctuation\">,</span> scrolling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token function\">resetScrolling</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 스크롤 이벤트가 발생하게 되면 아래처럼 실행됩니다.</p>\n<p>스크롤 이벤트가 발생 → <code class=\"language-text\">syncScroll</code> 커맨드를 받아 동기화 중인 모든 탭에 <code class=\"language-text\">syncScrollForTab</code> 커맨드와\n함께 scrollYPercentage 값을 전달 → <code class=\"language-text\">scrolling: true</code> 로 설정 및 스크롤 위치 조정 후 <code class=\"language-text\">resetScrolling</code>\n함수 실행 → 스크롤 이벤트 발생 → <code class=\"language-text\">scrolling</code> 이 true이므로 동작 생략</p>\n<p>움짤로 확인해보겠습니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/flag.gif\" alt=\"모든 최적화 후 예시\"></p>\n<p>1 id를 가진 탭에서 메시지를 보내면 2 id를 가진 탭이 메시지를 받아 <code class=\"language-text\">window.scrollTo()</code> 함수를 이용해\n스크롤 위치를 동기화합니다. 반대로 2 id를 가진 탭이 메시지를 보내면 1 id를 가진 탭에서 메시지를 받아\n스크롤 위치를 동기화하는 것을 볼 수 있습니다.</p>\n<p>스크롤 위치도 자연스럽게 동기화 되고 문제가 개선되었습니다.</p>\n<h2 id=\"uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-오류-해결\" style=\"position:relative;\"><a href=\"#uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0\" aria-label=\"uncaught in promise error could not establish connection receiving end does not exist 오류 해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>‘Uncaught (in promise) Error: Could not establish connection. Receiving end does not exist.’ 오류 해결</h2>\n<h3 id=\"오류-발견\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%A5%98-%EB%B0%9C%EA%B2%AC\" aria-label=\"오류 발견 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오류 발견</h3>\n<p>처음 기획 했던 대로 기본 기능을 모두 구현했습니다. 그러나 콘솔에서 예기치 않은 오류가 발생합니다.\n디버깅을 위해 앱을 설치하고 열려있던 탭을 선택 후 동기화 시작 버튼을 누르면 에러가 발생합니다.\n그리고 탭 간 스크롤이 동기화되지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Uncaught <span class=\"token punctuation\">(</span>in promise<span class=\"token punctuation\">)</span> Error: Could not establish connection. Receiving end does not exist.</code></pre></div>\n<h3 id=\"이-오류가-발생하는-이유\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"이 오류가 발생하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류가 발생하는 이유?</h3>\n<p>이 오류는 일반적으로 백그라운드 스크립트에서 <code class=\"language-text\">chrome.tabs.sendMessage</code>메서드가 호출될 때 콘텐츠\n스크립트가 탭에 <strong>수신되지 않거나 아직 초기화되지 않은</strong> 경우에 나타납니다.</p>\n<p>특히\n<a href=\"https://groups.google.com/a/chromium.org/g/chromium-extensions/c/BH5_4OKxM3s/m/7lqiiKT9AQAJ\">Chromium-dev 그룹에 올라온 대화</a>에서\n해당 문제에 대해 명확히 파악할 수 있습니다.</p>\n<blockquote>\n<p>Content scripts declared in manifest.json or registered in chrome.scripting.registerContentScripts\nrun only when the tab is loaded or reloaded (e.g. via Ctrl-R), so when you install or update your\nextension the existing tabs don't run your new content scripts automatically in Chrome (they do in\nFirefox though), whereas the old content scripts that were running previously lose the ability to\nconnect to the extension.</p>\n</blockquote>\n<p>쉽게 설명하면 콘텐츠 스크립트를 등록하는 <code class=\"language-text\">chrome.scripting.registerContentScripts</code>는 새로고침 또는\n탭이 로드될 때만 실행됩니다. 따라서 익스텐션을 설치하기 전인 이전 탭에는 수동으로 콘텐츠 스크립트를\n등록하지 않으면 서로 메시지를 주고 받을 수 없다는 것입니다.</p>\n<p>위 설명에 따르면 익스텐션을 설치하기 전에 존재하던 탭에는 콘텐츠 스크립트가 실행되지 않습니다.\n이러한 탭으로 메시지를 보내려고 할 때 수신단(콘텐츠 스크립트)이 없으므로 오류가 발생한 것이죠.</p>\n<h3 id=\"이-오류를-어떻게-해결할-수-있을까\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EA%B2%B0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"이 오류를 어떻게 해결할 수 있을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류를 어떻게 해결할 수 있을까?</h3>\n<p>핵심은 메시지를 보내려는 탭에 콘텐츠 스크립트가 삽입되어 있어야 하는 것입니다. 콘텐츠 스크립트를\n삽입하는 방법은 아래 3가지 방법이 있겠네요.</p>\n<ol>\n<li>설치 전 열려있던 탭을 강제로 새로고침하여 콘텐츠 스크립트를 삽입합니다.</li>\n<li>익스텐션 설치 시, 콘텐츠 스크립트를 기존 탭에 삽입합니다.</li>\n<li>콘텐츠 스크립트가 필요한 작업 요청 시 콘텐츠 스크립트를 삽입합니다.</li>\n</ol>\n<p>제 생각엔 세 번째 방법이 적절할 것 같습니다. 첫 번째 방법은 사용자의 데이터가 유실될 위험이\n있습니다. 두 번째 방법은 설치하기 전에 존재했던 모든 페이지에 콘텐츠 스크립트를 적용하게 됩니다.\n어차피 사용자가 원하는 탭에 콘텐츠 스크립트를 삽입해서 메시지를 주고 받으면 됩니다. 따라서 필요한\n탭에 콘텐츠 스크립트를 삽입하는 세 번째 방법을 선택했습니다.</p>\n<h3 id=\"구현\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현</h3>\n<ol>\n<li><code class=\"language-text\">chrome.tabs.sendMessage</code>를 사용하여 메시지를 보내기 전에 <code class=\"language-text\">chrome.scripting.executeScript</code>를\n사용해 콘텐츠 스크립트를 유저가 선택한 탭에 삽입합니다.</li>\n<li>스크립트 삽입이 성공하면 메시지를 계속 전송할 수 있게 됩니다.</li>\n</ol>\n<p>간단한 코드로 살펴보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// background.ts</span>\n\nchrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>onMessage<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> sender<span class=\"token punctuation\">,</span> sendResponse<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Popup에서 'startSync' 커맨드와 함께 유저가 선택한 탭의 id들을 전달하면 여기서 받습니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> checkedTabIds<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\n    checkedTabIds<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 탭이 존재하고 접근 가능한지 확인합니다.</span>\n      chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.tabs.get: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 콘텐츠 스크립트를 해당 탭에 삽입합니다.</span>\n        chrome<span class=\"token punctuation\">.</span>scripting<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">{</span>\n            target<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> tabId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            files<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/pages/content/index.js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n                <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.scripting.executeScript: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">.</span>message<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// 주입이 성공하면 메시지를 보냅니다.</span>\n            chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n              command<span class=\"token operator\">:</span> <span class=\"token string\">\"startSyncTab\"</span><span class=\"token punctuation\">,</span>\n              data<span class=\"token operator\">:</span> tabId<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 scripting을 사용한다고 manifest의 permissions에 포함하면 됩니다.</p>\n<p>이렇게 유저가 선택한 탭에 메시지를 보내기 전에 콘텐츠 스크립트를 삽입함으로써 발생한 오류를 해결할\n수 있었습니다.</p>\n<h2 id=\"다국어-지원\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EA%B5%AD%EC%96%B4-%EC%A7%80%EC%9B%90\" aria-label=\"다국어 지원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다국어 지원</h2>\n<p>다국어를 지원하는 방법은 아주 간단합니다.</p>\n<p>로케일을 추가할 때마다 <code class=\"language-text\">_locales/_localeCode_</code> 폴더 아래에 <code class=\"language-text\">messages.json</code> 파일에 문자열을 작성하면\n됩니다. 여기서 <code class=\"language-text\">localeCode</code>는 영어의 <code class=\"language-text\">en</code>과 같은 국가코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extName\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Synchronize Tab Scrolling - 여러 탭의 스크롤 위치를 동일하게 유지\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extDescription\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"여러 탭을 선택하고 스크롤 위치를 동기화할 수 있습니다.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"startSync\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"동기화 시작\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">manifest.json</code> 에선 <code class=\"language-text\">__MSG_messagename__</code> 처럼 문자열을 작성해 적용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"__MSG_extName__\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 <code class=\"language-text\">messages.json</code> 파일의 메시지를 간편하게 사용하기 위한 함수를 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">EnMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/en/messages.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">KoMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/ko/messages.json'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">MessageKey</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> EnMessage <span class=\"token operator\">|</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> KoMessage<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">t</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> MessageKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> chrome<span class=\"token punctuation\">.</span>i18n<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>en, ko 메시지들을 가져와 문자열로 보여줍니다. 아래는 사용 예시입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> t <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@src/chrome/i18n\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Popup</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>나머지 정보들은\n<a href=\"https://developer.chrome.com/docs/extensions/reference/i18n/#how-to-support-multiple-languages\">developer.chrome: how-to-support-multiple-languages</a>\n에서 자세히 확인하실 수 있습니다.</p>",
      "%EC%98%A4%EB%A5%98-%EB%B0%9C%EA%B2%AC#오류 발견": "<h2 id=\"요구-사항\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EA%B5%AC-%EC%82%AC%ED%95%AD\" aria-label=\"요구 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요구 사항</h2>\n<p>익스텐션의 기능을 먼저 정리해보겠습니다.</p>\n<ul>\n<li>탭 정보 리스트\n<ul>\n<li>열려 있는 탭을 체크 가능한 리스트 형태로 보여줘야 합니다.</li>\n<li>유저에게 제공되는 정보는 favicon과 title입니다.</li>\n<li>newTab은 리스트에 보여주지 않습니다.</li>\n<li>정렬은 브라우저에서 탭이 열려있는 순서(index 오름차순)입니다.</li>\n<li>제목이 넘친다면 한 줄 말줄임 처리합니다.</li>\n<li>탭 제목 또는 URL로 검색할 수 있도록 합니다. (대략적으로 문자열 일치 파악)</li>\n</ul>\n</li>\n<li>동기화 시작\n<ul>\n<li>2개 이상의 탭을 선택한 경우 시작할 수 있습니다.</li>\n<li>1개만 선택한 경우 버튼을 클릭할 수 없으며 가이드 메시지가 표시됩니다.</li>\n</ul>\n</li>\n<li>동기화 해제\n<ul>\n<li>동기화 중인 탭 중 하나라도 제거되면 중지됩니다.</li>\n<li>동기화 중인 탭 중 URL이 변경되면 중지됩니다.</li>\n</ul>\n</li>\n<li>데이터 유지\n<ul>\n<li>팝업을 껐다 켜도 데이터가 유지되어야 합니다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"기능-구현\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84\" aria-label=\"기능 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기능 구현</h2>\n<h3 id=\"탭-정보-리스트\" style=\"position:relative;\"><a href=\"#%ED%83%AD-%EC%A0%95%EB%B3%B4-%EB%A6%AC%EC%8A%A4%ED%8A%B8\" aria-label=\"탭 정보 리스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>탭 정보 리스트</h3>\n<p>탭의 <code class=\"language-text\">title</code>속성은 manifest에 tabs 권한이 포함된 경우에만 존재합니다. 따라서 manifest에 권한 설정이\n필요합니다.</p>\n<p><a href=\"https://developer.chrome.com/docs/extensions/reference/tabs/#method-query\">chrome.tabs API</a> 를\n이용해서 모든 탭의 정보들을 가져올 수 있습니다. newtab은 스크롤을 동기화하는 데 사용할 탭이 아니므로\n제외하고 반환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useTabList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>queryInfo<span class=\"token operator\">?</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span>QueryInfo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    queryKey<span class=\"token operator\">:</span> tabsKeys<span class=\"token punctuation\">.</span><span class=\"token function\">list</span><span class=\"token punctuation\">(</span>queryInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">queryFn</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> tabs <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>queryInfo <span class=\"token operator\">??</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// Returns \"tabs\", excluding items with URL 'chrome://newtab/'.</span>\n      <span class=\"token keyword\">return</span> tabs<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> tab<span class=\"token punctuation\">.</span>url <span class=\"token operator\">!==</span> <span class=\"token string\">'chrome://newtab/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    suspense<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>참고로 탭이 생성, 업데이트, 삭제 되었을 때 함수를 실행하고 싶다면 아래 사진의 함수를 통해\n가능합니다. 하지만 저의 목표는 원문과 번역문의 스크롤 위치를 동기화하기 원하는 저같은 사용자를 돕기\n위함입니다. 따라서 이 함수들을 이용해 구현하는 경우는 없으므로 넘어가겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 636px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVR42j2T65KjOAyFeY1u7hhfJdnGBAIhIUlP7+x01fyY93+aFemadR1cKhey5eNPmZCdBKFROq8OBdl2lTKdwV5p0csWgtJWCNF0bVOVZcOjrruu46XMapN8QgfGk/V0um7j5TqsSzglG9FvU7ieYIowJxN9b0z9d1RVlXnnb9Mtglc4GJ/m22P9+LU8/knzKsGG+xbuF9pm2hZcJxhCUzf/52edbIRtFAqI8tDQ1827srUhoayw0NGgIEjR10LURZ4fSd/pTZ0FGx6nZzSxd0njOO8/968/l8/f43lXwQ+fT/+4wraE5063C6ShKqoiL6uyYmVK9xScJQXRwWDDTJYcDgDRKichOTohnQCT06AMHKaGCZTtDclMax0pEKIhviKldaI0xvOUltmAxnOkZcDJ4xRgCiYiDGhQ9kqwDsP2aUcF0kZ+qPFyH9f9tD3n2w+pNawznCczJg5wW9w8GoSj5urltlCtME1RFCUrL/K3t/z9/TW/lWWZv+XFe87rPH+L47/J7HbXWeRnsphsOCONTrvjVhCNJR1fK5DssKALhlnyo00bceU02qwVbada9r1tD1XsZpnXTdm0zAHzVDV1xVFz/NCwuq7teo44aDKjDRumeINed0JDHFkGfNdLHbzyKBFYvbU171S9Ci75e5XtLRt2HzBoSkwYs7U8/52vdzY/Pq/+trJoO/vLrIw60Gj4/OPkAxImrIeWHw0HiUlh4sYoNHTOS2m4K3idHVEWe+4Q8JqJCDMMK2on+eSwj49ognRJQTrff14+vpbHr/X5payjx9Xfb26ZGS/aN7dMhuiwpTgcZ0hUjMSGOyYs2DgHwy3G/TR6ZRgjTRNhYlyMP5MJltILL5Q8Z0pJxgvQWs+EQZyT8xSmRMnbCHAKOCKeCEZPc+AttGMnBe/ba3GUfT89gvFctsExLTtDtn58DfMmwfn7ZqcR1vPRFUxbinVZf3dFVVX/AWMCszvKXuKYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chrome.tabs.api properties\"\n        title=\"\"\n        src=\"/static/1696468700438.0815157850153/9be90/func-list.png\"\n        srcset=\"/static/1696468700438.0815157850153/63868/func-list.png 250w,\n/static/1696468700438.0815157850153/0b533/func-list.png 500w,\n/static/1696468700438.0815157850153/9be90/func-list.png 636w\"\n        sizes=\"(max-width: 636px) 100vw, 636px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>사용 편의성을 위해 유저가 새 창을 띄우는 게 아닌, 간단한 <strong>팝업</strong>을 통해 이용할 수 있도록\n하겠습니다. <code class=\"language-text\">useTabList</code> 를 통해 받아온 데이터를 이용해 <code class=\"language-text\">popup.html</code> 파일을 작성하면 아이콘을 눌렀을\n때 나오는 팝업을 아래와 같이 구성할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 626px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOUlEQVR42o2TWY8hYRSG69oau6JQo1AUbV/SlkxsibTY9SRmjJjhh7j2q+dRnxaJmHgvTs63nP090tsLyGazuVzuJqvV2rsJKfAcwWDQ7XYXi8VGoxEOh/GiKEqhUDAMo9ls1ut1KRKJcBUxoTwgFAolk0kCxmKxTCaDNEzgsVQqSavVSlVVHtLpdOYLxh2413Wdy5skc03TRqORtN/v8dfpdNrtdq/X63a76LzxKWVCN5G6A+6i0ehyuZR2ux2RKaBSqWDWarXohPjxDKSDyWKxkLbbrSgskUho8TgxUZJ3wNFNEbqIPJ1OJRw4HI74t7ishCIJlbbRWCTPQr+1E50wUROY9Hp9aTabBYKBZuNdzeuF8fdqpcJIqoyyViuZQGdUHOk5MSkK3eVy9ft9ibqtVivOfF6v0+F0ezzM1vMlPQ9HzHw+n81mGwwG0nw+x6xYKhspbT/tMzJmSEuYhxgVwek2YcmIo+CcLMuXyNSM1/xbPqqpnV5dTyUxpC9kKDqEGU3CTIxAOIV817QtFgsHv8/ncro8Xi+5ee8kroVyq8Lv91PpJW1hTBshsywHBQSxn4HPdPsSGXrejF8EBdvt9ovxx2RhtZK27H8ZBL8ar378VJQwu/DI4UeIP6zHlWG/fu9r1epwOGQlkB8mxuMxcjKZsDoTE+KSaCwPrYI26/Vami8/NS0OjRgvu8GGQCBBKcjEsWFCXJbLZcE5sris5Pl83mw2x+Pxr4k//4X4czgcWKfT6fQPRrHKCqheT4sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tab-list\"\n        title=\"\"\n        src=\"/static/1696468700438.4026157850154/af590/tab-list.png\"\n        srcset=\"/static/1696468700438.4026157850154/63868/tab-list.png 250w,\n/static/1696468700438.4026157850154/0b533/tab-list.png 500w,\n/static/1696468700438.4026157850154/af590/tab-list.png 626w\"\n        sizes=\"(max-width: 626px) 100vw, 626px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그리고 탭이 많을 때 빠르게 찾을 수 있도록 <strong>검색 기능</strong>을 넣었습니다. 대략적인 문자열만 입력해도\n결과를 찾을 수 있는 퍼지 검색(fuzzy-search) 알고리즘을 적용하기 위해\n<a href=\"https://www.fusejs.io/\">Fuse.js</a>를 사용했습니다. 이로써 사용자가 단어 철자를 정확히 입력하지 않아도\n원하는 검색 결과를 찾을 수 있습니다.</p>\n<h3 id=\"동기화-시작\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%EC%8B%9C%EC%9E%91\" aria-label=\"동기화 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 시작</h3>\n<p>선택한 탭 id를 받아 해당 탭에 스크롤 이벤트를 등록합니다. 그리고 스크롤이 감지되면 수치를 백분율로\n나타내고 다른 탭을 그만큼 스크롤합니다. 이는 백그라운드 스크립트와 콘텐츠 스크립트를 활용하여 구현할\n수 있습니다.</p>\n<p>동기화를 시작할 수 없는 상황은 다음과 같습니다.</p>\n<ul>\n<li>이미 동기화 중일 때</li>\n<li>유저가 선택한 탭이 2개 미만일 때</li>\n</ul>\n<p>선택된 탭이 2개 미만일 경우 또는 이미 동기화 중이라면 버튼을 <code class=\"language-text\">disabled</code> 처리하겠습니다.</p>\n<h3 id=\"동기화-해제\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%ED%95%B4%EC%A0%9C\" aria-label=\"동기화 해제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 해제</h3>\n<p>동기화가 해제되어야 하는 상황은 다음과 같습니다.</p>\n<ul>\n<li>동기화 중일 때</li>\n<li>동기화 중인 탭이 제거되었을 때</li>\n<li>동기화 중인 탭의 URL이 변경되었을 때</li>\n</ul>\n<h3 id=\"데이터-유지\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9C%A0%EC%A7%80\" aria-label=\"데이터 유지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 유지</h3>\n<p>팝업을 껐다 켜도 데이터를 유지해야 합니다. 동기화를 시작했다면 팝업을 언제든 다시 켜도 어떤 탭이\n동기화되고 있는지 유저에게 알려주기 위한 동작을 하기 위해선 말이죠.</p>\n<p>이때 <a href=\"https://developer.chrome.com/docs/extensions/reference/storage/\">chrome.storage API</a> 를\n활용해서 데이터 및 상태를 유지할 수 있습니다. 이 API를 사용하려면 tab처럼 manifest에 <code class=\"language-text\">storage</code>\n권한을 설정해줘야 합니다.</p>\n<p>백그라운드 스크립트에서 어떤 탭들이 동기화 중인지 저장하고 가져올 수 있는 함수를 만들어 사용하면\n되겠습니다.</p>\n<h2 id=\"최적화\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%A0%81%ED%99%94\" aria-label=\"최적화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최적화</h2>\n<p>아래 코드는 스크롤 이벤트가 발생하면 scrollY의 %값을 <code class=\"language-text\">syncScroll</code> 커맨드와 함께 전달하는 함수입니다.</p>\n<p>%값으로 적용한 이유는 똑같은 내용의 글을 번역한 것이어도 언어별로 전달하는 문자의 양이 차이가\n납니다. 그러므로 스크롤한 값 그대로 적용하는 것보단 %값을 적용해 최대한 번역문과 원문 글의 문장을\n비슷하게 읽어 내려갈 수 있게끔 하기 위함입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onScrollHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Scroll event triggered'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n      window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollYPercentage <span class=\"token operator\">=</span> scrollPosition <span class=\"token operator\">/</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'Scroll event triggered, sending syncScroll message with percentage:'</span><span class=\"token punctuation\">,</span>\n      scrollYPercentage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      command<span class=\"token operator\">:</span> <span class=\"token string\">'syncScroll'</span><span class=\"token punctuation\">,</span>\n      data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in onScrollHandler: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>err<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"throttle-활용\" style=\"position:relative;\"><a href=\"#throttle-%ED%99%9C%EC%9A%A9\" aria-label=\"throttle 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Throttle 활용</h3>\n<p>위 함수를 스크롤 이벤트에 등록하고 실행을 해보면 아래 움짤처럼 굉장히 잦은 호출이 일어납니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/not-optimize.gif\" alt=\"잦은 호출 현상 예시\"></p>\n<p>저 함수의 목적은 스크롤이 발생하면 scrollY의 백분율 값을 계산해서 메시지를 보내는 것입니다. 그냥\n자연스럽게 다른 탭도 함께 스크롤 될 수 있도록 하면 되기에 이 경우, <code class=\"language-text\">throttle</code> 을 활용해서 메시지를\n적절한 타이밍에 보내도록 했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> throttle <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      timer <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/images/chrome-extension-sync-tab/throttle.gif\" alt=\"최적화 후 예시\"></p>\n<p>확실히 이제 호출이 자주 일어나지 않습니다. 하지만 움짤을 자세히 보면 또 다른 문제가 있는데요.</p>\n<p>한쪽 탭을 스크롤하면 다른 탭도 스크롤 위치를 맞추기 위해 자동으로 스크롤 됩니다. 그럼 다른 탭에서도\n스크롤이 발생하여 유저가 직접 스크롤하고 있는 탭(동기화 중인 탭)에 스크롤 위치를 맞추라는 메시지를\n보내게 됩니다. 그렇게 아래 움짤처럼 서로 스크롤을 맞추기 위해 <strong>무한 루프</strong>에 빠지게 됩니다. (받는\n쪽의 tabId를 보면 양쪽 모두 번갈아가며 스크롤 위치 데이터를 받고 스크롤 위치를 조정하고 있는 것을\n확인할 수 있습니다.)</p>\n<h3 id=\"debounce-활용\" style=\"position:relative;\"><a href=\"#debounce-%ED%99%9C%EC%9A%A9\" aria-label=\"debounce 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debounce 활용</h3>\n<p>이 문제를 개선하기 위해 선택한 탭들의 스크롤을 동일하게 맞추는 과정을 간단하게 살펴보겠습니다.</p>\n<ol>\n<li>유저가 서로 스크롤이 동기화되기 원하는 탭들을 선택하면 <code class=\"language-text\">startSync</code> 커맨드와 함께 탭의 id를 배열\n형태로 전달합니다.</li>\n<li>받은 탭의 id를 기반으로 해당 탭에 <code class=\"language-text\">startSyncTab</code> 커맨드를 전달합니다.</li>\n<li><code class=\"language-text\">startSyncTab</code> 을 전달 받으면 스크롤이 발생했을 때 scrollY의 퍼센트값을 계산해서 <code class=\"language-text\">syncScroll</code>\n커맨드를 보내는 함수(onScrollHandler)를 등록합니다.</li>\n<li><code class=\"language-text\">syncScroll</code> 을 전달 받으면 현재 스크롤 중인 탭을 제외하고 동기화 중인 모든 탭에\n<code class=\"language-text\">syncScrollForTab</code> 커맨드와 함께 scrollYPercentage 값을 전달합니다.</li>\n<li><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 <code class=\"language-text\">window.scrollTo()</code> 함수를 사용해 원하는 위치로 스크롤합니다.</li>\n</ol>\n<p>위 과정들을 거쳐 각 탭의 스크롤이 동기화 됩니다.</p>\n<p>이 문제는 <strong>사용자의 스크롤</strong>과 <code class=\"language-text\">**window.scrollTo()</code> 함수를 이용해 동작하는 스크롤**을 구별하는\n플래그 역할을 하는 변수와 <code class=\"language-text\">debounce</code> 함수를 통해 개선할 수 있습니다. 천천히 개선하는 과정을\n구현해보겠습니다.</p>\n<p>먼저, 플래그 역할을 하는 <code class=\"language-text\">scrolling</code> 변수를 선언하고 <code class=\"language-text\">false</code> 로 초기화하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">let</span> scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 스크롤 위치를 동기화하는데 여기서 <code class=\"language-text\">scrolling: true</code> 로\n설정하겠습니다. 그리고 스크롤 이벤트에 등록한 함수에 <code class=\"language-text\">scrolling: true</code> 라면 메시지를 보내지 않도록\n하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>scrolling<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Received syncScrollForTab message with data\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n    scrollYPercentage <span class=\"token operator\">*</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    top<span class=\"token operator\">:</span> scrollPosition<span class=\"token punctuation\">,</span>\n    behavior<span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>마지막으로 <code class=\"language-text\">scrolling: false</code> 로 변경하는데 이 부분에 <code class=\"language-text\">debounce</code> 를 적용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> debounce <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resetScrolling <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Scrolling reset to\"</span><span class=\"token punctuation\">,</span> scrolling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token function\">resetScrolling</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 스크롤 이벤트가 발생하게 되면 아래처럼 실행됩니다.</p>\n<p>스크롤 이벤트가 발생 → <code class=\"language-text\">syncScroll</code> 커맨드를 받아 동기화 중인 모든 탭에 <code class=\"language-text\">syncScrollForTab</code> 커맨드와\n함께 scrollYPercentage 값을 전달 → <code class=\"language-text\">scrolling: true</code> 로 설정 및 스크롤 위치 조정 후 <code class=\"language-text\">resetScrolling</code>\n함수 실행 → 스크롤 이벤트 발생 → <code class=\"language-text\">scrolling</code> 이 true이므로 동작 생략</p>\n<p>움짤로 확인해보겠습니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/flag.gif\" alt=\"모든 최적화 후 예시\"></p>\n<p>1 id를 가진 탭에서 메시지를 보내면 2 id를 가진 탭이 메시지를 받아 <code class=\"language-text\">window.scrollTo()</code> 함수를 이용해\n스크롤 위치를 동기화합니다. 반대로 2 id를 가진 탭이 메시지를 보내면 1 id를 가진 탭에서 메시지를 받아\n스크롤 위치를 동기화하는 것을 볼 수 있습니다.</p>\n<p>스크롤 위치도 자연스럽게 동기화 되고 문제가 개선되었습니다.</p>\n<h2 id=\"uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-오류-해결\" style=\"position:relative;\"><a href=\"#uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0\" aria-label=\"uncaught in promise error could not establish connection receiving end does not exist 오류 해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>‘Uncaught (in promise) Error: Could not establish connection. Receiving end does not exist.’ 오류 해결</h2>\n<h3 id=\"오류-발견\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%A5%98-%EB%B0%9C%EA%B2%AC\" aria-label=\"오류 발견 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오류 발견</h3>\n<p>처음 기획 했던 대로 기본 기능을 모두 구현했습니다. 그러나 콘솔에서 예기치 않은 오류가 발생합니다.\n디버깅을 위해 앱을 설치하고 열려있던 탭을 선택 후 동기화 시작 버튼을 누르면 에러가 발생합니다.\n그리고 탭 간 스크롤이 동기화되지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Uncaught <span class=\"token punctuation\">(</span>in promise<span class=\"token punctuation\">)</span> Error: Could not establish connection. Receiving end does not exist.</code></pre></div>\n<h3 id=\"이-오류가-발생하는-이유\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"이 오류가 발생하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류가 발생하는 이유?</h3>\n<p>이 오류는 일반적으로 백그라운드 스크립트에서 <code class=\"language-text\">chrome.tabs.sendMessage</code>메서드가 호출될 때 콘텐츠\n스크립트가 탭에 <strong>수신되지 않거나 아직 초기화되지 않은</strong> 경우에 나타납니다.</p>\n<p>특히\n<a href=\"https://groups.google.com/a/chromium.org/g/chromium-extensions/c/BH5_4OKxM3s/m/7lqiiKT9AQAJ\">Chromium-dev 그룹에 올라온 대화</a>에서\n해당 문제에 대해 명확히 파악할 수 있습니다.</p>\n<blockquote>\n<p>Content scripts declared in manifest.json or registered in chrome.scripting.registerContentScripts\nrun only when the tab is loaded or reloaded (e.g. via Ctrl-R), so when you install or update your\nextension the existing tabs don't run your new content scripts automatically in Chrome (they do in\nFirefox though), whereas the old content scripts that were running previously lose the ability to\nconnect to the extension.</p>\n</blockquote>\n<p>쉽게 설명하면 콘텐츠 스크립트를 등록하는 <code class=\"language-text\">chrome.scripting.registerContentScripts</code>는 새로고침 또는\n탭이 로드될 때만 실행됩니다. 따라서 익스텐션을 설치하기 전인 이전 탭에는 수동으로 콘텐츠 스크립트를\n등록하지 않으면 서로 메시지를 주고 받을 수 없다는 것입니다.</p>\n<p>위 설명에 따르면 익스텐션을 설치하기 전에 존재하던 탭에는 콘텐츠 스크립트가 실행되지 않습니다.\n이러한 탭으로 메시지를 보내려고 할 때 수신단(콘텐츠 스크립트)이 없으므로 오류가 발생한 것이죠.</p>\n<h3 id=\"이-오류를-어떻게-해결할-수-있을까\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EA%B2%B0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"이 오류를 어떻게 해결할 수 있을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류를 어떻게 해결할 수 있을까?</h3>\n<p>핵심은 메시지를 보내려는 탭에 콘텐츠 스크립트가 삽입되어 있어야 하는 것입니다. 콘텐츠 스크립트를\n삽입하는 방법은 아래 3가지 방법이 있겠네요.</p>\n<ol>\n<li>설치 전 열려있던 탭을 강제로 새로고침하여 콘텐츠 스크립트를 삽입합니다.</li>\n<li>익스텐션 설치 시, 콘텐츠 스크립트를 기존 탭에 삽입합니다.</li>\n<li>콘텐츠 스크립트가 필요한 작업 요청 시 콘텐츠 스크립트를 삽입합니다.</li>\n</ol>\n<p>제 생각엔 세 번째 방법이 적절할 것 같습니다. 첫 번째 방법은 사용자의 데이터가 유실될 위험이\n있습니다. 두 번째 방법은 설치하기 전에 존재했던 모든 페이지에 콘텐츠 스크립트를 적용하게 됩니다.\n어차피 사용자가 원하는 탭에 콘텐츠 스크립트를 삽입해서 메시지를 주고 받으면 됩니다. 따라서 필요한\n탭에 콘텐츠 스크립트를 삽입하는 세 번째 방법을 선택했습니다.</p>\n<h3 id=\"구현\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현</h3>\n<ol>\n<li><code class=\"language-text\">chrome.tabs.sendMessage</code>를 사용하여 메시지를 보내기 전에 <code class=\"language-text\">chrome.scripting.executeScript</code>를\n사용해 콘텐츠 스크립트를 유저가 선택한 탭에 삽입합니다.</li>\n<li>스크립트 삽입이 성공하면 메시지를 계속 전송할 수 있게 됩니다.</li>\n</ol>\n<p>간단한 코드로 살펴보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// background.ts</span>\n\nchrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>onMessage<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> sender<span class=\"token punctuation\">,</span> sendResponse<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Popup에서 'startSync' 커맨드와 함께 유저가 선택한 탭의 id들을 전달하면 여기서 받습니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> checkedTabIds<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\n    checkedTabIds<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 탭이 존재하고 접근 가능한지 확인합니다.</span>\n      chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.tabs.get: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 콘텐츠 스크립트를 해당 탭에 삽입합니다.</span>\n        chrome<span class=\"token punctuation\">.</span>scripting<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">{</span>\n            target<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> tabId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            files<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/pages/content/index.js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n                <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.scripting.executeScript: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">.</span>message<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// 주입이 성공하면 메시지를 보냅니다.</span>\n            chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n              command<span class=\"token operator\">:</span> <span class=\"token string\">\"startSyncTab\"</span><span class=\"token punctuation\">,</span>\n              data<span class=\"token operator\">:</span> tabId<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 scripting을 사용한다고 manifest의 permissions에 포함하면 됩니다.</p>\n<p>이렇게 유저가 선택한 탭에 메시지를 보내기 전에 콘텐츠 스크립트를 삽입함으로써 발생한 오류를 해결할\n수 있었습니다.</p>\n<h2 id=\"다국어-지원\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EA%B5%AD%EC%96%B4-%EC%A7%80%EC%9B%90\" aria-label=\"다국어 지원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다국어 지원</h2>\n<p>다국어를 지원하는 방법은 아주 간단합니다.</p>\n<p>로케일을 추가할 때마다 <code class=\"language-text\">_locales/_localeCode_</code> 폴더 아래에 <code class=\"language-text\">messages.json</code> 파일에 문자열을 작성하면\n됩니다. 여기서 <code class=\"language-text\">localeCode</code>는 영어의 <code class=\"language-text\">en</code>과 같은 국가코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extName\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Synchronize Tab Scrolling - 여러 탭의 스크롤 위치를 동일하게 유지\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extDescription\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"여러 탭을 선택하고 스크롤 위치를 동기화할 수 있습니다.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"startSync\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"동기화 시작\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">manifest.json</code> 에선 <code class=\"language-text\">__MSG_messagename__</code> 처럼 문자열을 작성해 적용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"__MSG_extName__\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 <code class=\"language-text\">messages.json</code> 파일의 메시지를 간편하게 사용하기 위한 함수를 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">EnMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/en/messages.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">KoMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/ko/messages.json'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">MessageKey</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> EnMessage <span class=\"token operator\">|</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> KoMessage<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">t</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> MessageKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> chrome<span class=\"token punctuation\">.</span>i18n<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>en, ko 메시지들을 가져와 문자열로 보여줍니다. 아래는 사용 예시입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> t <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@src/chrome/i18n\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Popup</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>나머지 정보들은\n<a href=\"https://developer.chrome.com/docs/extensions/reference/i18n/#how-to-support-multiple-languages\">developer.chrome: how-to-support-multiple-languages</a>\n에서 자세히 확인하실 수 있습니다.</p>",
      "%EC%9D%B4-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0#이 오류가 발생하는 이유?": "<h2 id=\"요구-사항\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EA%B5%AC-%EC%82%AC%ED%95%AD\" aria-label=\"요구 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요구 사항</h2>\n<p>익스텐션의 기능을 먼저 정리해보겠습니다.</p>\n<ul>\n<li>탭 정보 리스트\n<ul>\n<li>열려 있는 탭을 체크 가능한 리스트 형태로 보여줘야 합니다.</li>\n<li>유저에게 제공되는 정보는 favicon과 title입니다.</li>\n<li>newTab은 리스트에 보여주지 않습니다.</li>\n<li>정렬은 브라우저에서 탭이 열려있는 순서(index 오름차순)입니다.</li>\n<li>제목이 넘친다면 한 줄 말줄임 처리합니다.</li>\n<li>탭 제목 또는 URL로 검색할 수 있도록 합니다. (대략적으로 문자열 일치 파악)</li>\n</ul>\n</li>\n<li>동기화 시작\n<ul>\n<li>2개 이상의 탭을 선택한 경우 시작할 수 있습니다.</li>\n<li>1개만 선택한 경우 버튼을 클릭할 수 없으며 가이드 메시지가 표시됩니다.</li>\n</ul>\n</li>\n<li>동기화 해제\n<ul>\n<li>동기화 중인 탭 중 하나라도 제거되면 중지됩니다.</li>\n<li>동기화 중인 탭 중 URL이 변경되면 중지됩니다.</li>\n</ul>\n</li>\n<li>데이터 유지\n<ul>\n<li>팝업을 껐다 켜도 데이터가 유지되어야 합니다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"기능-구현\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84\" aria-label=\"기능 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기능 구현</h2>\n<h3 id=\"탭-정보-리스트\" style=\"position:relative;\"><a href=\"#%ED%83%AD-%EC%A0%95%EB%B3%B4-%EB%A6%AC%EC%8A%A4%ED%8A%B8\" aria-label=\"탭 정보 리스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>탭 정보 리스트</h3>\n<p>탭의 <code class=\"language-text\">title</code>속성은 manifest에 tabs 권한이 포함된 경우에만 존재합니다. 따라서 manifest에 권한 설정이\n필요합니다.</p>\n<p><a href=\"https://developer.chrome.com/docs/extensions/reference/tabs/#method-query\">chrome.tabs API</a> 를\n이용해서 모든 탭의 정보들을 가져올 수 있습니다. newtab은 스크롤을 동기화하는 데 사용할 탭이 아니므로\n제외하고 반환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useTabList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>queryInfo<span class=\"token operator\">?</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span>QueryInfo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    queryKey<span class=\"token operator\">:</span> tabsKeys<span class=\"token punctuation\">.</span><span class=\"token function\">list</span><span class=\"token punctuation\">(</span>queryInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">queryFn</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> tabs <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>queryInfo <span class=\"token operator\">??</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// Returns \"tabs\", excluding items with URL 'chrome://newtab/'.</span>\n      <span class=\"token keyword\">return</span> tabs<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> tab<span class=\"token punctuation\">.</span>url <span class=\"token operator\">!==</span> <span class=\"token string\">'chrome://newtab/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    suspense<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>참고로 탭이 생성, 업데이트, 삭제 되었을 때 함수를 실행하고 싶다면 아래 사진의 함수를 통해\n가능합니다. 하지만 저의 목표는 원문과 번역문의 스크롤 위치를 동기화하기 원하는 저같은 사용자를 돕기\n위함입니다. 따라서 이 함수들을 이용해 구현하는 경우는 없으므로 넘어가겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 636px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVR42j2T65KjOAyFeY1u7hhfJdnGBAIhIUlP7+x01fyY93+aFemadR1cKhey5eNPmZCdBKFROq8OBdl2lTKdwV5p0csWgtJWCNF0bVOVZcOjrruu46XMapN8QgfGk/V0um7j5TqsSzglG9FvU7ieYIowJxN9b0z9d1RVlXnnb9Mtglc4GJ/m22P9+LU8/knzKsGG+xbuF9pm2hZcJxhCUzf/52edbIRtFAqI8tDQ1827srUhoayw0NGgIEjR10LURZ4fSd/pTZ0FGx6nZzSxd0njOO8/968/l8/f43lXwQ+fT/+4wraE5063C6ShKqoiL6uyYmVK9xScJQXRwWDDTJYcDgDRKichOTohnQCT06AMHKaGCZTtDclMax0pEKIhviKldaI0xvOUltmAxnOkZcDJ4xRgCiYiDGhQ9kqwDsP2aUcF0kZ+qPFyH9f9tD3n2w+pNawznCczJg5wW9w8GoSj5urltlCtME1RFCUrL/K3t/z9/TW/lWWZv+XFe87rPH+L47/J7HbXWeRnsphsOCONTrvjVhCNJR1fK5DssKALhlnyo00bceU02qwVbada9r1tD1XsZpnXTdm0zAHzVDV1xVFz/NCwuq7teo44aDKjDRumeINed0JDHFkGfNdLHbzyKBFYvbU171S9Ci75e5XtLRt2HzBoSkwYs7U8/52vdzY/Pq/+trJoO/vLrIw60Gj4/OPkAxImrIeWHw0HiUlh4sYoNHTOS2m4K3idHVEWe+4Q8JqJCDMMK2on+eSwj49ognRJQTrff14+vpbHr/X5payjx9Xfb26ZGS/aN7dMhuiwpTgcZ0hUjMSGOyYs2DgHwy3G/TR6ZRgjTRNhYlyMP5MJltILL5Q8Z0pJxgvQWs+EQZyT8xSmRMnbCHAKOCKeCEZPc+AttGMnBe/ba3GUfT89gvFctsExLTtDtn58DfMmwfn7ZqcR1vPRFUxbinVZf3dFVVX/AWMCszvKXuKYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chrome.tabs.api properties\"\n        title=\"\"\n        src=\"/static/1696468700438.0815157850153/9be90/func-list.png\"\n        srcset=\"/static/1696468700438.0815157850153/63868/func-list.png 250w,\n/static/1696468700438.0815157850153/0b533/func-list.png 500w,\n/static/1696468700438.0815157850153/9be90/func-list.png 636w\"\n        sizes=\"(max-width: 636px) 100vw, 636px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>사용 편의성을 위해 유저가 새 창을 띄우는 게 아닌, 간단한 <strong>팝업</strong>을 통해 이용할 수 있도록\n하겠습니다. <code class=\"language-text\">useTabList</code> 를 통해 받아온 데이터를 이용해 <code class=\"language-text\">popup.html</code> 파일을 작성하면 아이콘을 눌렀을\n때 나오는 팝업을 아래와 같이 구성할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 626px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOUlEQVR42o2TWY8hYRSG69oau6JQo1AUbV/SlkxsibTY9SRmjJjhh7j2q+dRnxaJmHgvTs63nP090tsLyGazuVzuJqvV2rsJKfAcwWDQ7XYXi8VGoxEOh/GiKEqhUDAMo9ls1ut1KRKJcBUxoTwgFAolk0kCxmKxTCaDNEzgsVQqSavVSlVVHtLpdOYLxh2413Wdy5skc03TRqORtN/v8dfpdNrtdq/X63a76LzxKWVCN5G6A+6i0ehyuZR2ux2RKaBSqWDWarXohPjxDKSDyWKxkLbbrSgskUho8TgxUZJ3wNFNEbqIPJ1OJRw4HI74t7ishCIJlbbRWCTPQr+1E50wUROY9Hp9aTabBYKBZuNdzeuF8fdqpcJIqoyyViuZQGdUHOk5MSkK3eVy9ft9ibqtVivOfF6v0+F0ezzM1vMlPQ9HzHw+n81mGwwG0nw+x6xYKhspbT/tMzJmSEuYhxgVwek2YcmIo+CcLMuXyNSM1/xbPqqpnV5dTyUxpC9kKDqEGU3CTIxAOIV817QtFgsHv8/ncro8Xi+5ee8kroVyq8Lv91PpJW1hTBshsywHBQSxn4HPdPsSGXrejF8EBdvt9ovxx2RhtZK27H8ZBL8ar378VJQwu/DI4UeIP6zHlWG/fu9r1epwOGQlkB8mxuMxcjKZsDoTE+KSaCwPrYI26/Vami8/NS0OjRgvu8GGQCBBKcjEsWFCXJbLZcE5sris5Pl83mw2x+Pxr4k//4X4czgcWKfT6fQPRrHKCqheT4sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tab-list\"\n        title=\"\"\n        src=\"/static/1696468700438.4026157850154/af590/tab-list.png\"\n        srcset=\"/static/1696468700438.4026157850154/63868/tab-list.png 250w,\n/static/1696468700438.4026157850154/0b533/tab-list.png 500w,\n/static/1696468700438.4026157850154/af590/tab-list.png 626w\"\n        sizes=\"(max-width: 626px) 100vw, 626px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그리고 탭이 많을 때 빠르게 찾을 수 있도록 <strong>검색 기능</strong>을 넣었습니다. 대략적인 문자열만 입력해도\n결과를 찾을 수 있는 퍼지 검색(fuzzy-search) 알고리즘을 적용하기 위해\n<a href=\"https://www.fusejs.io/\">Fuse.js</a>를 사용했습니다. 이로써 사용자가 단어 철자를 정확히 입력하지 않아도\n원하는 검색 결과를 찾을 수 있습니다.</p>\n<h3 id=\"동기화-시작\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%EC%8B%9C%EC%9E%91\" aria-label=\"동기화 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 시작</h3>\n<p>선택한 탭 id를 받아 해당 탭에 스크롤 이벤트를 등록합니다. 그리고 스크롤이 감지되면 수치를 백분율로\n나타내고 다른 탭을 그만큼 스크롤합니다. 이는 백그라운드 스크립트와 콘텐츠 스크립트를 활용하여 구현할\n수 있습니다.</p>\n<p>동기화를 시작할 수 없는 상황은 다음과 같습니다.</p>\n<ul>\n<li>이미 동기화 중일 때</li>\n<li>유저가 선택한 탭이 2개 미만일 때</li>\n</ul>\n<p>선택된 탭이 2개 미만일 경우 또는 이미 동기화 중이라면 버튼을 <code class=\"language-text\">disabled</code> 처리하겠습니다.</p>\n<h3 id=\"동기화-해제\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%ED%95%B4%EC%A0%9C\" aria-label=\"동기화 해제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 해제</h3>\n<p>동기화가 해제되어야 하는 상황은 다음과 같습니다.</p>\n<ul>\n<li>동기화 중일 때</li>\n<li>동기화 중인 탭이 제거되었을 때</li>\n<li>동기화 중인 탭의 URL이 변경되었을 때</li>\n</ul>\n<h3 id=\"데이터-유지\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9C%A0%EC%A7%80\" aria-label=\"데이터 유지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 유지</h3>\n<p>팝업을 껐다 켜도 데이터를 유지해야 합니다. 동기화를 시작했다면 팝업을 언제든 다시 켜도 어떤 탭이\n동기화되고 있는지 유저에게 알려주기 위한 동작을 하기 위해선 말이죠.</p>\n<p>이때 <a href=\"https://developer.chrome.com/docs/extensions/reference/storage/\">chrome.storage API</a> 를\n활용해서 데이터 및 상태를 유지할 수 있습니다. 이 API를 사용하려면 tab처럼 manifest에 <code class=\"language-text\">storage</code>\n권한을 설정해줘야 합니다.</p>\n<p>백그라운드 스크립트에서 어떤 탭들이 동기화 중인지 저장하고 가져올 수 있는 함수를 만들어 사용하면\n되겠습니다.</p>\n<h2 id=\"최적화\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%A0%81%ED%99%94\" aria-label=\"최적화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최적화</h2>\n<p>아래 코드는 스크롤 이벤트가 발생하면 scrollY의 %값을 <code class=\"language-text\">syncScroll</code> 커맨드와 함께 전달하는 함수입니다.</p>\n<p>%값으로 적용한 이유는 똑같은 내용의 글을 번역한 것이어도 언어별로 전달하는 문자의 양이 차이가\n납니다. 그러므로 스크롤한 값 그대로 적용하는 것보단 %값을 적용해 최대한 번역문과 원문 글의 문장을\n비슷하게 읽어 내려갈 수 있게끔 하기 위함입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onScrollHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Scroll event triggered'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n      window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollYPercentage <span class=\"token operator\">=</span> scrollPosition <span class=\"token operator\">/</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'Scroll event triggered, sending syncScroll message with percentage:'</span><span class=\"token punctuation\">,</span>\n      scrollYPercentage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      command<span class=\"token operator\">:</span> <span class=\"token string\">'syncScroll'</span><span class=\"token punctuation\">,</span>\n      data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in onScrollHandler: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>err<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"throttle-활용\" style=\"position:relative;\"><a href=\"#throttle-%ED%99%9C%EC%9A%A9\" aria-label=\"throttle 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Throttle 활용</h3>\n<p>위 함수를 스크롤 이벤트에 등록하고 실행을 해보면 아래 움짤처럼 굉장히 잦은 호출이 일어납니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/not-optimize.gif\" alt=\"잦은 호출 현상 예시\"></p>\n<p>저 함수의 목적은 스크롤이 발생하면 scrollY의 백분율 값을 계산해서 메시지를 보내는 것입니다. 그냥\n자연스럽게 다른 탭도 함께 스크롤 될 수 있도록 하면 되기에 이 경우, <code class=\"language-text\">throttle</code> 을 활용해서 메시지를\n적절한 타이밍에 보내도록 했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> throttle <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      timer <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/images/chrome-extension-sync-tab/throttle.gif\" alt=\"최적화 후 예시\"></p>\n<p>확실히 이제 호출이 자주 일어나지 않습니다. 하지만 움짤을 자세히 보면 또 다른 문제가 있는데요.</p>\n<p>한쪽 탭을 스크롤하면 다른 탭도 스크롤 위치를 맞추기 위해 자동으로 스크롤 됩니다. 그럼 다른 탭에서도\n스크롤이 발생하여 유저가 직접 스크롤하고 있는 탭(동기화 중인 탭)에 스크롤 위치를 맞추라는 메시지를\n보내게 됩니다. 그렇게 아래 움짤처럼 서로 스크롤을 맞추기 위해 <strong>무한 루프</strong>에 빠지게 됩니다. (받는\n쪽의 tabId를 보면 양쪽 모두 번갈아가며 스크롤 위치 데이터를 받고 스크롤 위치를 조정하고 있는 것을\n확인할 수 있습니다.)</p>\n<h3 id=\"debounce-활용\" style=\"position:relative;\"><a href=\"#debounce-%ED%99%9C%EC%9A%A9\" aria-label=\"debounce 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debounce 활용</h3>\n<p>이 문제를 개선하기 위해 선택한 탭들의 스크롤을 동일하게 맞추는 과정을 간단하게 살펴보겠습니다.</p>\n<ol>\n<li>유저가 서로 스크롤이 동기화되기 원하는 탭들을 선택하면 <code class=\"language-text\">startSync</code> 커맨드와 함께 탭의 id를 배열\n형태로 전달합니다.</li>\n<li>받은 탭의 id를 기반으로 해당 탭에 <code class=\"language-text\">startSyncTab</code> 커맨드를 전달합니다.</li>\n<li><code class=\"language-text\">startSyncTab</code> 을 전달 받으면 스크롤이 발생했을 때 scrollY의 퍼센트값을 계산해서 <code class=\"language-text\">syncScroll</code>\n커맨드를 보내는 함수(onScrollHandler)를 등록합니다.</li>\n<li><code class=\"language-text\">syncScroll</code> 을 전달 받으면 현재 스크롤 중인 탭을 제외하고 동기화 중인 모든 탭에\n<code class=\"language-text\">syncScrollForTab</code> 커맨드와 함께 scrollYPercentage 값을 전달합니다.</li>\n<li><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 <code class=\"language-text\">window.scrollTo()</code> 함수를 사용해 원하는 위치로 스크롤합니다.</li>\n</ol>\n<p>위 과정들을 거쳐 각 탭의 스크롤이 동기화 됩니다.</p>\n<p>이 문제는 <strong>사용자의 스크롤</strong>과 <code class=\"language-text\">**window.scrollTo()</code> 함수를 이용해 동작하는 스크롤**을 구별하는\n플래그 역할을 하는 변수와 <code class=\"language-text\">debounce</code> 함수를 통해 개선할 수 있습니다. 천천히 개선하는 과정을\n구현해보겠습니다.</p>\n<p>먼저, 플래그 역할을 하는 <code class=\"language-text\">scrolling</code> 변수를 선언하고 <code class=\"language-text\">false</code> 로 초기화하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">let</span> scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 스크롤 위치를 동기화하는데 여기서 <code class=\"language-text\">scrolling: true</code> 로\n설정하겠습니다. 그리고 스크롤 이벤트에 등록한 함수에 <code class=\"language-text\">scrolling: true</code> 라면 메시지를 보내지 않도록\n하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>scrolling<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Received syncScrollForTab message with data\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n    scrollYPercentage <span class=\"token operator\">*</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    top<span class=\"token operator\">:</span> scrollPosition<span class=\"token punctuation\">,</span>\n    behavior<span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>마지막으로 <code class=\"language-text\">scrolling: false</code> 로 변경하는데 이 부분에 <code class=\"language-text\">debounce</code> 를 적용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> debounce <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resetScrolling <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Scrolling reset to\"</span><span class=\"token punctuation\">,</span> scrolling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token function\">resetScrolling</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 스크롤 이벤트가 발생하게 되면 아래처럼 실행됩니다.</p>\n<p>스크롤 이벤트가 발생 → <code class=\"language-text\">syncScroll</code> 커맨드를 받아 동기화 중인 모든 탭에 <code class=\"language-text\">syncScrollForTab</code> 커맨드와\n함께 scrollYPercentage 값을 전달 → <code class=\"language-text\">scrolling: true</code> 로 설정 및 스크롤 위치 조정 후 <code class=\"language-text\">resetScrolling</code>\n함수 실행 → 스크롤 이벤트 발생 → <code class=\"language-text\">scrolling</code> 이 true이므로 동작 생략</p>\n<p>움짤로 확인해보겠습니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/flag.gif\" alt=\"모든 최적화 후 예시\"></p>\n<p>1 id를 가진 탭에서 메시지를 보내면 2 id를 가진 탭이 메시지를 받아 <code class=\"language-text\">window.scrollTo()</code> 함수를 이용해\n스크롤 위치를 동기화합니다. 반대로 2 id를 가진 탭이 메시지를 보내면 1 id를 가진 탭에서 메시지를 받아\n스크롤 위치를 동기화하는 것을 볼 수 있습니다.</p>\n<p>스크롤 위치도 자연스럽게 동기화 되고 문제가 개선되었습니다.</p>\n<h2 id=\"uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-오류-해결\" style=\"position:relative;\"><a href=\"#uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0\" aria-label=\"uncaught in promise error could not establish connection receiving end does not exist 오류 해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>‘Uncaught (in promise) Error: Could not establish connection. Receiving end does not exist.’ 오류 해결</h2>\n<h3 id=\"오류-발견\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%A5%98-%EB%B0%9C%EA%B2%AC\" aria-label=\"오류 발견 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오류 발견</h3>\n<p>처음 기획 했던 대로 기본 기능을 모두 구현했습니다. 그러나 콘솔에서 예기치 않은 오류가 발생합니다.\n디버깅을 위해 앱을 설치하고 열려있던 탭을 선택 후 동기화 시작 버튼을 누르면 에러가 발생합니다.\n그리고 탭 간 스크롤이 동기화되지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Uncaught <span class=\"token punctuation\">(</span>in promise<span class=\"token punctuation\">)</span> Error: Could not establish connection. Receiving end does not exist.</code></pre></div>\n<h3 id=\"이-오류가-발생하는-이유\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"이 오류가 발생하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류가 발생하는 이유?</h3>\n<p>이 오류는 일반적으로 백그라운드 스크립트에서 <code class=\"language-text\">chrome.tabs.sendMessage</code>메서드가 호출될 때 콘텐츠\n스크립트가 탭에 <strong>수신되지 않거나 아직 초기화되지 않은</strong> 경우에 나타납니다.</p>\n<p>특히\n<a href=\"https://groups.google.com/a/chromium.org/g/chromium-extensions/c/BH5_4OKxM3s/m/7lqiiKT9AQAJ\">Chromium-dev 그룹에 올라온 대화</a>에서\n해당 문제에 대해 명확히 파악할 수 있습니다.</p>\n<blockquote>\n<p>Content scripts declared in manifest.json or registered in chrome.scripting.registerContentScripts\nrun only when the tab is loaded or reloaded (e.g. via Ctrl-R), so when you install or update your\nextension the existing tabs don't run your new content scripts automatically in Chrome (they do in\nFirefox though), whereas the old content scripts that were running previously lose the ability to\nconnect to the extension.</p>\n</blockquote>\n<p>쉽게 설명하면 콘텐츠 스크립트를 등록하는 <code class=\"language-text\">chrome.scripting.registerContentScripts</code>는 새로고침 또는\n탭이 로드될 때만 실행됩니다. 따라서 익스텐션을 설치하기 전인 이전 탭에는 수동으로 콘텐츠 스크립트를\n등록하지 않으면 서로 메시지를 주고 받을 수 없다는 것입니다.</p>\n<p>위 설명에 따르면 익스텐션을 설치하기 전에 존재하던 탭에는 콘텐츠 스크립트가 실행되지 않습니다.\n이러한 탭으로 메시지를 보내려고 할 때 수신단(콘텐츠 스크립트)이 없으므로 오류가 발생한 것이죠.</p>\n<h3 id=\"이-오류를-어떻게-해결할-수-있을까\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EA%B2%B0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"이 오류를 어떻게 해결할 수 있을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류를 어떻게 해결할 수 있을까?</h3>\n<p>핵심은 메시지를 보내려는 탭에 콘텐츠 스크립트가 삽입되어 있어야 하는 것입니다. 콘텐츠 스크립트를\n삽입하는 방법은 아래 3가지 방법이 있겠네요.</p>\n<ol>\n<li>설치 전 열려있던 탭을 강제로 새로고침하여 콘텐츠 스크립트를 삽입합니다.</li>\n<li>익스텐션 설치 시, 콘텐츠 스크립트를 기존 탭에 삽입합니다.</li>\n<li>콘텐츠 스크립트가 필요한 작업 요청 시 콘텐츠 스크립트를 삽입합니다.</li>\n</ol>\n<p>제 생각엔 세 번째 방법이 적절할 것 같습니다. 첫 번째 방법은 사용자의 데이터가 유실될 위험이\n있습니다. 두 번째 방법은 설치하기 전에 존재했던 모든 페이지에 콘텐츠 스크립트를 적용하게 됩니다.\n어차피 사용자가 원하는 탭에 콘텐츠 스크립트를 삽입해서 메시지를 주고 받으면 됩니다. 따라서 필요한\n탭에 콘텐츠 스크립트를 삽입하는 세 번째 방법을 선택했습니다.</p>\n<h3 id=\"구현\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현</h3>\n<ol>\n<li><code class=\"language-text\">chrome.tabs.sendMessage</code>를 사용하여 메시지를 보내기 전에 <code class=\"language-text\">chrome.scripting.executeScript</code>를\n사용해 콘텐츠 스크립트를 유저가 선택한 탭에 삽입합니다.</li>\n<li>스크립트 삽입이 성공하면 메시지를 계속 전송할 수 있게 됩니다.</li>\n</ol>\n<p>간단한 코드로 살펴보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// background.ts</span>\n\nchrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>onMessage<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> sender<span class=\"token punctuation\">,</span> sendResponse<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Popup에서 'startSync' 커맨드와 함께 유저가 선택한 탭의 id들을 전달하면 여기서 받습니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> checkedTabIds<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\n    checkedTabIds<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 탭이 존재하고 접근 가능한지 확인합니다.</span>\n      chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.tabs.get: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 콘텐츠 스크립트를 해당 탭에 삽입합니다.</span>\n        chrome<span class=\"token punctuation\">.</span>scripting<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">{</span>\n            target<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> tabId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            files<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/pages/content/index.js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n                <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.scripting.executeScript: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">.</span>message<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// 주입이 성공하면 메시지를 보냅니다.</span>\n            chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n              command<span class=\"token operator\">:</span> <span class=\"token string\">\"startSyncTab\"</span><span class=\"token punctuation\">,</span>\n              data<span class=\"token operator\">:</span> tabId<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 scripting을 사용한다고 manifest의 permissions에 포함하면 됩니다.</p>\n<p>이렇게 유저가 선택한 탭에 메시지를 보내기 전에 콘텐츠 스크립트를 삽입함으로써 발생한 오류를 해결할\n수 있었습니다.</p>\n<h2 id=\"다국어-지원\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EA%B5%AD%EC%96%B4-%EC%A7%80%EC%9B%90\" aria-label=\"다국어 지원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다국어 지원</h2>\n<p>다국어를 지원하는 방법은 아주 간단합니다.</p>\n<p>로케일을 추가할 때마다 <code class=\"language-text\">_locales/_localeCode_</code> 폴더 아래에 <code class=\"language-text\">messages.json</code> 파일에 문자열을 작성하면\n됩니다. 여기서 <code class=\"language-text\">localeCode</code>는 영어의 <code class=\"language-text\">en</code>과 같은 국가코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extName\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Synchronize Tab Scrolling - 여러 탭의 스크롤 위치를 동일하게 유지\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extDescription\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"여러 탭을 선택하고 스크롤 위치를 동기화할 수 있습니다.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"startSync\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"동기화 시작\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">manifest.json</code> 에선 <code class=\"language-text\">__MSG_messagename__</code> 처럼 문자열을 작성해 적용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"__MSG_extName__\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 <code class=\"language-text\">messages.json</code> 파일의 메시지를 간편하게 사용하기 위한 함수를 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">EnMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/en/messages.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">KoMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/ko/messages.json'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">MessageKey</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> EnMessage <span class=\"token operator\">|</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> KoMessage<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">t</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> MessageKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> chrome<span class=\"token punctuation\">.</span>i18n<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>en, ko 메시지들을 가져와 문자열로 보여줍니다. 아래는 사용 예시입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> t <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@src/chrome/i18n\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Popup</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>나머지 정보들은\n<a href=\"https://developer.chrome.com/docs/extensions/reference/i18n/#how-to-support-multiple-languages\">developer.chrome: how-to-support-multiple-languages</a>\n에서 자세히 확인하실 수 있습니다.</p>",
      "%EC%9D%B4-%EC%98%A4%EB%A5%98%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EA%B2%B0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C#이 오류를 어떻게 해결할 수 있을까?": "<h2 id=\"요구-사항\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EA%B5%AC-%EC%82%AC%ED%95%AD\" aria-label=\"요구 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요구 사항</h2>\n<p>익스텐션의 기능을 먼저 정리해보겠습니다.</p>\n<ul>\n<li>탭 정보 리스트\n<ul>\n<li>열려 있는 탭을 체크 가능한 리스트 형태로 보여줘야 합니다.</li>\n<li>유저에게 제공되는 정보는 favicon과 title입니다.</li>\n<li>newTab은 리스트에 보여주지 않습니다.</li>\n<li>정렬은 브라우저에서 탭이 열려있는 순서(index 오름차순)입니다.</li>\n<li>제목이 넘친다면 한 줄 말줄임 처리합니다.</li>\n<li>탭 제목 또는 URL로 검색할 수 있도록 합니다. (대략적으로 문자열 일치 파악)</li>\n</ul>\n</li>\n<li>동기화 시작\n<ul>\n<li>2개 이상의 탭을 선택한 경우 시작할 수 있습니다.</li>\n<li>1개만 선택한 경우 버튼을 클릭할 수 없으며 가이드 메시지가 표시됩니다.</li>\n</ul>\n</li>\n<li>동기화 해제\n<ul>\n<li>동기화 중인 탭 중 하나라도 제거되면 중지됩니다.</li>\n<li>동기화 중인 탭 중 URL이 변경되면 중지됩니다.</li>\n</ul>\n</li>\n<li>데이터 유지\n<ul>\n<li>팝업을 껐다 켜도 데이터가 유지되어야 합니다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"기능-구현\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84\" aria-label=\"기능 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기능 구현</h2>\n<h3 id=\"탭-정보-리스트\" style=\"position:relative;\"><a href=\"#%ED%83%AD-%EC%A0%95%EB%B3%B4-%EB%A6%AC%EC%8A%A4%ED%8A%B8\" aria-label=\"탭 정보 리스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>탭 정보 리스트</h3>\n<p>탭의 <code class=\"language-text\">title</code>속성은 manifest에 tabs 권한이 포함된 경우에만 존재합니다. 따라서 manifest에 권한 설정이\n필요합니다.</p>\n<p><a href=\"https://developer.chrome.com/docs/extensions/reference/tabs/#method-query\">chrome.tabs API</a> 를\n이용해서 모든 탭의 정보들을 가져올 수 있습니다. newtab은 스크롤을 동기화하는 데 사용할 탭이 아니므로\n제외하고 반환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useTabList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>queryInfo<span class=\"token operator\">?</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span>QueryInfo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    queryKey<span class=\"token operator\">:</span> tabsKeys<span class=\"token punctuation\">.</span><span class=\"token function\">list</span><span class=\"token punctuation\">(</span>queryInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">queryFn</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> tabs <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>queryInfo <span class=\"token operator\">??</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// Returns \"tabs\", excluding items with URL 'chrome://newtab/'.</span>\n      <span class=\"token keyword\">return</span> tabs<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> tab<span class=\"token punctuation\">.</span>url <span class=\"token operator\">!==</span> <span class=\"token string\">'chrome://newtab/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    suspense<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>참고로 탭이 생성, 업데이트, 삭제 되었을 때 함수를 실행하고 싶다면 아래 사진의 함수를 통해\n가능합니다. 하지만 저의 목표는 원문과 번역문의 스크롤 위치를 동기화하기 원하는 저같은 사용자를 돕기\n위함입니다. 따라서 이 함수들을 이용해 구현하는 경우는 없으므로 넘어가겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 636px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVR42j2T65KjOAyFeY1u7hhfJdnGBAIhIUlP7+x01fyY93+aFemadR1cKhey5eNPmZCdBKFROq8OBdl2lTKdwV5p0csWgtJWCNF0bVOVZcOjrruu46XMapN8QgfGk/V0um7j5TqsSzglG9FvU7ieYIowJxN9b0z9d1RVlXnnb9Mtglc4GJ/m22P9+LU8/knzKsGG+xbuF9pm2hZcJxhCUzf/52edbIRtFAqI8tDQ1827srUhoayw0NGgIEjR10LURZ4fSd/pTZ0FGx6nZzSxd0njOO8/968/l8/f43lXwQ+fT/+4wraE5063C6ShKqoiL6uyYmVK9xScJQXRwWDDTJYcDgDRKichOTohnQCT06AMHKaGCZTtDclMax0pEKIhviKldaI0xvOUltmAxnOkZcDJ4xRgCiYiDGhQ9kqwDsP2aUcF0kZ+qPFyH9f9tD3n2w+pNawznCczJg5wW9w8GoSj5urltlCtME1RFCUrL/K3t/z9/TW/lWWZv+XFe87rPH+L47/J7HbXWeRnsphsOCONTrvjVhCNJR1fK5DssKALhlnyo00bceU02qwVbada9r1tD1XsZpnXTdm0zAHzVDV1xVFz/NCwuq7teo44aDKjDRumeINed0JDHFkGfNdLHbzyKBFYvbU171S9Ci75e5XtLRt2HzBoSkwYs7U8/52vdzY/Pq/+trJoO/vLrIw60Gj4/OPkAxImrIeWHw0HiUlh4sYoNHTOS2m4K3idHVEWe+4Q8JqJCDMMK2on+eSwj49ognRJQTrff14+vpbHr/X5payjx9Xfb26ZGS/aN7dMhuiwpTgcZ0hUjMSGOyYs2DgHwy3G/TR6ZRgjTRNhYlyMP5MJltILL5Q8Z0pJxgvQWs+EQZyT8xSmRMnbCHAKOCKeCEZPc+AttGMnBe/ba3GUfT89gvFctsExLTtDtn58DfMmwfn7ZqcR1vPRFUxbinVZf3dFVVX/AWMCszvKXuKYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chrome.tabs.api properties\"\n        title=\"\"\n        src=\"/static/1696468700438.0815157850153/9be90/func-list.png\"\n        srcset=\"/static/1696468700438.0815157850153/63868/func-list.png 250w,\n/static/1696468700438.0815157850153/0b533/func-list.png 500w,\n/static/1696468700438.0815157850153/9be90/func-list.png 636w\"\n        sizes=\"(max-width: 636px) 100vw, 636px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>사용 편의성을 위해 유저가 새 창을 띄우는 게 아닌, 간단한 <strong>팝업</strong>을 통해 이용할 수 있도록\n하겠습니다. <code class=\"language-text\">useTabList</code> 를 통해 받아온 데이터를 이용해 <code class=\"language-text\">popup.html</code> 파일을 작성하면 아이콘을 눌렀을\n때 나오는 팝업을 아래와 같이 구성할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 626px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOUlEQVR42o2TWY8hYRSG69oau6JQo1AUbV/SlkxsibTY9SRmjJjhh7j2q+dRnxaJmHgvTs63nP090tsLyGazuVzuJqvV2rsJKfAcwWDQ7XYXi8VGoxEOh/GiKEqhUDAMo9ls1ut1KRKJcBUxoTwgFAolk0kCxmKxTCaDNEzgsVQqSavVSlVVHtLpdOYLxh2413Wdy5skc03TRqORtN/v8dfpdNrtdq/X63a76LzxKWVCN5G6A+6i0ehyuZR2ux2RKaBSqWDWarXohPjxDKSDyWKxkLbbrSgskUho8TgxUZJ3wNFNEbqIPJ1OJRw4HI74t7ishCIJlbbRWCTPQr+1E50wUROY9Hp9aTabBYKBZuNdzeuF8fdqpcJIqoyyViuZQGdUHOk5MSkK3eVy9ft9ibqtVivOfF6v0+F0ezzM1vMlPQ9HzHw+n81mGwwG0nw+x6xYKhspbT/tMzJmSEuYhxgVwek2YcmIo+CcLMuXyNSM1/xbPqqpnV5dTyUxpC9kKDqEGU3CTIxAOIV817QtFgsHv8/ncro8Xi+5ee8kroVyq8Lv91PpJW1hTBshsywHBQSxn4HPdPsSGXrejF8EBdvt9ovxx2RhtZK27H8ZBL8ar378VJQwu/DI4UeIP6zHlWG/fu9r1epwOGQlkB8mxuMxcjKZsDoTE+KSaCwPrYI26/Vami8/NS0OjRgvu8GGQCBBKcjEsWFCXJbLZcE5sris5Pl83mw2x+Pxr4k//4X4czgcWKfT6fQPRrHKCqheT4sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tab-list\"\n        title=\"\"\n        src=\"/static/1696468700438.4026157850154/af590/tab-list.png\"\n        srcset=\"/static/1696468700438.4026157850154/63868/tab-list.png 250w,\n/static/1696468700438.4026157850154/0b533/tab-list.png 500w,\n/static/1696468700438.4026157850154/af590/tab-list.png 626w\"\n        sizes=\"(max-width: 626px) 100vw, 626px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그리고 탭이 많을 때 빠르게 찾을 수 있도록 <strong>검색 기능</strong>을 넣었습니다. 대략적인 문자열만 입력해도\n결과를 찾을 수 있는 퍼지 검색(fuzzy-search) 알고리즘을 적용하기 위해\n<a href=\"https://www.fusejs.io/\">Fuse.js</a>를 사용했습니다. 이로써 사용자가 단어 철자를 정확히 입력하지 않아도\n원하는 검색 결과를 찾을 수 있습니다.</p>\n<h3 id=\"동기화-시작\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%EC%8B%9C%EC%9E%91\" aria-label=\"동기화 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 시작</h3>\n<p>선택한 탭 id를 받아 해당 탭에 스크롤 이벤트를 등록합니다. 그리고 스크롤이 감지되면 수치를 백분율로\n나타내고 다른 탭을 그만큼 스크롤합니다. 이는 백그라운드 스크립트와 콘텐츠 스크립트를 활용하여 구현할\n수 있습니다.</p>\n<p>동기화를 시작할 수 없는 상황은 다음과 같습니다.</p>\n<ul>\n<li>이미 동기화 중일 때</li>\n<li>유저가 선택한 탭이 2개 미만일 때</li>\n</ul>\n<p>선택된 탭이 2개 미만일 경우 또는 이미 동기화 중이라면 버튼을 <code class=\"language-text\">disabled</code> 처리하겠습니다.</p>\n<h3 id=\"동기화-해제\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%ED%95%B4%EC%A0%9C\" aria-label=\"동기화 해제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 해제</h3>\n<p>동기화가 해제되어야 하는 상황은 다음과 같습니다.</p>\n<ul>\n<li>동기화 중일 때</li>\n<li>동기화 중인 탭이 제거되었을 때</li>\n<li>동기화 중인 탭의 URL이 변경되었을 때</li>\n</ul>\n<h3 id=\"데이터-유지\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9C%A0%EC%A7%80\" aria-label=\"데이터 유지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 유지</h3>\n<p>팝업을 껐다 켜도 데이터를 유지해야 합니다. 동기화를 시작했다면 팝업을 언제든 다시 켜도 어떤 탭이\n동기화되고 있는지 유저에게 알려주기 위한 동작을 하기 위해선 말이죠.</p>\n<p>이때 <a href=\"https://developer.chrome.com/docs/extensions/reference/storage/\">chrome.storage API</a> 를\n활용해서 데이터 및 상태를 유지할 수 있습니다. 이 API를 사용하려면 tab처럼 manifest에 <code class=\"language-text\">storage</code>\n권한을 설정해줘야 합니다.</p>\n<p>백그라운드 스크립트에서 어떤 탭들이 동기화 중인지 저장하고 가져올 수 있는 함수를 만들어 사용하면\n되겠습니다.</p>\n<h2 id=\"최적화\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%A0%81%ED%99%94\" aria-label=\"최적화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최적화</h2>\n<p>아래 코드는 스크롤 이벤트가 발생하면 scrollY의 %값을 <code class=\"language-text\">syncScroll</code> 커맨드와 함께 전달하는 함수입니다.</p>\n<p>%값으로 적용한 이유는 똑같은 내용의 글을 번역한 것이어도 언어별로 전달하는 문자의 양이 차이가\n납니다. 그러므로 스크롤한 값 그대로 적용하는 것보단 %값을 적용해 최대한 번역문과 원문 글의 문장을\n비슷하게 읽어 내려갈 수 있게끔 하기 위함입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onScrollHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Scroll event triggered'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n      window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollYPercentage <span class=\"token operator\">=</span> scrollPosition <span class=\"token operator\">/</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'Scroll event triggered, sending syncScroll message with percentage:'</span><span class=\"token punctuation\">,</span>\n      scrollYPercentage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      command<span class=\"token operator\">:</span> <span class=\"token string\">'syncScroll'</span><span class=\"token punctuation\">,</span>\n      data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in onScrollHandler: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>err<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"throttle-활용\" style=\"position:relative;\"><a href=\"#throttle-%ED%99%9C%EC%9A%A9\" aria-label=\"throttle 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Throttle 활용</h3>\n<p>위 함수를 스크롤 이벤트에 등록하고 실행을 해보면 아래 움짤처럼 굉장히 잦은 호출이 일어납니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/not-optimize.gif\" alt=\"잦은 호출 현상 예시\"></p>\n<p>저 함수의 목적은 스크롤이 발생하면 scrollY의 백분율 값을 계산해서 메시지를 보내는 것입니다. 그냥\n자연스럽게 다른 탭도 함께 스크롤 될 수 있도록 하면 되기에 이 경우, <code class=\"language-text\">throttle</code> 을 활용해서 메시지를\n적절한 타이밍에 보내도록 했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> throttle <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      timer <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/images/chrome-extension-sync-tab/throttle.gif\" alt=\"최적화 후 예시\"></p>\n<p>확실히 이제 호출이 자주 일어나지 않습니다. 하지만 움짤을 자세히 보면 또 다른 문제가 있는데요.</p>\n<p>한쪽 탭을 스크롤하면 다른 탭도 스크롤 위치를 맞추기 위해 자동으로 스크롤 됩니다. 그럼 다른 탭에서도\n스크롤이 발생하여 유저가 직접 스크롤하고 있는 탭(동기화 중인 탭)에 스크롤 위치를 맞추라는 메시지를\n보내게 됩니다. 그렇게 아래 움짤처럼 서로 스크롤을 맞추기 위해 <strong>무한 루프</strong>에 빠지게 됩니다. (받는\n쪽의 tabId를 보면 양쪽 모두 번갈아가며 스크롤 위치 데이터를 받고 스크롤 위치를 조정하고 있는 것을\n확인할 수 있습니다.)</p>\n<h3 id=\"debounce-활용\" style=\"position:relative;\"><a href=\"#debounce-%ED%99%9C%EC%9A%A9\" aria-label=\"debounce 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debounce 활용</h3>\n<p>이 문제를 개선하기 위해 선택한 탭들의 스크롤을 동일하게 맞추는 과정을 간단하게 살펴보겠습니다.</p>\n<ol>\n<li>유저가 서로 스크롤이 동기화되기 원하는 탭들을 선택하면 <code class=\"language-text\">startSync</code> 커맨드와 함께 탭의 id를 배열\n형태로 전달합니다.</li>\n<li>받은 탭의 id를 기반으로 해당 탭에 <code class=\"language-text\">startSyncTab</code> 커맨드를 전달합니다.</li>\n<li><code class=\"language-text\">startSyncTab</code> 을 전달 받으면 스크롤이 발생했을 때 scrollY의 퍼센트값을 계산해서 <code class=\"language-text\">syncScroll</code>\n커맨드를 보내는 함수(onScrollHandler)를 등록합니다.</li>\n<li><code class=\"language-text\">syncScroll</code> 을 전달 받으면 현재 스크롤 중인 탭을 제외하고 동기화 중인 모든 탭에\n<code class=\"language-text\">syncScrollForTab</code> 커맨드와 함께 scrollYPercentage 값을 전달합니다.</li>\n<li><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 <code class=\"language-text\">window.scrollTo()</code> 함수를 사용해 원하는 위치로 스크롤합니다.</li>\n</ol>\n<p>위 과정들을 거쳐 각 탭의 스크롤이 동기화 됩니다.</p>\n<p>이 문제는 <strong>사용자의 스크롤</strong>과 <code class=\"language-text\">**window.scrollTo()</code> 함수를 이용해 동작하는 스크롤**을 구별하는\n플래그 역할을 하는 변수와 <code class=\"language-text\">debounce</code> 함수를 통해 개선할 수 있습니다. 천천히 개선하는 과정을\n구현해보겠습니다.</p>\n<p>먼저, 플래그 역할을 하는 <code class=\"language-text\">scrolling</code> 변수를 선언하고 <code class=\"language-text\">false</code> 로 초기화하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">let</span> scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 스크롤 위치를 동기화하는데 여기서 <code class=\"language-text\">scrolling: true</code> 로\n설정하겠습니다. 그리고 스크롤 이벤트에 등록한 함수에 <code class=\"language-text\">scrolling: true</code> 라면 메시지를 보내지 않도록\n하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>scrolling<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Received syncScrollForTab message with data\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n    scrollYPercentage <span class=\"token operator\">*</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    top<span class=\"token operator\">:</span> scrollPosition<span class=\"token punctuation\">,</span>\n    behavior<span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>마지막으로 <code class=\"language-text\">scrolling: false</code> 로 변경하는데 이 부분에 <code class=\"language-text\">debounce</code> 를 적용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> debounce <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resetScrolling <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Scrolling reset to\"</span><span class=\"token punctuation\">,</span> scrolling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token function\">resetScrolling</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 스크롤 이벤트가 발생하게 되면 아래처럼 실행됩니다.</p>\n<p>스크롤 이벤트가 발생 → <code class=\"language-text\">syncScroll</code> 커맨드를 받아 동기화 중인 모든 탭에 <code class=\"language-text\">syncScrollForTab</code> 커맨드와\n함께 scrollYPercentage 값을 전달 → <code class=\"language-text\">scrolling: true</code> 로 설정 및 스크롤 위치 조정 후 <code class=\"language-text\">resetScrolling</code>\n함수 실행 → 스크롤 이벤트 발생 → <code class=\"language-text\">scrolling</code> 이 true이므로 동작 생략</p>\n<p>움짤로 확인해보겠습니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/flag.gif\" alt=\"모든 최적화 후 예시\"></p>\n<p>1 id를 가진 탭에서 메시지를 보내면 2 id를 가진 탭이 메시지를 받아 <code class=\"language-text\">window.scrollTo()</code> 함수를 이용해\n스크롤 위치를 동기화합니다. 반대로 2 id를 가진 탭이 메시지를 보내면 1 id를 가진 탭에서 메시지를 받아\n스크롤 위치를 동기화하는 것을 볼 수 있습니다.</p>\n<p>스크롤 위치도 자연스럽게 동기화 되고 문제가 개선되었습니다.</p>\n<h2 id=\"uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-오류-해결\" style=\"position:relative;\"><a href=\"#uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0\" aria-label=\"uncaught in promise error could not establish connection receiving end does not exist 오류 해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>‘Uncaught (in promise) Error: Could not establish connection. Receiving end does not exist.’ 오류 해결</h2>\n<h3 id=\"오류-발견\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%A5%98-%EB%B0%9C%EA%B2%AC\" aria-label=\"오류 발견 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오류 발견</h3>\n<p>처음 기획 했던 대로 기본 기능을 모두 구현했습니다. 그러나 콘솔에서 예기치 않은 오류가 발생합니다.\n디버깅을 위해 앱을 설치하고 열려있던 탭을 선택 후 동기화 시작 버튼을 누르면 에러가 발생합니다.\n그리고 탭 간 스크롤이 동기화되지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Uncaught <span class=\"token punctuation\">(</span>in promise<span class=\"token punctuation\">)</span> Error: Could not establish connection. Receiving end does not exist.</code></pre></div>\n<h3 id=\"이-오류가-발생하는-이유\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"이 오류가 발생하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류가 발생하는 이유?</h3>\n<p>이 오류는 일반적으로 백그라운드 스크립트에서 <code class=\"language-text\">chrome.tabs.sendMessage</code>메서드가 호출될 때 콘텐츠\n스크립트가 탭에 <strong>수신되지 않거나 아직 초기화되지 않은</strong> 경우에 나타납니다.</p>\n<p>특히\n<a href=\"https://groups.google.com/a/chromium.org/g/chromium-extensions/c/BH5_4OKxM3s/m/7lqiiKT9AQAJ\">Chromium-dev 그룹에 올라온 대화</a>에서\n해당 문제에 대해 명확히 파악할 수 있습니다.</p>\n<blockquote>\n<p>Content scripts declared in manifest.json or registered in chrome.scripting.registerContentScripts\nrun only when the tab is loaded or reloaded (e.g. via Ctrl-R), so when you install or update your\nextension the existing tabs don't run your new content scripts automatically in Chrome (they do in\nFirefox though), whereas the old content scripts that were running previously lose the ability to\nconnect to the extension.</p>\n</blockquote>\n<p>쉽게 설명하면 콘텐츠 스크립트를 등록하는 <code class=\"language-text\">chrome.scripting.registerContentScripts</code>는 새로고침 또는\n탭이 로드될 때만 실행됩니다. 따라서 익스텐션을 설치하기 전인 이전 탭에는 수동으로 콘텐츠 스크립트를\n등록하지 않으면 서로 메시지를 주고 받을 수 없다는 것입니다.</p>\n<p>위 설명에 따르면 익스텐션을 설치하기 전에 존재하던 탭에는 콘텐츠 스크립트가 실행되지 않습니다.\n이러한 탭으로 메시지를 보내려고 할 때 수신단(콘텐츠 스크립트)이 없으므로 오류가 발생한 것이죠.</p>\n<h3 id=\"이-오류를-어떻게-해결할-수-있을까\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EA%B2%B0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"이 오류를 어떻게 해결할 수 있을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류를 어떻게 해결할 수 있을까?</h3>\n<p>핵심은 메시지를 보내려는 탭에 콘텐츠 스크립트가 삽입되어 있어야 하는 것입니다. 콘텐츠 스크립트를\n삽입하는 방법은 아래 3가지 방법이 있겠네요.</p>\n<ol>\n<li>설치 전 열려있던 탭을 강제로 새로고침하여 콘텐츠 스크립트를 삽입합니다.</li>\n<li>익스텐션 설치 시, 콘텐츠 스크립트를 기존 탭에 삽입합니다.</li>\n<li>콘텐츠 스크립트가 필요한 작업 요청 시 콘텐츠 스크립트를 삽입합니다.</li>\n</ol>\n<p>제 생각엔 세 번째 방법이 적절할 것 같습니다. 첫 번째 방법은 사용자의 데이터가 유실될 위험이\n있습니다. 두 번째 방법은 설치하기 전에 존재했던 모든 페이지에 콘텐츠 스크립트를 적용하게 됩니다.\n어차피 사용자가 원하는 탭에 콘텐츠 스크립트를 삽입해서 메시지를 주고 받으면 됩니다. 따라서 필요한\n탭에 콘텐츠 스크립트를 삽입하는 세 번째 방법을 선택했습니다.</p>\n<h3 id=\"구현\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현</h3>\n<ol>\n<li><code class=\"language-text\">chrome.tabs.sendMessage</code>를 사용하여 메시지를 보내기 전에 <code class=\"language-text\">chrome.scripting.executeScript</code>를\n사용해 콘텐츠 스크립트를 유저가 선택한 탭에 삽입합니다.</li>\n<li>스크립트 삽입이 성공하면 메시지를 계속 전송할 수 있게 됩니다.</li>\n</ol>\n<p>간단한 코드로 살펴보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// background.ts</span>\n\nchrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>onMessage<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> sender<span class=\"token punctuation\">,</span> sendResponse<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Popup에서 'startSync' 커맨드와 함께 유저가 선택한 탭의 id들을 전달하면 여기서 받습니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> checkedTabIds<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\n    checkedTabIds<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 탭이 존재하고 접근 가능한지 확인합니다.</span>\n      chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.tabs.get: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 콘텐츠 스크립트를 해당 탭에 삽입합니다.</span>\n        chrome<span class=\"token punctuation\">.</span>scripting<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">{</span>\n            target<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> tabId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            files<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/pages/content/index.js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n                <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.scripting.executeScript: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">.</span>message<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// 주입이 성공하면 메시지를 보냅니다.</span>\n            chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n              command<span class=\"token operator\">:</span> <span class=\"token string\">\"startSyncTab\"</span><span class=\"token punctuation\">,</span>\n              data<span class=\"token operator\">:</span> tabId<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 scripting을 사용한다고 manifest의 permissions에 포함하면 됩니다.</p>\n<p>이렇게 유저가 선택한 탭에 메시지를 보내기 전에 콘텐츠 스크립트를 삽입함으로써 발생한 오류를 해결할\n수 있었습니다.</p>\n<h2 id=\"다국어-지원\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EA%B5%AD%EC%96%B4-%EC%A7%80%EC%9B%90\" aria-label=\"다국어 지원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다국어 지원</h2>\n<p>다국어를 지원하는 방법은 아주 간단합니다.</p>\n<p>로케일을 추가할 때마다 <code class=\"language-text\">_locales/_localeCode_</code> 폴더 아래에 <code class=\"language-text\">messages.json</code> 파일에 문자열을 작성하면\n됩니다. 여기서 <code class=\"language-text\">localeCode</code>는 영어의 <code class=\"language-text\">en</code>과 같은 국가코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extName\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Synchronize Tab Scrolling - 여러 탭의 스크롤 위치를 동일하게 유지\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extDescription\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"여러 탭을 선택하고 스크롤 위치를 동기화할 수 있습니다.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"startSync\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"동기화 시작\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">manifest.json</code> 에선 <code class=\"language-text\">__MSG_messagename__</code> 처럼 문자열을 작성해 적용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"__MSG_extName__\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 <code class=\"language-text\">messages.json</code> 파일의 메시지를 간편하게 사용하기 위한 함수를 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">EnMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/en/messages.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">KoMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/ko/messages.json'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">MessageKey</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> EnMessage <span class=\"token operator\">|</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> KoMessage<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">t</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> MessageKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> chrome<span class=\"token punctuation\">.</span>i18n<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>en, ko 메시지들을 가져와 문자열로 보여줍니다. 아래는 사용 예시입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> t <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@src/chrome/i18n\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Popup</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>나머지 정보들은\n<a href=\"https://developer.chrome.com/docs/extensions/reference/i18n/#how-to-support-multiple-languages\">developer.chrome: how-to-support-multiple-languages</a>\n에서 자세히 확인하실 수 있습니다.</p>",
      "%EA%B5%AC%ED%98%84#구현": "<h2 id=\"요구-사항\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EA%B5%AC-%EC%82%AC%ED%95%AD\" aria-label=\"요구 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요구 사항</h2>\n<p>익스텐션의 기능을 먼저 정리해보겠습니다.</p>\n<ul>\n<li>탭 정보 리스트\n<ul>\n<li>열려 있는 탭을 체크 가능한 리스트 형태로 보여줘야 합니다.</li>\n<li>유저에게 제공되는 정보는 favicon과 title입니다.</li>\n<li>newTab은 리스트에 보여주지 않습니다.</li>\n<li>정렬은 브라우저에서 탭이 열려있는 순서(index 오름차순)입니다.</li>\n<li>제목이 넘친다면 한 줄 말줄임 처리합니다.</li>\n<li>탭 제목 또는 URL로 검색할 수 있도록 합니다. (대략적으로 문자열 일치 파악)</li>\n</ul>\n</li>\n<li>동기화 시작\n<ul>\n<li>2개 이상의 탭을 선택한 경우 시작할 수 있습니다.</li>\n<li>1개만 선택한 경우 버튼을 클릭할 수 없으며 가이드 메시지가 표시됩니다.</li>\n</ul>\n</li>\n<li>동기화 해제\n<ul>\n<li>동기화 중인 탭 중 하나라도 제거되면 중지됩니다.</li>\n<li>동기화 중인 탭 중 URL이 변경되면 중지됩니다.</li>\n</ul>\n</li>\n<li>데이터 유지\n<ul>\n<li>팝업을 껐다 켜도 데이터가 유지되어야 합니다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"기능-구현\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84\" aria-label=\"기능 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기능 구현</h2>\n<h3 id=\"탭-정보-리스트\" style=\"position:relative;\"><a href=\"#%ED%83%AD-%EC%A0%95%EB%B3%B4-%EB%A6%AC%EC%8A%A4%ED%8A%B8\" aria-label=\"탭 정보 리스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>탭 정보 리스트</h3>\n<p>탭의 <code class=\"language-text\">title</code>속성은 manifest에 tabs 권한이 포함된 경우에만 존재합니다. 따라서 manifest에 권한 설정이\n필요합니다.</p>\n<p><a href=\"https://developer.chrome.com/docs/extensions/reference/tabs/#method-query\">chrome.tabs API</a> 를\n이용해서 모든 탭의 정보들을 가져올 수 있습니다. newtab은 스크롤을 동기화하는 데 사용할 탭이 아니므로\n제외하고 반환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useTabList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>queryInfo<span class=\"token operator\">?</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span>QueryInfo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    queryKey<span class=\"token operator\">:</span> tabsKeys<span class=\"token punctuation\">.</span><span class=\"token function\">list</span><span class=\"token punctuation\">(</span>queryInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">queryFn</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> tabs <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>queryInfo <span class=\"token operator\">??</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// Returns \"tabs\", excluding items with URL 'chrome://newtab/'.</span>\n      <span class=\"token keyword\">return</span> tabs<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> tab<span class=\"token punctuation\">.</span>url <span class=\"token operator\">!==</span> <span class=\"token string\">'chrome://newtab/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    suspense<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>참고로 탭이 생성, 업데이트, 삭제 되었을 때 함수를 실행하고 싶다면 아래 사진의 함수를 통해\n가능합니다. 하지만 저의 목표는 원문과 번역문의 스크롤 위치를 동기화하기 원하는 저같은 사용자를 돕기\n위함입니다. 따라서 이 함수들을 이용해 구현하는 경우는 없으므로 넘어가겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 636px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVR42j2T65KjOAyFeY1u7hhfJdnGBAIhIUlP7+x01fyY93+aFemadR1cKhey5eNPmZCdBKFROq8OBdl2lTKdwV5p0csWgtJWCNF0bVOVZcOjrruu46XMapN8QgfGk/V0um7j5TqsSzglG9FvU7ieYIowJxN9b0z9d1RVlXnnb9Mtglc4GJ/m22P9+LU8/knzKsGG+xbuF9pm2hZcJxhCUzf/52edbIRtFAqI8tDQ1827srUhoayw0NGgIEjR10LURZ4fSd/pTZ0FGx6nZzSxd0njOO8/968/l8/f43lXwQ+fT/+4wraE5063C6ShKqoiL6uyYmVK9xScJQXRwWDDTJYcDgDRKichOTohnQCT06AMHKaGCZTtDclMax0pEKIhviKldaI0xvOUltmAxnOkZcDJ4xRgCiYiDGhQ9kqwDsP2aUcF0kZ+qPFyH9f9tD3n2w+pNawznCczJg5wW9w8GoSj5urltlCtME1RFCUrL/K3t/z9/TW/lWWZv+XFe87rPH+L47/J7HbXWeRnsphsOCONTrvjVhCNJR1fK5DssKALhlnyo00bceU02qwVbada9r1tD1XsZpnXTdm0zAHzVDV1xVFz/NCwuq7teo44aDKjDRumeINed0JDHFkGfNdLHbzyKBFYvbU171S9Ci75e5XtLRt2HzBoSkwYs7U8/52vdzY/Pq/+trJoO/vLrIw60Gj4/OPkAxImrIeWHw0HiUlh4sYoNHTOS2m4K3idHVEWe+4Q8JqJCDMMK2on+eSwj49ognRJQTrff14+vpbHr/X5payjx9Xfb26ZGS/aN7dMhuiwpTgcZ0hUjMSGOyYs2DgHwy3G/TR6ZRgjTRNhYlyMP5MJltILL5Q8Z0pJxgvQWs+EQZyT8xSmRMnbCHAKOCKeCEZPc+AttGMnBe/ba3GUfT89gvFctsExLTtDtn58DfMmwfn7ZqcR1vPRFUxbinVZf3dFVVX/AWMCszvKXuKYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chrome.tabs.api properties\"\n        title=\"\"\n        src=\"/static/1696468700438.0815157850153/9be90/func-list.png\"\n        srcset=\"/static/1696468700438.0815157850153/63868/func-list.png 250w,\n/static/1696468700438.0815157850153/0b533/func-list.png 500w,\n/static/1696468700438.0815157850153/9be90/func-list.png 636w\"\n        sizes=\"(max-width: 636px) 100vw, 636px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>사용 편의성을 위해 유저가 새 창을 띄우는 게 아닌, 간단한 <strong>팝업</strong>을 통해 이용할 수 있도록\n하겠습니다. <code class=\"language-text\">useTabList</code> 를 통해 받아온 데이터를 이용해 <code class=\"language-text\">popup.html</code> 파일을 작성하면 아이콘을 눌렀을\n때 나오는 팝업을 아래와 같이 구성할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 626px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOUlEQVR42o2TWY8hYRSG69oau6JQo1AUbV/SlkxsibTY9SRmjJjhh7j2q+dRnxaJmHgvTs63nP090tsLyGazuVzuJqvV2rsJKfAcwWDQ7XYXi8VGoxEOh/GiKEqhUDAMo9ls1ut1KRKJcBUxoTwgFAolk0kCxmKxTCaDNEzgsVQqSavVSlVVHtLpdOYLxh2413Wdy5skc03TRqORtN/v8dfpdNrtdq/X63a76LzxKWVCN5G6A+6i0ehyuZR2ux2RKaBSqWDWarXohPjxDKSDyWKxkLbbrSgskUho8TgxUZJ3wNFNEbqIPJ1OJRw4HI74t7ishCIJlbbRWCTPQr+1E50wUROY9Hp9aTabBYKBZuNdzeuF8fdqpcJIqoyyViuZQGdUHOk5MSkK3eVy9ft9ibqtVivOfF6v0+F0ezzM1vMlPQ9HzHw+n81mGwwG0nw+x6xYKhspbT/tMzJmSEuYhxgVwek2YcmIo+CcLMuXyNSM1/xbPqqpnV5dTyUxpC9kKDqEGU3CTIxAOIV817QtFgsHv8/ncro8Xi+5ee8kroVyq8Lv91PpJW1hTBshsywHBQSxn4HPdPsSGXrejF8EBdvt9ovxx2RhtZK27H8ZBL8ar378VJQwu/DI4UeIP6zHlWG/fu9r1epwOGQlkB8mxuMxcjKZsDoTE+KSaCwPrYI26/Vami8/NS0OjRgvu8GGQCBBKcjEsWFCXJbLZcE5sris5Pl83mw2x+Pxr4k//4X4czgcWKfT6fQPRrHKCqheT4sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tab-list\"\n        title=\"\"\n        src=\"/static/1696468700438.4026157850154/af590/tab-list.png\"\n        srcset=\"/static/1696468700438.4026157850154/63868/tab-list.png 250w,\n/static/1696468700438.4026157850154/0b533/tab-list.png 500w,\n/static/1696468700438.4026157850154/af590/tab-list.png 626w\"\n        sizes=\"(max-width: 626px) 100vw, 626px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그리고 탭이 많을 때 빠르게 찾을 수 있도록 <strong>검색 기능</strong>을 넣었습니다. 대략적인 문자열만 입력해도\n결과를 찾을 수 있는 퍼지 검색(fuzzy-search) 알고리즘을 적용하기 위해\n<a href=\"https://www.fusejs.io/\">Fuse.js</a>를 사용했습니다. 이로써 사용자가 단어 철자를 정확히 입력하지 않아도\n원하는 검색 결과를 찾을 수 있습니다.</p>\n<h3 id=\"동기화-시작\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%EC%8B%9C%EC%9E%91\" aria-label=\"동기화 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 시작</h3>\n<p>선택한 탭 id를 받아 해당 탭에 스크롤 이벤트를 등록합니다. 그리고 스크롤이 감지되면 수치를 백분율로\n나타내고 다른 탭을 그만큼 스크롤합니다. 이는 백그라운드 스크립트와 콘텐츠 스크립트를 활용하여 구현할\n수 있습니다.</p>\n<p>동기화를 시작할 수 없는 상황은 다음과 같습니다.</p>\n<ul>\n<li>이미 동기화 중일 때</li>\n<li>유저가 선택한 탭이 2개 미만일 때</li>\n</ul>\n<p>선택된 탭이 2개 미만일 경우 또는 이미 동기화 중이라면 버튼을 <code class=\"language-text\">disabled</code> 처리하겠습니다.</p>\n<h3 id=\"동기화-해제\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%ED%95%B4%EC%A0%9C\" aria-label=\"동기화 해제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 해제</h3>\n<p>동기화가 해제되어야 하는 상황은 다음과 같습니다.</p>\n<ul>\n<li>동기화 중일 때</li>\n<li>동기화 중인 탭이 제거되었을 때</li>\n<li>동기화 중인 탭의 URL이 변경되었을 때</li>\n</ul>\n<h3 id=\"데이터-유지\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9C%A0%EC%A7%80\" aria-label=\"데이터 유지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 유지</h3>\n<p>팝업을 껐다 켜도 데이터를 유지해야 합니다. 동기화를 시작했다면 팝업을 언제든 다시 켜도 어떤 탭이\n동기화되고 있는지 유저에게 알려주기 위한 동작을 하기 위해선 말이죠.</p>\n<p>이때 <a href=\"https://developer.chrome.com/docs/extensions/reference/storage/\">chrome.storage API</a> 를\n활용해서 데이터 및 상태를 유지할 수 있습니다. 이 API를 사용하려면 tab처럼 manifest에 <code class=\"language-text\">storage</code>\n권한을 설정해줘야 합니다.</p>\n<p>백그라운드 스크립트에서 어떤 탭들이 동기화 중인지 저장하고 가져올 수 있는 함수를 만들어 사용하면\n되겠습니다.</p>\n<h2 id=\"최적화\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%A0%81%ED%99%94\" aria-label=\"최적화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최적화</h2>\n<p>아래 코드는 스크롤 이벤트가 발생하면 scrollY의 %값을 <code class=\"language-text\">syncScroll</code> 커맨드와 함께 전달하는 함수입니다.</p>\n<p>%값으로 적용한 이유는 똑같은 내용의 글을 번역한 것이어도 언어별로 전달하는 문자의 양이 차이가\n납니다. 그러므로 스크롤한 값 그대로 적용하는 것보단 %값을 적용해 최대한 번역문과 원문 글의 문장을\n비슷하게 읽어 내려갈 수 있게끔 하기 위함입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onScrollHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Scroll event triggered'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n      window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollYPercentage <span class=\"token operator\">=</span> scrollPosition <span class=\"token operator\">/</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'Scroll event triggered, sending syncScroll message with percentage:'</span><span class=\"token punctuation\">,</span>\n      scrollYPercentage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      command<span class=\"token operator\">:</span> <span class=\"token string\">'syncScroll'</span><span class=\"token punctuation\">,</span>\n      data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in onScrollHandler: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>err<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"throttle-활용\" style=\"position:relative;\"><a href=\"#throttle-%ED%99%9C%EC%9A%A9\" aria-label=\"throttle 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Throttle 활용</h3>\n<p>위 함수를 스크롤 이벤트에 등록하고 실행을 해보면 아래 움짤처럼 굉장히 잦은 호출이 일어납니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/not-optimize.gif\" alt=\"잦은 호출 현상 예시\"></p>\n<p>저 함수의 목적은 스크롤이 발생하면 scrollY의 백분율 값을 계산해서 메시지를 보내는 것입니다. 그냥\n자연스럽게 다른 탭도 함께 스크롤 될 수 있도록 하면 되기에 이 경우, <code class=\"language-text\">throttle</code> 을 활용해서 메시지를\n적절한 타이밍에 보내도록 했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> throttle <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      timer <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/images/chrome-extension-sync-tab/throttle.gif\" alt=\"최적화 후 예시\"></p>\n<p>확실히 이제 호출이 자주 일어나지 않습니다. 하지만 움짤을 자세히 보면 또 다른 문제가 있는데요.</p>\n<p>한쪽 탭을 스크롤하면 다른 탭도 스크롤 위치를 맞추기 위해 자동으로 스크롤 됩니다. 그럼 다른 탭에서도\n스크롤이 발생하여 유저가 직접 스크롤하고 있는 탭(동기화 중인 탭)에 스크롤 위치를 맞추라는 메시지를\n보내게 됩니다. 그렇게 아래 움짤처럼 서로 스크롤을 맞추기 위해 <strong>무한 루프</strong>에 빠지게 됩니다. (받는\n쪽의 tabId를 보면 양쪽 모두 번갈아가며 스크롤 위치 데이터를 받고 스크롤 위치를 조정하고 있는 것을\n확인할 수 있습니다.)</p>\n<h3 id=\"debounce-활용\" style=\"position:relative;\"><a href=\"#debounce-%ED%99%9C%EC%9A%A9\" aria-label=\"debounce 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debounce 활용</h3>\n<p>이 문제를 개선하기 위해 선택한 탭들의 스크롤을 동일하게 맞추는 과정을 간단하게 살펴보겠습니다.</p>\n<ol>\n<li>유저가 서로 스크롤이 동기화되기 원하는 탭들을 선택하면 <code class=\"language-text\">startSync</code> 커맨드와 함께 탭의 id를 배열\n형태로 전달합니다.</li>\n<li>받은 탭의 id를 기반으로 해당 탭에 <code class=\"language-text\">startSyncTab</code> 커맨드를 전달합니다.</li>\n<li><code class=\"language-text\">startSyncTab</code> 을 전달 받으면 스크롤이 발생했을 때 scrollY의 퍼센트값을 계산해서 <code class=\"language-text\">syncScroll</code>\n커맨드를 보내는 함수(onScrollHandler)를 등록합니다.</li>\n<li><code class=\"language-text\">syncScroll</code> 을 전달 받으면 현재 스크롤 중인 탭을 제외하고 동기화 중인 모든 탭에\n<code class=\"language-text\">syncScrollForTab</code> 커맨드와 함께 scrollYPercentage 값을 전달합니다.</li>\n<li><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 <code class=\"language-text\">window.scrollTo()</code> 함수를 사용해 원하는 위치로 스크롤합니다.</li>\n</ol>\n<p>위 과정들을 거쳐 각 탭의 스크롤이 동기화 됩니다.</p>\n<p>이 문제는 <strong>사용자의 스크롤</strong>과 <code class=\"language-text\">**window.scrollTo()</code> 함수를 이용해 동작하는 스크롤**을 구별하는\n플래그 역할을 하는 변수와 <code class=\"language-text\">debounce</code> 함수를 통해 개선할 수 있습니다. 천천히 개선하는 과정을\n구현해보겠습니다.</p>\n<p>먼저, 플래그 역할을 하는 <code class=\"language-text\">scrolling</code> 변수를 선언하고 <code class=\"language-text\">false</code> 로 초기화하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">let</span> scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 스크롤 위치를 동기화하는데 여기서 <code class=\"language-text\">scrolling: true</code> 로\n설정하겠습니다. 그리고 스크롤 이벤트에 등록한 함수에 <code class=\"language-text\">scrolling: true</code> 라면 메시지를 보내지 않도록\n하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>scrolling<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Received syncScrollForTab message with data\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n    scrollYPercentage <span class=\"token operator\">*</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    top<span class=\"token operator\">:</span> scrollPosition<span class=\"token punctuation\">,</span>\n    behavior<span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>마지막으로 <code class=\"language-text\">scrolling: false</code> 로 변경하는데 이 부분에 <code class=\"language-text\">debounce</code> 를 적용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> debounce <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resetScrolling <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Scrolling reset to\"</span><span class=\"token punctuation\">,</span> scrolling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token function\">resetScrolling</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 스크롤 이벤트가 발생하게 되면 아래처럼 실행됩니다.</p>\n<p>스크롤 이벤트가 발생 → <code class=\"language-text\">syncScroll</code> 커맨드를 받아 동기화 중인 모든 탭에 <code class=\"language-text\">syncScrollForTab</code> 커맨드와\n함께 scrollYPercentage 값을 전달 → <code class=\"language-text\">scrolling: true</code> 로 설정 및 스크롤 위치 조정 후 <code class=\"language-text\">resetScrolling</code>\n함수 실행 → 스크롤 이벤트 발생 → <code class=\"language-text\">scrolling</code> 이 true이므로 동작 생략</p>\n<p>움짤로 확인해보겠습니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/flag.gif\" alt=\"모든 최적화 후 예시\"></p>\n<p>1 id를 가진 탭에서 메시지를 보내면 2 id를 가진 탭이 메시지를 받아 <code class=\"language-text\">window.scrollTo()</code> 함수를 이용해\n스크롤 위치를 동기화합니다. 반대로 2 id를 가진 탭이 메시지를 보내면 1 id를 가진 탭에서 메시지를 받아\n스크롤 위치를 동기화하는 것을 볼 수 있습니다.</p>\n<p>스크롤 위치도 자연스럽게 동기화 되고 문제가 개선되었습니다.</p>\n<h2 id=\"uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-오류-해결\" style=\"position:relative;\"><a href=\"#uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0\" aria-label=\"uncaught in promise error could not establish connection receiving end does not exist 오류 해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>‘Uncaught (in promise) Error: Could not establish connection. Receiving end does not exist.’ 오류 해결</h2>\n<h3 id=\"오류-발견\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%A5%98-%EB%B0%9C%EA%B2%AC\" aria-label=\"오류 발견 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오류 발견</h3>\n<p>처음 기획 했던 대로 기본 기능을 모두 구현했습니다. 그러나 콘솔에서 예기치 않은 오류가 발생합니다.\n디버깅을 위해 앱을 설치하고 열려있던 탭을 선택 후 동기화 시작 버튼을 누르면 에러가 발생합니다.\n그리고 탭 간 스크롤이 동기화되지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Uncaught <span class=\"token punctuation\">(</span>in promise<span class=\"token punctuation\">)</span> Error: Could not establish connection. Receiving end does not exist.</code></pre></div>\n<h3 id=\"이-오류가-발생하는-이유\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"이 오류가 발생하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류가 발생하는 이유?</h3>\n<p>이 오류는 일반적으로 백그라운드 스크립트에서 <code class=\"language-text\">chrome.tabs.sendMessage</code>메서드가 호출될 때 콘텐츠\n스크립트가 탭에 <strong>수신되지 않거나 아직 초기화되지 않은</strong> 경우에 나타납니다.</p>\n<p>특히\n<a href=\"https://groups.google.com/a/chromium.org/g/chromium-extensions/c/BH5_4OKxM3s/m/7lqiiKT9AQAJ\">Chromium-dev 그룹에 올라온 대화</a>에서\n해당 문제에 대해 명확히 파악할 수 있습니다.</p>\n<blockquote>\n<p>Content scripts declared in manifest.json or registered in chrome.scripting.registerContentScripts\nrun only when the tab is loaded or reloaded (e.g. via Ctrl-R), so when you install or update your\nextension the existing tabs don't run your new content scripts automatically in Chrome (they do in\nFirefox though), whereas the old content scripts that were running previously lose the ability to\nconnect to the extension.</p>\n</blockquote>\n<p>쉽게 설명하면 콘텐츠 스크립트를 등록하는 <code class=\"language-text\">chrome.scripting.registerContentScripts</code>는 새로고침 또는\n탭이 로드될 때만 실행됩니다. 따라서 익스텐션을 설치하기 전인 이전 탭에는 수동으로 콘텐츠 스크립트를\n등록하지 않으면 서로 메시지를 주고 받을 수 없다는 것입니다.</p>\n<p>위 설명에 따르면 익스텐션을 설치하기 전에 존재하던 탭에는 콘텐츠 스크립트가 실행되지 않습니다.\n이러한 탭으로 메시지를 보내려고 할 때 수신단(콘텐츠 스크립트)이 없으므로 오류가 발생한 것이죠.</p>\n<h3 id=\"이-오류를-어떻게-해결할-수-있을까\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EA%B2%B0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"이 오류를 어떻게 해결할 수 있을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류를 어떻게 해결할 수 있을까?</h3>\n<p>핵심은 메시지를 보내려는 탭에 콘텐츠 스크립트가 삽입되어 있어야 하는 것입니다. 콘텐츠 스크립트를\n삽입하는 방법은 아래 3가지 방법이 있겠네요.</p>\n<ol>\n<li>설치 전 열려있던 탭을 강제로 새로고침하여 콘텐츠 스크립트를 삽입합니다.</li>\n<li>익스텐션 설치 시, 콘텐츠 스크립트를 기존 탭에 삽입합니다.</li>\n<li>콘텐츠 스크립트가 필요한 작업 요청 시 콘텐츠 스크립트를 삽입합니다.</li>\n</ol>\n<p>제 생각엔 세 번째 방법이 적절할 것 같습니다. 첫 번째 방법은 사용자의 데이터가 유실될 위험이\n있습니다. 두 번째 방법은 설치하기 전에 존재했던 모든 페이지에 콘텐츠 스크립트를 적용하게 됩니다.\n어차피 사용자가 원하는 탭에 콘텐츠 스크립트를 삽입해서 메시지를 주고 받으면 됩니다. 따라서 필요한\n탭에 콘텐츠 스크립트를 삽입하는 세 번째 방법을 선택했습니다.</p>\n<h3 id=\"구현\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현</h3>\n<ol>\n<li><code class=\"language-text\">chrome.tabs.sendMessage</code>를 사용하여 메시지를 보내기 전에 <code class=\"language-text\">chrome.scripting.executeScript</code>를\n사용해 콘텐츠 스크립트를 유저가 선택한 탭에 삽입합니다.</li>\n<li>스크립트 삽입이 성공하면 메시지를 계속 전송할 수 있게 됩니다.</li>\n</ol>\n<p>간단한 코드로 살펴보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// background.ts</span>\n\nchrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>onMessage<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> sender<span class=\"token punctuation\">,</span> sendResponse<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Popup에서 'startSync' 커맨드와 함께 유저가 선택한 탭의 id들을 전달하면 여기서 받습니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> checkedTabIds<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\n    checkedTabIds<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 탭이 존재하고 접근 가능한지 확인합니다.</span>\n      chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.tabs.get: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 콘텐츠 스크립트를 해당 탭에 삽입합니다.</span>\n        chrome<span class=\"token punctuation\">.</span>scripting<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">{</span>\n            target<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> tabId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            files<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/pages/content/index.js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n                <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.scripting.executeScript: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">.</span>message<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// 주입이 성공하면 메시지를 보냅니다.</span>\n            chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n              command<span class=\"token operator\">:</span> <span class=\"token string\">\"startSyncTab\"</span><span class=\"token punctuation\">,</span>\n              data<span class=\"token operator\">:</span> tabId<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 scripting을 사용한다고 manifest의 permissions에 포함하면 됩니다.</p>\n<p>이렇게 유저가 선택한 탭에 메시지를 보내기 전에 콘텐츠 스크립트를 삽입함으로써 발생한 오류를 해결할\n수 있었습니다.</p>\n<h2 id=\"다국어-지원\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EA%B5%AD%EC%96%B4-%EC%A7%80%EC%9B%90\" aria-label=\"다국어 지원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다국어 지원</h2>\n<p>다국어를 지원하는 방법은 아주 간단합니다.</p>\n<p>로케일을 추가할 때마다 <code class=\"language-text\">_locales/_localeCode_</code> 폴더 아래에 <code class=\"language-text\">messages.json</code> 파일에 문자열을 작성하면\n됩니다. 여기서 <code class=\"language-text\">localeCode</code>는 영어의 <code class=\"language-text\">en</code>과 같은 국가코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extName\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Synchronize Tab Scrolling - 여러 탭의 스크롤 위치를 동일하게 유지\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extDescription\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"여러 탭을 선택하고 스크롤 위치를 동기화할 수 있습니다.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"startSync\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"동기화 시작\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">manifest.json</code> 에선 <code class=\"language-text\">__MSG_messagename__</code> 처럼 문자열을 작성해 적용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"__MSG_extName__\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 <code class=\"language-text\">messages.json</code> 파일의 메시지를 간편하게 사용하기 위한 함수를 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">EnMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/en/messages.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">KoMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/ko/messages.json'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">MessageKey</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> EnMessage <span class=\"token operator\">|</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> KoMessage<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">t</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> MessageKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> chrome<span class=\"token punctuation\">.</span>i18n<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>en, ko 메시지들을 가져와 문자열로 보여줍니다. 아래는 사용 예시입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> t <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@src/chrome/i18n\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Popup</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>나머지 정보들은\n<a href=\"https://developer.chrome.com/docs/extensions/reference/i18n/#how-to-support-multiple-languages\">developer.chrome: how-to-support-multiple-languages</a>\n에서 자세히 확인하실 수 있습니다.</p>",
      "%EB%8B%A4%EA%B5%AD%EC%96%B4-%EC%A7%80%EC%9B%90#다국어 지원": "<h2 id=\"요구-사항\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EA%B5%AC-%EC%82%AC%ED%95%AD\" aria-label=\"요구 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요구 사항</h2>\n<p>익스텐션의 기능을 먼저 정리해보겠습니다.</p>\n<ul>\n<li>탭 정보 리스트\n<ul>\n<li>열려 있는 탭을 체크 가능한 리스트 형태로 보여줘야 합니다.</li>\n<li>유저에게 제공되는 정보는 favicon과 title입니다.</li>\n<li>newTab은 리스트에 보여주지 않습니다.</li>\n<li>정렬은 브라우저에서 탭이 열려있는 순서(index 오름차순)입니다.</li>\n<li>제목이 넘친다면 한 줄 말줄임 처리합니다.</li>\n<li>탭 제목 또는 URL로 검색할 수 있도록 합니다. (대략적으로 문자열 일치 파악)</li>\n</ul>\n</li>\n<li>동기화 시작\n<ul>\n<li>2개 이상의 탭을 선택한 경우 시작할 수 있습니다.</li>\n<li>1개만 선택한 경우 버튼을 클릭할 수 없으며 가이드 메시지가 표시됩니다.</li>\n</ul>\n</li>\n<li>동기화 해제\n<ul>\n<li>동기화 중인 탭 중 하나라도 제거되면 중지됩니다.</li>\n<li>동기화 중인 탭 중 URL이 변경되면 중지됩니다.</li>\n</ul>\n</li>\n<li>데이터 유지\n<ul>\n<li>팝업을 껐다 켜도 데이터가 유지되어야 합니다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"기능-구현\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84\" aria-label=\"기능 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기능 구현</h2>\n<h3 id=\"탭-정보-리스트\" style=\"position:relative;\"><a href=\"#%ED%83%AD-%EC%A0%95%EB%B3%B4-%EB%A6%AC%EC%8A%A4%ED%8A%B8\" aria-label=\"탭 정보 리스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>탭 정보 리스트</h3>\n<p>탭의 <code class=\"language-text\">title</code>속성은 manifest에 tabs 권한이 포함된 경우에만 존재합니다. 따라서 manifest에 권한 설정이\n필요합니다.</p>\n<p><a href=\"https://developer.chrome.com/docs/extensions/reference/tabs/#method-query\">chrome.tabs API</a> 를\n이용해서 모든 탭의 정보들을 가져올 수 있습니다. newtab은 스크롤을 동기화하는 데 사용할 탭이 아니므로\n제외하고 반환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useTabList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>queryInfo<span class=\"token operator\">?</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span>QueryInfo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    queryKey<span class=\"token operator\">:</span> tabsKeys<span class=\"token punctuation\">.</span><span class=\"token function\">list</span><span class=\"token punctuation\">(</span>queryInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">queryFn</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> tabs <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>queryInfo <span class=\"token operator\">??</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// Returns \"tabs\", excluding items with URL 'chrome://newtab/'.</span>\n      <span class=\"token keyword\">return</span> tabs<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> tab<span class=\"token punctuation\">.</span>url <span class=\"token operator\">!==</span> <span class=\"token string\">'chrome://newtab/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    suspense<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>참고로 탭이 생성, 업데이트, 삭제 되었을 때 함수를 실행하고 싶다면 아래 사진의 함수를 통해\n가능합니다. 하지만 저의 목표는 원문과 번역문의 스크롤 위치를 동기화하기 원하는 저같은 사용자를 돕기\n위함입니다. 따라서 이 함수들을 이용해 구현하는 경우는 없으므로 넘어가겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 636px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVR42j2T65KjOAyFeY1u7hhfJdnGBAIhIUlP7+x01fyY93+aFemadR1cKhey5eNPmZCdBKFROq8OBdl2lTKdwV5p0csWgtJWCNF0bVOVZcOjrruu46XMapN8QgfGk/V0um7j5TqsSzglG9FvU7ieYIowJxN9b0z9d1RVlXnnb9Mtglc4GJ/m22P9+LU8/knzKsGG+xbuF9pm2hZcJxhCUzf/52edbIRtFAqI8tDQ1827srUhoayw0NGgIEjR10LURZ4fSd/pTZ0FGx6nZzSxd0njOO8/968/l8/f43lXwQ+fT/+4wraE5063C6ShKqoiL6uyYmVK9xScJQXRwWDDTJYcDgDRKichOTohnQCT06AMHKaGCZTtDclMax0pEKIhviKldaI0xvOUltmAxnOkZcDJ4xRgCiYiDGhQ9kqwDsP2aUcF0kZ+qPFyH9f9tD3n2w+pNawznCczJg5wW9w8GoSj5urltlCtME1RFCUrL/K3t/z9/TW/lWWZv+XFe87rPH+L47/J7HbXWeRnsphsOCONTrvjVhCNJR1fK5DssKALhlnyo00bceU02qwVbada9r1tD1XsZpnXTdm0zAHzVDV1xVFz/NCwuq7teo44aDKjDRumeINed0JDHFkGfNdLHbzyKBFYvbU171S9Ci75e5XtLRt2HzBoSkwYs7U8/52vdzY/Pq/+trJoO/vLrIw60Gj4/OPkAxImrIeWHw0HiUlh4sYoNHTOS2m4K3idHVEWe+4Q8JqJCDMMK2on+eSwj49ognRJQTrff14+vpbHr/X5payjx9Xfb26ZGS/aN7dMhuiwpTgcZ0hUjMSGOyYs2DgHwy3G/TR6ZRgjTRNhYlyMP5MJltILL5Q8Z0pJxgvQWs+EQZyT8xSmRMnbCHAKOCKeCEZPc+AttGMnBe/ba3GUfT89gvFctsExLTtDtn58DfMmwfn7ZqcR1vPRFUxbinVZf3dFVVX/AWMCszvKXuKYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chrome.tabs.api properties\"\n        title=\"\"\n        src=\"/static/1696468700438.0815157850153/9be90/func-list.png\"\n        srcset=\"/static/1696468700438.0815157850153/63868/func-list.png 250w,\n/static/1696468700438.0815157850153/0b533/func-list.png 500w,\n/static/1696468700438.0815157850153/9be90/func-list.png 636w\"\n        sizes=\"(max-width: 636px) 100vw, 636px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>사용 편의성을 위해 유저가 새 창을 띄우는 게 아닌, 간단한 <strong>팝업</strong>을 통해 이용할 수 있도록\n하겠습니다. <code class=\"language-text\">useTabList</code> 를 통해 받아온 데이터를 이용해 <code class=\"language-text\">popup.html</code> 파일을 작성하면 아이콘을 눌렀을\n때 나오는 팝업을 아래와 같이 구성할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 626px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOUlEQVR42o2TWY8hYRSG69oau6JQo1AUbV/SlkxsibTY9SRmjJjhh7j2q+dRnxaJmHgvTs63nP090tsLyGazuVzuJqvV2rsJKfAcwWDQ7XYXi8VGoxEOh/GiKEqhUDAMo9ls1ut1KRKJcBUxoTwgFAolk0kCxmKxTCaDNEzgsVQqSavVSlVVHtLpdOYLxh2413Wdy5skc03TRqORtN/v8dfpdNrtdq/X63a76LzxKWVCN5G6A+6i0ehyuZR2ux2RKaBSqWDWarXohPjxDKSDyWKxkLbbrSgskUho8TgxUZJ3wNFNEbqIPJ1OJRw4HI74t7ishCIJlbbRWCTPQr+1E50wUROY9Hp9aTabBYKBZuNdzeuF8fdqpcJIqoyyViuZQGdUHOk5MSkK3eVy9ft9ibqtVivOfF6v0+F0ezzM1vMlPQ9HzHw+n81mGwwG0nw+x6xYKhspbT/tMzJmSEuYhxgVwek2YcmIo+CcLMuXyNSM1/xbPqqpnV5dTyUxpC9kKDqEGU3CTIxAOIV817QtFgsHv8/ncro8Xi+5ee8kroVyq8Lv91PpJW1hTBshsywHBQSxn4HPdPsSGXrejF8EBdvt9ovxx2RhtZK27H8ZBL8ar378VJQwu/DI4UeIP6zHlWG/fu9r1epwOGQlkB8mxuMxcjKZsDoTE+KSaCwPrYI26/Vami8/NS0OjRgvu8GGQCBBKcjEsWFCXJbLZcE5sris5Pl83mw2x+Pxr4k//4X4czgcWKfT6fQPRrHKCqheT4sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tab-list\"\n        title=\"\"\n        src=\"/static/1696468700438.4026157850154/af590/tab-list.png\"\n        srcset=\"/static/1696468700438.4026157850154/63868/tab-list.png 250w,\n/static/1696468700438.4026157850154/0b533/tab-list.png 500w,\n/static/1696468700438.4026157850154/af590/tab-list.png 626w\"\n        sizes=\"(max-width: 626px) 100vw, 626px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그리고 탭이 많을 때 빠르게 찾을 수 있도록 <strong>검색 기능</strong>을 넣었습니다. 대략적인 문자열만 입력해도\n결과를 찾을 수 있는 퍼지 검색(fuzzy-search) 알고리즘을 적용하기 위해\n<a href=\"https://www.fusejs.io/\">Fuse.js</a>를 사용했습니다. 이로써 사용자가 단어 철자를 정확히 입력하지 않아도\n원하는 검색 결과를 찾을 수 있습니다.</p>\n<h3 id=\"동기화-시작\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%EC%8B%9C%EC%9E%91\" aria-label=\"동기화 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 시작</h3>\n<p>선택한 탭 id를 받아 해당 탭에 스크롤 이벤트를 등록합니다. 그리고 스크롤이 감지되면 수치를 백분율로\n나타내고 다른 탭을 그만큼 스크롤합니다. 이는 백그라운드 스크립트와 콘텐츠 스크립트를 활용하여 구현할\n수 있습니다.</p>\n<p>동기화를 시작할 수 없는 상황은 다음과 같습니다.</p>\n<ul>\n<li>이미 동기화 중일 때</li>\n<li>유저가 선택한 탭이 2개 미만일 때</li>\n</ul>\n<p>선택된 탭이 2개 미만일 경우 또는 이미 동기화 중이라면 버튼을 <code class=\"language-text\">disabled</code> 처리하겠습니다.</p>\n<h3 id=\"동기화-해제\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%ED%95%B4%EC%A0%9C\" aria-label=\"동기화 해제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기화 해제</h3>\n<p>동기화가 해제되어야 하는 상황은 다음과 같습니다.</p>\n<ul>\n<li>동기화 중일 때</li>\n<li>동기화 중인 탭이 제거되었을 때</li>\n<li>동기화 중인 탭의 URL이 변경되었을 때</li>\n</ul>\n<h3 id=\"데이터-유지\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9C%A0%EC%A7%80\" aria-label=\"데이터 유지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 유지</h3>\n<p>팝업을 껐다 켜도 데이터를 유지해야 합니다. 동기화를 시작했다면 팝업을 언제든 다시 켜도 어떤 탭이\n동기화되고 있는지 유저에게 알려주기 위한 동작을 하기 위해선 말이죠.</p>\n<p>이때 <a href=\"https://developer.chrome.com/docs/extensions/reference/storage/\">chrome.storage API</a> 를\n활용해서 데이터 및 상태를 유지할 수 있습니다. 이 API를 사용하려면 tab처럼 manifest에 <code class=\"language-text\">storage</code>\n권한을 설정해줘야 합니다.</p>\n<p>백그라운드 스크립트에서 어떤 탭들이 동기화 중인지 저장하고 가져올 수 있는 함수를 만들어 사용하면\n되겠습니다.</p>\n<h2 id=\"최적화\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EC%A0%81%ED%99%94\" aria-label=\"최적화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최적화</h2>\n<p>아래 코드는 스크롤 이벤트가 발생하면 scrollY의 %값을 <code class=\"language-text\">syncScroll</code> 커맨드와 함께 전달하는 함수입니다.</p>\n<p>%값으로 적용한 이유는 똑같은 내용의 글을 번역한 것이어도 언어별로 전달하는 문자의 양이 차이가\n납니다. 그러므로 스크롤한 값 그대로 적용하는 것보단 %값을 적용해 최대한 번역문과 원문 글의 문장을\n비슷하게 읽어 내려갈 수 있게끔 하기 위함입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onScrollHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Scroll event triggered'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n      window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">||</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> scrollYPercentage <span class=\"token operator\">=</span> scrollPosition <span class=\"token operator\">/</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'Scroll event triggered, sending syncScroll message with percentage:'</span><span class=\"token punctuation\">,</span>\n      scrollYPercentage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      command<span class=\"token operator\">:</span> <span class=\"token string\">'syncScroll'</span><span class=\"token punctuation\">,</span>\n      data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in onScrollHandler: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>err<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"throttle-활용\" style=\"position:relative;\"><a href=\"#throttle-%ED%99%9C%EC%9A%A9\" aria-label=\"throttle 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Throttle 활용</h3>\n<p>위 함수를 스크롤 이벤트에 등록하고 실행을 해보면 아래 움짤처럼 굉장히 잦은 호출이 일어납니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/not-optimize.gif\" alt=\"잦은 호출 현상 예시\"></p>\n<p>저 함수의 목적은 스크롤이 발생하면 scrollY의 백분율 값을 계산해서 메시지를 보내는 것입니다. 그냥\n자연스럽게 다른 탭도 함께 스크롤 될 수 있도록 하면 되기에 이 경우, <code class=\"language-text\">throttle</code> 을 활용해서 메시지를\n적절한 타이밍에 보내도록 했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> throttle <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      timer <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/images/chrome-extension-sync-tab/throttle.gif\" alt=\"최적화 후 예시\"></p>\n<p>확실히 이제 호출이 자주 일어나지 않습니다. 하지만 움짤을 자세히 보면 또 다른 문제가 있는데요.</p>\n<p>한쪽 탭을 스크롤하면 다른 탭도 스크롤 위치를 맞추기 위해 자동으로 스크롤 됩니다. 그럼 다른 탭에서도\n스크롤이 발생하여 유저가 직접 스크롤하고 있는 탭(동기화 중인 탭)에 스크롤 위치를 맞추라는 메시지를\n보내게 됩니다. 그렇게 아래 움짤처럼 서로 스크롤을 맞추기 위해 <strong>무한 루프</strong>에 빠지게 됩니다. (받는\n쪽의 tabId를 보면 양쪽 모두 번갈아가며 스크롤 위치 데이터를 받고 스크롤 위치를 조정하고 있는 것을\n확인할 수 있습니다.)</p>\n<h3 id=\"debounce-활용\" style=\"position:relative;\"><a href=\"#debounce-%ED%99%9C%EC%9A%A9\" aria-label=\"debounce 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debounce 활용</h3>\n<p>이 문제를 개선하기 위해 선택한 탭들의 스크롤을 동일하게 맞추는 과정을 간단하게 살펴보겠습니다.</p>\n<ol>\n<li>유저가 서로 스크롤이 동기화되기 원하는 탭들을 선택하면 <code class=\"language-text\">startSync</code> 커맨드와 함께 탭의 id를 배열\n형태로 전달합니다.</li>\n<li>받은 탭의 id를 기반으로 해당 탭에 <code class=\"language-text\">startSyncTab</code> 커맨드를 전달합니다.</li>\n<li><code class=\"language-text\">startSyncTab</code> 을 전달 받으면 스크롤이 발생했을 때 scrollY의 퍼센트값을 계산해서 <code class=\"language-text\">syncScroll</code>\n커맨드를 보내는 함수(onScrollHandler)를 등록합니다.</li>\n<li><code class=\"language-text\">syncScroll</code> 을 전달 받으면 현재 스크롤 중인 탭을 제외하고 동기화 중인 모든 탭에\n<code class=\"language-text\">syncScrollForTab</code> 커맨드와 함께 scrollYPercentage 값을 전달합니다.</li>\n<li><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 <code class=\"language-text\">window.scrollTo()</code> 함수를 사용해 원하는 위치로 스크롤합니다.</li>\n</ol>\n<p>위 과정들을 거쳐 각 탭의 스크롤이 동기화 됩니다.</p>\n<p>이 문제는 <strong>사용자의 스크롤</strong>과 <code class=\"language-text\">**window.scrollTo()</code> 함수를 이용해 동작하는 스크롤**을 구별하는\n플래그 역할을 하는 변수와 <code class=\"language-text\">debounce</code> 함수를 통해 개선할 수 있습니다. 천천히 개선하는 과정을\n구현해보겠습니다.</p>\n<p>먼저, 플래그 역할을 하는 <code class=\"language-text\">scrolling</code> 변수를 선언하고 <code class=\"language-text\">false</code> 로 초기화하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">let</span> scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">syncScrollForTab</code> 을 전달 받으면 스크롤 위치를 동기화하는데 여기서 <code class=\"language-text\">scrolling: true</code> 로\n설정하겠습니다. 그리고 스크롤 이벤트에 등록한 함수에 <code class=\"language-text\">scrolling: true</code> 라면 메시지를 보내지 않도록\n하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> onScrollHandler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>scrolling<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Received syncScrollForTab message with data\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> scrollYPercentage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span>\n    scrollYPercentage <span class=\"token operator\">*</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">;</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    top<span class=\"token operator\">:</span> scrollPosition<span class=\"token punctuation\">,</span>\n    behavior<span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>마지막으로 <code class=\"language-text\">scrolling: false</code> 로 변경하는데 이 부분에 <code class=\"language-text\">debounce</code> 를 적용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> debounce <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Params <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">any</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">func</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n  wait<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timer<span class=\"token operator\">:</span> ReturnType<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> setTimeout<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> Params<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resetScrolling <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Scrolling reset to\"</span><span class=\"token punctuation\">,</span> scrolling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"syncScrollForTab\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  scrolling <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token function\">resetScrolling</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 스크롤 이벤트가 발생하게 되면 아래처럼 실행됩니다.</p>\n<p>스크롤 이벤트가 발생 → <code class=\"language-text\">syncScroll</code> 커맨드를 받아 동기화 중인 모든 탭에 <code class=\"language-text\">syncScrollForTab</code> 커맨드와\n함께 scrollYPercentage 값을 전달 → <code class=\"language-text\">scrolling: true</code> 로 설정 및 스크롤 위치 조정 후 <code class=\"language-text\">resetScrolling</code>\n함수 실행 → 스크롤 이벤트 발생 → <code class=\"language-text\">scrolling</code> 이 true이므로 동작 생략</p>\n<p>움짤로 확인해보겠습니다.</p>\n<p><img src=\"/images/chrome-extension-sync-tab/flag.gif\" alt=\"모든 최적화 후 예시\"></p>\n<p>1 id를 가진 탭에서 메시지를 보내면 2 id를 가진 탭이 메시지를 받아 <code class=\"language-text\">window.scrollTo()</code> 함수를 이용해\n스크롤 위치를 동기화합니다. 반대로 2 id를 가진 탭이 메시지를 보내면 1 id를 가진 탭에서 메시지를 받아\n스크롤 위치를 동기화하는 것을 볼 수 있습니다.</p>\n<p>스크롤 위치도 자연스럽게 동기화 되고 문제가 개선되었습니다.</p>\n<h2 id=\"uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-오류-해결\" style=\"position:relative;\"><a href=\"#uncaught-in-promise-error-could-not-establish-connection-receiving-end-does-not-exist-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0\" aria-label=\"uncaught in promise error could not establish connection receiving end does not exist 오류 해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>‘Uncaught (in promise) Error: Could not establish connection. Receiving end does not exist.’ 오류 해결</h2>\n<h3 id=\"오류-발견\" style=\"position:relative;\"><a href=\"#%EC%98%A4%EB%A5%98-%EB%B0%9C%EA%B2%AC\" aria-label=\"오류 발견 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>오류 발견</h3>\n<p>처음 기획 했던 대로 기본 기능을 모두 구현했습니다. 그러나 콘솔에서 예기치 않은 오류가 발생합니다.\n디버깅을 위해 앱을 설치하고 열려있던 탭을 선택 후 동기화 시작 버튼을 누르면 에러가 발생합니다.\n그리고 탭 간 스크롤이 동기화되지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Uncaught <span class=\"token punctuation\">(</span>in promise<span class=\"token punctuation\">)</span> Error: Could not establish connection. Receiving end does not exist.</code></pre></div>\n<h3 id=\"이-오류가-발생하는-이유\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"이 오류가 발생하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류가 발생하는 이유?</h3>\n<p>이 오류는 일반적으로 백그라운드 스크립트에서 <code class=\"language-text\">chrome.tabs.sendMessage</code>메서드가 호출될 때 콘텐츠\n스크립트가 탭에 <strong>수신되지 않거나 아직 초기화되지 않은</strong> 경우에 나타납니다.</p>\n<p>특히\n<a href=\"https://groups.google.com/a/chromium.org/g/chromium-extensions/c/BH5_4OKxM3s/m/7lqiiKT9AQAJ\">Chromium-dev 그룹에 올라온 대화</a>에서\n해당 문제에 대해 명확히 파악할 수 있습니다.</p>\n<blockquote>\n<p>Content scripts declared in manifest.json or registered in chrome.scripting.registerContentScripts\nrun only when the tab is loaded or reloaded (e.g. via Ctrl-R), so when you install or update your\nextension the existing tabs don't run your new content scripts automatically in Chrome (they do in\nFirefox though), whereas the old content scripts that were running previously lose the ability to\nconnect to the extension.</p>\n</blockquote>\n<p>쉽게 설명하면 콘텐츠 스크립트를 등록하는 <code class=\"language-text\">chrome.scripting.registerContentScripts</code>는 새로고침 또는\n탭이 로드될 때만 실행됩니다. 따라서 익스텐션을 설치하기 전인 이전 탭에는 수동으로 콘텐츠 스크립트를\n등록하지 않으면 서로 메시지를 주고 받을 수 없다는 것입니다.</p>\n<p>위 설명에 따르면 익스텐션을 설치하기 전에 존재하던 탭에는 콘텐츠 스크립트가 실행되지 않습니다.\n이러한 탭으로 메시지를 보내려고 할 때 수신단(콘텐츠 스크립트)이 없으므로 오류가 발생한 것이죠.</p>\n<h3 id=\"이-오류를-어떻게-해결할-수-있을까\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%98%A4%EB%A5%98%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EA%B2%B0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"이 오류를 어떻게 해결할 수 있을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 오류를 어떻게 해결할 수 있을까?</h3>\n<p>핵심은 메시지를 보내려는 탭에 콘텐츠 스크립트가 삽입되어 있어야 하는 것입니다. 콘텐츠 스크립트를\n삽입하는 방법은 아래 3가지 방법이 있겠네요.</p>\n<ol>\n<li>설치 전 열려있던 탭을 강제로 새로고침하여 콘텐츠 스크립트를 삽입합니다.</li>\n<li>익스텐션 설치 시, 콘텐츠 스크립트를 기존 탭에 삽입합니다.</li>\n<li>콘텐츠 스크립트가 필요한 작업 요청 시 콘텐츠 스크립트를 삽입합니다.</li>\n</ol>\n<p>제 생각엔 세 번째 방법이 적절할 것 같습니다. 첫 번째 방법은 사용자의 데이터가 유실될 위험이\n있습니다. 두 번째 방법은 설치하기 전에 존재했던 모든 페이지에 콘텐츠 스크립트를 적용하게 됩니다.\n어차피 사용자가 원하는 탭에 콘텐츠 스크립트를 삽입해서 메시지를 주고 받으면 됩니다. 따라서 필요한\n탭에 콘텐츠 스크립트를 삽입하는 세 번째 방법을 선택했습니다.</p>\n<h3 id=\"구현\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현</h3>\n<ol>\n<li><code class=\"language-text\">chrome.tabs.sendMessage</code>를 사용하여 메시지를 보내기 전에 <code class=\"language-text\">chrome.scripting.executeScript</code>를\n사용해 콘텐츠 스크립트를 유저가 선택한 탭에 삽입합니다.</li>\n<li>스크립트 삽입이 성공하면 메시지를 계속 전송할 수 있게 됩니다.</li>\n</ol>\n<p>간단한 코드로 살펴보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// background.ts</span>\n\nchrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>onMessage<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> sender<span class=\"token punctuation\">,</span> sendResponse<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Popup에서 'startSync' 커맨드와 함께 유저가 선택한 탭의 id들을 전달하면 여기서 받습니다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>command <span class=\"token operator\">===</span> <span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> checkedTabIds<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\n    checkedTabIds<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 탭이 존재하고 접근 가능한지 확인합니다.</span>\n      chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.tabs.get: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 콘텐츠 스크립트를 해당 탭에 삽입합니다.</span>\n        chrome<span class=\"token punctuation\">.</span>scripting<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">{</span>\n            target<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> tabId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            files<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/pages/content/index.js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>\n                <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error in chrome.scripting.executeScript: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>lastError<span class=\"token punctuation\">.</span>message<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// 주입이 성공하면 메시지를 보냅니다.</span>\n            chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n              command<span class=\"token operator\">:</span> <span class=\"token string\">\"startSyncTab\"</span><span class=\"token punctuation\">,</span>\n              data<span class=\"token operator\">:</span> tabId<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 scripting을 사용한다고 manifest의 permissions에 포함하면 됩니다.</p>\n<p>이렇게 유저가 선택한 탭에 메시지를 보내기 전에 콘텐츠 스크립트를 삽입함으로써 발생한 오류를 해결할\n수 있었습니다.</p>\n<h2 id=\"다국어-지원\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EA%B5%AD%EC%96%B4-%EC%A7%80%EC%9B%90\" aria-label=\"다국어 지원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다국어 지원</h2>\n<p>다국어를 지원하는 방법은 아주 간단합니다.</p>\n<p>로케일을 추가할 때마다 <code class=\"language-text\">_locales/_localeCode_</code> 폴더 아래에 <code class=\"language-text\">messages.json</code> 파일에 문자열을 작성하면\n됩니다. 여기서 <code class=\"language-text\">localeCode</code>는 영어의 <code class=\"language-text\">en</code>과 같은 국가코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extName\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Synchronize Tab Scrolling - 여러 탭의 스크롤 위치를 동일하게 유지\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extDescription\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"여러 탭을 선택하고 스크롤 위치를 동기화할 수 있습니다.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"startSync\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"동기화 시작\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">manifest.json</code> 에선 <code class=\"language-text\">__MSG_messagename__</code> 처럼 문자열을 작성해 적용할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"__MSG_extName__\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 <code class=\"language-text\">messages.json</code> 파일의 메시지를 간편하게 사용하기 위한 함수를 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">EnMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/en/messages.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">KoMessage</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../public/_locales/ko/messages.json'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">MessageKey</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> EnMessage <span class=\"token operator\">|</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> KoMessage<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">t</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> MessageKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> chrome<span class=\"token punctuation\">.</span>i18n<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>en, ko 메시지들을 가져와 문자열로 보여줍니다. 아래는 사용 예시입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> t <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@src/chrome/i18n\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Popup</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"startSync\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>나머지 정보들은\n<a href=\"https://developer.chrome.com/docs/extensions/reference/i18n/#how-to-support-multiple-languages\">developer.chrome: how-to-support-multiple-languages</a>\n에서 자세히 확인하실 수 있습니다.</p>"
    }
  },
  {
    "route": "https://lazy-dev.netlify.app/shorts/tips-using-gpt-promprt-engineering/",
    "data": {
      "%ED%8E%98%EB%A5%B4%EC%86%8C%EB%82%98-%ED%8C%A8%ED%84%B4#페르소나 패턴": "<p>이 글은\n<a href=\"https://www.youtube.com/watch?v=WRkig3VeRLY&#x26;ab_channel=%EB%85%B8%EB%A7%88%EB%93%9C%EC%BD%94%EB%8D%94NomadCoders\">노마드 코더님의 영상</a>\n내용이 유용해 옮긴 글입니다. 이 글에 작성된 내용은 영상에서 확인할 수 있습니다.</p>\n<p>ChatGPT를 올바르게 잘 활용한다면 생산성을 향상할 수 있습니다. 하지만 ChatGPT를 100% 신뢰할 순\n없는데요. 실제로 스택 오버플로우에서 517개의 코딩 문제를 제시했을 때, ChatGPT는 52%의 경우\n부정확하거나 작동하지 않는 코드가 포함된 답변을 제공한 것으로 나타났다고 합니다. 또 다른 문제는 이\n모델이 정답을 틀리거나 반만 맞더라도, 꽤 <strong>설득력 있는 답변</strong>을 생성하는 것입니다.</p>\n<p>때때로 환각을 보고 무언가를 지어내기 때문에 모든 답변을 신뢰할 수 없으며, 질문하는 주제에 대해 어느\n정도 이해해야만 답변을 평가할 수 있습니다. 그래서 ChatGPT는 우리를 대체할 도구라기보다는 생산성을\n높여주는 도구로 볼 수 있겠습니다.</p>\n<p>그럼 어떻게 사용하면 좋을까요? 질문의 틀을 잘 짜는 방법을 알게 되면 ChatGPT에서 최상의 결과를 얻을\n수 있습니다. 이 글에서는 ChatGPT에서 더 나은 답변을 얻을 수 있는 것으로 입증된 5가지 프롬프트 패턴을\n알아보도록 하겠습니다. 패턴의 효과는 필요한 내용에 따라 다를 수 있으며 질문에 더 적합한 패턴을 찾을\n때까지 자유롭게 혼합하거나 번갈아 가며 사용하면 됩니다.</p>\n<h2 id=\"페르소나-패턴\" style=\"position:relative;\"><a href=\"#%ED%8E%98%EB%A5%B4%EC%86%8C%EB%82%98-%ED%8C%A8%ED%84%B4\" aria-label=\"페르소나 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>페르소나 패턴</h2>\n<p>내가 <strong>관심 있는 주제에 관해서만</strong> 이야기하도록 하는 방법입니다. 실제로 활용하는 상황을 보겠습니다.</p>\n<p>코드를 <strong>검토</strong>하거나 코드에서 <strong>버그</strong>를 찾고 싶을 때는 다음과 같이 ChatGPT에게 알려줄 수 있습니다.</p>\n<blockquote>\n<p>당신은 ABC 회사의 선임 엔지니어인 척할 것입니다. 보안과 성능에 주의를 기울여 다음 코드를\n검토하세요. 선임 엔지니어라면 해당 코드에 대해 생성할 수 있는 출력을 제공하세요.</p>\n</blockquote>\n<p>또한, 블로그 글을 검토하도록 할 때는 다음과 같이 ChatGPT에게 알려줄 수 있겠죠.</p>\n<blockquote>\n<p>이제부터 책 편집자가 되어 가독성에 중점을 두고 다음 블로그 글을 검토해 보세요.</p>\n</blockquote>\n<p>이런 식으로 말한 다음에 질문하면 됩니다. 그러면 ChatGPT가 더 나은 결과를 제공하기 위해 초점을 맞추고\n주목할 대상을 좁힐 수 있습니다.</p>\n<h2 id=\"레시피-패턴\" style=\"position:relative;\"><a href=\"#%EB%A0%88%EC%8B%9C%ED%94%BC-%ED%8C%A8%ED%84%B4\" aria-label=\"레시피 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>레시피 패턴</h2>\n<p>달성하고 싶은 목표가 있고, 재료는 알고 있으며, 달성하기 위한 단계는 어느 정도 알고 있지만, 이를 모두\n조합하는 데 도움이 필요할 때 유용합니다. 특히 프로그래머에게 유용한 패턴이라고 볼 수 있습니다.\n실제로 활용하는 상황을 보겠습니다.</p>\n<blockquote>\n<p>데이터를 암호화하는 Rust 프로그램을 작성하려고 합니다. 사용자 입력을 읽고, 유효성을 검사하고,\n암호화하고, 암호화된 데이터를 반환해야 한다는 것을 알고 있습니다. 이를 위해, 전체 단계 순서를\n알려주고, 누락된 단계를 채우고, 불필요한 단계가 있는지 확인해 주세요.</p>\n</blockquote>\n<p>여기서 <code class=\"language-text\">누락된 단계를 채우세요</code>라는 건 내가 놓친 부분이 있으면 후속 질문을 하지 않고 ChatGPT가\n부족한 부분을 바로 채우도록 하는 것이고, <code class=\"language-text\">불필요한 단계를 확인해 주세요</code>라는 마지막 문구는 더 나은\n레시피를 만들기 위해 부정확한 부분을 찾아내도록 ChatGPT에 지시하기 때문에 유용합니다.</p>\n<h2 id=\"리플렉션-패턴\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%ED%94%8C%EB%A0%89%EC%85%98-%ED%8C%A8%ED%84%B4\" aria-label=\"리플렉션 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리플렉션 패턴</h2>\n<p>모든 답변에 대한 <strong>이유를 설명</strong>하도록 GPT에 요청할 수 있습니다. GPT에 다음과 같이 알려주고 질문을\n하면 됩니다.</p>\n<blockquote>\n<p>답변을 제공할 때는 답변의 근거와 가정을 설명하세요. 선택한 사항을 설명하고 잠재적인 제한 사항이나\n엣지 케이스를 설명하세요.</p>\n</blockquote>\n<p>이렇게 하면 답변이 훨씬 더 상세해지고 ChatGPT가 답변에 대한 배경 정보를 평소보다 훨씬 더 많이\n제공합니다.</p>\n<h2 id=\"거부-차단기-패턴\" style=\"position:relative;\"><a href=\"#%EA%B1%B0%EB%B6%80-%EC%B0%A8%EB%8B%A8%EA%B8%B0-%ED%8C%A8%ED%84%B4\" aria-label=\"거부 차단기 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>거부 차단기 패턴</h2>\n<p>ChatGPT가 지식 제한, 안전 등의 이유로 답변할 수 없다고 한 질문을 한 적이 있을 수 있을 겁니다. 이\n패턴은 원하는 특정 질문의 문구를 <strong>바꾸거나 재구성</strong>하여 ChatGPT로 하여금 대답하게끔 유도합니다.</p>\n<blockquote>\n<p>질문에 답할 수 없을 때마다 질문에 답할 수 없는 이유를 설명하세요. 답변할 수 있는 질문의 대체\n표현을 하나 이상 제공하세요.</p>\n</blockquote>\n<p>이제 질문을 하면, ChatGPT가 답변할 수 없는 경우, 원래 질문에 대한 답변이 될 수 있는 몇 가지 대체\n질문이 표시되며, 이를 통해 궁극적으로 ChatGPT가 답변할 수 있게 됩니다.</p>\n<h2 id=\"뒤집힌-상호작용-패턴\" style=\"position:relative;\"><a href=\"#%EB%92%A4%EC%A7%91%ED%9E%8C-%EC%83%81%ED%98%B8%EC%9E%91%EC%9A%A9-%ED%8C%A8%ED%84%B4\" aria-label=\"뒤집힌 상호작용 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>뒤집힌 상호작용 패턴</h2>\n<p>원하는 것을 달성할 때까지 ChatGPT가 우리에게 질문하도록 유도할 수 있습니다. 이 패턴은 원하는 것을\n알고 있지만, 그 목표를 달성하기 위한 단계를 모르거나, 그 목표를 달성하기 위해 ChatGPT가 어떤 정보가\n있어야 하는지 모를 때 유용합니다.</p>\n<blockquote>\n<p>AWS에 있는 웹 서버에 Rust 바이너리를 배포하기 위한 질문을 나에게 하세요. 필요한 모든 정보를\n얻으면, 배포를 자동화하는 bash 스크립트를 작성하세요.</p>\n</blockquote>\n<p>이 쿼리를 실행하면 ChatGPT가 사용자에게 필요한 정보를 묻는 메시지가 표시됩니다. 그러면 ChatGPT에\n필요한 정보와 단계 등을 먼저 알아내야 하는 번거로움을 덜 수 있습니다. 사용자가 대화를 주도하는 대신\nChatGPT가 대화를 주도하도록 하여 가능한 한 <strong>적은 메시지와 상호 작용</strong>으로 필요한 정보를 정확하게\n전달할 수 있습니다.</p>",
      "%EB%A0%88%EC%8B%9C%ED%94%BC-%ED%8C%A8%ED%84%B4#레시피 패턴": "<p>이 글은\n<a href=\"https://www.youtube.com/watch?v=WRkig3VeRLY&#x26;ab_channel=%EB%85%B8%EB%A7%88%EB%93%9C%EC%BD%94%EB%8D%94NomadCoders\">노마드 코더님의 영상</a>\n내용이 유용해 옮긴 글입니다. 이 글에 작성된 내용은 영상에서 확인할 수 있습니다.</p>\n<p>ChatGPT를 올바르게 잘 활용한다면 생산성을 향상할 수 있습니다. 하지만 ChatGPT를 100% 신뢰할 순\n없는데요. 실제로 스택 오버플로우에서 517개의 코딩 문제를 제시했을 때, ChatGPT는 52%의 경우\n부정확하거나 작동하지 않는 코드가 포함된 답변을 제공한 것으로 나타났다고 합니다. 또 다른 문제는 이\n모델이 정답을 틀리거나 반만 맞더라도, 꽤 <strong>설득력 있는 답변</strong>을 생성하는 것입니다.</p>\n<p>때때로 환각을 보고 무언가를 지어내기 때문에 모든 답변을 신뢰할 수 없으며, 질문하는 주제에 대해 어느\n정도 이해해야만 답변을 평가할 수 있습니다. 그래서 ChatGPT는 우리를 대체할 도구라기보다는 생산성을\n높여주는 도구로 볼 수 있겠습니다.</p>\n<p>그럼 어떻게 사용하면 좋을까요? 질문의 틀을 잘 짜는 방법을 알게 되면 ChatGPT에서 최상의 결과를 얻을\n수 있습니다. 이 글에서는 ChatGPT에서 더 나은 답변을 얻을 수 있는 것으로 입증된 5가지 프롬프트 패턴을\n알아보도록 하겠습니다. 패턴의 효과는 필요한 내용에 따라 다를 수 있으며 질문에 더 적합한 패턴을 찾을\n때까지 자유롭게 혼합하거나 번갈아 가며 사용하면 됩니다.</p>\n<h2 id=\"페르소나-패턴\" style=\"position:relative;\"><a href=\"#%ED%8E%98%EB%A5%B4%EC%86%8C%EB%82%98-%ED%8C%A8%ED%84%B4\" aria-label=\"페르소나 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>페르소나 패턴</h2>\n<p>내가 <strong>관심 있는 주제에 관해서만</strong> 이야기하도록 하는 방법입니다. 실제로 활용하는 상황을 보겠습니다.</p>\n<p>코드를 <strong>검토</strong>하거나 코드에서 <strong>버그</strong>를 찾고 싶을 때는 다음과 같이 ChatGPT에게 알려줄 수 있습니다.</p>\n<blockquote>\n<p>당신은 ABC 회사의 선임 엔지니어인 척할 것입니다. 보안과 성능에 주의를 기울여 다음 코드를\n검토하세요. 선임 엔지니어라면 해당 코드에 대해 생성할 수 있는 출력을 제공하세요.</p>\n</blockquote>\n<p>또한, 블로그 글을 검토하도록 할 때는 다음과 같이 ChatGPT에게 알려줄 수 있겠죠.</p>\n<blockquote>\n<p>이제부터 책 편집자가 되어 가독성에 중점을 두고 다음 블로그 글을 검토해 보세요.</p>\n</blockquote>\n<p>이런 식으로 말한 다음에 질문하면 됩니다. 그러면 ChatGPT가 더 나은 결과를 제공하기 위해 초점을 맞추고\n주목할 대상을 좁힐 수 있습니다.</p>\n<h2 id=\"레시피-패턴\" style=\"position:relative;\"><a href=\"#%EB%A0%88%EC%8B%9C%ED%94%BC-%ED%8C%A8%ED%84%B4\" aria-label=\"레시피 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>레시피 패턴</h2>\n<p>달성하고 싶은 목표가 있고, 재료는 알고 있으며, 달성하기 위한 단계는 어느 정도 알고 있지만, 이를 모두\n조합하는 데 도움이 필요할 때 유용합니다. 특히 프로그래머에게 유용한 패턴이라고 볼 수 있습니다.\n실제로 활용하는 상황을 보겠습니다.</p>\n<blockquote>\n<p>데이터를 암호화하는 Rust 프로그램을 작성하려고 합니다. 사용자 입력을 읽고, 유효성을 검사하고,\n암호화하고, 암호화된 데이터를 반환해야 한다는 것을 알고 있습니다. 이를 위해, 전체 단계 순서를\n알려주고, 누락된 단계를 채우고, 불필요한 단계가 있는지 확인해 주세요.</p>\n</blockquote>\n<p>여기서 <code class=\"language-text\">누락된 단계를 채우세요</code>라는 건 내가 놓친 부분이 있으면 후속 질문을 하지 않고 ChatGPT가\n부족한 부분을 바로 채우도록 하는 것이고, <code class=\"language-text\">불필요한 단계를 확인해 주세요</code>라는 마지막 문구는 더 나은\n레시피를 만들기 위해 부정확한 부분을 찾아내도록 ChatGPT에 지시하기 때문에 유용합니다.</p>\n<h2 id=\"리플렉션-패턴\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%ED%94%8C%EB%A0%89%EC%85%98-%ED%8C%A8%ED%84%B4\" aria-label=\"리플렉션 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리플렉션 패턴</h2>\n<p>모든 답변에 대한 <strong>이유를 설명</strong>하도록 GPT에 요청할 수 있습니다. GPT에 다음과 같이 알려주고 질문을\n하면 됩니다.</p>\n<blockquote>\n<p>답변을 제공할 때는 답변의 근거와 가정을 설명하세요. 선택한 사항을 설명하고 잠재적인 제한 사항이나\n엣지 케이스를 설명하세요.</p>\n</blockquote>\n<p>이렇게 하면 답변이 훨씬 더 상세해지고 ChatGPT가 답변에 대한 배경 정보를 평소보다 훨씬 더 많이\n제공합니다.</p>\n<h2 id=\"거부-차단기-패턴\" style=\"position:relative;\"><a href=\"#%EA%B1%B0%EB%B6%80-%EC%B0%A8%EB%8B%A8%EA%B8%B0-%ED%8C%A8%ED%84%B4\" aria-label=\"거부 차단기 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>거부 차단기 패턴</h2>\n<p>ChatGPT가 지식 제한, 안전 등의 이유로 답변할 수 없다고 한 질문을 한 적이 있을 수 있을 겁니다. 이\n패턴은 원하는 특정 질문의 문구를 <strong>바꾸거나 재구성</strong>하여 ChatGPT로 하여금 대답하게끔 유도합니다.</p>\n<blockquote>\n<p>질문에 답할 수 없을 때마다 질문에 답할 수 없는 이유를 설명하세요. 답변할 수 있는 질문의 대체\n표현을 하나 이상 제공하세요.</p>\n</blockquote>\n<p>이제 질문을 하면, ChatGPT가 답변할 수 없는 경우, 원래 질문에 대한 답변이 될 수 있는 몇 가지 대체\n질문이 표시되며, 이를 통해 궁극적으로 ChatGPT가 답변할 수 있게 됩니다.</p>\n<h2 id=\"뒤집힌-상호작용-패턴\" style=\"position:relative;\"><a href=\"#%EB%92%A4%EC%A7%91%ED%9E%8C-%EC%83%81%ED%98%B8%EC%9E%91%EC%9A%A9-%ED%8C%A8%ED%84%B4\" aria-label=\"뒤집힌 상호작용 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>뒤집힌 상호작용 패턴</h2>\n<p>원하는 것을 달성할 때까지 ChatGPT가 우리에게 질문하도록 유도할 수 있습니다. 이 패턴은 원하는 것을\n알고 있지만, 그 목표를 달성하기 위한 단계를 모르거나, 그 목표를 달성하기 위해 ChatGPT가 어떤 정보가\n있어야 하는지 모를 때 유용합니다.</p>\n<blockquote>\n<p>AWS에 있는 웹 서버에 Rust 바이너리를 배포하기 위한 질문을 나에게 하세요. 필요한 모든 정보를\n얻으면, 배포를 자동화하는 bash 스크립트를 작성하세요.</p>\n</blockquote>\n<p>이 쿼리를 실행하면 ChatGPT가 사용자에게 필요한 정보를 묻는 메시지가 표시됩니다. 그러면 ChatGPT에\n필요한 정보와 단계 등을 먼저 알아내야 하는 번거로움을 덜 수 있습니다. 사용자가 대화를 주도하는 대신\nChatGPT가 대화를 주도하도록 하여 가능한 한 <strong>적은 메시지와 상호 작용</strong>으로 필요한 정보를 정확하게\n전달할 수 있습니다.</p>",
      "%EB%A6%AC%ED%94%8C%EB%A0%89%EC%85%98-%ED%8C%A8%ED%84%B4#리플렉션 패턴": "<p>이 글은\n<a href=\"https://www.youtube.com/watch?v=WRkig3VeRLY&#x26;ab_channel=%EB%85%B8%EB%A7%88%EB%93%9C%EC%BD%94%EB%8D%94NomadCoders\">노마드 코더님의 영상</a>\n내용이 유용해 옮긴 글입니다. 이 글에 작성된 내용은 영상에서 확인할 수 있습니다.</p>\n<p>ChatGPT를 올바르게 잘 활용한다면 생산성을 향상할 수 있습니다. 하지만 ChatGPT를 100% 신뢰할 순\n없는데요. 실제로 스택 오버플로우에서 517개의 코딩 문제를 제시했을 때, ChatGPT는 52%의 경우\n부정확하거나 작동하지 않는 코드가 포함된 답변을 제공한 것으로 나타났다고 합니다. 또 다른 문제는 이\n모델이 정답을 틀리거나 반만 맞더라도, 꽤 <strong>설득력 있는 답변</strong>을 생성하는 것입니다.</p>\n<p>때때로 환각을 보고 무언가를 지어내기 때문에 모든 답변을 신뢰할 수 없으며, 질문하는 주제에 대해 어느\n정도 이해해야만 답변을 평가할 수 있습니다. 그래서 ChatGPT는 우리를 대체할 도구라기보다는 생산성을\n높여주는 도구로 볼 수 있겠습니다.</p>\n<p>그럼 어떻게 사용하면 좋을까요? 질문의 틀을 잘 짜는 방법을 알게 되면 ChatGPT에서 최상의 결과를 얻을\n수 있습니다. 이 글에서는 ChatGPT에서 더 나은 답변을 얻을 수 있는 것으로 입증된 5가지 프롬프트 패턴을\n알아보도록 하겠습니다. 패턴의 효과는 필요한 내용에 따라 다를 수 있으며 질문에 더 적합한 패턴을 찾을\n때까지 자유롭게 혼합하거나 번갈아 가며 사용하면 됩니다.</p>\n<h2 id=\"페르소나-패턴\" style=\"position:relative;\"><a href=\"#%ED%8E%98%EB%A5%B4%EC%86%8C%EB%82%98-%ED%8C%A8%ED%84%B4\" aria-label=\"페르소나 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>페르소나 패턴</h2>\n<p>내가 <strong>관심 있는 주제에 관해서만</strong> 이야기하도록 하는 방법입니다. 실제로 활용하는 상황을 보겠습니다.</p>\n<p>코드를 <strong>검토</strong>하거나 코드에서 <strong>버그</strong>를 찾고 싶을 때는 다음과 같이 ChatGPT에게 알려줄 수 있습니다.</p>\n<blockquote>\n<p>당신은 ABC 회사의 선임 엔지니어인 척할 것입니다. 보안과 성능에 주의를 기울여 다음 코드를\n검토하세요. 선임 엔지니어라면 해당 코드에 대해 생성할 수 있는 출력을 제공하세요.</p>\n</blockquote>\n<p>또한, 블로그 글을 검토하도록 할 때는 다음과 같이 ChatGPT에게 알려줄 수 있겠죠.</p>\n<blockquote>\n<p>이제부터 책 편집자가 되어 가독성에 중점을 두고 다음 블로그 글을 검토해 보세요.</p>\n</blockquote>\n<p>이런 식으로 말한 다음에 질문하면 됩니다. 그러면 ChatGPT가 더 나은 결과를 제공하기 위해 초점을 맞추고\n주목할 대상을 좁힐 수 있습니다.</p>\n<h2 id=\"레시피-패턴\" style=\"position:relative;\"><a href=\"#%EB%A0%88%EC%8B%9C%ED%94%BC-%ED%8C%A8%ED%84%B4\" aria-label=\"레시피 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>레시피 패턴</h2>\n<p>달성하고 싶은 목표가 있고, 재료는 알고 있으며, 달성하기 위한 단계는 어느 정도 알고 있지만, 이를 모두\n조합하는 데 도움이 필요할 때 유용합니다. 특히 프로그래머에게 유용한 패턴이라고 볼 수 있습니다.\n실제로 활용하는 상황을 보겠습니다.</p>\n<blockquote>\n<p>데이터를 암호화하는 Rust 프로그램을 작성하려고 합니다. 사용자 입력을 읽고, 유효성을 검사하고,\n암호화하고, 암호화된 데이터를 반환해야 한다는 것을 알고 있습니다. 이를 위해, 전체 단계 순서를\n알려주고, 누락된 단계를 채우고, 불필요한 단계가 있는지 확인해 주세요.</p>\n</blockquote>\n<p>여기서 <code class=\"language-text\">누락된 단계를 채우세요</code>라는 건 내가 놓친 부분이 있으면 후속 질문을 하지 않고 ChatGPT가\n부족한 부분을 바로 채우도록 하는 것이고, <code class=\"language-text\">불필요한 단계를 확인해 주세요</code>라는 마지막 문구는 더 나은\n레시피를 만들기 위해 부정확한 부분을 찾아내도록 ChatGPT에 지시하기 때문에 유용합니다.</p>\n<h2 id=\"리플렉션-패턴\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%ED%94%8C%EB%A0%89%EC%85%98-%ED%8C%A8%ED%84%B4\" aria-label=\"리플렉션 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리플렉션 패턴</h2>\n<p>모든 답변에 대한 <strong>이유를 설명</strong>하도록 GPT에 요청할 수 있습니다. GPT에 다음과 같이 알려주고 질문을\n하면 됩니다.</p>\n<blockquote>\n<p>답변을 제공할 때는 답변의 근거와 가정을 설명하세요. 선택한 사항을 설명하고 잠재적인 제한 사항이나\n엣지 케이스를 설명하세요.</p>\n</blockquote>\n<p>이렇게 하면 답변이 훨씬 더 상세해지고 ChatGPT가 답변에 대한 배경 정보를 평소보다 훨씬 더 많이\n제공합니다.</p>\n<h2 id=\"거부-차단기-패턴\" style=\"position:relative;\"><a href=\"#%EA%B1%B0%EB%B6%80-%EC%B0%A8%EB%8B%A8%EA%B8%B0-%ED%8C%A8%ED%84%B4\" aria-label=\"거부 차단기 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>거부 차단기 패턴</h2>\n<p>ChatGPT가 지식 제한, 안전 등의 이유로 답변할 수 없다고 한 질문을 한 적이 있을 수 있을 겁니다. 이\n패턴은 원하는 특정 질문의 문구를 <strong>바꾸거나 재구성</strong>하여 ChatGPT로 하여금 대답하게끔 유도합니다.</p>\n<blockquote>\n<p>질문에 답할 수 없을 때마다 질문에 답할 수 없는 이유를 설명하세요. 답변할 수 있는 질문의 대체\n표현을 하나 이상 제공하세요.</p>\n</blockquote>\n<p>이제 질문을 하면, ChatGPT가 답변할 수 없는 경우, 원래 질문에 대한 답변이 될 수 있는 몇 가지 대체\n질문이 표시되며, 이를 통해 궁극적으로 ChatGPT가 답변할 수 있게 됩니다.</p>\n<h2 id=\"뒤집힌-상호작용-패턴\" style=\"position:relative;\"><a href=\"#%EB%92%A4%EC%A7%91%ED%9E%8C-%EC%83%81%ED%98%B8%EC%9E%91%EC%9A%A9-%ED%8C%A8%ED%84%B4\" aria-label=\"뒤집힌 상호작용 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>뒤집힌 상호작용 패턴</h2>\n<p>원하는 것을 달성할 때까지 ChatGPT가 우리에게 질문하도록 유도할 수 있습니다. 이 패턴은 원하는 것을\n알고 있지만, 그 목표를 달성하기 위한 단계를 모르거나, 그 목표를 달성하기 위해 ChatGPT가 어떤 정보가\n있어야 하는지 모를 때 유용합니다.</p>\n<blockquote>\n<p>AWS에 있는 웹 서버에 Rust 바이너리를 배포하기 위한 질문을 나에게 하세요. 필요한 모든 정보를\n얻으면, 배포를 자동화하는 bash 스크립트를 작성하세요.</p>\n</blockquote>\n<p>이 쿼리를 실행하면 ChatGPT가 사용자에게 필요한 정보를 묻는 메시지가 표시됩니다. 그러면 ChatGPT에\n필요한 정보와 단계 등을 먼저 알아내야 하는 번거로움을 덜 수 있습니다. 사용자가 대화를 주도하는 대신\nChatGPT가 대화를 주도하도록 하여 가능한 한 <strong>적은 메시지와 상호 작용</strong>으로 필요한 정보를 정확하게\n전달할 수 있습니다.</p>",
      "%EA%B1%B0%EB%B6%80-%EC%B0%A8%EB%8B%A8%EA%B8%B0-%ED%8C%A8%ED%84%B4#거부 차단기 패턴": "<p>이 글은\n<a href=\"https://www.youtube.com/watch?v=WRkig3VeRLY&#x26;ab_channel=%EB%85%B8%EB%A7%88%EB%93%9C%EC%BD%94%EB%8D%94NomadCoders\">노마드 코더님의 영상</a>\n내용이 유용해 옮긴 글입니다. 이 글에 작성된 내용은 영상에서 확인할 수 있습니다.</p>\n<p>ChatGPT를 올바르게 잘 활용한다면 생산성을 향상할 수 있습니다. 하지만 ChatGPT를 100% 신뢰할 순\n없는데요. 실제로 스택 오버플로우에서 517개의 코딩 문제를 제시했을 때, ChatGPT는 52%의 경우\n부정확하거나 작동하지 않는 코드가 포함된 답변을 제공한 것으로 나타났다고 합니다. 또 다른 문제는 이\n모델이 정답을 틀리거나 반만 맞더라도, 꽤 <strong>설득력 있는 답변</strong>을 생성하는 것입니다.</p>\n<p>때때로 환각을 보고 무언가를 지어내기 때문에 모든 답변을 신뢰할 수 없으며, 질문하는 주제에 대해 어느\n정도 이해해야만 답변을 평가할 수 있습니다. 그래서 ChatGPT는 우리를 대체할 도구라기보다는 생산성을\n높여주는 도구로 볼 수 있겠습니다.</p>\n<p>그럼 어떻게 사용하면 좋을까요? 질문의 틀을 잘 짜는 방법을 알게 되면 ChatGPT에서 최상의 결과를 얻을\n수 있습니다. 이 글에서는 ChatGPT에서 더 나은 답변을 얻을 수 있는 것으로 입증된 5가지 프롬프트 패턴을\n알아보도록 하겠습니다. 패턴의 효과는 필요한 내용에 따라 다를 수 있으며 질문에 더 적합한 패턴을 찾을\n때까지 자유롭게 혼합하거나 번갈아 가며 사용하면 됩니다.</p>\n<h2 id=\"페르소나-패턴\" style=\"position:relative;\"><a href=\"#%ED%8E%98%EB%A5%B4%EC%86%8C%EB%82%98-%ED%8C%A8%ED%84%B4\" aria-label=\"페르소나 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>페르소나 패턴</h2>\n<p>내가 <strong>관심 있는 주제에 관해서만</strong> 이야기하도록 하는 방법입니다. 실제로 활용하는 상황을 보겠습니다.</p>\n<p>코드를 <strong>검토</strong>하거나 코드에서 <strong>버그</strong>를 찾고 싶을 때는 다음과 같이 ChatGPT에게 알려줄 수 있습니다.</p>\n<blockquote>\n<p>당신은 ABC 회사의 선임 엔지니어인 척할 것입니다. 보안과 성능에 주의를 기울여 다음 코드를\n검토하세요. 선임 엔지니어라면 해당 코드에 대해 생성할 수 있는 출력을 제공하세요.</p>\n</blockquote>\n<p>또한, 블로그 글을 검토하도록 할 때는 다음과 같이 ChatGPT에게 알려줄 수 있겠죠.</p>\n<blockquote>\n<p>이제부터 책 편집자가 되어 가독성에 중점을 두고 다음 블로그 글을 검토해 보세요.</p>\n</blockquote>\n<p>이런 식으로 말한 다음에 질문하면 됩니다. 그러면 ChatGPT가 더 나은 결과를 제공하기 위해 초점을 맞추고\n주목할 대상을 좁힐 수 있습니다.</p>\n<h2 id=\"레시피-패턴\" style=\"position:relative;\"><a href=\"#%EB%A0%88%EC%8B%9C%ED%94%BC-%ED%8C%A8%ED%84%B4\" aria-label=\"레시피 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>레시피 패턴</h2>\n<p>달성하고 싶은 목표가 있고, 재료는 알고 있으며, 달성하기 위한 단계는 어느 정도 알고 있지만, 이를 모두\n조합하는 데 도움이 필요할 때 유용합니다. 특히 프로그래머에게 유용한 패턴이라고 볼 수 있습니다.\n실제로 활용하는 상황을 보겠습니다.</p>\n<blockquote>\n<p>데이터를 암호화하는 Rust 프로그램을 작성하려고 합니다. 사용자 입력을 읽고, 유효성을 검사하고,\n암호화하고, 암호화된 데이터를 반환해야 한다는 것을 알고 있습니다. 이를 위해, 전체 단계 순서를\n알려주고, 누락된 단계를 채우고, 불필요한 단계가 있는지 확인해 주세요.</p>\n</blockquote>\n<p>여기서 <code class=\"language-text\">누락된 단계를 채우세요</code>라는 건 내가 놓친 부분이 있으면 후속 질문을 하지 않고 ChatGPT가\n부족한 부분을 바로 채우도록 하는 것이고, <code class=\"language-text\">불필요한 단계를 확인해 주세요</code>라는 마지막 문구는 더 나은\n레시피를 만들기 위해 부정확한 부분을 찾아내도록 ChatGPT에 지시하기 때문에 유용합니다.</p>\n<h2 id=\"리플렉션-패턴\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%ED%94%8C%EB%A0%89%EC%85%98-%ED%8C%A8%ED%84%B4\" aria-label=\"리플렉션 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리플렉션 패턴</h2>\n<p>모든 답변에 대한 <strong>이유를 설명</strong>하도록 GPT에 요청할 수 있습니다. GPT에 다음과 같이 알려주고 질문을\n하면 됩니다.</p>\n<blockquote>\n<p>답변을 제공할 때는 답변의 근거와 가정을 설명하세요. 선택한 사항을 설명하고 잠재적인 제한 사항이나\n엣지 케이스를 설명하세요.</p>\n</blockquote>\n<p>이렇게 하면 답변이 훨씬 더 상세해지고 ChatGPT가 답변에 대한 배경 정보를 평소보다 훨씬 더 많이\n제공합니다.</p>\n<h2 id=\"거부-차단기-패턴\" style=\"position:relative;\"><a href=\"#%EA%B1%B0%EB%B6%80-%EC%B0%A8%EB%8B%A8%EA%B8%B0-%ED%8C%A8%ED%84%B4\" aria-label=\"거부 차단기 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>거부 차단기 패턴</h2>\n<p>ChatGPT가 지식 제한, 안전 등의 이유로 답변할 수 없다고 한 질문을 한 적이 있을 수 있을 겁니다. 이\n패턴은 원하는 특정 질문의 문구를 <strong>바꾸거나 재구성</strong>하여 ChatGPT로 하여금 대답하게끔 유도합니다.</p>\n<blockquote>\n<p>질문에 답할 수 없을 때마다 질문에 답할 수 없는 이유를 설명하세요. 답변할 수 있는 질문의 대체\n표현을 하나 이상 제공하세요.</p>\n</blockquote>\n<p>이제 질문을 하면, ChatGPT가 답변할 수 없는 경우, 원래 질문에 대한 답변이 될 수 있는 몇 가지 대체\n질문이 표시되며, 이를 통해 궁극적으로 ChatGPT가 답변할 수 있게 됩니다.</p>\n<h2 id=\"뒤집힌-상호작용-패턴\" style=\"position:relative;\"><a href=\"#%EB%92%A4%EC%A7%91%ED%9E%8C-%EC%83%81%ED%98%B8%EC%9E%91%EC%9A%A9-%ED%8C%A8%ED%84%B4\" aria-label=\"뒤집힌 상호작용 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>뒤집힌 상호작용 패턴</h2>\n<p>원하는 것을 달성할 때까지 ChatGPT가 우리에게 질문하도록 유도할 수 있습니다. 이 패턴은 원하는 것을\n알고 있지만, 그 목표를 달성하기 위한 단계를 모르거나, 그 목표를 달성하기 위해 ChatGPT가 어떤 정보가\n있어야 하는지 모를 때 유용합니다.</p>\n<blockquote>\n<p>AWS에 있는 웹 서버에 Rust 바이너리를 배포하기 위한 질문을 나에게 하세요. 필요한 모든 정보를\n얻으면, 배포를 자동화하는 bash 스크립트를 작성하세요.</p>\n</blockquote>\n<p>이 쿼리를 실행하면 ChatGPT가 사용자에게 필요한 정보를 묻는 메시지가 표시됩니다. 그러면 ChatGPT에\n필요한 정보와 단계 등을 먼저 알아내야 하는 번거로움을 덜 수 있습니다. 사용자가 대화를 주도하는 대신\nChatGPT가 대화를 주도하도록 하여 가능한 한 <strong>적은 메시지와 상호 작용</strong>으로 필요한 정보를 정확하게\n전달할 수 있습니다.</p>",
      "%EB%92%A4%EC%A7%91%ED%9E%8C-%EC%83%81%ED%98%B8%EC%9E%91%EC%9A%A9-%ED%8C%A8%ED%84%B4#뒤집힌 상호작용 패턴": "<p>이 글은\n<a href=\"https://www.youtube.com/watch?v=WRkig3VeRLY&#x26;ab_channel=%EB%85%B8%EB%A7%88%EB%93%9C%EC%BD%94%EB%8D%94NomadCoders\">노마드 코더님의 영상</a>\n내용이 유용해 옮긴 글입니다. 이 글에 작성된 내용은 영상에서 확인할 수 있습니다.</p>\n<p>ChatGPT를 올바르게 잘 활용한다면 생산성을 향상할 수 있습니다. 하지만 ChatGPT를 100% 신뢰할 순\n없는데요. 실제로 스택 오버플로우에서 517개의 코딩 문제를 제시했을 때, ChatGPT는 52%의 경우\n부정확하거나 작동하지 않는 코드가 포함된 답변을 제공한 것으로 나타났다고 합니다. 또 다른 문제는 이\n모델이 정답을 틀리거나 반만 맞더라도, 꽤 <strong>설득력 있는 답변</strong>을 생성하는 것입니다.</p>\n<p>때때로 환각을 보고 무언가를 지어내기 때문에 모든 답변을 신뢰할 수 없으며, 질문하는 주제에 대해 어느\n정도 이해해야만 답변을 평가할 수 있습니다. 그래서 ChatGPT는 우리를 대체할 도구라기보다는 생산성을\n높여주는 도구로 볼 수 있겠습니다.</p>\n<p>그럼 어떻게 사용하면 좋을까요? 질문의 틀을 잘 짜는 방법을 알게 되면 ChatGPT에서 최상의 결과를 얻을\n수 있습니다. 이 글에서는 ChatGPT에서 더 나은 답변을 얻을 수 있는 것으로 입증된 5가지 프롬프트 패턴을\n알아보도록 하겠습니다. 패턴의 효과는 필요한 내용에 따라 다를 수 있으며 질문에 더 적합한 패턴을 찾을\n때까지 자유롭게 혼합하거나 번갈아 가며 사용하면 됩니다.</p>\n<h2 id=\"페르소나-패턴\" style=\"position:relative;\"><a href=\"#%ED%8E%98%EB%A5%B4%EC%86%8C%EB%82%98-%ED%8C%A8%ED%84%B4\" aria-label=\"페르소나 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>페르소나 패턴</h2>\n<p>내가 <strong>관심 있는 주제에 관해서만</strong> 이야기하도록 하는 방법입니다. 실제로 활용하는 상황을 보겠습니다.</p>\n<p>코드를 <strong>검토</strong>하거나 코드에서 <strong>버그</strong>를 찾고 싶을 때는 다음과 같이 ChatGPT에게 알려줄 수 있습니다.</p>\n<blockquote>\n<p>당신은 ABC 회사의 선임 엔지니어인 척할 것입니다. 보안과 성능에 주의를 기울여 다음 코드를\n검토하세요. 선임 엔지니어라면 해당 코드에 대해 생성할 수 있는 출력을 제공하세요.</p>\n</blockquote>\n<p>또한, 블로그 글을 검토하도록 할 때는 다음과 같이 ChatGPT에게 알려줄 수 있겠죠.</p>\n<blockquote>\n<p>이제부터 책 편집자가 되어 가독성에 중점을 두고 다음 블로그 글을 검토해 보세요.</p>\n</blockquote>\n<p>이런 식으로 말한 다음에 질문하면 됩니다. 그러면 ChatGPT가 더 나은 결과를 제공하기 위해 초점을 맞추고\n주목할 대상을 좁힐 수 있습니다.</p>\n<h2 id=\"레시피-패턴\" style=\"position:relative;\"><a href=\"#%EB%A0%88%EC%8B%9C%ED%94%BC-%ED%8C%A8%ED%84%B4\" aria-label=\"레시피 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>레시피 패턴</h2>\n<p>달성하고 싶은 목표가 있고, 재료는 알고 있으며, 달성하기 위한 단계는 어느 정도 알고 있지만, 이를 모두\n조합하는 데 도움이 필요할 때 유용합니다. 특히 프로그래머에게 유용한 패턴이라고 볼 수 있습니다.\n실제로 활용하는 상황을 보겠습니다.</p>\n<blockquote>\n<p>데이터를 암호화하는 Rust 프로그램을 작성하려고 합니다. 사용자 입력을 읽고, 유효성을 검사하고,\n암호화하고, 암호화된 데이터를 반환해야 한다는 것을 알고 있습니다. 이를 위해, 전체 단계 순서를\n알려주고, 누락된 단계를 채우고, 불필요한 단계가 있는지 확인해 주세요.</p>\n</blockquote>\n<p>여기서 <code class=\"language-text\">누락된 단계를 채우세요</code>라는 건 내가 놓친 부분이 있으면 후속 질문을 하지 않고 ChatGPT가\n부족한 부분을 바로 채우도록 하는 것이고, <code class=\"language-text\">불필요한 단계를 확인해 주세요</code>라는 마지막 문구는 더 나은\n레시피를 만들기 위해 부정확한 부분을 찾아내도록 ChatGPT에 지시하기 때문에 유용합니다.</p>\n<h2 id=\"리플렉션-패턴\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%ED%94%8C%EB%A0%89%EC%85%98-%ED%8C%A8%ED%84%B4\" aria-label=\"리플렉션 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리플렉션 패턴</h2>\n<p>모든 답변에 대한 <strong>이유를 설명</strong>하도록 GPT에 요청할 수 있습니다. GPT에 다음과 같이 알려주고 질문을\n하면 됩니다.</p>\n<blockquote>\n<p>답변을 제공할 때는 답변의 근거와 가정을 설명하세요. 선택한 사항을 설명하고 잠재적인 제한 사항이나\n엣지 케이스를 설명하세요.</p>\n</blockquote>\n<p>이렇게 하면 답변이 훨씬 더 상세해지고 ChatGPT가 답변에 대한 배경 정보를 평소보다 훨씬 더 많이\n제공합니다.</p>\n<h2 id=\"거부-차단기-패턴\" style=\"position:relative;\"><a href=\"#%EA%B1%B0%EB%B6%80-%EC%B0%A8%EB%8B%A8%EA%B8%B0-%ED%8C%A8%ED%84%B4\" aria-label=\"거부 차단기 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>거부 차단기 패턴</h2>\n<p>ChatGPT가 지식 제한, 안전 등의 이유로 답변할 수 없다고 한 질문을 한 적이 있을 수 있을 겁니다. 이\n패턴은 원하는 특정 질문의 문구를 <strong>바꾸거나 재구성</strong>하여 ChatGPT로 하여금 대답하게끔 유도합니다.</p>\n<blockquote>\n<p>질문에 답할 수 없을 때마다 질문에 답할 수 없는 이유를 설명하세요. 답변할 수 있는 질문의 대체\n표현을 하나 이상 제공하세요.</p>\n</blockquote>\n<p>이제 질문을 하면, ChatGPT가 답변할 수 없는 경우, 원래 질문에 대한 답변이 될 수 있는 몇 가지 대체\n질문이 표시되며, 이를 통해 궁극적으로 ChatGPT가 답변할 수 있게 됩니다.</p>\n<h2 id=\"뒤집힌-상호작용-패턴\" style=\"position:relative;\"><a href=\"#%EB%92%A4%EC%A7%91%ED%9E%8C-%EC%83%81%ED%98%B8%EC%9E%91%EC%9A%A9-%ED%8C%A8%ED%84%B4\" aria-label=\"뒤집힌 상호작용 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>뒤집힌 상호작용 패턴</h2>\n<p>원하는 것을 달성할 때까지 ChatGPT가 우리에게 질문하도록 유도할 수 있습니다. 이 패턴은 원하는 것을\n알고 있지만, 그 목표를 달성하기 위한 단계를 모르거나, 그 목표를 달성하기 위해 ChatGPT가 어떤 정보가\n있어야 하는지 모를 때 유용합니다.</p>\n<blockquote>\n<p>AWS에 있는 웹 서버에 Rust 바이너리를 배포하기 위한 질문을 나에게 하세요. 필요한 모든 정보를\n얻으면, 배포를 자동화하는 bash 스크립트를 작성하세요.</p>\n</blockquote>\n<p>이 쿼리를 실행하면 ChatGPT가 사용자에게 필요한 정보를 묻는 메시지가 표시됩니다. 그러면 ChatGPT에\n필요한 정보와 단계 등을 먼저 알아내야 하는 번거로움을 덜 수 있습니다. 사용자가 대화를 주도하는 대신\nChatGPT가 대화를 주도하도록 하여 가능한 한 <strong>적은 메시지와 상호 작용</strong>으로 필요한 정보를 정확하게\n전달할 수 있습니다.</p>"
    }
  },
  {
    "route": "https://lazy-dev.netlify.app/javascript/how-to-profile-js-performance-in-chrome-browser/",
    "data": {
      "%EC%84%B1%EB%8A%A5%EC%9D%84-%EA%B8%B0%EB%A1%9D%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95#성능을 기록하는 방법": "<p>성능 문제가 발생했을 때 해결하려면 웹 애플리케이션을 프로파일링하고 모니터링하는 방법을 알아야 합니\n다.</p>\n<p>웹 성능을 측정하는 방법들은 Lighthouse, Chrome DevTools Performance Tab, PageSpeed Insights 등 여러\n가지가 있습니다. 이 중, <strong>DevTools의 Performance를 이용</strong>해 세부적으로 웹의 동작을 들여다 보겠습니다\n. 그리고 웹 애플리케이션의 성능을 분석하고 개선하는 방법을 알아보겠습니다.</p>\n<h2 id=\"성능을-기록하는-방법\" style=\"position:relative;\"><a href=\"#%EC%84%B1%EB%8A%A5%EC%9D%84-%EA%B8%B0%EB%A1%9D%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"성능을 기록하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>성능을 기록하는 방법</h2>\n<ul>\n<li>Chrome 브라우저를 엽니다.</li>\n<li>분석하려는 웹 페이지를 로드합니다.</li>\n<li>페이지의 아무 곳에 마우스 오른쪽 버튼을 클릭해서 <code class=\"language-text\">검사</code>를 선택하거나 <code class=\"language-text\">Crtl+Shift+I</code>\n(Windows/Linux) 또는 <code class=\"language-text\">Cmd+Opt+I</code> (Mac)를 눌러 개발자 도구를 엽니다.</li>\n<li>개발자 도구의 <code class=\"language-text\">Performance</code> 탭을 클릭합니다.</li>\n<li>Performance 탭에서 <code class=\"language-text\">기록</code> 버튼(원 아이콘)을 클릭하거나 <code class=\"language-text\">Crtl+E</code> (Windows/Linux) 또는 <code class=\"language-text\">Cmd+E</code> (Mac)\n를 누릅니다.</li>\n<li>분석하려는 작업(성능 문제를 일으킬 것 같은 시나리오)을 수행한 다음 <code class=\"language-text\">중지</code> 버튼을 클릭하여 기록을중\n지합니다.</li>\n<li>기록이 완료되면 Chrome DevTools가 웹 페이지 성능에 대한 자세한 보고서를 표시합니다.</li>\n</ul>\n<h2 id=\"웹-페이지-성능-보고서를-보고-이해하는-방법\" style=\"position:relative;\"><a href=\"#%EC%9B%B9-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%84%B1%EB%8A%A5-%EB%B3%B4%EA%B3%A0%EC%84%9C%EB%A5%BC-%EB%B3%B4%EA%B3%A0-%EC%9D%B4%ED%95%B4%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"웹 페이지 성능 보고서를 보고 이해하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>웹 페이지 성능 보고서를 보고 이해하는 방법</h2>\n<p>이제 아래 사진처럼 성능에 대한 자세한 보고서를 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAADXElEQVR42o2Ua1MbNxSG9xc0bdpJJrTYu6tdaVd709619tpgfLe5B9trY2xTphDAhTQYGztTIF/afkj/cwVMOp3mCzPPaDSvznukI80R5weR70euFzpuYJg2Q8WG5xDXpzSkQcBExyIuCyC2R4jHRhaDsWlaPmd7zJ4JozigWc+PHC80iaubjh9mgij2gkg3CTZMk9gmcSzbNW0H6yYTVc3gPCsmWkQMX9V0w7BYlOf5luXYxHcd3yFe4NJMkA+c2LWoZ1HHDC3d07Hj2hEX6nVXrehqBmILqgSqtoQMCC0Lrxg4Z6gZV616qG6ALEErFszb6pqLS75Wjt0a19jcOhmPp4u73ybz6fz+iZvFp8n8dra4v765nX28v57/fjVbTOe3V9OPs8Xd5WRyfvXu8HjANdZb7eTk6OfF6PB6NJx2k8te9327ddFL3ifJRad9kbQvmNLf/9B5nPS6Hza3hmEuT+M8V9z6RYu7QWk/boxyzcOgPMzWh2G5n2uMouqArPai6sFqc1jYPLJX+15x4JcOgtJAj/tm5i0H3b0ftV1aPCLZXlw9jSvnudo4Wz3O187ytXFcOc1XT9eavxabl1HxLCycZyvjn/TdF0L9tVzilvXGEm7gcCdtbbgrnUwxiSsjWjqOykd0rZcpD3L1d4X1k9V6jxaSuNQKCm9fK/VvhMr3YoF7CTe+kxov5fVXeFswt0WzqdMWonuQ7gnONon7JO6amYTXt3ltnTebr1DtW7HyQqz9AAqcm020aKQGQyfb3wvCHSPYoX5hn0asiFbY38ju1mm7nN+xB+vmUEFURAQgmyErNgcEEQgAiDJDFBEASFElCUIAVACUB11SZagKgvgFFg4FUWZwKUFNCUpaQGlRSfFQlCQZYyamBSkNNB5gNgGSwgvyA6L6CHqCk6EsQbYsAra3JMoKAEBOpwHPPyAIEhsl6cnDUkBeAP/CCUCECGmGiTUd6wbWDIQwO+d/YeuKghVF/QJ+gmMJltMi1ghSdAbrR4i0/5llqEiy+jUcjeKD/gGQ0HJK0Fgr2rYMcZoHz4H7/Pnvs7Pz2c3izVKKdW+cL5iWy7NSnwH3x59/3d59mlxP3ywt00yuWK5IsvJ4H88wsz+l0+mKD08HNZ2wgiUJsSM9x/wP0Z//iaRvinMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Performance 기록 결과 화면\"\n        title=\"\"\n        src=\"/static/1681089562232.0251107585241/00d43/my-blog-performance.png\"\n        srcset=\"/static/1681089562232.0251107585241/63868/my-blog-performance.png 250w,\n/static/1681089562232.0251107585241/0b533/my-blog-performance.png 500w,\n/static/1681089562232.0251107585241/00d43/my-blog-performance.png 1000w,\n/static/1681089562232.0251107585241/aa440/my-blog-performance.png 1500w,\n/static/1681089562232.0251107585241/56e36/my-blog-performance.png 1750w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Performance 기록 결과 화면</p>\n<p>엄청난 양의 데이터로 인해 뭐부터 봐야할지 감이 안 잡힐 수도 있습니다. 천천히 하나씩 들여다 보며 이해\n해보겠습니다.</p>\n<h3 id=\"cpu-utilization--filmstrip\" style=\"position:relative;\"><a href=\"#cpu-utilization--filmstrip\" aria-label=\"cpu utilization  filmstrip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU Utilization &#x26; FilmStrip</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZklEQVR42hXFCwrCMBQEwB7HlLzdbH6mJSIVEalg7n8bIwzMElC9k5nc6r3HJCVDwFyRlELO8ZrUaJmY0uroLgDysmN0fJMOYzZWqhkS2Wp8lvgoOnocN43NXn987+HcePZw3svnB31WGFymD9SOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Timeline\"\n        title=\"\"\n        src=\"/static/1681089562233.096107585245/00d43/performance-timeline.png\"\n        srcset=\"/static/1681089562233.096107585245/63868/performance-timeline.png 250w,\n/static/1681089562233.096107585245/0b533/performance-timeline.png 500w,\n/static/1681089562233.096107585245/00d43/performance-timeline.png 1000w,\n/static/1681089562233.096107585245/aa440/performance-timeline.png 1500w,\n/static/1681089562233.096107585245/ab40b/performance-timeline.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Timeline</p>\n<p>상단의 CPU 타임라인에선 Critical Rendering Path(Javascript, style, layout, paint, composite)과 ajax\n호출 등을 보여줍니다. 주로 JavaScript(노란색) 및 레이아웃 작업(보라색)과 같은 다양한 유형의 작업으로\n인해 CPU가 얼마나 열일하는지 봅니다. 사진에서 보이듯 CPU 활동은 처음 활동을 시작한 후 상당히 조용해\n집니다.</p>\n<p>중앙의 FilmStrip은 왼쪽부터 시간순으로 나열되며 프레임 스크린샷을 통해 각 순간의 사이트가 어떤 모습\n인지 볼 수 있습니다. 이러한 애플리케이션의 시각적 상태는 “screenshot” 옵션을 체크했을 때만 존재합니\n다. FilmStrip 위로 마우스를 가져가면 해당 시점의 스크린샷을 크게 볼 수 있습니다.</p>\n<p>하단 부분은 애플리케이션의 메모리 추세를 보여줍니다. 위 예시 사진에서 메모리가 증가하고 잠시 후 감소\n하는 것을 볼 수 있습니다. 일반적으로 가비지 컬렉션 프로세스가 발생할 때까진 메모리가 증가합니다.</p>\n<h3 id=\"user-timing-metrix\" style=\"position:relative;\"><a href=\"#user-timing-metrix\" aria-label=\"user timing metrix permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>User Timing metrix</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 813px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.200000000000003%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPElEQVR42gExAc7+ACQlKCUmKiQkKDU4QmRoc19jbGFlb2FaRnpzXzw8OlBXU2ZsZmpuc2JpZ2NoY1hdXzQ2NigoMCIhKBEQFgBGSEpqbmxnbGeVn5bF0crI1M3N2dPGx6HR07Cws63N0czQ1c/KzMrR087L1cPBzraYoo1+iHh/iXh6hHMAPkFCVlpYYmZje4N6a3Noa3NoanFmbHVyZW5nd3dwcm50Z2RqaWhsdnl+lJGokZKnjJCanZ6ym5uwnp6zACoqLjo7Pzk6PRkZHhQTGBUVGhQUGxIREx8oPCU6Wyg+NCxBMSsqIzMXGTUxUT83XS0oQzoyV0dFZEQ/YQAiIyYuLzIwMjQiIyYkJSgjJCcjJSghISEtOU46U3g5U0U5Uz48OzNHJygbIB4cHxwfISAbHhsrMykkKyMp/WsbrDCqYwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"로딩에 관한 지표들\"\n        title=\"\"\n        src=\"/static/1681089562233.2878107585246/baaa6/performance-timing.png\"\n        srcset=\"/static/1681089562233.2878107585246/63868/performance-timing.png 250w,\n/static/1681089562233.2878107585246/0b533/performance-timing.png 500w,\n/static/1681089562233.2878107585246/baaa6/performance-timing.png 813w\"\n        sizes=\"(max-width: 813px) 100vw, 813px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>로딩에 관한 지표들</p>\n<p>타이밍 레인에는 FP, DCL, L 등 이벤트도 표시됩니다.</p>\n<p>자세히 설명하자면 이 글이 너무 길어지고 내용이 산으로 갈 것 같아 각 지표들의 의미만 살펴보고 넘어가\n겠습니다.<br>\n해당 부분에 대한 건 따로 다른 글에서 자세히 설명하겠습니다.</p>\n<ul>\n<li>FP (First Paint): 페이지 네비게이션 후, 첫 픽셀을 그린 순간</li>\n<li>FCP (First Contentful Paint): 첫 엘리먼트를 그린 순간</li>\n<li>LCP (Largest Contentful Paint): 가장 큰 엘리먼트를 그린 순간</li>\n<li>DCL (Dom Content Loaded): DOM Tree를 구성하고, 스크립트(+ defer 스크립트)를 실행 완료했을 때 →\ndefer 스크립트가 없다면 FP 전에 DCL이 올 수 있습니다.</li>\n<li>L (Load): 다큐먼트의 리소스들을 모두 로드 완료했을 때</li>\n</ul>\n<h3 id=\"cpu-flame-chart\" style=\"position:relative;\"><a href=\"#cpu-flame-chart\" aria-label=\"cpu flame chart permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU flame chart</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABV0lEQVR42jWLXU+CYBiG+QEtax2UW5oftOUXLgp94UVEeQEBCdQsyjUzE3VIrq2f4DxSbKuTTqwO+p+9ubVdu5/rvreHmM9X728/wfJjFXyull/BAidmHSzWG/kD+39dvwbfs1ngv4wmzy4BxKaArkXlBmm3DHcBBJsG9QK0irxFAwNTgCYUba682XmLgRbN6mSGIzOQSPP3XK0Ptb7U8EvGpGL7ZcuTbA81nqDuQ2OMGr5xNZXsKatN2JoHda9Yc9N8Nw3viBjVKojdLHAEdcRJLi+PeMXl5EFJGWMpqQOhNkTmBFe26rLSGFTdaK65dYRCMUREsgZ5Wo9SZh42mXKbrXYAegDyY6HiFCsOp/RK+lDUe6ByyQhtKFkUZ4ZTeiiu7CRkYjeBj7qfMg9zVoQyybNWkm4k6VY0bx2fO2m2kyo6eDw40cIpNZKr75FqKCZv4+c4+gUZGG3RCsnSFwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Flame chart\"\n        title=\"\"\n        src=\"/static/1681089562232.488107585243/00d43/performance-flamechart.png\"\n        srcset=\"/static/1681089562232.488107585243/63868/performance-flamechart.png 250w,\n/static/1681089562232.488107585243/0b533/performance-flamechart.png 500w,\n/static/1681089562232.488107585243/00d43/performance-flamechart.png 1000w,\n/static/1681089562232.488107585243/aa440/performance-flamechart.png 1500w,\n/static/1681089562232.488107585243/ab40b/performance-flamechart.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Flame chart</p>\n<p>가장 핵심 부분이라고 생각합니다. 플레임 차트는 기록하는 동안 웹 페이지의 JS 실행을 시각적으로 표현한\n것입니다. <strong>성능 병목 현상이 발생할 수 있는 위치</strong>를 이해하는 데 중요한 부분입니다. 수평 레이어로 구\n성되며 각 레이어는 단일 JS 함수를 나타냅니다. 각 함수 블록의 너비는 함수의 실행 기간을 나타내고 색상\n은 작업 유형(스크립팅, 렌더링, 페인팅…)을 나타냅니다. 그러므로 이 섹션에서 <strong>어떤 함수가 호출되었고\n각 함수가 얼마나 오래 걸렸는지 정확하게 분석</strong>할 수 있습니다.</p>\n<p>위 사진에는 안 나왔지만 Register, GPU, Compositor 등 성능 문제 디버깅에 유용한 섹션들이 있습니다. 몇\n가지 설명드리겠습니다.</p>\n<p><strong>Network 섹션</strong>은 다운로드 요청과 완료 시간을 볼 수 있습니다. 그리고 <strong>Main 섹션</strong>은 렌더러의 메인\n스레드로, 알록달록한 색으로 된 지표들을 통해 프레임의 전체 시간과 프레임을 연장하는 데 가장 큰 영향\n을 미친 기능을 확인할 수 있습니다. 노란색은 자바스크립트가 실행 중임을 나타냅니다.</p>\n<p>이해를 쉽게 돕기 위해 UI 업데이트 또는 CPU 작업과 연관시키는 데 특히 유용한 Network 섹션을 통해\n<a href=\"https://stripe.com/\">Stripe</a> 홈페이지를 디버깅하는 예시를 들어 보겠습니다.</p>\n<p>아래 사진은 폰트 로드가 완료되기 직전의 Stripe 홈페이지입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC50lEQVR42gHcAiP9ADAwMyAgISYlJzc3OCYpKSUmKCAiIyEiJSgpKyooIigpKyIjJB4gISkrLRsdHicpLCYoKh4fISosLyEjJAA2PUhDS1o8RVNQWGdkaXpXWWdgYnFfYHJZXGtmZWxcXW9aXWxZW2pXWmpYWmpISFNJSVRKSVRISFJKSVQAP0FHP0JJQEJKODtCoqSu19bhz87bzMzYxsXQzsvNyMfTyMfTyMjSx8bSyMfSwb/Iw8HLw8HLxMLMwsDLACYnLCwuMissMCUnKzU6PzU4QDI3QDxASzI1OTw4NTY0ODEwNDMyNjQ1OS8yODI2PDQ4PTEyNzU2OTY4OgAjKDQrMT80OUkrL0AzN0c1OUknKzsxNkY0NUSdQV22UXykXY+fcqqVeMGPdsWdf7OzipXHkWzRpGLUs2UAlqzCmK7JhaGza46UZ4mRaIuRcJWYdZyfcI+SsHGdv43DsJ3Zp5fmn4XlqX/TuYu9zpie6quA9Lpz9sV2AKCfpKCepHR3dDxFOF1kW2BmXVBZTDE7KTU+L5GfyKW8+J+k8Ix+34Zs1ZB0zZZ/u7Khv8W2wLyvsd7W1gArLDAsLTIhIiZqZ3a+uNDEvtWWkKYVFRshIimMiMmojuyket6NbM1zZ8Jxd9F1ktqJt+eYyO6o0fXK2esAIiInIiMoFRYYaGZz0s3i1M7kmZanFxobJiYqnleVvWCqtmirlGmagHOggIy+lbnXl7bOqb3P2N7k7u/xAFlfWlxjXVtiW2RnaWlkdG5reFxbZSEjJickKbZZduCLqOCyyNrI1NnX3Nra3t3b3dTQ09zZ2uPh5Pj4+gBnb2Ztdmxze3JWZFcsQi8fKCIXFxoiJCYyNzXZ1tX//////v7v8fLo6+z6+/v4+vn8/f3+///+/f7v8PIAFBQZEhIXERAWHSEhLjsyJywrIyMnHyEjKi4u2dra////////19nd0NTZ/P38/f39/v7+/f39////5OXoVxdfwiCa7CoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stripe example\"\n        title=\"\"\n        src=\"/static/1681089562235.117107585248/00d43/stripe-not-loaded.png\"\n        srcset=\"/static/1681089562235.117107585248/63868/stripe-not-loaded.png 250w,\n/static/1681089562235.117107585248/0b533/stripe-not-loaded.png 500w,\n/static/1681089562235.117107585248/00d43/stripe-not-loaded.png 1000w,\n/static/1681089562235.117107585248/84bf8/stripe-not-loaded.png 1162w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>stripe example</p>\n<p>여기서 UI에 변경 사항이 있으면 네트워크 요청 섹션을 통해 UI 업데이트를 <strong>지연</strong>시키고 있던 <strong>네트워\n크 요청</strong>을 이렇게 식별할 수 있습니다.</p>\n<p>폰트 파일을 로드한 직후의 아래 사진에서 UI가 다운로드한 폰트를 사용해 재렌더링되었음을 확인할 수 있\n습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.199999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9ACUoLy80PDA1Py0yPElPWDY9RiMpMycsNycsNyctNiEmMTA1OisvMiMpNCUrNRwhKR4iKRkcJBwgJxwgKAA/Q0s/Q0xHTVlITllITVmen7C7uMe4tsW4tcWysb+3s8e4tL+5tb+wr8G1s8Svq7mno7GopLCqprKoo7AALzA0LzA0LzA0LjAzKy4wZ2txfoCJe3+JfYGLcnV4Zm9wbXNvcHRuaGtrbG5qbG5sbXBxaGxxaW52aWx1ADM0OCAhJiYoLi4vNiAgKCMkLB0dJhQTHSAiLCccJXIwQ3A4U2g/XWZOcltOflpPemhYb3RaVX1hQ4RxSABRYnxgc4xme5hkfJVeeY1feo9hfJFkf5JjhZdxc4jQY5XHf7e6kNKxlOirieu5jdbOmrjsqYr9vXL/zXAASU1Us7i9vcDHlZ+cTF9LVGdUV2pXV2tWS2NIWmddp6japLbsnaLsj3/dk3PUnnzArY6yyqmtz62c2b6nACgoLDo5QDs6QSgnLFlVY6qjubOrwW9pewsJDDEzQaGp8qKR7Jx74nhhyHNpzXN40ISb1qLG7KDG6bzR7AAdHSEhIiUhIiUWFxlta3jPyuHY0umBfo0QFBI6M0Cyarm0Z7WrbLN9YZhwbqt5l9CFs9mRs9O80uPp8PcAQUVDRkpISU1LRUpHYWFnfnqJiIWTYV9pGB0fPiw2z16G1YGk06fAv7O+ubfDxMjNvLzCwr/E0M3R+vr6AHN8cXR9cnqEeIKLgGBtYC5BMiIpJR8fIhwgIUtLSvnr7f////z8/eLm6Ons7PDw8e/w8vb3+P////T19wAYGBwXFxwVFRoUExkfJCQvPjQmKyoiIiYaHB5ITEz+/v7////6+vrIzNHo6uz9/f39/f3+/v7////08/ZpGj2cguMcPAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stripe example2\"\n        title=\"\"\n        src=\"/static/1682400641215.82112973136/00d43/stripe-loaded.png\"\n        srcset=\"/static/1682400641215.82112973136/63868/stripe-loaded.png 250w,\n/static/1682400641215.82112973136/0b533/stripe-loaded.png 500w,\n/static/1682400641215.82112973136/00d43/stripe-loaded.png 1000w,\n/static/1682400641215.82112973136/a13c9/stripe-loaded.png 1178w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>stripe example2</p>\n<h3 id=\"memory\" style=\"position:relative;\"><a href=\"#memory\" aria-label=\"memory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Memory</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAr0lEQVR42k3N22rDMAwG4DzHklqWrJOdntJuvWk3Ci0OLfT9X2fucjP4+BHoR+qm423cz2U/76b7vB1rWdevcnltPx+Ha909v9f1Z3qcT3VTr2XOukliopnFW3YBEgBBbNIH2ECKbsPKw8qHkHvwPmgg6yP0EFonkv+xpsNkmLQhViJmY/UcUSMxJqd2C5NIptZGB8pABiiLTtv/f6wIsyAteEmRIjq+D/N7y6LL8Av+2yUIPimhrwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Memory Image\"\n        title=\"\"\n        src=\"/static/1681089562232.7012107585244/00d43/performance-memory.png\"\n        srcset=\"/static/1681089562232.7012107585244/63868/performance-memory.png 250w,\n/static/1681089562232.7012107585244/0b533/performance-memory.png 500w,\n/static/1681089562232.7012107585244/00d43/performance-memory.png 1000w,\n/static/1681089562232.7012107585244/aa440/performance-memory.png 1500w,\n/static/1681089562232.7012107585244/ab40b/performance-memory.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>DOM 노드, 리스너 및 기타 메트릭이 이 차트에 요약되어 있습니다.</p>\n<p>DOM 노드, 리스너 및 기타 메트릭이 이 차트에 요약되어 있습니다. 색상별로 노드, 리스너 등을 구분할 수\n있습니다. 이 부분에서 앱의 추세를 볼 수 있으며 주로 <strong>메모리 누수를 추적</strong>할 때 유용하게 사용할 수있\n습니다.</p>\n<h3 id=\"cpu-activity-breakdown\" style=\"position:relative;\"><a href=\"#cpu-activity-breakdown\" aria-label=\"cpu activity breakdown permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU activity breakdown</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 632px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACpElEQVR42l1SS08TURSevaAkiJROZ9pO23ncO3M7nXamL/rEVqApihADGhMTJRgfiRujBuPCHQsQNHEhkfgHXGBcSwiuYWeiSyWphvhYIDvEbzoEDcnXyXd7znfOvd85HM/7KaWMGTzPBwLiQG2oWD6dL1Sy+SKhrFgeaKMKnusvl6u1XL6UyRVUTdeIwfEBkecFQBCCISlqxC3kIUD0uKxSrc3xPeBt0HYI4JJ2Bq1QNW6mVGLY6bzBEsFQBAiFox45wr0jwOEXiSrRmCpFYmHpAF7sEMgWg1JYcjkI4Ok5LwxBQAgLIjLkcDh2RGkwS9dZY+JOujhsGCyTK+qGiRIcZHwg1NPrJ9TQCPHzfYIYOmwOJS5F2m9ujgxnsjlC46ZlU91ECIYFE5a98ubtzx/fvmzMzz6cVVVHEEVPj/KwwEo5smZOXy7UqrbO7JSTgd69Nh68sbm5vf19Zmbm7q3x10sfnzxew/NQGHp8YbuZsBWNNOrT2cwgSpmWk7AcWSHcjZu39/b+1M8MdR7vPtHty2cbK8u/moNXff4+KSJDjFFhfqpG6/Vx2ynqLIGbsnjSFc/NzW9tbUVlbbg5WqnWqMGeL65eu/LolK9XiigQyzJBH0LMwYlyuuQwlrLTOZSANdzU1PX9/f2Rs6PHOro6OrvOj1349PlDc2zE5wt4nWOyBrdjCpm8eKlYqmiExRMpWaHumxFeX3+/s/N7YeHp4uKz3d3d1XdrweDB/BBVVOpmq3Ri0hXrDPZlUct1OyCEMKTl5Vet1tdWq/Vi6aVKdPzpKdHcSqZhWEwm9+4/aDbPUcP0dsbtjCRBDJ/s8SEPAMHxcM4giaSDzYXnugGYbZ/pvw1DBmTe3mFy/28IjqVKrb9QsZ2cnxfhMI7MTHqd/wKdScdWyb3W0wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Aggregated task breakdown\"\n        title=\"\"\n        src=\"/static/1681089562232.2976107585242/084e2/performance-cpu.png\"\n        srcset=\"/static/1681089562232.2976107585242/63868/performance-cpu.png 250w,\n/static/1681089562232.2976107585242/0b533/performance-cpu.png 500w,\n/static/1681089562232.2976107585242/084e2/performance-cpu.png 632w\"\n        sizes=\"(max-width: 632px) 100vw, 632px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Aggregated task breakdown</p>\n<p><code class=\"language-text\">Summary</code> 탭에서는 특정 CPU 작업을 선택하지 않은 경우, CPU 작업 내역이 다음 4가지 범주로 분류되어 표\n시됩니다.</p>\n<ul>\n<li><strong>Loading</strong>: 네트워크 요청 및 HTML 파싱</li>\n<li><strong>Scripting</strong>: JS 코드 파싱, 컴파일링 및 실행, 가비지 컬렉션(GC) 포함</li>\n<li><strong>Rendering</strong>: 스타일 및 레이아웃 계산</li>\n<li><strong>Painting</strong>: 이미지 페인팅, 합성, 리사이징 및 디코딩</li>\n</ul>\n<p>다른 쓰레드를 클릭하거나 위쪽 및 아래쪽 화살표 방향키를 사용해서 다른 쓰레드를 선택할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 818px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 116.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAIAAACEf/j0AAAACXBIWXMAAAsTAAALEwEAmpwYAAADt0lEQVR42o1Ta28UZRSeL0YapCC1te3u3Gdn57Lzzv3S7rK7tixLAQmg1a4IpjWpEiMa27SNsZpAjNXE2wejpAYN2hSKdk1Y2q2t0K0aSpNaSaOCEsMHid/9BZ7prMu6hsTkyZMz75xnznnecwZb+vzF5anB5amBta+Gfp0b/mXG59ulkYunBlv43uHjz7/y0gu00qs4/YrzbAXIPQaMnftoYf6LYmFidvbs3Mrc6rXLP60uXLuxfPPU+5NYgxeSO0NSx6Zwui6c3FSFOjwFjJ2fWDl3Zuni9I/5sysz0+vfL/xRmru1svjn2Fj+3tbUFiq7mchsY7Jb6V3VCE6wN8emLhXWS7PXV5duL1+6tTjz85WFm7+v/fXu29P3tCTvZyA1A3n1VKYawQn2+NETF6aunBkvFs5fzU+WZvNrff2vDw6Nj756GioHSXcVH+oZulxYg8rzF9YP9ozoO3pbpX3N4j4j+eRmvHMr5FGZbXcTG8mnPhn/ZvKzq91HTpDoEeyB+HZuTz29uy7cAW63kLsCvm+DK6inssBYE6E100ZDOIZHXM3t4mJpRk7R0o4I6uCUNCUmggBOiGh7DTCSwCMci+Mhnufb2xOO4xqmqWm657XZtqsoyIXAP7REUZIkuRrY3oyNNFPTbVWzRBnhBE3RHICkfKaZCEmxJF2Oa4CZlqnqFlINSUa66QAH4v8DTI7pUFOKqYKkyDGVj0pQiqKhms8UlKV8LqNGrCAQmyCDAD4BRwwXZdh/wAk+yo8CtFpTWdUMW5QUpPrODcsFWO3ZtvQBO97lJh/2kvvtxB4vfcBL7Y9EFZJi7oihz6gggxjAC1JwE1CH5crgIkEgsH5HfDUwy2lzvbisGFwUQf+QSm743ACDE0xLiCFJCGiCZAD/arullaBY6fATuZ5DKcgIE0zFGMfLho52d+pREcUUDQzCLKr1mKWLi4UP5r8u/lAcKU4c56MCQbI0A1PlopIab7OOdCdkxTRMBwap6jbYpCviT997evrjY61hFjx8lx84Ody9vRFnWLDNy8jwPO/g3p1Is8CdpluwEXCpldaw0pcD/UezIVJqCgknhx+d/PCZhiYCxPCOF0TDSGQeOizFEGjkmAa+Kivoi994+TFo2LXVnWnnt29fe66vC8SsL2Z5QY4nkrlcLoZ0mB/L8sGS3hHDw+l3+m6URq+XRt8azYVwuDBYbBYGAwJZ0WCQjhuH/SH/u2Fw143NpKErSJEbHyTLLyjOLywpkYgAf4gooWCENeK/ASmMSPlwemSIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"스크린샷 2023-04-08 오전 3.47.37.png\"\n        title=\"\"\n        src=\"/static/1681089562228.579107585238/64d87/any-function-call.png\"\n        srcset=\"/static/1681089562228.579107585238/63868/any-function-call.png 250w,\n/static/1681089562228.579107585238/0b533/any-function-call.png 500w,\n/static/1681089562228.579107585238/64d87/any-function-call.png 818w\"\n        sizes=\"(max-width: 818px) 100vw, 818px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 사진은 flame chart에서 특정 Function Call을 선택했습니다. 하단의 Aggregated Time은 해당 Function\nCall의 CPU 분석을 보여줍니다. 또한 링크(Graient~~~ )를 클릭하면 개발 도구의 소스 패널에 있는 코드 줄\n로 이동합니다.</p>\n<hr>\n<p><code class=\"language-text\">Bottom-Up</code> 탭에서는 CPU 활동에 대한 보다 세분화된 분석을 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABs0lEQVR42m2S2XLjIBRE9Se2JCQEiEXsAi2RvKacxElmKk8z//8bQ/I0sUOdJ+p23e6GzPmxhqQogDK91J53lnKFMCUt/xGE20SDCGUii72dBuudmqfYezNEO0+DkBYTVtWohvgbDenMrNyi/Sr0kEHYnFY99wQT6p1ZRrFbQlGiTV5ucvCdclvWbnoJ66+4+5D+mJUAKaWtxA1mxqg58MMaK0jyNHpHXgCup86t0u/bLmSoFcrGLp0UWIUhmrfrmclQAJTfU2FuVtWfVDhTOWcNcdKdUnohnXVxGtz766Ptl7LCedncsC1gv7xPpz/z+a+dnrMKMioiQoRQ3nLpBDuugQlTgnqzLW5spxsdzn6+9g+vyXxWQ8Q71aCWUNEyZQU9rCG5AFWz2SYBuEH6gx0udnzq7JrB1L5ypGWUd5Sb3snr00KFze9kn4WVdVKmthOd3X2K5ZeYcRWDn6N5vlzCuJYA3m/Oi9rPL3H/Me5/u3hItjETipDWaD5GPQZ52D3YfmRcFmX9FfV/cQUqnF4X1LiCOEufhnc67cctx1RqJY77SJiCDU6j984hFg1RCQDpPzW5gnmQy6QYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"bottom-up.png\"\n        title=\"\"\n        src=\"/static/1682400641213.6167112973135/00d43/bottom-up.png\"\n        srcset=\"/static/1682400641213.6167112973135/63868/bottom-up.png 250w,\n/static/1682400641213.6167112973135/0b533/bottom-up.png 500w,\n/static/1682400641213.6167112973135/00d43/bottom-up.png 1000w,\n/static/1682400641213.6167112973135/aa440/bottom-up.png 1500w,\n/static/1682400641213.6167112973135/d3deb/bottom-up.png 1758w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 사진처럼 하위 수준의 함수를 확장해서 어떤 코드가 함수를 호출하는지 확인할 수 있습니다. 이렇게 하\n면 제어할 수 있는 코드를 찾는 데 도움됩니다.</p>\n<hr>\n<p><code class=\"language-text\">Call Tree</code> 탭은 기록하는 동안 실행된 JS 함수의 계층적 표현입니다. 호출 트리는 가장 시간이 많이 걸리\n는 기능을 식별하는 데 도움이 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.400000000000006%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABN0lEQVR42mWQ607CQBCF+xyCofS691v3UnZbbUsFQUzw/V/GBRJFSc6fmck3c+Yk1gXKpFCGMFmUtVSWEAEhgYhiwh+FML2JMpEY57lohJDj2LfOdKENXcelEVJHHkByr9ih3DBhmXCU6yTWSreUkO2rPB+d1WQ/h9CPlKt0XdxrleZ5AYUdpZ1U+4b5JgGIisYWFbZafB0MBBVjaJ4CwCLLy39wVgDTHd3L52Y8xy1JNCMbV9UIIOY3hhKwWGa9l13nV+nD5RLd4HY4CzMkELNGt1WNMZVKOwDg4jlzhp0+ZkRUBH75eDmvm3ZnwsH2J9b0SQwwZlZF90x57yGET8v0fWt3+722oazgH35dMtVff54xd5efZWOrCiEig3cI1QA026nz3cCFjtMf+BoY4Ga4ZOYmRM03hq5XJb1W2d0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"호출 트리\"\n        title=\"\"\n        src=\"/static/1681089562231.061107585240/00d43/call-tree.png\"\n        srcset=\"/static/1681089562231.061107585240/63868/call-tree.png 250w,\n/static/1681089562231.061107585240/0b533/call-tree.png 500w,\n/static/1681089562231.061107585240/00d43/call-tree.png 1000w,\n/static/1681089562231.061107585240/aa440/call-tree.png 1500w,\n/static/1681089562231.061107585240/c830c/call-tree.png 1754w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>호출 트리</p>\n<p>위 사진에서 보이듯이 하향식 구조로 구성되며 시간이 가장 많이 걸리는 기능이 맨 위에 표시됩니다. 각 기\n능은 총 시간, 자체 시간 및 호출 횟수와 함께 나열됩니다.</p>\n<p>플레임 차트와 호출 트리 모두 JS 함수 실행에 대한 통찰을 제공하지만 서로 다른 방식으로 정보를 제공하\n고 다른 용도로 사용됩니다. 각 차트의 설명은 위에서 했으니, 둘 사이의 차이점과 각각의 장점을 살펴보겠\n습니다.</p>\n<p><code class=\"language-text\">플레임 차트</code>의 장점</p>\n<ul>\n<li>성능 문제를 일으킬 수 있는 장기 실행 함수 또는 코드 블록을 <strong>빠르게 식별</strong>할 수 있습니다.</li>\n<li>서로 다른 기능 간의 관계와 실행 순서를 보여줍니다.</li>\n</ul>\n<p><code class=\"language-text\">호출 트리</code>의 장점</p>\n<ul>\n<li>실행 시간 측면에서 가장 비용이 많이 드는 기능을 식별하는 데 도움이 되므로 <strong>최적화 작업의 우선 순\n위</strong>를 쉽게 지정할 수 있습니다.</li>\n<li>함수별 호출 횟수를 보여주기 때문에 필요 이상으로 <strong>자주 호출</strong>될 수 있는 함수를 정확히 찾아낼 수있\n습니다.</li>\n<li>함수 실행에 대한 집계 보기를 제공하여 전체 성능 비용에 대해 보다 명확한 관점을 제공합니다.</li>\n</ul>\n<p>따라서 플레임 차트는 JS 실행에 대해 시간순의 시각적 개요를 제공하는 데 탁월한 반면, 호출 트리는 반복\n되는 코드 호출을 집계하므로 평균적으로 어디서 시간이 소요되는지 쉽게 확인할 수 있습니다. 이렇듯 모두\n고유한 장점이 있으며 함께 사용하면 성능 병목 현상을 보다 효과적으로 식별하고 해결하는 데 도움이 될수\n있겠죠.</p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>이 외에도 웹 바이탈과 프레임 등 다양한 항목도 표시할 수 있는 좋은 기능들을 제공합니다.</p>\n<p>이제 Performance 탭에서 성능 결과 보고서를 보고 이해할 수 있을 겁니다. 당연하겠지만 보다 편안하게 사\n용하려면 연습밖에 없습니다. 본인이 만든 웹 페이지를 프로파일링하고 결과를 분석해보세요. 그러다보면웹\n애플리케이션의 성능 병목 현상을 식별하고 해결할 수 있을 겁니다.</p>\n<p>마지막으로 런타임 성능을 향상시키는 방법에는 여러 가지가 있습니다. 몇 가지 일반적인 최적화 전략은 다\n음과 같습니다.</p>\n<ul>\n<li>JavaScript의 실행을 최적화 (rAF 메소드를 사용한다던가, 오래 실행되는 JS를 메인 스레드에서 웹 워커\n로 이동한다던가 말이죠)</li>\n<li>캐싱, 압축 및 CDN을 활용하여 네트워크 요청을 최적화</li>\n<li>스타일 계산의 범위와 복잡성 감소</li>\n</ul>\n<p>프론트엔드 개발자라면 꼭 이러한 방법들을 숙지하시면 좋을 것 같습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li><a href=\"https://tv.naver.com/v/23652467\">https://tv.naver.com/v/23652467</a></li>\n<li><a href=\"https://www.debugbear.com/blog/devtools-performance\">https://www.debugbear.com/blog/devtools-performance</a></li>\n<li><a href=\"https://yonatankra.com/how-to-profile-javascript-performance-in-the-browser/\">https://yonatankra.com/how-to-profile-javascript-performance-in-the-browser/</a></li>\n<li><a href=\"https://developer.chrome.com/docs/devtools/performance/\">https://developer.chrome.com/docs/devtools/performance/</a></li>\n</ul>",
      "%EC%9B%B9-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%84%B1%EB%8A%A5-%EB%B3%B4%EA%B3%A0%EC%84%9C%EB%A5%BC-%EB%B3%B4%EA%B3%A0-%EC%9D%B4%ED%95%B4%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95#웹 페이지 성능 보고서를 보고 이해하는 방법": "<p>성능 문제가 발생했을 때 해결하려면 웹 애플리케이션을 프로파일링하고 모니터링하는 방법을 알아야 합니\n다.</p>\n<p>웹 성능을 측정하는 방법들은 Lighthouse, Chrome DevTools Performance Tab, PageSpeed Insights 등 여러\n가지가 있습니다. 이 중, <strong>DevTools의 Performance를 이용</strong>해 세부적으로 웹의 동작을 들여다 보겠습니다\n. 그리고 웹 애플리케이션의 성능을 분석하고 개선하는 방법을 알아보겠습니다.</p>\n<h2 id=\"성능을-기록하는-방법\" style=\"position:relative;\"><a href=\"#%EC%84%B1%EB%8A%A5%EC%9D%84-%EA%B8%B0%EB%A1%9D%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"성능을 기록하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>성능을 기록하는 방법</h2>\n<ul>\n<li>Chrome 브라우저를 엽니다.</li>\n<li>분석하려는 웹 페이지를 로드합니다.</li>\n<li>페이지의 아무 곳에 마우스 오른쪽 버튼을 클릭해서 <code class=\"language-text\">검사</code>를 선택하거나 <code class=\"language-text\">Crtl+Shift+I</code>\n(Windows/Linux) 또는 <code class=\"language-text\">Cmd+Opt+I</code> (Mac)를 눌러 개발자 도구를 엽니다.</li>\n<li>개발자 도구의 <code class=\"language-text\">Performance</code> 탭을 클릭합니다.</li>\n<li>Performance 탭에서 <code class=\"language-text\">기록</code> 버튼(원 아이콘)을 클릭하거나 <code class=\"language-text\">Crtl+E</code> (Windows/Linux) 또는 <code class=\"language-text\">Cmd+E</code> (Mac)\n를 누릅니다.</li>\n<li>분석하려는 작업(성능 문제를 일으킬 것 같은 시나리오)을 수행한 다음 <code class=\"language-text\">중지</code> 버튼을 클릭하여 기록을중\n지합니다.</li>\n<li>기록이 완료되면 Chrome DevTools가 웹 페이지 성능에 대한 자세한 보고서를 표시합니다.</li>\n</ul>\n<h2 id=\"웹-페이지-성능-보고서를-보고-이해하는-방법\" style=\"position:relative;\"><a href=\"#%EC%9B%B9-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%84%B1%EB%8A%A5-%EB%B3%B4%EA%B3%A0%EC%84%9C%EB%A5%BC-%EB%B3%B4%EA%B3%A0-%EC%9D%B4%ED%95%B4%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"웹 페이지 성능 보고서를 보고 이해하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>웹 페이지 성능 보고서를 보고 이해하는 방법</h2>\n<p>이제 아래 사진처럼 성능에 대한 자세한 보고서를 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAADXElEQVR42o2Ua1MbNxSG9xc0bdpJJrTYu6tdaVd709619tpgfLe5B9trY2xTphDAhTQYGztTIF/afkj/cwVMOp3mCzPPaDSvznukI80R5weR70euFzpuYJg2Q8WG5xDXpzSkQcBExyIuCyC2R4jHRhaDsWlaPmd7zJ4JozigWc+PHC80iaubjh9mgij2gkg3CTZMk9gmcSzbNW0H6yYTVc3gPCsmWkQMX9V0w7BYlOf5luXYxHcd3yFe4NJMkA+c2LWoZ1HHDC3d07Hj2hEX6nVXrehqBmILqgSqtoQMCC0Lrxg4Z6gZV616qG6ALEErFszb6pqLS75Wjt0a19jcOhmPp4u73ybz6fz+iZvFp8n8dra4v765nX28v57/fjVbTOe3V9OPs8Xd5WRyfvXu8HjANdZb7eTk6OfF6PB6NJx2k8te9327ddFL3ifJRad9kbQvmNLf/9B5nPS6Hza3hmEuT+M8V9z6RYu7QWk/boxyzcOgPMzWh2G5n2uMouqArPai6sFqc1jYPLJX+15x4JcOgtJAj/tm5i0H3b0ftV1aPCLZXlw9jSvnudo4Wz3O187ytXFcOc1XT9eavxabl1HxLCycZyvjn/TdF0L9tVzilvXGEm7gcCdtbbgrnUwxiSsjWjqOykd0rZcpD3L1d4X1k9V6jxaSuNQKCm9fK/VvhMr3YoF7CTe+kxov5fVXeFswt0WzqdMWonuQ7gnONon7JO6amYTXt3ltnTebr1DtW7HyQqz9AAqcm020aKQGQyfb3wvCHSPYoX5hn0asiFbY38ju1mm7nN+xB+vmUEFURAQgmyErNgcEEQgAiDJDFBEASFElCUIAVACUB11SZagKgvgFFg4FUWZwKUFNCUpaQGlRSfFQlCQZYyamBSkNNB5gNgGSwgvyA6L6CHqCk6EsQbYsAra3JMoKAEBOpwHPPyAIEhsl6cnDUkBeAP/CCUCECGmGiTUd6wbWDIQwO+d/YeuKghVF/QJ+gmMJltMi1ghSdAbrR4i0/5llqEiy+jUcjeKD/gGQ0HJK0Fgr2rYMcZoHz4H7/Pnvs7Pz2c3izVKKdW+cL5iWy7NSnwH3x59/3d59mlxP3ywt00yuWK5IsvJ4H88wsz+l0+mKD08HNZ2wgiUJsSM9x/wP0Z//iaRvinMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Performance 기록 결과 화면\"\n        title=\"\"\n        src=\"/static/1681089562232.0251107585241/00d43/my-blog-performance.png\"\n        srcset=\"/static/1681089562232.0251107585241/63868/my-blog-performance.png 250w,\n/static/1681089562232.0251107585241/0b533/my-blog-performance.png 500w,\n/static/1681089562232.0251107585241/00d43/my-blog-performance.png 1000w,\n/static/1681089562232.0251107585241/aa440/my-blog-performance.png 1500w,\n/static/1681089562232.0251107585241/56e36/my-blog-performance.png 1750w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Performance 기록 결과 화면</p>\n<p>엄청난 양의 데이터로 인해 뭐부터 봐야할지 감이 안 잡힐 수도 있습니다. 천천히 하나씩 들여다 보며 이해\n해보겠습니다.</p>\n<h3 id=\"cpu-utilization--filmstrip\" style=\"position:relative;\"><a href=\"#cpu-utilization--filmstrip\" aria-label=\"cpu utilization  filmstrip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU Utilization &#x26; FilmStrip</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZklEQVR42hXFCwrCMBQEwB7HlLzdbH6mJSIVEalg7n8bIwzMElC9k5nc6r3HJCVDwFyRlELO8ZrUaJmY0uroLgDysmN0fJMOYzZWqhkS2Wp8lvgoOnocN43NXn987+HcePZw3svnB31WGFymD9SOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Timeline\"\n        title=\"\"\n        src=\"/static/1681089562233.096107585245/00d43/performance-timeline.png\"\n        srcset=\"/static/1681089562233.096107585245/63868/performance-timeline.png 250w,\n/static/1681089562233.096107585245/0b533/performance-timeline.png 500w,\n/static/1681089562233.096107585245/00d43/performance-timeline.png 1000w,\n/static/1681089562233.096107585245/aa440/performance-timeline.png 1500w,\n/static/1681089562233.096107585245/ab40b/performance-timeline.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Timeline</p>\n<p>상단의 CPU 타임라인에선 Critical Rendering Path(Javascript, style, layout, paint, composite)과 ajax\n호출 등을 보여줍니다. 주로 JavaScript(노란색) 및 레이아웃 작업(보라색)과 같은 다양한 유형의 작업으로\n인해 CPU가 얼마나 열일하는지 봅니다. 사진에서 보이듯 CPU 활동은 처음 활동을 시작한 후 상당히 조용해\n집니다.</p>\n<p>중앙의 FilmStrip은 왼쪽부터 시간순으로 나열되며 프레임 스크린샷을 통해 각 순간의 사이트가 어떤 모습\n인지 볼 수 있습니다. 이러한 애플리케이션의 시각적 상태는 “screenshot” 옵션을 체크했을 때만 존재합니\n다. FilmStrip 위로 마우스를 가져가면 해당 시점의 스크린샷을 크게 볼 수 있습니다.</p>\n<p>하단 부분은 애플리케이션의 메모리 추세를 보여줍니다. 위 예시 사진에서 메모리가 증가하고 잠시 후 감소\n하는 것을 볼 수 있습니다. 일반적으로 가비지 컬렉션 프로세스가 발생할 때까진 메모리가 증가합니다.</p>\n<h3 id=\"user-timing-metrix\" style=\"position:relative;\"><a href=\"#user-timing-metrix\" aria-label=\"user timing metrix permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>User Timing metrix</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 813px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.200000000000003%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPElEQVR42gExAc7+ACQlKCUmKiQkKDU4QmRoc19jbGFlb2FaRnpzXzw8OlBXU2ZsZmpuc2JpZ2NoY1hdXzQ2NigoMCIhKBEQFgBGSEpqbmxnbGeVn5bF0crI1M3N2dPGx6HR07Cws63N0czQ1c/KzMrR087L1cPBzraYoo1+iHh/iXh6hHMAPkFCVlpYYmZje4N6a3Noa3NoanFmbHVyZW5nd3dwcm50Z2RqaWhsdnl+lJGokZKnjJCanZ6ym5uwnp6zACoqLjo7Pzk6PRkZHhQTGBUVGhQUGxIREx8oPCU6Wyg+NCxBMSsqIzMXGTUxUT83XS0oQzoyV0dFZEQ/YQAiIyYuLzIwMjQiIyYkJSgjJCcjJSghISEtOU46U3g5U0U5Uz48OzNHJygbIB4cHxwfISAbHhsrMykkKyMp/WsbrDCqYwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"로딩에 관한 지표들\"\n        title=\"\"\n        src=\"/static/1681089562233.2878107585246/baaa6/performance-timing.png\"\n        srcset=\"/static/1681089562233.2878107585246/63868/performance-timing.png 250w,\n/static/1681089562233.2878107585246/0b533/performance-timing.png 500w,\n/static/1681089562233.2878107585246/baaa6/performance-timing.png 813w\"\n        sizes=\"(max-width: 813px) 100vw, 813px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>로딩에 관한 지표들</p>\n<p>타이밍 레인에는 FP, DCL, L 등 이벤트도 표시됩니다.</p>\n<p>자세히 설명하자면 이 글이 너무 길어지고 내용이 산으로 갈 것 같아 각 지표들의 의미만 살펴보고 넘어가\n겠습니다.<br>\n해당 부분에 대한 건 따로 다른 글에서 자세히 설명하겠습니다.</p>\n<ul>\n<li>FP (First Paint): 페이지 네비게이션 후, 첫 픽셀을 그린 순간</li>\n<li>FCP (First Contentful Paint): 첫 엘리먼트를 그린 순간</li>\n<li>LCP (Largest Contentful Paint): 가장 큰 엘리먼트를 그린 순간</li>\n<li>DCL (Dom Content Loaded): DOM Tree를 구성하고, 스크립트(+ defer 스크립트)를 실행 완료했을 때 →\ndefer 스크립트가 없다면 FP 전에 DCL이 올 수 있습니다.</li>\n<li>L (Load): 다큐먼트의 리소스들을 모두 로드 완료했을 때</li>\n</ul>\n<h3 id=\"cpu-flame-chart\" style=\"position:relative;\"><a href=\"#cpu-flame-chart\" aria-label=\"cpu flame chart permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU flame chart</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABV0lEQVR42jWLXU+CYBiG+QEtax2UW5oftOUXLgp94UVEeQEBCdQsyjUzE3VIrq2f4DxSbKuTTqwO+p+9ubVdu5/rvreHmM9X728/wfJjFXyull/BAidmHSzWG/kD+39dvwbfs1ngv4wmzy4BxKaArkXlBmm3DHcBBJsG9QK0irxFAwNTgCYUba682XmLgRbN6mSGIzOQSPP3XK0Ptb7U8EvGpGL7ZcuTbA81nqDuQ2OMGr5xNZXsKatN2JoHda9Yc9N8Nw3viBjVKojdLHAEdcRJLi+PeMXl5EFJGWMpqQOhNkTmBFe26rLSGFTdaK65dYRCMUREsgZ5Wo9SZh42mXKbrXYAegDyY6HiFCsOp/RK+lDUe6ByyQhtKFkUZ4ZTeiiu7CRkYjeBj7qfMg9zVoQyybNWkm4k6VY0bx2fO2m2kyo6eDw40cIpNZKr75FqKCZv4+c4+gUZGG3RCsnSFwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Flame chart\"\n        title=\"\"\n        src=\"/static/1681089562232.488107585243/00d43/performance-flamechart.png\"\n        srcset=\"/static/1681089562232.488107585243/63868/performance-flamechart.png 250w,\n/static/1681089562232.488107585243/0b533/performance-flamechart.png 500w,\n/static/1681089562232.488107585243/00d43/performance-flamechart.png 1000w,\n/static/1681089562232.488107585243/aa440/performance-flamechart.png 1500w,\n/static/1681089562232.488107585243/ab40b/performance-flamechart.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Flame chart</p>\n<p>가장 핵심 부분이라고 생각합니다. 플레임 차트는 기록하는 동안 웹 페이지의 JS 실행을 시각적으로 표현한\n것입니다. <strong>성능 병목 현상이 발생할 수 있는 위치</strong>를 이해하는 데 중요한 부분입니다. 수평 레이어로 구\n성되며 각 레이어는 단일 JS 함수를 나타냅니다. 각 함수 블록의 너비는 함수의 실행 기간을 나타내고 색상\n은 작업 유형(스크립팅, 렌더링, 페인팅…)을 나타냅니다. 그러므로 이 섹션에서 <strong>어떤 함수가 호출되었고\n각 함수가 얼마나 오래 걸렸는지 정확하게 분석</strong>할 수 있습니다.</p>\n<p>위 사진에는 안 나왔지만 Register, GPU, Compositor 등 성능 문제 디버깅에 유용한 섹션들이 있습니다. 몇\n가지 설명드리겠습니다.</p>\n<p><strong>Network 섹션</strong>은 다운로드 요청과 완료 시간을 볼 수 있습니다. 그리고 <strong>Main 섹션</strong>은 렌더러의 메인\n스레드로, 알록달록한 색으로 된 지표들을 통해 프레임의 전체 시간과 프레임을 연장하는 데 가장 큰 영향\n을 미친 기능을 확인할 수 있습니다. 노란색은 자바스크립트가 실행 중임을 나타냅니다.</p>\n<p>이해를 쉽게 돕기 위해 UI 업데이트 또는 CPU 작업과 연관시키는 데 특히 유용한 Network 섹션을 통해\n<a href=\"https://stripe.com/\">Stripe</a> 홈페이지를 디버깅하는 예시를 들어 보겠습니다.</p>\n<p>아래 사진은 폰트 로드가 완료되기 직전의 Stripe 홈페이지입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC50lEQVR42gHcAiP9ADAwMyAgISYlJzc3OCYpKSUmKCAiIyEiJSgpKyooIigpKyIjJB4gISkrLRsdHicpLCYoKh4fISosLyEjJAA2PUhDS1o8RVNQWGdkaXpXWWdgYnFfYHJZXGtmZWxcXW9aXWxZW2pXWmpYWmpISFNJSVRKSVRISFJKSVQAP0FHP0JJQEJKODtCoqSu19bhz87bzMzYxsXQzsvNyMfTyMfTyMjSx8bSyMfSwb/Iw8HLw8HLxMLMwsDLACYnLCwuMissMCUnKzU6PzU4QDI3QDxASzI1OTw4NTY0ODEwNDMyNjQ1OS8yODI2PDQ4PTEyNzU2OTY4OgAjKDQrMT80OUkrL0AzN0c1OUknKzsxNkY0NUSdQV22UXykXY+fcqqVeMGPdsWdf7OzipXHkWzRpGLUs2UAlqzCmK7JhaGza46UZ4mRaIuRcJWYdZyfcI+SsHGdv43DsJ3Zp5fmn4XlqX/TuYu9zpie6quA9Lpz9sV2AKCfpKCepHR3dDxFOF1kW2BmXVBZTDE7KTU+L5GfyKW8+J+k8Ix+34Zs1ZB0zZZ/u7Khv8W2wLyvsd7W1gArLDAsLTIhIiZqZ3a+uNDEvtWWkKYVFRshIimMiMmojuyket6NbM1zZ8Jxd9F1ktqJt+eYyO6o0fXK2esAIiInIiMoFRYYaGZz0s3i1M7kmZanFxobJiYqnleVvWCqtmirlGmagHOggIy+lbnXl7bOqb3P2N7k7u/xAFlfWlxjXVtiW2RnaWlkdG5reFxbZSEjJickKbZZduCLqOCyyNrI1NnX3Nra3t3b3dTQ09zZ2uPh5Pj4+gBnb2Ztdmxze3JWZFcsQi8fKCIXFxoiJCYyNzXZ1tX//////v7v8fLo6+z6+/v4+vn8/f3+///+/f7v8PIAFBQZEhIXERAWHSEhLjsyJywrIyMnHyEjKi4u2dra////////19nd0NTZ/P38/f39/v7+/f39////5OXoVxdfwiCa7CoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stripe example\"\n        title=\"\"\n        src=\"/static/1681089562235.117107585248/00d43/stripe-not-loaded.png\"\n        srcset=\"/static/1681089562235.117107585248/63868/stripe-not-loaded.png 250w,\n/static/1681089562235.117107585248/0b533/stripe-not-loaded.png 500w,\n/static/1681089562235.117107585248/00d43/stripe-not-loaded.png 1000w,\n/static/1681089562235.117107585248/84bf8/stripe-not-loaded.png 1162w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>stripe example</p>\n<p>여기서 UI에 변경 사항이 있으면 네트워크 요청 섹션을 통해 UI 업데이트를 <strong>지연</strong>시키고 있던 <strong>네트워\n크 요청</strong>을 이렇게 식별할 수 있습니다.</p>\n<p>폰트 파일을 로드한 직후의 아래 사진에서 UI가 다운로드한 폰트를 사용해 재렌더링되었음을 확인할 수 있\n습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.199999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9ACUoLy80PDA1Py0yPElPWDY9RiMpMycsNycsNyctNiEmMTA1OisvMiMpNCUrNRwhKR4iKRkcJBwgJxwgKAA/Q0s/Q0xHTVlITllITVmen7C7uMe4tsW4tcWysb+3s8e4tL+5tb+wr8G1s8Svq7mno7GopLCqprKoo7AALzA0LzA0LzA0LjAzKy4wZ2txfoCJe3+JfYGLcnV4Zm9wbXNvcHRuaGtrbG5qbG5sbXBxaGxxaW52aWx1ADM0OCAhJiYoLi4vNiAgKCMkLB0dJhQTHSAiLCccJXIwQ3A4U2g/XWZOcltOflpPemhYb3RaVX1hQ4RxSABRYnxgc4xme5hkfJVeeY1feo9hfJFkf5JjhZdxc4jQY5XHf7e6kNKxlOirieu5jdbOmrjsqYr9vXL/zXAASU1Us7i9vcDHlZ+cTF9LVGdUV2pXV2tWS2NIWmddp6japLbsnaLsj3/dk3PUnnzArY6yyqmtz62c2b6nACgoLDo5QDs6QSgnLFlVY6qjubOrwW9pewsJDDEzQaGp8qKR7Jx74nhhyHNpzXN40ISb1qLG7KDG6bzR7AAdHSEhIiUhIiUWFxlta3jPyuHY0umBfo0QFBI6M0Cyarm0Z7WrbLN9YZhwbqt5l9CFs9mRs9O80uPp8PcAQUVDRkpISU1LRUpHYWFnfnqJiIWTYV9pGB0fPiw2z16G1YGk06fAv7O+ubfDxMjNvLzCwr/E0M3R+vr6AHN8cXR9cnqEeIKLgGBtYC5BMiIpJR8fIhwgIUtLSvnr7f////z8/eLm6Ons7PDw8e/w8vb3+P////T19wAYGBwXFxwVFRoUExkfJCQvPjQmKyoiIiYaHB5ITEz+/v7////6+vrIzNHo6uz9/f39/f3+/v7////08/ZpGj2cguMcPAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stripe example2\"\n        title=\"\"\n        src=\"/static/1682400641215.82112973136/00d43/stripe-loaded.png\"\n        srcset=\"/static/1682400641215.82112973136/63868/stripe-loaded.png 250w,\n/static/1682400641215.82112973136/0b533/stripe-loaded.png 500w,\n/static/1682400641215.82112973136/00d43/stripe-loaded.png 1000w,\n/static/1682400641215.82112973136/a13c9/stripe-loaded.png 1178w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>stripe example2</p>\n<h3 id=\"memory\" style=\"position:relative;\"><a href=\"#memory\" aria-label=\"memory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Memory</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAr0lEQVR42k3N22rDMAwG4DzHklqWrJOdntJuvWk3Ci0OLfT9X2fucjP4+BHoR+qm423cz2U/76b7vB1rWdevcnltPx+Ha909v9f1Z3qcT3VTr2XOukliopnFW3YBEgBBbNIH2ECKbsPKw8qHkHvwPmgg6yP0EFonkv+xpsNkmLQhViJmY/UcUSMxJqd2C5NIptZGB8pABiiLTtv/f6wIsyAteEmRIjq+D/N7y6LL8Av+2yUIPimhrwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Memory Image\"\n        title=\"\"\n        src=\"/static/1681089562232.7012107585244/00d43/performance-memory.png\"\n        srcset=\"/static/1681089562232.7012107585244/63868/performance-memory.png 250w,\n/static/1681089562232.7012107585244/0b533/performance-memory.png 500w,\n/static/1681089562232.7012107585244/00d43/performance-memory.png 1000w,\n/static/1681089562232.7012107585244/aa440/performance-memory.png 1500w,\n/static/1681089562232.7012107585244/ab40b/performance-memory.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>DOM 노드, 리스너 및 기타 메트릭이 이 차트에 요약되어 있습니다.</p>\n<p>DOM 노드, 리스너 및 기타 메트릭이 이 차트에 요약되어 있습니다. 색상별로 노드, 리스너 등을 구분할 수\n있습니다. 이 부분에서 앱의 추세를 볼 수 있으며 주로 <strong>메모리 누수를 추적</strong>할 때 유용하게 사용할 수있\n습니다.</p>\n<h3 id=\"cpu-activity-breakdown\" style=\"position:relative;\"><a href=\"#cpu-activity-breakdown\" aria-label=\"cpu activity breakdown permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU activity breakdown</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 632px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACpElEQVR42l1SS08TURSevaAkiJROZ9pO23ncO3M7nXamL/rEVqApihADGhMTJRgfiRujBuPCHQsQNHEhkfgHXGBcSwiuYWeiSyWphvhYIDvEbzoEDcnXyXd7znfOvd85HM/7KaWMGTzPBwLiQG2oWD6dL1Sy+SKhrFgeaKMKnusvl6u1XL6UyRVUTdeIwfEBkecFQBCCISlqxC3kIUD0uKxSrc3xPeBt0HYI4JJ2Bq1QNW6mVGLY6bzBEsFQBAiFox45wr0jwOEXiSrRmCpFYmHpAF7sEMgWg1JYcjkI4Ok5LwxBQAgLIjLkcDh2RGkwS9dZY+JOujhsGCyTK+qGiRIcZHwg1NPrJ9TQCPHzfYIYOmwOJS5F2m9ujgxnsjlC46ZlU91ECIYFE5a98ubtzx/fvmzMzz6cVVVHEEVPj/KwwEo5smZOXy7UqrbO7JSTgd69Nh68sbm5vf19Zmbm7q3x10sfnzxew/NQGHp8YbuZsBWNNOrT2cwgSpmWk7AcWSHcjZu39/b+1M8MdR7vPtHty2cbK8u/moNXff4+KSJDjFFhfqpG6/Vx2ynqLIGbsnjSFc/NzW9tbUVlbbg5WqnWqMGeL65eu/LolK9XiigQyzJBH0LMwYlyuuQwlrLTOZSANdzU1PX9/f2Rs6PHOro6OrvOj1349PlDc2zE5wt4nWOyBrdjCpm8eKlYqmiExRMpWaHumxFeX3+/s/N7YeHp4uKz3d3d1XdrweDB/BBVVOpmq3Ri0hXrDPZlUct1OyCEMKTl5Vet1tdWq/Vi6aVKdPzpKdHcSqZhWEwm9+4/aDbPUcP0dsbtjCRBDJ/s8SEPAMHxcM4giaSDzYXnugGYbZ/pvw1DBmTe3mFy/28IjqVKrb9QsZ2cnxfhMI7MTHqd/wKdScdWyb3W0wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Aggregated task breakdown\"\n        title=\"\"\n        src=\"/static/1681089562232.2976107585242/084e2/performance-cpu.png\"\n        srcset=\"/static/1681089562232.2976107585242/63868/performance-cpu.png 250w,\n/static/1681089562232.2976107585242/0b533/performance-cpu.png 500w,\n/static/1681089562232.2976107585242/084e2/performance-cpu.png 632w\"\n        sizes=\"(max-width: 632px) 100vw, 632px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Aggregated task breakdown</p>\n<p><code class=\"language-text\">Summary</code> 탭에서는 특정 CPU 작업을 선택하지 않은 경우, CPU 작업 내역이 다음 4가지 범주로 분류되어 표\n시됩니다.</p>\n<ul>\n<li><strong>Loading</strong>: 네트워크 요청 및 HTML 파싱</li>\n<li><strong>Scripting</strong>: JS 코드 파싱, 컴파일링 및 실행, 가비지 컬렉션(GC) 포함</li>\n<li><strong>Rendering</strong>: 스타일 및 레이아웃 계산</li>\n<li><strong>Painting</strong>: 이미지 페인팅, 합성, 리사이징 및 디코딩</li>\n</ul>\n<p>다른 쓰레드를 클릭하거나 위쪽 및 아래쪽 화살표 방향키를 사용해서 다른 쓰레드를 선택할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 818px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 116.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAIAAACEf/j0AAAACXBIWXMAAAsTAAALEwEAmpwYAAADt0lEQVR42o1Ta28UZRSeL0YapCC1te3u3Gdn57Lzzv3S7rK7tixLAQmg1a4IpjWpEiMa27SNsZpAjNXE2wejpAYN2hSKdk1Y2q2t0K0aSpNaSaOCEsMHid/9BZ7prMu6hsTkyZMz75xnznnecwZb+vzF5anB5amBta+Gfp0b/mXG59ulkYunBlv43uHjz7/y0gu00qs4/YrzbAXIPQaMnftoYf6LYmFidvbs3Mrc6rXLP60uXLuxfPPU+5NYgxeSO0NSx6Zwui6c3FSFOjwFjJ2fWDl3Zuni9I/5sysz0+vfL/xRmru1svjn2Fj+3tbUFiq7mchsY7Jb6V3VCE6wN8emLhXWS7PXV5duL1+6tTjz85WFm7+v/fXu29P3tCTvZyA1A3n1VKYawQn2+NETF6aunBkvFs5fzU+WZvNrff2vDw6Nj756GioHSXcVH+oZulxYg8rzF9YP9ozoO3pbpX3N4j4j+eRmvHMr5FGZbXcTG8mnPhn/ZvKzq91HTpDoEeyB+HZuTz29uy7cAW63kLsCvm+DK6inssBYE6E100ZDOIZHXM3t4mJpRk7R0o4I6uCUNCUmggBOiGh7DTCSwCMci+Mhnufb2xOO4xqmqWm657XZtqsoyIXAP7REUZIkuRrY3oyNNFPTbVWzRBnhBE3RHICkfKaZCEmxJF2Oa4CZlqnqFlINSUa66QAH4v8DTI7pUFOKqYKkyDGVj0pQiqKhms8UlKV8LqNGrCAQmyCDAD4BRwwXZdh/wAk+yo8CtFpTWdUMW5QUpPrODcsFWO3ZtvQBO97lJh/2kvvtxB4vfcBL7Y9EFZJi7oihz6gggxjAC1JwE1CH5crgIkEgsH5HfDUwy2lzvbisGFwUQf+QSm743ACDE0xLiCFJCGiCZAD/arullaBY6fATuZ5DKcgIE0zFGMfLho52d+pREcUUDQzCLKr1mKWLi4UP5r8u/lAcKU4c56MCQbI0A1PlopIab7OOdCdkxTRMBwap6jbYpCviT997evrjY61hFjx8lx84Ody9vRFnWLDNy8jwPO/g3p1Is8CdpluwEXCpldaw0pcD/UezIVJqCgknhx+d/PCZhiYCxPCOF0TDSGQeOizFEGjkmAa+Kivoi994+TFo2LXVnWnnt29fe66vC8SsL2Z5QY4nkrlcLoZ0mB/L8sGS3hHDw+l3+m6URq+XRt8azYVwuDBYbBYGAwJZ0WCQjhuH/SH/u2Fw143NpKErSJEbHyTLLyjOLywpkYgAf4gooWCENeK/ASmMSPlwemSIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"스크린샷 2023-04-08 오전 3.47.37.png\"\n        title=\"\"\n        src=\"/static/1681089562228.579107585238/64d87/any-function-call.png\"\n        srcset=\"/static/1681089562228.579107585238/63868/any-function-call.png 250w,\n/static/1681089562228.579107585238/0b533/any-function-call.png 500w,\n/static/1681089562228.579107585238/64d87/any-function-call.png 818w\"\n        sizes=\"(max-width: 818px) 100vw, 818px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 사진은 flame chart에서 특정 Function Call을 선택했습니다. 하단의 Aggregated Time은 해당 Function\nCall의 CPU 분석을 보여줍니다. 또한 링크(Graient~~~ )를 클릭하면 개발 도구의 소스 패널에 있는 코드 줄\n로 이동합니다.</p>\n<hr>\n<p><code class=\"language-text\">Bottom-Up</code> 탭에서는 CPU 활동에 대한 보다 세분화된 분석을 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABs0lEQVR42m2S2XLjIBRE9Se2JCQEiEXsAi2RvKacxElmKk8z//8bQ/I0sUOdJ+p23e6GzPmxhqQogDK91J53lnKFMCUt/xGE20SDCGUii72dBuudmqfYezNEO0+DkBYTVtWohvgbDenMrNyi/Sr0kEHYnFY99wQT6p1ZRrFbQlGiTV5ucvCdclvWbnoJ66+4+5D+mJUAKaWtxA1mxqg58MMaK0jyNHpHXgCup86t0u/bLmSoFcrGLp0UWIUhmrfrmclQAJTfU2FuVtWfVDhTOWcNcdKdUnohnXVxGtz766Ptl7LCedncsC1gv7xPpz/z+a+dnrMKMioiQoRQ3nLpBDuugQlTgnqzLW5spxsdzn6+9g+vyXxWQ8Q71aCWUNEyZQU9rCG5AFWz2SYBuEH6gx0udnzq7JrB1L5ypGWUd5Sb3snr00KFze9kn4WVdVKmthOd3X2K5ZeYcRWDn6N5vlzCuJYA3m/Oi9rPL3H/Me5/u3hItjETipDWaD5GPQZ52D3YfmRcFmX9FfV/cQUqnF4X1LiCOEufhnc67cctx1RqJY77SJiCDU6j984hFg1RCQDpPzW5gnmQy6QYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"bottom-up.png\"\n        title=\"\"\n        src=\"/static/1682400641213.6167112973135/00d43/bottom-up.png\"\n        srcset=\"/static/1682400641213.6167112973135/63868/bottom-up.png 250w,\n/static/1682400641213.6167112973135/0b533/bottom-up.png 500w,\n/static/1682400641213.6167112973135/00d43/bottom-up.png 1000w,\n/static/1682400641213.6167112973135/aa440/bottom-up.png 1500w,\n/static/1682400641213.6167112973135/d3deb/bottom-up.png 1758w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 사진처럼 하위 수준의 함수를 확장해서 어떤 코드가 함수를 호출하는지 확인할 수 있습니다. 이렇게 하\n면 제어할 수 있는 코드를 찾는 데 도움됩니다.</p>\n<hr>\n<p><code class=\"language-text\">Call Tree</code> 탭은 기록하는 동안 실행된 JS 함수의 계층적 표현입니다. 호출 트리는 가장 시간이 많이 걸리\n는 기능을 식별하는 데 도움이 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.400000000000006%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABN0lEQVR42mWQ607CQBCF+xyCofS691v3UnZbbUsFQUzw/V/GBRJFSc6fmck3c+Yk1gXKpFCGMFmUtVSWEAEhgYhiwh+FML2JMpEY57lohJDj2LfOdKENXcelEVJHHkByr9ih3DBhmXCU6yTWSreUkO2rPB+d1WQ/h9CPlKt0XdxrleZ5AYUdpZ1U+4b5JgGIisYWFbZafB0MBBVjaJ4CwCLLy39wVgDTHd3L52Y8xy1JNCMbV9UIIOY3hhKwWGa9l13nV+nD5RLd4HY4CzMkELNGt1WNMZVKOwDg4jlzhp0+ZkRUBH75eDmvm3ZnwsH2J9b0SQwwZlZF90x57yGET8v0fWt3+722oazgH35dMtVff54xd5efZWOrCiEig3cI1QA026nz3cCFjtMf+BoY4Ga4ZOYmRM03hq5XJb1W2d0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"호출 트리\"\n        title=\"\"\n        src=\"/static/1681089562231.061107585240/00d43/call-tree.png\"\n        srcset=\"/static/1681089562231.061107585240/63868/call-tree.png 250w,\n/static/1681089562231.061107585240/0b533/call-tree.png 500w,\n/static/1681089562231.061107585240/00d43/call-tree.png 1000w,\n/static/1681089562231.061107585240/aa440/call-tree.png 1500w,\n/static/1681089562231.061107585240/c830c/call-tree.png 1754w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>호출 트리</p>\n<p>위 사진에서 보이듯이 하향식 구조로 구성되며 시간이 가장 많이 걸리는 기능이 맨 위에 표시됩니다. 각 기\n능은 총 시간, 자체 시간 및 호출 횟수와 함께 나열됩니다.</p>\n<p>플레임 차트와 호출 트리 모두 JS 함수 실행에 대한 통찰을 제공하지만 서로 다른 방식으로 정보를 제공하\n고 다른 용도로 사용됩니다. 각 차트의 설명은 위에서 했으니, 둘 사이의 차이점과 각각의 장점을 살펴보겠\n습니다.</p>\n<p><code class=\"language-text\">플레임 차트</code>의 장점</p>\n<ul>\n<li>성능 문제를 일으킬 수 있는 장기 실행 함수 또는 코드 블록을 <strong>빠르게 식별</strong>할 수 있습니다.</li>\n<li>서로 다른 기능 간의 관계와 실행 순서를 보여줍니다.</li>\n</ul>\n<p><code class=\"language-text\">호출 트리</code>의 장점</p>\n<ul>\n<li>실행 시간 측면에서 가장 비용이 많이 드는 기능을 식별하는 데 도움이 되므로 <strong>최적화 작업의 우선 순\n위</strong>를 쉽게 지정할 수 있습니다.</li>\n<li>함수별 호출 횟수를 보여주기 때문에 필요 이상으로 <strong>자주 호출</strong>될 수 있는 함수를 정확히 찾아낼 수있\n습니다.</li>\n<li>함수 실행에 대한 집계 보기를 제공하여 전체 성능 비용에 대해 보다 명확한 관점을 제공합니다.</li>\n</ul>\n<p>따라서 플레임 차트는 JS 실행에 대해 시간순의 시각적 개요를 제공하는 데 탁월한 반면, 호출 트리는 반복\n되는 코드 호출을 집계하므로 평균적으로 어디서 시간이 소요되는지 쉽게 확인할 수 있습니다. 이렇듯 모두\n고유한 장점이 있으며 함께 사용하면 성능 병목 현상을 보다 효과적으로 식별하고 해결하는 데 도움이 될수\n있겠죠.</p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>이 외에도 웹 바이탈과 프레임 등 다양한 항목도 표시할 수 있는 좋은 기능들을 제공합니다.</p>\n<p>이제 Performance 탭에서 성능 결과 보고서를 보고 이해할 수 있을 겁니다. 당연하겠지만 보다 편안하게 사\n용하려면 연습밖에 없습니다. 본인이 만든 웹 페이지를 프로파일링하고 결과를 분석해보세요. 그러다보면웹\n애플리케이션의 성능 병목 현상을 식별하고 해결할 수 있을 겁니다.</p>\n<p>마지막으로 런타임 성능을 향상시키는 방법에는 여러 가지가 있습니다. 몇 가지 일반적인 최적화 전략은 다\n음과 같습니다.</p>\n<ul>\n<li>JavaScript의 실행을 최적화 (rAF 메소드를 사용한다던가, 오래 실행되는 JS를 메인 스레드에서 웹 워커\n로 이동한다던가 말이죠)</li>\n<li>캐싱, 압축 및 CDN을 활용하여 네트워크 요청을 최적화</li>\n<li>스타일 계산의 범위와 복잡성 감소</li>\n</ul>\n<p>프론트엔드 개발자라면 꼭 이러한 방법들을 숙지하시면 좋을 것 같습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li><a href=\"https://tv.naver.com/v/23652467\">https://tv.naver.com/v/23652467</a></li>\n<li><a href=\"https://www.debugbear.com/blog/devtools-performance\">https://www.debugbear.com/blog/devtools-performance</a></li>\n<li><a href=\"https://yonatankra.com/how-to-profile-javascript-performance-in-the-browser/\">https://yonatankra.com/how-to-profile-javascript-performance-in-the-browser/</a></li>\n<li><a href=\"https://developer.chrome.com/docs/devtools/performance/\">https://developer.chrome.com/docs/devtools/performance/</a></li>\n</ul>",
      "cpu-utilization--filmstrip#CPU Utilization & FilmStrip": "<p>성능 문제가 발생했을 때 해결하려면 웹 애플리케이션을 프로파일링하고 모니터링하는 방법을 알아야 합니\n다.</p>\n<p>웹 성능을 측정하는 방법들은 Lighthouse, Chrome DevTools Performance Tab, PageSpeed Insights 등 여러\n가지가 있습니다. 이 중, <strong>DevTools의 Performance를 이용</strong>해 세부적으로 웹의 동작을 들여다 보겠습니다\n. 그리고 웹 애플리케이션의 성능을 분석하고 개선하는 방법을 알아보겠습니다.</p>\n<h2 id=\"성능을-기록하는-방법\" style=\"position:relative;\"><a href=\"#%EC%84%B1%EB%8A%A5%EC%9D%84-%EA%B8%B0%EB%A1%9D%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"성능을 기록하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>성능을 기록하는 방법</h2>\n<ul>\n<li>Chrome 브라우저를 엽니다.</li>\n<li>분석하려는 웹 페이지를 로드합니다.</li>\n<li>페이지의 아무 곳에 마우스 오른쪽 버튼을 클릭해서 <code class=\"language-text\">검사</code>를 선택하거나 <code class=\"language-text\">Crtl+Shift+I</code>\n(Windows/Linux) 또는 <code class=\"language-text\">Cmd+Opt+I</code> (Mac)를 눌러 개발자 도구를 엽니다.</li>\n<li>개발자 도구의 <code class=\"language-text\">Performance</code> 탭을 클릭합니다.</li>\n<li>Performance 탭에서 <code class=\"language-text\">기록</code> 버튼(원 아이콘)을 클릭하거나 <code class=\"language-text\">Crtl+E</code> (Windows/Linux) 또는 <code class=\"language-text\">Cmd+E</code> (Mac)\n를 누릅니다.</li>\n<li>분석하려는 작업(성능 문제를 일으킬 것 같은 시나리오)을 수행한 다음 <code class=\"language-text\">중지</code> 버튼을 클릭하여 기록을중\n지합니다.</li>\n<li>기록이 완료되면 Chrome DevTools가 웹 페이지 성능에 대한 자세한 보고서를 표시합니다.</li>\n</ul>\n<h2 id=\"웹-페이지-성능-보고서를-보고-이해하는-방법\" style=\"position:relative;\"><a href=\"#%EC%9B%B9-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%84%B1%EB%8A%A5-%EB%B3%B4%EA%B3%A0%EC%84%9C%EB%A5%BC-%EB%B3%B4%EA%B3%A0-%EC%9D%B4%ED%95%B4%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"웹 페이지 성능 보고서를 보고 이해하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>웹 페이지 성능 보고서를 보고 이해하는 방법</h2>\n<p>이제 아래 사진처럼 성능에 대한 자세한 보고서를 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAADXElEQVR42o2Ua1MbNxSG9xc0bdpJJrTYu6tdaVd709619tpgfLe5B9trY2xTphDAhTQYGztTIF/afkj/cwVMOp3mCzPPaDSvznukI80R5weR70euFzpuYJg2Q8WG5xDXpzSkQcBExyIuCyC2R4jHRhaDsWlaPmd7zJ4JozigWc+PHC80iaubjh9mgij2gkg3CTZMk9gmcSzbNW0H6yYTVc3gPCsmWkQMX9V0w7BYlOf5luXYxHcd3yFe4NJMkA+c2LWoZ1HHDC3d07Hj2hEX6nVXrehqBmILqgSqtoQMCC0Lrxg4Z6gZV616qG6ALEErFszb6pqLS75Wjt0a19jcOhmPp4u73ybz6fz+iZvFp8n8dra4v765nX28v57/fjVbTOe3V9OPs8Xd5WRyfvXu8HjANdZb7eTk6OfF6PB6NJx2k8te9327ddFL3ifJRad9kbQvmNLf/9B5nPS6Hza3hmEuT+M8V9z6RYu7QWk/boxyzcOgPMzWh2G5n2uMouqArPai6sFqc1jYPLJX+15x4JcOgtJAj/tm5i0H3b0ftV1aPCLZXlw9jSvnudo4Wz3O187ytXFcOc1XT9eavxabl1HxLCycZyvjn/TdF0L9tVzilvXGEm7gcCdtbbgrnUwxiSsjWjqOykd0rZcpD3L1d4X1k9V6jxaSuNQKCm9fK/VvhMr3YoF7CTe+kxov5fVXeFswt0WzqdMWonuQ7gnONon7JO6amYTXt3ltnTebr1DtW7HyQqz9AAqcm020aKQGQyfb3wvCHSPYoX5hn0asiFbY38ju1mm7nN+xB+vmUEFURAQgmyErNgcEEQgAiDJDFBEASFElCUIAVACUB11SZagKgvgFFg4FUWZwKUFNCUpaQGlRSfFQlCQZYyamBSkNNB5gNgGSwgvyA6L6CHqCk6EsQbYsAra3JMoKAEBOpwHPPyAIEhsl6cnDUkBeAP/CCUCECGmGiTUd6wbWDIQwO+d/YeuKghVF/QJ+gmMJltMi1ghSdAbrR4i0/5llqEiy+jUcjeKD/gGQ0HJK0Fgr2rYMcZoHz4H7/Pnvs7Pz2c3izVKKdW+cL5iWy7NSnwH3x59/3d59mlxP3ywt00yuWK5IsvJ4H88wsz+l0+mKD08HNZ2wgiUJsSM9x/wP0Z//iaRvinMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Performance 기록 결과 화면\"\n        title=\"\"\n        src=\"/static/1681089562232.0251107585241/00d43/my-blog-performance.png\"\n        srcset=\"/static/1681089562232.0251107585241/63868/my-blog-performance.png 250w,\n/static/1681089562232.0251107585241/0b533/my-blog-performance.png 500w,\n/static/1681089562232.0251107585241/00d43/my-blog-performance.png 1000w,\n/static/1681089562232.0251107585241/aa440/my-blog-performance.png 1500w,\n/static/1681089562232.0251107585241/56e36/my-blog-performance.png 1750w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Performance 기록 결과 화면</p>\n<p>엄청난 양의 데이터로 인해 뭐부터 봐야할지 감이 안 잡힐 수도 있습니다. 천천히 하나씩 들여다 보며 이해\n해보겠습니다.</p>\n<h3 id=\"cpu-utilization--filmstrip\" style=\"position:relative;\"><a href=\"#cpu-utilization--filmstrip\" aria-label=\"cpu utilization  filmstrip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU Utilization &#x26; FilmStrip</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZklEQVR42hXFCwrCMBQEwB7HlLzdbH6mJSIVEalg7n8bIwzMElC9k5nc6r3HJCVDwFyRlELO8ZrUaJmY0uroLgDysmN0fJMOYzZWqhkS2Wp8lvgoOnocN43NXn987+HcePZw3svnB31WGFymD9SOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Timeline\"\n        title=\"\"\n        src=\"/static/1681089562233.096107585245/00d43/performance-timeline.png\"\n        srcset=\"/static/1681089562233.096107585245/63868/performance-timeline.png 250w,\n/static/1681089562233.096107585245/0b533/performance-timeline.png 500w,\n/static/1681089562233.096107585245/00d43/performance-timeline.png 1000w,\n/static/1681089562233.096107585245/aa440/performance-timeline.png 1500w,\n/static/1681089562233.096107585245/ab40b/performance-timeline.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Timeline</p>\n<p>상단의 CPU 타임라인에선 Critical Rendering Path(Javascript, style, layout, paint, composite)과 ajax\n호출 등을 보여줍니다. 주로 JavaScript(노란색) 및 레이아웃 작업(보라색)과 같은 다양한 유형의 작업으로\n인해 CPU가 얼마나 열일하는지 봅니다. 사진에서 보이듯 CPU 활동은 처음 활동을 시작한 후 상당히 조용해\n집니다.</p>\n<p>중앙의 FilmStrip은 왼쪽부터 시간순으로 나열되며 프레임 스크린샷을 통해 각 순간의 사이트가 어떤 모습\n인지 볼 수 있습니다. 이러한 애플리케이션의 시각적 상태는 “screenshot” 옵션을 체크했을 때만 존재합니\n다. FilmStrip 위로 마우스를 가져가면 해당 시점의 스크린샷을 크게 볼 수 있습니다.</p>\n<p>하단 부분은 애플리케이션의 메모리 추세를 보여줍니다. 위 예시 사진에서 메모리가 증가하고 잠시 후 감소\n하는 것을 볼 수 있습니다. 일반적으로 가비지 컬렉션 프로세스가 발생할 때까진 메모리가 증가합니다.</p>\n<h3 id=\"user-timing-metrix\" style=\"position:relative;\"><a href=\"#user-timing-metrix\" aria-label=\"user timing metrix permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>User Timing metrix</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 813px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.200000000000003%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPElEQVR42gExAc7+ACQlKCUmKiQkKDU4QmRoc19jbGFlb2FaRnpzXzw8OlBXU2ZsZmpuc2JpZ2NoY1hdXzQ2NigoMCIhKBEQFgBGSEpqbmxnbGeVn5bF0crI1M3N2dPGx6HR07Cws63N0czQ1c/KzMrR087L1cPBzraYoo1+iHh/iXh6hHMAPkFCVlpYYmZje4N6a3Noa3NoanFmbHVyZW5nd3dwcm50Z2RqaWhsdnl+lJGokZKnjJCanZ6ym5uwnp6zACoqLjo7Pzk6PRkZHhQTGBUVGhQUGxIREx8oPCU6Wyg+NCxBMSsqIzMXGTUxUT83XS0oQzoyV0dFZEQ/YQAiIyYuLzIwMjQiIyYkJSgjJCcjJSghISEtOU46U3g5U0U5Uz48OzNHJygbIB4cHxwfISAbHhsrMykkKyMp/WsbrDCqYwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"로딩에 관한 지표들\"\n        title=\"\"\n        src=\"/static/1681089562233.2878107585246/baaa6/performance-timing.png\"\n        srcset=\"/static/1681089562233.2878107585246/63868/performance-timing.png 250w,\n/static/1681089562233.2878107585246/0b533/performance-timing.png 500w,\n/static/1681089562233.2878107585246/baaa6/performance-timing.png 813w\"\n        sizes=\"(max-width: 813px) 100vw, 813px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>로딩에 관한 지표들</p>\n<p>타이밍 레인에는 FP, DCL, L 등 이벤트도 표시됩니다.</p>\n<p>자세히 설명하자면 이 글이 너무 길어지고 내용이 산으로 갈 것 같아 각 지표들의 의미만 살펴보고 넘어가\n겠습니다.<br>\n해당 부분에 대한 건 따로 다른 글에서 자세히 설명하겠습니다.</p>\n<ul>\n<li>FP (First Paint): 페이지 네비게이션 후, 첫 픽셀을 그린 순간</li>\n<li>FCP (First Contentful Paint): 첫 엘리먼트를 그린 순간</li>\n<li>LCP (Largest Contentful Paint): 가장 큰 엘리먼트를 그린 순간</li>\n<li>DCL (Dom Content Loaded): DOM Tree를 구성하고, 스크립트(+ defer 스크립트)를 실행 완료했을 때 →\ndefer 스크립트가 없다면 FP 전에 DCL이 올 수 있습니다.</li>\n<li>L (Load): 다큐먼트의 리소스들을 모두 로드 완료했을 때</li>\n</ul>\n<h3 id=\"cpu-flame-chart\" style=\"position:relative;\"><a href=\"#cpu-flame-chart\" aria-label=\"cpu flame chart permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU flame chart</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABV0lEQVR42jWLXU+CYBiG+QEtax2UW5oftOUXLgp94UVEeQEBCdQsyjUzE3VIrq2f4DxSbKuTTqwO+p+9ubVdu5/rvreHmM9X728/wfJjFXyull/BAidmHSzWG/kD+39dvwbfs1ngv4wmzy4BxKaArkXlBmm3DHcBBJsG9QK0irxFAwNTgCYUba682XmLgRbN6mSGIzOQSPP3XK0Ptb7U8EvGpGL7ZcuTbA81nqDuQ2OMGr5xNZXsKatN2JoHda9Yc9N8Nw3viBjVKojdLHAEdcRJLi+PeMXl5EFJGWMpqQOhNkTmBFe26rLSGFTdaK65dYRCMUREsgZ5Wo9SZh42mXKbrXYAegDyY6HiFCsOp/RK+lDUe6ByyQhtKFkUZ4ZTeiiu7CRkYjeBj7qfMg9zVoQyybNWkm4k6VY0bx2fO2m2kyo6eDw40cIpNZKr75FqKCZv4+c4+gUZGG3RCsnSFwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Flame chart\"\n        title=\"\"\n        src=\"/static/1681089562232.488107585243/00d43/performance-flamechart.png\"\n        srcset=\"/static/1681089562232.488107585243/63868/performance-flamechart.png 250w,\n/static/1681089562232.488107585243/0b533/performance-flamechart.png 500w,\n/static/1681089562232.488107585243/00d43/performance-flamechart.png 1000w,\n/static/1681089562232.488107585243/aa440/performance-flamechart.png 1500w,\n/static/1681089562232.488107585243/ab40b/performance-flamechart.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Flame chart</p>\n<p>가장 핵심 부분이라고 생각합니다. 플레임 차트는 기록하는 동안 웹 페이지의 JS 실행을 시각적으로 표현한\n것입니다. <strong>성능 병목 현상이 발생할 수 있는 위치</strong>를 이해하는 데 중요한 부분입니다. 수평 레이어로 구\n성되며 각 레이어는 단일 JS 함수를 나타냅니다. 각 함수 블록의 너비는 함수의 실행 기간을 나타내고 색상\n은 작업 유형(스크립팅, 렌더링, 페인팅…)을 나타냅니다. 그러므로 이 섹션에서 <strong>어떤 함수가 호출되었고\n각 함수가 얼마나 오래 걸렸는지 정확하게 분석</strong>할 수 있습니다.</p>\n<p>위 사진에는 안 나왔지만 Register, GPU, Compositor 등 성능 문제 디버깅에 유용한 섹션들이 있습니다. 몇\n가지 설명드리겠습니다.</p>\n<p><strong>Network 섹션</strong>은 다운로드 요청과 완료 시간을 볼 수 있습니다. 그리고 <strong>Main 섹션</strong>은 렌더러의 메인\n스레드로, 알록달록한 색으로 된 지표들을 통해 프레임의 전체 시간과 프레임을 연장하는 데 가장 큰 영향\n을 미친 기능을 확인할 수 있습니다. 노란색은 자바스크립트가 실행 중임을 나타냅니다.</p>\n<p>이해를 쉽게 돕기 위해 UI 업데이트 또는 CPU 작업과 연관시키는 데 특히 유용한 Network 섹션을 통해\n<a href=\"https://stripe.com/\">Stripe</a> 홈페이지를 디버깅하는 예시를 들어 보겠습니다.</p>\n<p>아래 사진은 폰트 로드가 완료되기 직전의 Stripe 홈페이지입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC50lEQVR42gHcAiP9ADAwMyAgISYlJzc3OCYpKSUmKCAiIyEiJSgpKyooIigpKyIjJB4gISkrLRsdHicpLCYoKh4fISosLyEjJAA2PUhDS1o8RVNQWGdkaXpXWWdgYnFfYHJZXGtmZWxcXW9aXWxZW2pXWmpYWmpISFNJSVRKSVRISFJKSVQAP0FHP0JJQEJKODtCoqSu19bhz87bzMzYxsXQzsvNyMfTyMfTyMjSx8bSyMfSwb/Iw8HLw8HLxMLMwsDLACYnLCwuMissMCUnKzU6PzU4QDI3QDxASzI1OTw4NTY0ODEwNDMyNjQ1OS8yODI2PDQ4PTEyNzU2OTY4OgAjKDQrMT80OUkrL0AzN0c1OUknKzsxNkY0NUSdQV22UXykXY+fcqqVeMGPdsWdf7OzipXHkWzRpGLUs2UAlqzCmK7JhaGza46UZ4mRaIuRcJWYdZyfcI+SsHGdv43DsJ3Zp5fmn4XlqX/TuYu9zpie6quA9Lpz9sV2AKCfpKCepHR3dDxFOF1kW2BmXVBZTDE7KTU+L5GfyKW8+J+k8Ix+34Zs1ZB0zZZ/u7Khv8W2wLyvsd7W1gArLDAsLTIhIiZqZ3a+uNDEvtWWkKYVFRshIimMiMmojuyket6NbM1zZ8Jxd9F1ktqJt+eYyO6o0fXK2esAIiInIiMoFRYYaGZz0s3i1M7kmZanFxobJiYqnleVvWCqtmirlGmagHOggIy+lbnXl7bOqb3P2N7k7u/xAFlfWlxjXVtiW2RnaWlkdG5reFxbZSEjJickKbZZduCLqOCyyNrI1NnX3Nra3t3b3dTQ09zZ2uPh5Pj4+gBnb2Ztdmxze3JWZFcsQi8fKCIXFxoiJCYyNzXZ1tX//////v7v8fLo6+z6+/v4+vn8/f3+///+/f7v8PIAFBQZEhIXERAWHSEhLjsyJywrIyMnHyEjKi4u2dra////////19nd0NTZ/P38/f39/v7+/f39////5OXoVxdfwiCa7CoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stripe example\"\n        title=\"\"\n        src=\"/static/1681089562235.117107585248/00d43/stripe-not-loaded.png\"\n        srcset=\"/static/1681089562235.117107585248/63868/stripe-not-loaded.png 250w,\n/static/1681089562235.117107585248/0b533/stripe-not-loaded.png 500w,\n/static/1681089562235.117107585248/00d43/stripe-not-loaded.png 1000w,\n/static/1681089562235.117107585248/84bf8/stripe-not-loaded.png 1162w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>stripe example</p>\n<p>여기서 UI에 변경 사항이 있으면 네트워크 요청 섹션을 통해 UI 업데이트를 <strong>지연</strong>시키고 있던 <strong>네트워\n크 요청</strong>을 이렇게 식별할 수 있습니다.</p>\n<p>폰트 파일을 로드한 직후의 아래 사진에서 UI가 다운로드한 폰트를 사용해 재렌더링되었음을 확인할 수 있\n습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.199999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9ACUoLy80PDA1Py0yPElPWDY9RiMpMycsNycsNyctNiEmMTA1OisvMiMpNCUrNRwhKR4iKRkcJBwgJxwgKAA/Q0s/Q0xHTVlITllITVmen7C7uMe4tsW4tcWysb+3s8e4tL+5tb+wr8G1s8Svq7mno7GopLCqprKoo7AALzA0LzA0LzA0LjAzKy4wZ2txfoCJe3+JfYGLcnV4Zm9wbXNvcHRuaGtrbG5qbG5sbXBxaGxxaW52aWx1ADM0OCAhJiYoLi4vNiAgKCMkLB0dJhQTHSAiLCccJXIwQ3A4U2g/XWZOcltOflpPemhYb3RaVX1hQ4RxSABRYnxgc4xme5hkfJVeeY1feo9hfJFkf5JjhZdxc4jQY5XHf7e6kNKxlOirieu5jdbOmrjsqYr9vXL/zXAASU1Us7i9vcDHlZ+cTF9LVGdUV2pXV2tWS2NIWmddp6japLbsnaLsj3/dk3PUnnzArY6yyqmtz62c2b6nACgoLDo5QDs6QSgnLFlVY6qjubOrwW9pewsJDDEzQaGp8qKR7Jx74nhhyHNpzXN40ISb1qLG7KDG6bzR7AAdHSEhIiUhIiUWFxlta3jPyuHY0umBfo0QFBI6M0Cyarm0Z7WrbLN9YZhwbqt5l9CFs9mRs9O80uPp8PcAQUVDRkpISU1LRUpHYWFnfnqJiIWTYV9pGB0fPiw2z16G1YGk06fAv7O+ubfDxMjNvLzCwr/E0M3R+vr6AHN8cXR9cnqEeIKLgGBtYC5BMiIpJR8fIhwgIUtLSvnr7f////z8/eLm6Ons7PDw8e/w8vb3+P////T19wAYGBwXFxwVFRoUExkfJCQvPjQmKyoiIiYaHB5ITEz+/v7////6+vrIzNHo6uz9/f39/f3+/v7////08/ZpGj2cguMcPAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stripe example2\"\n        title=\"\"\n        src=\"/static/1682400641215.82112973136/00d43/stripe-loaded.png\"\n        srcset=\"/static/1682400641215.82112973136/63868/stripe-loaded.png 250w,\n/static/1682400641215.82112973136/0b533/stripe-loaded.png 500w,\n/static/1682400641215.82112973136/00d43/stripe-loaded.png 1000w,\n/static/1682400641215.82112973136/a13c9/stripe-loaded.png 1178w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>stripe example2</p>\n<h3 id=\"memory\" style=\"position:relative;\"><a href=\"#memory\" aria-label=\"memory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Memory</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAr0lEQVR42k3N22rDMAwG4DzHklqWrJOdntJuvWk3Ci0OLfT9X2fucjP4+BHoR+qm423cz2U/76b7vB1rWdevcnltPx+Ha909v9f1Z3qcT3VTr2XOukliopnFW3YBEgBBbNIH2ECKbsPKw8qHkHvwPmgg6yP0EFonkv+xpsNkmLQhViJmY/UcUSMxJqd2C5NIptZGB8pABiiLTtv/f6wIsyAteEmRIjq+D/N7y6LL8Av+2yUIPimhrwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Memory Image\"\n        title=\"\"\n        src=\"/static/1681089562232.7012107585244/00d43/performance-memory.png\"\n        srcset=\"/static/1681089562232.7012107585244/63868/performance-memory.png 250w,\n/static/1681089562232.7012107585244/0b533/performance-memory.png 500w,\n/static/1681089562232.7012107585244/00d43/performance-memory.png 1000w,\n/static/1681089562232.7012107585244/aa440/performance-memory.png 1500w,\n/static/1681089562232.7012107585244/ab40b/performance-memory.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>DOM 노드, 리스너 및 기타 메트릭이 이 차트에 요약되어 있습니다.</p>\n<p>DOM 노드, 리스너 및 기타 메트릭이 이 차트에 요약되어 있습니다. 색상별로 노드, 리스너 등을 구분할 수\n있습니다. 이 부분에서 앱의 추세를 볼 수 있으며 주로 <strong>메모리 누수를 추적</strong>할 때 유용하게 사용할 수있\n습니다.</p>\n<h3 id=\"cpu-activity-breakdown\" style=\"position:relative;\"><a href=\"#cpu-activity-breakdown\" aria-label=\"cpu activity breakdown permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU activity breakdown</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 632px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACpElEQVR42l1SS08TURSevaAkiJROZ9pO23ncO3M7nXamL/rEVqApihADGhMTJRgfiRujBuPCHQsQNHEhkfgHXGBcSwiuYWeiSyWphvhYIDvEbzoEDcnXyXd7znfOvd85HM/7KaWMGTzPBwLiQG2oWD6dL1Sy+SKhrFgeaKMKnusvl6u1XL6UyRVUTdeIwfEBkecFQBCCISlqxC3kIUD0uKxSrc3xPeBt0HYI4JJ2Bq1QNW6mVGLY6bzBEsFQBAiFox45wr0jwOEXiSrRmCpFYmHpAF7sEMgWg1JYcjkI4Ok5LwxBQAgLIjLkcDh2RGkwS9dZY+JOujhsGCyTK+qGiRIcZHwg1NPrJ9TQCPHzfYIYOmwOJS5F2m9ujgxnsjlC46ZlU91ECIYFE5a98ubtzx/fvmzMzz6cVVVHEEVPj/KwwEo5smZOXy7UqrbO7JSTgd69Nh68sbm5vf19Zmbm7q3x10sfnzxew/NQGHp8YbuZsBWNNOrT2cwgSpmWk7AcWSHcjZu39/b+1M8MdR7vPtHty2cbK8u/moNXff4+KSJDjFFhfqpG6/Vx2ynqLIGbsnjSFc/NzW9tbUVlbbg5WqnWqMGeL65eu/LolK9XiigQyzJBH0LMwYlyuuQwlrLTOZSANdzU1PX9/f2Rs6PHOro6OrvOj1349PlDc2zE5wt4nWOyBrdjCpm8eKlYqmiExRMpWaHumxFeX3+/s/N7YeHp4uKz3d3d1XdrweDB/BBVVOpmq3Ri0hXrDPZlUct1OyCEMKTl5Vet1tdWq/Vi6aVKdPzpKdHcSqZhWEwm9+4/aDbPUcP0dsbtjCRBDJ/s8SEPAMHxcM4giaSDzYXnugGYbZ/pvw1DBmTe3mFy/28IjqVKrb9QsZ2cnxfhMI7MTHqd/wKdScdWyb3W0wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Aggregated task breakdown\"\n        title=\"\"\n        src=\"/static/1681089562232.2976107585242/084e2/performance-cpu.png\"\n        srcset=\"/static/1681089562232.2976107585242/63868/performance-cpu.png 250w,\n/static/1681089562232.2976107585242/0b533/performance-cpu.png 500w,\n/static/1681089562232.2976107585242/084e2/performance-cpu.png 632w\"\n        sizes=\"(max-width: 632px) 100vw, 632px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Aggregated task breakdown</p>\n<p><code class=\"language-text\">Summary</code> 탭에서는 특정 CPU 작업을 선택하지 않은 경우, CPU 작업 내역이 다음 4가지 범주로 분류되어 표\n시됩니다.</p>\n<ul>\n<li><strong>Loading</strong>: 네트워크 요청 및 HTML 파싱</li>\n<li><strong>Scripting</strong>: JS 코드 파싱, 컴파일링 및 실행, 가비지 컬렉션(GC) 포함</li>\n<li><strong>Rendering</strong>: 스타일 및 레이아웃 계산</li>\n<li><strong>Painting</strong>: 이미지 페인팅, 합성, 리사이징 및 디코딩</li>\n</ul>\n<p>다른 쓰레드를 클릭하거나 위쪽 및 아래쪽 화살표 방향키를 사용해서 다른 쓰레드를 선택할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 818px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 116.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAIAAACEf/j0AAAACXBIWXMAAAsTAAALEwEAmpwYAAADt0lEQVR42o1Ta28UZRSeL0YapCC1te3u3Gdn57Lzzv3S7rK7tixLAQmg1a4IpjWpEiMa27SNsZpAjNXE2wejpAYN2hSKdk1Y2q2t0K0aSpNaSaOCEsMHid/9BZ7prMu6hsTkyZMz75xnznnecwZb+vzF5anB5amBta+Gfp0b/mXG59ulkYunBlv43uHjz7/y0gu00qs4/YrzbAXIPQaMnftoYf6LYmFidvbs3Mrc6rXLP60uXLuxfPPU+5NYgxeSO0NSx6Zwui6c3FSFOjwFjJ2fWDl3Zuni9I/5sysz0+vfL/xRmru1svjn2Fj+3tbUFiq7mchsY7Jb6V3VCE6wN8emLhXWS7PXV5duL1+6tTjz85WFm7+v/fXu29P3tCTvZyA1A3n1VKYawQn2+NETF6aunBkvFs5fzU+WZvNrff2vDw6Nj756GioHSXcVH+oZulxYg8rzF9YP9ozoO3pbpX3N4j4j+eRmvHMr5FGZbXcTG8mnPhn/ZvKzq91HTpDoEeyB+HZuTz29uy7cAW63kLsCvm+DK6inssBYE6E100ZDOIZHXM3t4mJpRk7R0o4I6uCUNCUmggBOiGh7DTCSwCMci+Mhnufb2xOO4xqmqWm657XZtqsoyIXAP7REUZIkuRrY3oyNNFPTbVWzRBnhBE3RHICkfKaZCEmxJF2Oa4CZlqnqFlINSUa66QAH4v8DTI7pUFOKqYKkyDGVj0pQiqKhms8UlKV8LqNGrCAQmyCDAD4BRwwXZdh/wAk+yo8CtFpTWdUMW5QUpPrODcsFWO3ZtvQBO97lJh/2kvvtxB4vfcBL7Y9EFZJi7oihz6gggxjAC1JwE1CH5crgIkEgsH5HfDUwy2lzvbisGFwUQf+QSm743ACDE0xLiCFJCGiCZAD/arullaBY6fATuZ5DKcgIE0zFGMfLho52d+pREcUUDQzCLKr1mKWLi4UP5r8u/lAcKU4c56MCQbI0A1PlopIab7OOdCdkxTRMBwap6jbYpCviT997evrjY61hFjx8lx84Ody9vRFnWLDNy8jwPO/g3p1Is8CdpluwEXCpldaw0pcD/UezIVJqCgknhx+d/PCZhiYCxPCOF0TDSGQeOizFEGjkmAa+Kivoi994+TFo2LXVnWnnt29fe66vC8SsL2Z5QY4nkrlcLoZ0mB/L8sGS3hHDw+l3+m6URq+XRt8azYVwuDBYbBYGAwJZ0WCQjhuH/SH/u2Fw143NpKErSJEbHyTLLyjOLywpkYgAf4gooWCENeK/ASmMSPlwemSIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"스크린샷 2023-04-08 오전 3.47.37.png\"\n        title=\"\"\n        src=\"/static/1681089562228.579107585238/64d87/any-function-call.png\"\n        srcset=\"/static/1681089562228.579107585238/63868/any-function-call.png 250w,\n/static/1681089562228.579107585238/0b533/any-function-call.png 500w,\n/static/1681089562228.579107585238/64d87/any-function-call.png 818w\"\n        sizes=\"(max-width: 818px) 100vw, 818px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 사진은 flame chart에서 특정 Function Call을 선택했습니다. 하단의 Aggregated Time은 해당 Function\nCall의 CPU 분석을 보여줍니다. 또한 링크(Graient~~~ )를 클릭하면 개발 도구의 소스 패널에 있는 코드 줄\n로 이동합니다.</p>\n<hr>\n<p><code class=\"language-text\">Bottom-Up</code> 탭에서는 CPU 활동에 대한 보다 세분화된 분석을 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABs0lEQVR42m2S2XLjIBRE9Se2JCQEiEXsAi2RvKacxElmKk8z//8bQ/I0sUOdJ+p23e6GzPmxhqQogDK91J53lnKFMCUt/xGE20SDCGUii72dBuudmqfYezNEO0+DkBYTVtWohvgbDenMrNyi/Sr0kEHYnFY99wQT6p1ZRrFbQlGiTV5ucvCdclvWbnoJ66+4+5D+mJUAKaWtxA1mxqg58MMaK0jyNHpHXgCup86t0u/bLmSoFcrGLp0UWIUhmrfrmclQAJTfU2FuVtWfVDhTOWcNcdKdUnohnXVxGtz766Ptl7LCedncsC1gv7xPpz/z+a+dnrMKMioiQoRQ3nLpBDuugQlTgnqzLW5spxsdzn6+9g+vyXxWQ8Q71aCWUNEyZQU9rCG5AFWz2SYBuEH6gx0udnzq7JrB1L5ypGWUd5Sb3snr00KFze9kn4WVdVKmthOd3X2K5ZeYcRWDn6N5vlzCuJYA3m/Oi9rPL3H/Me5/u3hItjETipDWaD5GPQZ52D3YfmRcFmX9FfV/cQUqnF4X1LiCOEufhnc67cctx1RqJY77SJiCDU6j984hFg1RCQDpPzW5gnmQy6QYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"bottom-up.png\"\n        title=\"\"\n        src=\"/static/1682400641213.6167112973135/00d43/bottom-up.png\"\n        srcset=\"/static/1682400641213.6167112973135/63868/bottom-up.png 250w,\n/static/1682400641213.6167112973135/0b533/bottom-up.png 500w,\n/static/1682400641213.6167112973135/00d43/bottom-up.png 1000w,\n/static/1682400641213.6167112973135/aa440/bottom-up.png 1500w,\n/static/1682400641213.6167112973135/d3deb/bottom-up.png 1758w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 사진처럼 하위 수준의 함수를 확장해서 어떤 코드가 함수를 호출하는지 확인할 수 있습니다. 이렇게 하\n면 제어할 수 있는 코드를 찾는 데 도움됩니다.</p>\n<hr>\n<p><code class=\"language-text\">Call Tree</code> 탭은 기록하는 동안 실행된 JS 함수의 계층적 표현입니다. 호출 트리는 가장 시간이 많이 걸리\n는 기능을 식별하는 데 도움이 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.400000000000006%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABN0lEQVR42mWQ607CQBCF+xyCofS691v3UnZbbUsFQUzw/V/GBRJFSc6fmck3c+Yk1gXKpFCGMFmUtVSWEAEhgYhiwh+FML2JMpEY57lohJDj2LfOdKENXcelEVJHHkByr9ih3DBhmXCU6yTWSreUkO2rPB+d1WQ/h9CPlKt0XdxrleZ5AYUdpZ1U+4b5JgGIisYWFbZafB0MBBVjaJ4CwCLLy39wVgDTHd3L52Y8xy1JNCMbV9UIIOY3hhKwWGa9l13nV+nD5RLd4HY4CzMkELNGt1WNMZVKOwDg4jlzhp0+ZkRUBH75eDmvm3ZnwsH2J9b0SQwwZlZF90x57yGET8v0fWt3+722oazgH35dMtVff54xd5efZWOrCiEig3cI1QA026nz3cCFjtMf+BoY4Ga4ZOYmRM03hq5XJb1W2d0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"호출 트리\"\n        title=\"\"\n        src=\"/static/1681089562231.061107585240/00d43/call-tree.png\"\n        srcset=\"/static/1681089562231.061107585240/63868/call-tree.png 250w,\n/static/1681089562231.061107585240/0b533/call-tree.png 500w,\n/static/1681089562231.061107585240/00d43/call-tree.png 1000w,\n/static/1681089562231.061107585240/aa440/call-tree.png 1500w,\n/static/1681089562231.061107585240/c830c/call-tree.png 1754w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>호출 트리</p>\n<p>위 사진에서 보이듯이 하향식 구조로 구성되며 시간이 가장 많이 걸리는 기능이 맨 위에 표시됩니다. 각 기\n능은 총 시간, 자체 시간 및 호출 횟수와 함께 나열됩니다.</p>\n<p>플레임 차트와 호출 트리 모두 JS 함수 실행에 대한 통찰을 제공하지만 서로 다른 방식으로 정보를 제공하\n고 다른 용도로 사용됩니다. 각 차트의 설명은 위에서 했으니, 둘 사이의 차이점과 각각의 장점을 살펴보겠\n습니다.</p>\n<p><code class=\"language-text\">플레임 차트</code>의 장점</p>\n<ul>\n<li>성능 문제를 일으킬 수 있는 장기 실행 함수 또는 코드 블록을 <strong>빠르게 식별</strong>할 수 있습니다.</li>\n<li>서로 다른 기능 간의 관계와 실행 순서를 보여줍니다.</li>\n</ul>\n<p><code class=\"language-text\">호출 트리</code>의 장점</p>\n<ul>\n<li>실행 시간 측면에서 가장 비용이 많이 드는 기능을 식별하는 데 도움이 되므로 <strong>최적화 작업의 우선 순\n위</strong>를 쉽게 지정할 수 있습니다.</li>\n<li>함수별 호출 횟수를 보여주기 때문에 필요 이상으로 <strong>자주 호출</strong>될 수 있는 함수를 정확히 찾아낼 수있\n습니다.</li>\n<li>함수 실행에 대한 집계 보기를 제공하여 전체 성능 비용에 대해 보다 명확한 관점을 제공합니다.</li>\n</ul>\n<p>따라서 플레임 차트는 JS 실행에 대해 시간순의 시각적 개요를 제공하는 데 탁월한 반면, 호출 트리는 반복\n되는 코드 호출을 집계하므로 평균적으로 어디서 시간이 소요되는지 쉽게 확인할 수 있습니다. 이렇듯 모두\n고유한 장점이 있으며 함께 사용하면 성능 병목 현상을 보다 효과적으로 식별하고 해결하는 데 도움이 될수\n있겠죠.</p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>이 외에도 웹 바이탈과 프레임 등 다양한 항목도 표시할 수 있는 좋은 기능들을 제공합니다.</p>\n<p>이제 Performance 탭에서 성능 결과 보고서를 보고 이해할 수 있을 겁니다. 당연하겠지만 보다 편안하게 사\n용하려면 연습밖에 없습니다. 본인이 만든 웹 페이지를 프로파일링하고 결과를 분석해보세요. 그러다보면웹\n애플리케이션의 성능 병목 현상을 식별하고 해결할 수 있을 겁니다.</p>\n<p>마지막으로 런타임 성능을 향상시키는 방법에는 여러 가지가 있습니다. 몇 가지 일반적인 최적화 전략은 다\n음과 같습니다.</p>\n<ul>\n<li>JavaScript의 실행을 최적화 (rAF 메소드를 사용한다던가, 오래 실행되는 JS를 메인 스레드에서 웹 워커\n로 이동한다던가 말이죠)</li>\n<li>캐싱, 압축 및 CDN을 활용하여 네트워크 요청을 최적화</li>\n<li>스타일 계산의 범위와 복잡성 감소</li>\n</ul>\n<p>프론트엔드 개발자라면 꼭 이러한 방법들을 숙지하시면 좋을 것 같습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li><a href=\"https://tv.naver.com/v/23652467\">https://tv.naver.com/v/23652467</a></li>\n<li><a href=\"https://www.debugbear.com/blog/devtools-performance\">https://www.debugbear.com/blog/devtools-performance</a></li>\n<li><a href=\"https://yonatankra.com/how-to-profile-javascript-performance-in-the-browser/\">https://yonatankra.com/how-to-profile-javascript-performance-in-the-browser/</a></li>\n<li><a href=\"https://developer.chrome.com/docs/devtools/performance/\">https://developer.chrome.com/docs/devtools/performance/</a></li>\n</ul>",
      "user-timing-metrix#User Timing metrix": "<p>성능 문제가 발생했을 때 해결하려면 웹 애플리케이션을 프로파일링하고 모니터링하는 방법을 알아야 합니\n다.</p>\n<p>웹 성능을 측정하는 방법들은 Lighthouse, Chrome DevTools Performance Tab, PageSpeed Insights 등 여러\n가지가 있습니다. 이 중, <strong>DevTools의 Performance를 이용</strong>해 세부적으로 웹의 동작을 들여다 보겠습니다\n. 그리고 웹 애플리케이션의 성능을 분석하고 개선하는 방법을 알아보겠습니다.</p>\n<h2 id=\"성능을-기록하는-방법\" style=\"position:relative;\"><a href=\"#%EC%84%B1%EB%8A%A5%EC%9D%84-%EA%B8%B0%EB%A1%9D%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"성능을 기록하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>성능을 기록하는 방법</h2>\n<ul>\n<li>Chrome 브라우저를 엽니다.</li>\n<li>분석하려는 웹 페이지를 로드합니다.</li>\n<li>페이지의 아무 곳에 마우스 오른쪽 버튼을 클릭해서 <code class=\"language-text\">검사</code>를 선택하거나 <code class=\"language-text\">Crtl+Shift+I</code>\n(Windows/Linux) 또는 <code class=\"language-text\">Cmd+Opt+I</code> (Mac)를 눌러 개발자 도구를 엽니다.</li>\n<li>개발자 도구의 <code class=\"language-text\">Performance</code> 탭을 클릭합니다.</li>\n<li>Performance 탭에서 <code class=\"language-text\">기록</code> 버튼(원 아이콘)을 클릭하거나 <code class=\"language-text\">Crtl+E</code> (Windows/Linux) 또는 <code class=\"language-text\">Cmd+E</code> (Mac)\n를 누릅니다.</li>\n<li>분석하려는 작업(성능 문제를 일으킬 것 같은 시나리오)을 수행한 다음 <code class=\"language-text\">중지</code> 버튼을 클릭하여 기록을중\n지합니다.</li>\n<li>기록이 완료되면 Chrome DevTools가 웹 페이지 성능에 대한 자세한 보고서를 표시합니다.</li>\n</ul>\n<h2 id=\"웹-페이지-성능-보고서를-보고-이해하는-방법\" style=\"position:relative;\"><a href=\"#%EC%9B%B9-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%84%B1%EB%8A%A5-%EB%B3%B4%EA%B3%A0%EC%84%9C%EB%A5%BC-%EB%B3%B4%EA%B3%A0-%EC%9D%B4%ED%95%B4%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"웹 페이지 성능 보고서를 보고 이해하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>웹 페이지 성능 보고서를 보고 이해하는 방법</h2>\n<p>이제 아래 사진처럼 성능에 대한 자세한 보고서를 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAADXElEQVR42o2Ua1MbNxSG9xc0bdpJJrTYu6tdaVd709619tpgfLe5B9trY2xTphDAhTQYGztTIF/afkj/cwVMOp3mCzPPaDSvznukI80R5weR70euFzpuYJg2Q8WG5xDXpzSkQcBExyIuCyC2R4jHRhaDsWlaPmd7zJ4JozigWc+PHC80iaubjh9mgij2gkg3CTZMk9gmcSzbNW0H6yYTVc3gPCsmWkQMX9V0w7BYlOf5luXYxHcd3yFe4NJMkA+c2LWoZ1HHDC3d07Hj2hEX6nVXrehqBmILqgSqtoQMCC0Lrxg4Z6gZV616qG6ALEErFszb6pqLS75Wjt0a19jcOhmPp4u73ybz6fz+iZvFp8n8dra4v765nX28v57/fjVbTOe3V9OPs8Xd5WRyfvXu8HjANdZb7eTk6OfF6PB6NJx2k8te9327ddFL3ifJRad9kbQvmNLf/9B5nPS6Hza3hmEuT+M8V9z6RYu7QWk/boxyzcOgPMzWh2G5n2uMouqArPai6sFqc1jYPLJX+15x4JcOgtJAj/tm5i0H3b0ftV1aPCLZXlw9jSvnudo4Wz3O187ytXFcOc1XT9eavxabl1HxLCycZyvjn/TdF0L9tVzilvXGEm7gcCdtbbgrnUwxiSsjWjqOykd0rZcpD3L1d4X1k9V6jxaSuNQKCm9fK/VvhMr3YoF7CTe+kxov5fVXeFswt0WzqdMWonuQ7gnONon7JO6amYTXt3ltnTebr1DtW7HyQqz9AAqcm020aKQGQyfb3wvCHSPYoX5hn0asiFbY38ju1mm7nN+xB+vmUEFURAQgmyErNgcEEQgAiDJDFBEASFElCUIAVACUB11SZagKgvgFFg4FUWZwKUFNCUpaQGlRSfFQlCQZYyamBSkNNB5gNgGSwgvyA6L6CHqCk6EsQbYsAra3JMoKAEBOpwHPPyAIEhsl6cnDUkBeAP/CCUCECGmGiTUd6wbWDIQwO+d/YeuKghVF/QJ+gmMJltMi1ghSdAbrR4i0/5llqEiy+jUcjeKD/gGQ0HJK0Fgr2rYMcZoHz4H7/Pnvs7Pz2c3izVKKdW+cL5iWy7NSnwH3x59/3d59mlxP3ywt00yuWK5IsvJ4H88wsz+l0+mKD08HNZ2wgiUJsSM9x/wP0Z//iaRvinMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Performance 기록 결과 화면\"\n        title=\"\"\n        src=\"/static/1681089562232.0251107585241/00d43/my-blog-performance.png\"\n        srcset=\"/static/1681089562232.0251107585241/63868/my-blog-performance.png 250w,\n/static/1681089562232.0251107585241/0b533/my-blog-performance.png 500w,\n/static/1681089562232.0251107585241/00d43/my-blog-performance.png 1000w,\n/static/1681089562232.0251107585241/aa440/my-blog-performance.png 1500w,\n/static/1681089562232.0251107585241/56e36/my-blog-performance.png 1750w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Performance 기록 결과 화면</p>\n<p>엄청난 양의 데이터로 인해 뭐부터 봐야할지 감이 안 잡힐 수도 있습니다. 천천히 하나씩 들여다 보며 이해\n해보겠습니다.</p>\n<h3 id=\"cpu-utilization--filmstrip\" style=\"position:relative;\"><a href=\"#cpu-utilization--filmstrip\" aria-label=\"cpu utilization  filmstrip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU Utilization &#x26; FilmStrip</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZklEQVR42hXFCwrCMBQEwB7HlLzdbH6mJSIVEalg7n8bIwzMElC9k5nc6r3HJCVDwFyRlELO8ZrUaJmY0uroLgDysmN0fJMOYzZWqhkS2Wp8lvgoOnocN43NXn987+HcePZw3svnB31WGFymD9SOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Timeline\"\n        title=\"\"\n        src=\"/static/1681089562233.096107585245/00d43/performance-timeline.png\"\n        srcset=\"/static/1681089562233.096107585245/63868/performance-timeline.png 250w,\n/static/1681089562233.096107585245/0b533/performance-timeline.png 500w,\n/static/1681089562233.096107585245/00d43/performance-timeline.png 1000w,\n/static/1681089562233.096107585245/aa440/performance-timeline.png 1500w,\n/static/1681089562233.096107585245/ab40b/performance-timeline.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Timeline</p>\n<p>상단의 CPU 타임라인에선 Critical Rendering Path(Javascript, style, layout, paint, composite)과 ajax\n호출 등을 보여줍니다. 주로 JavaScript(노란색) 및 레이아웃 작업(보라색)과 같은 다양한 유형의 작업으로\n인해 CPU가 얼마나 열일하는지 봅니다. 사진에서 보이듯 CPU 활동은 처음 활동을 시작한 후 상당히 조용해\n집니다.</p>\n<p>중앙의 FilmStrip은 왼쪽부터 시간순으로 나열되며 프레임 스크린샷을 통해 각 순간의 사이트가 어떤 모습\n인지 볼 수 있습니다. 이러한 애플리케이션의 시각적 상태는 “screenshot” 옵션을 체크했을 때만 존재합니\n다. FilmStrip 위로 마우스를 가져가면 해당 시점의 스크린샷을 크게 볼 수 있습니다.</p>\n<p>하단 부분은 애플리케이션의 메모리 추세를 보여줍니다. 위 예시 사진에서 메모리가 증가하고 잠시 후 감소\n하는 것을 볼 수 있습니다. 일반적으로 가비지 컬렉션 프로세스가 발생할 때까진 메모리가 증가합니다.</p>\n<h3 id=\"user-timing-metrix\" style=\"position:relative;\"><a href=\"#user-timing-metrix\" aria-label=\"user timing metrix permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>User Timing metrix</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 813px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.200000000000003%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPElEQVR42gExAc7+ACQlKCUmKiQkKDU4QmRoc19jbGFlb2FaRnpzXzw8OlBXU2ZsZmpuc2JpZ2NoY1hdXzQ2NigoMCIhKBEQFgBGSEpqbmxnbGeVn5bF0crI1M3N2dPGx6HR07Cws63N0czQ1c/KzMrR087L1cPBzraYoo1+iHh/iXh6hHMAPkFCVlpYYmZje4N6a3Noa3NoanFmbHVyZW5nd3dwcm50Z2RqaWhsdnl+lJGokZKnjJCanZ6ym5uwnp6zACoqLjo7Pzk6PRkZHhQTGBUVGhQUGxIREx8oPCU6Wyg+NCxBMSsqIzMXGTUxUT83XS0oQzoyV0dFZEQ/YQAiIyYuLzIwMjQiIyYkJSgjJCcjJSghISEtOU46U3g5U0U5Uz48OzNHJygbIB4cHxwfISAbHhsrMykkKyMp/WsbrDCqYwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"로딩에 관한 지표들\"\n        title=\"\"\n        src=\"/static/1681089562233.2878107585246/baaa6/performance-timing.png\"\n        srcset=\"/static/1681089562233.2878107585246/63868/performance-timing.png 250w,\n/static/1681089562233.2878107585246/0b533/performance-timing.png 500w,\n/static/1681089562233.2878107585246/baaa6/performance-timing.png 813w\"\n        sizes=\"(max-width: 813px) 100vw, 813px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>로딩에 관한 지표들</p>\n<p>타이밍 레인에는 FP, DCL, L 등 이벤트도 표시됩니다.</p>\n<p>자세히 설명하자면 이 글이 너무 길어지고 내용이 산으로 갈 것 같아 각 지표들의 의미만 살펴보고 넘어가\n겠습니다.<br>\n해당 부분에 대한 건 따로 다른 글에서 자세히 설명하겠습니다.</p>\n<ul>\n<li>FP (First Paint): 페이지 네비게이션 후, 첫 픽셀을 그린 순간</li>\n<li>FCP (First Contentful Paint): 첫 엘리먼트를 그린 순간</li>\n<li>LCP (Largest Contentful Paint): 가장 큰 엘리먼트를 그린 순간</li>\n<li>DCL (Dom Content Loaded): DOM Tree를 구성하고, 스크립트(+ defer 스크립트)를 실행 완료했을 때 →\ndefer 스크립트가 없다면 FP 전에 DCL이 올 수 있습니다.</li>\n<li>L (Load): 다큐먼트의 리소스들을 모두 로드 완료했을 때</li>\n</ul>\n<h3 id=\"cpu-flame-chart\" style=\"position:relative;\"><a href=\"#cpu-flame-chart\" aria-label=\"cpu flame chart permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU flame chart</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABV0lEQVR42jWLXU+CYBiG+QEtax2UW5oftOUXLgp94UVEeQEBCdQsyjUzE3VIrq2f4DxSbKuTTqwO+p+9ubVdu5/rvreHmM9X728/wfJjFXyull/BAidmHSzWG/kD+39dvwbfs1ngv4wmzy4BxKaArkXlBmm3DHcBBJsG9QK0irxFAwNTgCYUba682XmLgRbN6mSGIzOQSPP3XK0Ptb7U8EvGpGL7ZcuTbA81nqDuQ2OMGr5xNZXsKatN2JoHda9Yc9N8Nw3viBjVKojdLHAEdcRJLi+PeMXl5EFJGWMpqQOhNkTmBFe26rLSGFTdaK65dYRCMUREsgZ5Wo9SZh42mXKbrXYAegDyY6HiFCsOp/RK+lDUe6ByyQhtKFkUZ4ZTeiiu7CRkYjeBj7qfMg9zVoQyybNWkm4k6VY0bx2fO2m2kyo6eDw40cIpNZKr75FqKCZv4+c4+gUZGG3RCsnSFwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Flame chart\"\n        title=\"\"\n        src=\"/static/1681089562232.488107585243/00d43/performance-flamechart.png\"\n        srcset=\"/static/1681089562232.488107585243/63868/performance-flamechart.png 250w,\n/static/1681089562232.488107585243/0b533/performance-flamechart.png 500w,\n/static/1681089562232.488107585243/00d43/performance-flamechart.png 1000w,\n/static/1681089562232.488107585243/aa440/performance-flamechart.png 1500w,\n/static/1681089562232.488107585243/ab40b/performance-flamechart.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Flame chart</p>\n<p>가장 핵심 부분이라고 생각합니다. 플레임 차트는 기록하는 동안 웹 페이지의 JS 실행을 시각적으로 표현한\n것입니다. <strong>성능 병목 현상이 발생할 수 있는 위치</strong>를 이해하는 데 중요한 부분입니다. 수평 레이어로 구\n성되며 각 레이어는 단일 JS 함수를 나타냅니다. 각 함수 블록의 너비는 함수의 실행 기간을 나타내고 색상\n은 작업 유형(스크립팅, 렌더링, 페인팅…)을 나타냅니다. 그러므로 이 섹션에서 <strong>어떤 함수가 호출되었고\n각 함수가 얼마나 오래 걸렸는지 정확하게 분석</strong>할 수 있습니다.</p>\n<p>위 사진에는 안 나왔지만 Register, GPU, Compositor 등 성능 문제 디버깅에 유용한 섹션들이 있습니다. 몇\n가지 설명드리겠습니다.</p>\n<p><strong>Network 섹션</strong>은 다운로드 요청과 완료 시간을 볼 수 있습니다. 그리고 <strong>Main 섹션</strong>은 렌더러의 메인\n스레드로, 알록달록한 색으로 된 지표들을 통해 프레임의 전체 시간과 프레임을 연장하는 데 가장 큰 영향\n을 미친 기능을 확인할 수 있습니다. 노란색은 자바스크립트가 실행 중임을 나타냅니다.</p>\n<p>이해를 쉽게 돕기 위해 UI 업데이트 또는 CPU 작업과 연관시키는 데 특히 유용한 Network 섹션을 통해\n<a href=\"https://stripe.com/\">Stripe</a> 홈페이지를 디버깅하는 예시를 들어 보겠습니다.</p>\n<p>아래 사진은 폰트 로드가 완료되기 직전의 Stripe 홈페이지입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC50lEQVR42gHcAiP9ADAwMyAgISYlJzc3OCYpKSUmKCAiIyEiJSgpKyooIigpKyIjJB4gISkrLRsdHicpLCYoKh4fISosLyEjJAA2PUhDS1o8RVNQWGdkaXpXWWdgYnFfYHJZXGtmZWxcXW9aXWxZW2pXWmpYWmpISFNJSVRKSVRISFJKSVQAP0FHP0JJQEJKODtCoqSu19bhz87bzMzYxsXQzsvNyMfTyMfTyMjSx8bSyMfSwb/Iw8HLw8HLxMLMwsDLACYnLCwuMissMCUnKzU6PzU4QDI3QDxASzI1OTw4NTY0ODEwNDMyNjQ1OS8yODI2PDQ4PTEyNzU2OTY4OgAjKDQrMT80OUkrL0AzN0c1OUknKzsxNkY0NUSdQV22UXykXY+fcqqVeMGPdsWdf7OzipXHkWzRpGLUs2UAlqzCmK7JhaGza46UZ4mRaIuRcJWYdZyfcI+SsHGdv43DsJ3Zp5fmn4XlqX/TuYu9zpie6quA9Lpz9sV2AKCfpKCepHR3dDxFOF1kW2BmXVBZTDE7KTU+L5GfyKW8+J+k8Ix+34Zs1ZB0zZZ/u7Khv8W2wLyvsd7W1gArLDAsLTIhIiZqZ3a+uNDEvtWWkKYVFRshIimMiMmojuyket6NbM1zZ8Jxd9F1ktqJt+eYyO6o0fXK2esAIiInIiMoFRYYaGZz0s3i1M7kmZanFxobJiYqnleVvWCqtmirlGmagHOggIy+lbnXl7bOqb3P2N7k7u/xAFlfWlxjXVtiW2RnaWlkdG5reFxbZSEjJickKbZZduCLqOCyyNrI1NnX3Nra3t3b3dTQ09zZ2uPh5Pj4+gBnb2Ztdmxze3JWZFcsQi8fKCIXFxoiJCYyNzXZ1tX//////v7v8fLo6+z6+/v4+vn8/f3+///+/f7v8PIAFBQZEhIXERAWHSEhLjsyJywrIyMnHyEjKi4u2dra////////19nd0NTZ/P38/f39/v7+/f39////5OXoVxdfwiCa7CoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stripe example\"\n        title=\"\"\n        src=\"/static/1681089562235.117107585248/00d43/stripe-not-loaded.png\"\n        srcset=\"/static/1681089562235.117107585248/63868/stripe-not-loaded.png 250w,\n/static/1681089562235.117107585248/0b533/stripe-not-loaded.png 500w,\n/static/1681089562235.117107585248/00d43/stripe-not-loaded.png 1000w,\n/static/1681089562235.117107585248/84bf8/stripe-not-loaded.png 1162w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>stripe example</p>\n<p>여기서 UI에 변경 사항이 있으면 네트워크 요청 섹션을 통해 UI 업데이트를 <strong>지연</strong>시키고 있던 <strong>네트워\n크 요청</strong>을 이렇게 식별할 수 있습니다.</p>\n<p>폰트 파일을 로드한 직후의 아래 사진에서 UI가 다운로드한 폰트를 사용해 재렌더링되었음을 확인할 수 있\n습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.199999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9ACUoLy80PDA1Py0yPElPWDY9RiMpMycsNycsNyctNiEmMTA1OisvMiMpNCUrNRwhKR4iKRkcJBwgJxwgKAA/Q0s/Q0xHTVlITllITVmen7C7uMe4tsW4tcWysb+3s8e4tL+5tb+wr8G1s8Svq7mno7GopLCqprKoo7AALzA0LzA0LzA0LjAzKy4wZ2txfoCJe3+JfYGLcnV4Zm9wbXNvcHRuaGtrbG5qbG5sbXBxaGxxaW52aWx1ADM0OCAhJiYoLi4vNiAgKCMkLB0dJhQTHSAiLCccJXIwQ3A4U2g/XWZOcltOflpPemhYb3RaVX1hQ4RxSABRYnxgc4xme5hkfJVeeY1feo9hfJFkf5JjhZdxc4jQY5XHf7e6kNKxlOirieu5jdbOmrjsqYr9vXL/zXAASU1Us7i9vcDHlZ+cTF9LVGdUV2pXV2tWS2NIWmddp6japLbsnaLsj3/dk3PUnnzArY6yyqmtz62c2b6nACgoLDo5QDs6QSgnLFlVY6qjubOrwW9pewsJDDEzQaGp8qKR7Jx74nhhyHNpzXN40ISb1qLG7KDG6bzR7AAdHSEhIiUhIiUWFxlta3jPyuHY0umBfo0QFBI6M0Cyarm0Z7WrbLN9YZhwbqt5l9CFs9mRs9O80uPp8PcAQUVDRkpISU1LRUpHYWFnfnqJiIWTYV9pGB0fPiw2z16G1YGk06fAv7O+ubfDxMjNvLzCwr/E0M3R+vr6AHN8cXR9cnqEeIKLgGBtYC5BMiIpJR8fIhwgIUtLSvnr7f////z8/eLm6Ons7PDw8e/w8vb3+P////T19wAYGBwXFxwVFRoUExkfJCQvPjQmKyoiIiYaHB5ITEz+/v7////6+vrIzNHo6uz9/f39/f3+/v7////08/ZpGj2cguMcPAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stripe example2\"\n        title=\"\"\n        src=\"/static/1682400641215.82112973136/00d43/stripe-loaded.png\"\n        srcset=\"/static/1682400641215.82112973136/63868/stripe-loaded.png 250w,\n/static/1682400641215.82112973136/0b533/stripe-loaded.png 500w,\n/static/1682400641215.82112973136/00d43/stripe-loaded.png 1000w,\n/static/1682400641215.82112973136/a13c9/stripe-loaded.png 1178w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>stripe example2</p>\n<h3 id=\"memory\" style=\"position:relative;\"><a href=\"#memory\" aria-label=\"memory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Memory</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAr0lEQVR42k3N22rDMAwG4DzHklqWrJOdntJuvWk3Ci0OLfT9X2fucjP4+BHoR+qm423cz2U/76b7vB1rWdevcnltPx+Ha909v9f1Z3qcT3VTr2XOukliopnFW3YBEgBBbNIH2ECKbsPKw8qHkHvwPmgg6yP0EFonkv+xpsNkmLQhViJmY/UcUSMxJqd2C5NIptZGB8pABiiLTtv/f6wIsyAteEmRIjq+D/N7y6LL8Av+2yUIPimhrwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Memory Image\"\n        title=\"\"\n        src=\"/static/1681089562232.7012107585244/00d43/performance-memory.png\"\n        srcset=\"/static/1681089562232.7012107585244/63868/performance-memory.png 250w,\n/static/1681089562232.7012107585244/0b533/performance-memory.png 500w,\n/static/1681089562232.7012107585244/00d43/performance-memory.png 1000w,\n/static/1681089562232.7012107585244/aa440/performance-memory.png 1500w,\n/static/1681089562232.7012107585244/ab40b/performance-memory.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>DOM 노드, 리스너 및 기타 메트릭이 이 차트에 요약되어 있습니다.</p>\n<p>DOM 노드, 리스너 및 기타 메트릭이 이 차트에 요약되어 있습니다. 색상별로 노드, 리스너 등을 구분할 수\n있습니다. 이 부분에서 앱의 추세를 볼 수 있으며 주로 <strong>메모리 누수를 추적</strong>할 때 유용하게 사용할 수있\n습니다.</p>\n<h3 id=\"cpu-activity-breakdown\" style=\"position:relative;\"><a href=\"#cpu-activity-breakdown\" aria-label=\"cpu activity breakdown permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU activity breakdown</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 632px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACpElEQVR42l1SS08TURSevaAkiJROZ9pO23ncO3M7nXamL/rEVqApihADGhMTJRgfiRujBuPCHQsQNHEhkfgHXGBcSwiuYWeiSyWphvhYIDvEbzoEDcnXyXd7znfOvd85HM/7KaWMGTzPBwLiQG2oWD6dL1Sy+SKhrFgeaKMKnusvl6u1XL6UyRVUTdeIwfEBkecFQBCCISlqxC3kIUD0uKxSrc3xPeBt0HYI4JJ2Bq1QNW6mVGLY6bzBEsFQBAiFox45wr0jwOEXiSrRmCpFYmHpAF7sEMgWg1JYcjkI4Ok5LwxBQAgLIjLkcDh2RGkwS9dZY+JOujhsGCyTK+qGiRIcZHwg1NPrJ9TQCPHzfYIYOmwOJS5F2m9ujgxnsjlC46ZlU91ECIYFE5a98ubtzx/fvmzMzz6cVVVHEEVPj/KwwEo5smZOXy7UqrbO7JSTgd69Nh68sbm5vf19Zmbm7q3x10sfnzxew/NQGHp8YbuZsBWNNOrT2cwgSpmWk7AcWSHcjZu39/b+1M8MdR7vPtHty2cbK8u/moNXff4+KSJDjFFhfqpG6/Vx2ynqLIGbsnjSFc/NzW9tbUVlbbg5WqnWqMGeL65eu/LolK9XiigQyzJBH0LMwYlyuuQwlrLTOZSANdzU1PX9/f2Rs6PHOro6OrvOj1349PlDc2zE5wt4nWOyBrdjCpm8eKlYqmiExRMpWaHumxFeX3+/s/N7YeHp4uKz3d3d1XdrweDB/BBVVOpmq3Ri0hXrDPZlUct1OyCEMKTl5Vet1tdWq/Vi6aVKdPzpKdHcSqZhWEwm9+4/aDbPUcP0dsbtjCRBDJ/s8SEPAMHxcM4giaSDzYXnugGYbZ/pvw1DBmTe3mFy/28IjqVKrb9QsZ2cnxfhMI7MTHqd/wKdScdWyb3W0wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Aggregated task breakdown\"\n        title=\"\"\n        src=\"/static/1681089562232.2976107585242/084e2/performance-cpu.png\"\n        srcset=\"/static/1681089562232.2976107585242/63868/performance-cpu.png 250w,\n/static/1681089562232.2976107585242/0b533/performance-cpu.png 500w,\n/static/1681089562232.2976107585242/084e2/performance-cpu.png 632w\"\n        sizes=\"(max-width: 632px) 100vw, 632px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Aggregated task breakdown</p>\n<p><code class=\"language-text\">Summary</code> 탭에서는 특정 CPU 작업을 선택하지 않은 경우, CPU 작업 내역이 다음 4가지 범주로 분류되어 표\n시됩니다.</p>\n<ul>\n<li><strong>Loading</strong>: 네트워크 요청 및 HTML 파싱</li>\n<li><strong>Scripting</strong>: JS 코드 파싱, 컴파일링 및 실행, 가비지 컬렉션(GC) 포함</li>\n<li><strong>Rendering</strong>: 스타일 및 레이아웃 계산</li>\n<li><strong>Painting</strong>: 이미지 페인팅, 합성, 리사이징 및 디코딩</li>\n</ul>\n<p>다른 쓰레드를 클릭하거나 위쪽 및 아래쪽 화살표 방향키를 사용해서 다른 쓰레드를 선택할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 818px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 116.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAIAAACEf/j0AAAACXBIWXMAAAsTAAALEwEAmpwYAAADt0lEQVR42o1Ta28UZRSeL0YapCC1te3u3Gdn57Lzzv3S7rK7tixLAQmg1a4IpjWpEiMa27SNsZpAjNXE2wejpAYN2hSKdk1Y2q2t0K0aSpNaSaOCEsMHid/9BZ7prMu6hsTkyZMz75xnznnecwZb+vzF5anB5amBta+Gfp0b/mXG59ulkYunBlv43uHjz7/y0gu00qs4/YrzbAXIPQaMnftoYf6LYmFidvbs3Mrc6rXLP60uXLuxfPPU+5NYgxeSO0NSx6Zwui6c3FSFOjwFjJ2fWDl3Zuni9I/5sysz0+vfL/xRmru1svjn2Fj+3tbUFiq7mchsY7Jb6V3VCE6wN8emLhXWS7PXV5duL1+6tTjz85WFm7+v/fXu29P3tCTvZyA1A3n1VKYawQn2+NETF6aunBkvFs5fzU+WZvNrff2vDw6Nj756GioHSXcVH+oZulxYg8rzF9YP9ozoO3pbpX3N4j4j+eRmvHMr5FGZbXcTG8mnPhn/ZvKzq91HTpDoEeyB+HZuTz29uy7cAW63kLsCvm+DK6inssBYE6E100ZDOIZHXM3t4mJpRk7R0o4I6uCUNCUmggBOiGh7DTCSwCMci+Mhnufb2xOO4xqmqWm657XZtqsoyIXAP7REUZIkuRrY3oyNNFPTbVWzRBnhBE3RHICkfKaZCEmxJF2Oa4CZlqnqFlINSUa66QAH4v8DTI7pUFOKqYKkyDGVj0pQiqKhms8UlKV8LqNGrCAQmyCDAD4BRwwXZdh/wAk+yo8CtFpTWdUMW5QUpPrODcsFWO3ZtvQBO97lJh/2kvvtxB4vfcBL7Y9EFZJi7oihz6gggxjAC1JwE1CH5crgIkEgsH5HfDUwy2lzvbisGFwUQf+QSm743ACDE0xLiCFJCGiCZAD/arullaBY6fATuZ5DKcgIE0zFGMfLho52d+pREcUUDQzCLKr1mKWLi4UP5r8u/lAcKU4c56MCQbI0A1PlopIab7OOdCdkxTRMBwap6jbYpCviT997evrjY61hFjx8lx84Ody9vRFnWLDNy8jwPO/g3p1Is8CdpluwEXCpldaw0pcD/UezIVJqCgknhx+d/PCZhiYCxPCOF0TDSGQeOizFEGjkmAa+Kivoi994+TFo2LXVnWnnt29fe66vC8SsL2Z5QY4nkrlcLoZ0mB/L8sGS3hHDw+l3+m6URq+XRt8azYVwuDBYbBYGAwJZ0WCQjhuH/SH/u2Fw143NpKErSJEbHyTLLyjOLywpkYgAf4gooWCENeK/ASmMSPlwemSIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"스크린샷 2023-04-08 오전 3.47.37.png\"\n        title=\"\"\n        src=\"/static/1681089562228.579107585238/64d87/any-function-call.png\"\n        srcset=\"/static/1681089562228.579107585238/63868/any-function-call.png 250w,\n/static/1681089562228.579107585238/0b533/any-function-call.png 500w,\n/static/1681089562228.579107585238/64d87/any-function-call.png 818w\"\n        sizes=\"(max-width: 818px) 100vw, 818px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 사진은 flame chart에서 특정 Function Call을 선택했습니다. 하단의 Aggregated Time은 해당 Function\nCall의 CPU 분석을 보여줍니다. 또한 링크(Graient~~~ )를 클릭하면 개발 도구의 소스 패널에 있는 코드 줄\n로 이동합니다.</p>\n<hr>\n<p><code class=\"language-text\">Bottom-Up</code> 탭에서는 CPU 활동에 대한 보다 세분화된 분석을 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABs0lEQVR42m2S2XLjIBRE9Se2JCQEiEXsAi2RvKacxElmKk8z//8bQ/I0sUOdJ+p23e6GzPmxhqQogDK91J53lnKFMCUt/xGE20SDCGUii72dBuudmqfYezNEO0+DkBYTVtWohvgbDenMrNyi/Sr0kEHYnFY99wQT6p1ZRrFbQlGiTV5ucvCdclvWbnoJ66+4+5D+mJUAKaWtxA1mxqg58MMaK0jyNHpHXgCup86t0u/bLmSoFcrGLp0UWIUhmrfrmclQAJTfU2FuVtWfVDhTOWcNcdKdUnohnXVxGtz766Ptl7LCedncsC1gv7xPpz/z+a+dnrMKMioiQoRQ3nLpBDuugQlTgnqzLW5spxsdzn6+9g+vyXxWQ8Q71aCWUNEyZQU9rCG5AFWz2SYBuEH6gx0udnzq7JrB1L5ypGWUd5Sb3snr00KFze9kn4WVdVKmthOd3X2K5ZeYcRWDn6N5vlzCuJYA3m/Oi9rPL3H/Me5/u3hItjETipDWaD5GPQZ52D3YfmRcFmX9FfV/cQUqnF4X1LiCOEufhnc67cctx1RqJY77SJiCDU6j984hFg1RCQDpPzW5gnmQy6QYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"bottom-up.png\"\n        title=\"\"\n        src=\"/static/1682400641213.6167112973135/00d43/bottom-up.png\"\n        srcset=\"/static/1682400641213.6167112973135/63868/bottom-up.png 250w,\n/static/1682400641213.6167112973135/0b533/bottom-up.png 500w,\n/static/1682400641213.6167112973135/00d43/bottom-up.png 1000w,\n/static/1682400641213.6167112973135/aa440/bottom-up.png 1500w,\n/static/1682400641213.6167112973135/d3deb/bottom-up.png 1758w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 사진처럼 하위 수준의 함수를 확장해서 어떤 코드가 함수를 호출하는지 확인할 수 있습니다. 이렇게 하\n면 제어할 수 있는 코드를 찾는 데 도움됩니다.</p>\n<hr>\n<p><code class=\"language-text\">Call Tree</code> 탭은 기록하는 동안 실행된 JS 함수의 계층적 표현입니다. 호출 트리는 가장 시간이 많이 걸리\n는 기능을 식별하는 데 도움이 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.400000000000006%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABN0lEQVR42mWQ607CQBCF+xyCofS691v3UnZbbUsFQUzw/V/GBRJFSc6fmck3c+Yk1gXKpFCGMFmUtVSWEAEhgYhiwh+FML2JMpEY57lohJDj2LfOdKENXcelEVJHHkByr9ih3DBhmXCU6yTWSreUkO2rPB+d1WQ/h9CPlKt0XdxrleZ5AYUdpZ1U+4b5JgGIisYWFbZafB0MBBVjaJ4CwCLLy39wVgDTHd3L52Y8xy1JNCMbV9UIIOY3hhKwWGa9l13nV+nD5RLd4HY4CzMkELNGt1WNMZVKOwDg4jlzhp0+ZkRUBH75eDmvm3ZnwsH2J9b0SQwwZlZF90x57yGET8v0fWt3+722oazgH35dMtVff54xd5efZWOrCiEig3cI1QA026nz3cCFjtMf+BoY4Ga4ZOYmRM03hq5XJb1W2d0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"호출 트리\"\n        title=\"\"\n        src=\"/static/1681089562231.061107585240/00d43/call-tree.png\"\n        srcset=\"/static/1681089562231.061107585240/63868/call-tree.png 250w,\n/static/1681089562231.061107585240/0b533/call-tree.png 500w,\n/static/1681089562231.061107585240/00d43/call-tree.png 1000w,\n/static/1681089562231.061107585240/aa440/call-tree.png 1500w,\n/static/1681089562231.061107585240/c830c/call-tree.png 1754w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>호출 트리</p>\n<p>위 사진에서 보이듯이 하향식 구조로 구성되며 시간이 가장 많이 걸리는 기능이 맨 위에 표시됩니다. 각 기\n능은 총 시간, 자체 시간 및 호출 횟수와 함께 나열됩니다.</p>\n<p>플레임 차트와 호출 트리 모두 JS 함수 실행에 대한 통찰을 제공하지만 서로 다른 방식으로 정보를 제공하\n고 다른 용도로 사용됩니다. 각 차트의 설명은 위에서 했으니, 둘 사이의 차이점과 각각의 장점을 살펴보겠\n습니다.</p>\n<p><code class=\"language-text\">플레임 차트</code>의 장점</p>\n<ul>\n<li>성능 문제를 일으킬 수 있는 장기 실행 함수 또는 코드 블록을 <strong>빠르게 식별</strong>할 수 있습니다.</li>\n<li>서로 다른 기능 간의 관계와 실행 순서를 보여줍니다.</li>\n</ul>\n<p><code class=\"language-text\">호출 트리</code>의 장점</p>\n<ul>\n<li>실행 시간 측면에서 가장 비용이 많이 드는 기능을 식별하는 데 도움이 되므로 <strong>최적화 작업의 우선 순\n위</strong>를 쉽게 지정할 수 있습니다.</li>\n<li>함수별 호출 횟수를 보여주기 때문에 필요 이상으로 <strong>자주 호출</strong>될 수 있는 함수를 정확히 찾아낼 수있\n습니다.</li>\n<li>함수 실행에 대한 집계 보기를 제공하여 전체 성능 비용에 대해 보다 명확한 관점을 제공합니다.</li>\n</ul>\n<p>따라서 플레임 차트는 JS 실행에 대해 시간순의 시각적 개요를 제공하는 데 탁월한 반면, 호출 트리는 반복\n되는 코드 호출을 집계하므로 평균적으로 어디서 시간이 소요되는지 쉽게 확인할 수 있습니다. 이렇듯 모두\n고유한 장점이 있으며 함께 사용하면 성능 병목 현상을 보다 효과적으로 식별하고 해결하는 데 도움이 될수\n있겠죠.</p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>이 외에도 웹 바이탈과 프레임 등 다양한 항목도 표시할 수 있는 좋은 기능들을 제공합니다.</p>\n<p>이제 Performance 탭에서 성능 결과 보고서를 보고 이해할 수 있을 겁니다. 당연하겠지만 보다 편안하게 사\n용하려면 연습밖에 없습니다. 본인이 만든 웹 페이지를 프로파일링하고 결과를 분석해보세요. 그러다보면웹\n애플리케이션의 성능 병목 현상을 식별하고 해결할 수 있을 겁니다.</p>\n<p>마지막으로 런타임 성능을 향상시키는 방법에는 여러 가지가 있습니다. 몇 가지 일반적인 최적화 전략은 다\n음과 같습니다.</p>\n<ul>\n<li>JavaScript의 실행을 최적화 (rAF 메소드를 사용한다던가, 오래 실행되는 JS를 메인 스레드에서 웹 워커\n로 이동한다던가 말이죠)</li>\n<li>캐싱, 압축 및 CDN을 활용하여 네트워크 요청을 최적화</li>\n<li>스타일 계산의 범위와 복잡성 감소</li>\n</ul>\n<p>프론트엔드 개발자라면 꼭 이러한 방법들을 숙지하시면 좋을 것 같습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li><a href=\"https://tv.naver.com/v/23652467\">https://tv.naver.com/v/23652467</a></li>\n<li><a href=\"https://www.debugbear.com/blog/devtools-performance\">https://www.debugbear.com/blog/devtools-performance</a></li>\n<li><a href=\"https://yonatankra.com/how-to-profile-javascript-performance-in-the-browser/\">https://yonatankra.com/how-to-profile-javascript-performance-in-the-browser/</a></li>\n<li><a href=\"https://developer.chrome.com/docs/devtools/performance/\">https://developer.chrome.com/docs/devtools/performance/</a></li>\n</ul>",
      "cpu-flame-chart#CPU flame chart": "<p>성능 문제가 발생했을 때 해결하려면 웹 애플리케이션을 프로파일링하고 모니터링하는 방법을 알아야 합니\n다.</p>\n<p>웹 성능을 측정하는 방법들은 Lighthouse, Chrome DevTools Performance Tab, PageSpeed Insights 등 여러\n가지가 있습니다. 이 중, <strong>DevTools의 Performance를 이용</strong>해 세부적으로 웹의 동작을 들여다 보겠습니다\n. 그리고 웹 애플리케이션의 성능을 분석하고 개선하는 방법을 알아보겠습니다.</p>\n<h2 id=\"성능을-기록하는-방법\" style=\"position:relative;\"><a href=\"#%EC%84%B1%EB%8A%A5%EC%9D%84-%EA%B8%B0%EB%A1%9D%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"성능을 기록하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>성능을 기록하는 방법</h2>\n<ul>\n<li>Chrome 브라우저를 엽니다.</li>\n<li>분석하려는 웹 페이지를 로드합니다.</li>\n<li>페이지의 아무 곳에 마우스 오른쪽 버튼을 클릭해서 <code class=\"language-text\">검사</code>를 선택하거나 <code class=\"language-text\">Crtl+Shift+I</code>\n(Windows/Linux) 또는 <code class=\"language-text\">Cmd+Opt+I</code> (Mac)를 눌러 개발자 도구를 엽니다.</li>\n<li>개발자 도구의 <code class=\"language-text\">Performance</code> 탭을 클릭합니다.</li>\n<li>Performance 탭에서 <code class=\"language-text\">기록</code> 버튼(원 아이콘)을 클릭하거나 <code class=\"language-text\">Crtl+E</code> (Windows/Linux) 또는 <code class=\"language-text\">Cmd+E</code> (Mac)\n를 누릅니다.</li>\n<li>분석하려는 작업(성능 문제를 일으킬 것 같은 시나리오)을 수행한 다음 <code class=\"language-text\">중지</code> 버튼을 클릭하여 기록을중\n지합니다.</li>\n<li>기록이 완료되면 Chrome DevTools가 웹 페이지 성능에 대한 자세한 보고서를 표시합니다.</li>\n</ul>\n<h2 id=\"웹-페이지-성능-보고서를-보고-이해하는-방법\" style=\"position:relative;\"><a href=\"#%EC%9B%B9-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%84%B1%EB%8A%A5-%EB%B3%B4%EA%B3%A0%EC%84%9C%EB%A5%BC-%EB%B3%B4%EA%B3%A0-%EC%9D%B4%ED%95%B4%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"웹 페이지 성능 보고서를 보고 이해하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>웹 페이지 성능 보고서를 보고 이해하는 방법</h2>\n<p>이제 아래 사진처럼 성능에 대한 자세한 보고서를 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAADXElEQVR42o2Ua1MbNxSG9xc0bdpJJrTYu6tdaVd709619tpgfLe5B9trY2xTphDAhTQYGztTIF/afkj/cwVMOp3mCzPPaDSvznukI80R5weR70euFzpuYJg2Q8WG5xDXpzSkQcBExyIuCyC2R4jHRhaDsWlaPmd7zJ4JozigWc+PHC80iaubjh9mgij2gkg3CTZMk9gmcSzbNW0H6yYTVc3gPCsmWkQMX9V0w7BYlOf5luXYxHcd3yFe4NJMkA+c2LWoZ1HHDC3d07Hj2hEX6nVXrehqBmILqgSqtoQMCC0Lrxg4Z6gZV616qG6ALEErFszb6pqLS75Wjt0a19jcOhmPp4u73ybz6fz+iZvFp8n8dra4v765nX28v57/fjVbTOe3V9OPs8Xd5WRyfvXu8HjANdZb7eTk6OfF6PB6NJx2k8te9327ddFL3ifJRad9kbQvmNLf/9B5nPS6Hza3hmEuT+M8V9z6RYu7QWk/boxyzcOgPMzWh2G5n2uMouqArPai6sFqc1jYPLJX+15x4JcOgtJAj/tm5i0H3b0ftV1aPCLZXlw9jSvnudo4Wz3O187ytXFcOc1XT9eavxabl1HxLCycZyvjn/TdF0L9tVzilvXGEm7gcCdtbbgrnUwxiSsjWjqOykd0rZcpD3L1d4X1k9V6jxaSuNQKCm9fK/VvhMr3YoF7CTe+kxov5fVXeFswt0WzqdMWonuQ7gnONon7JO6amYTXt3ltnTebr1DtW7HyQqz9AAqcm020aKQGQyfb3wvCHSPYoX5hn0asiFbY38ju1mm7nN+xB+vmUEFURAQgmyErNgcEEQgAiDJDFBEASFElCUIAVACUB11SZagKgvgFFg4FUWZwKUFNCUpaQGlRSfFQlCQZYyamBSkNNB5gNgGSwgvyA6L6CHqCk6EsQbYsAra3JMoKAEBOpwHPPyAIEhsl6cnDUkBeAP/CCUCECGmGiTUd6wbWDIQwO+d/YeuKghVF/QJ+gmMJltMi1ghSdAbrR4i0/5llqEiy+jUcjeKD/gGQ0HJK0Fgr2rYMcZoHz4H7/Pnvs7Pz2c3izVKKdW+cL5iWy7NSnwH3x59/3d59mlxP3ywt00yuWK5IsvJ4H88wsz+l0+mKD08HNZ2wgiUJsSM9x/wP0Z//iaRvinMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Performance 기록 결과 화면\"\n        title=\"\"\n        src=\"/static/1681089562232.0251107585241/00d43/my-blog-performance.png\"\n        srcset=\"/static/1681089562232.0251107585241/63868/my-blog-performance.png 250w,\n/static/1681089562232.0251107585241/0b533/my-blog-performance.png 500w,\n/static/1681089562232.0251107585241/00d43/my-blog-performance.png 1000w,\n/static/1681089562232.0251107585241/aa440/my-blog-performance.png 1500w,\n/static/1681089562232.0251107585241/56e36/my-blog-performance.png 1750w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Performance 기록 결과 화면</p>\n<p>엄청난 양의 데이터로 인해 뭐부터 봐야할지 감이 안 잡힐 수도 있습니다. 천천히 하나씩 들여다 보며 이해\n해보겠습니다.</p>\n<h3 id=\"cpu-utilization--filmstrip\" style=\"position:relative;\"><a href=\"#cpu-utilization--filmstrip\" aria-label=\"cpu utilization  filmstrip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU Utilization &#x26; FilmStrip</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZklEQVR42hXFCwrCMBQEwB7HlLzdbH6mJSIVEalg7n8bIwzMElC9k5nc6r3HJCVDwFyRlELO8ZrUaJmY0uroLgDysmN0fJMOYzZWqhkS2Wp8lvgoOnocN43NXn987+HcePZw3svnB31WGFymD9SOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Timeline\"\n        title=\"\"\n        src=\"/static/1681089562233.096107585245/00d43/performance-timeline.png\"\n        srcset=\"/static/1681089562233.096107585245/63868/performance-timeline.png 250w,\n/static/1681089562233.096107585245/0b533/performance-timeline.png 500w,\n/static/1681089562233.096107585245/00d43/performance-timeline.png 1000w,\n/static/1681089562233.096107585245/aa440/performance-timeline.png 1500w,\n/static/1681089562233.096107585245/ab40b/performance-timeline.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Timeline</p>\n<p>상단의 CPU 타임라인에선 Critical Rendering Path(Javascript, style, layout, paint, composite)과 ajax\n호출 등을 보여줍니다. 주로 JavaScript(노란색) 및 레이아웃 작업(보라색)과 같은 다양한 유형의 작업으로\n인해 CPU가 얼마나 열일하는지 봅니다. 사진에서 보이듯 CPU 활동은 처음 활동을 시작한 후 상당히 조용해\n집니다.</p>\n<p>중앙의 FilmStrip은 왼쪽부터 시간순으로 나열되며 프레임 스크린샷을 통해 각 순간의 사이트가 어떤 모습\n인지 볼 수 있습니다. 이러한 애플리케이션의 시각적 상태는 “screenshot” 옵션을 체크했을 때만 존재합니\n다. FilmStrip 위로 마우스를 가져가면 해당 시점의 스크린샷을 크게 볼 수 있습니다.</p>\n<p>하단 부분은 애플리케이션의 메모리 추세를 보여줍니다. 위 예시 사진에서 메모리가 증가하고 잠시 후 감소\n하는 것을 볼 수 있습니다. 일반적으로 가비지 컬렉션 프로세스가 발생할 때까진 메모리가 증가합니다.</p>\n<h3 id=\"user-timing-metrix\" style=\"position:relative;\"><a href=\"#user-timing-metrix\" aria-label=\"user timing metrix permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>User Timing metrix</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 813px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.200000000000003%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPElEQVR42gExAc7+ACQlKCUmKiQkKDU4QmRoc19jbGFlb2FaRnpzXzw8OlBXU2ZsZmpuc2JpZ2NoY1hdXzQ2NigoMCIhKBEQFgBGSEpqbmxnbGeVn5bF0crI1M3N2dPGx6HR07Cws63N0czQ1c/KzMrR087L1cPBzraYoo1+iHh/iXh6hHMAPkFCVlpYYmZje4N6a3Noa3NoanFmbHVyZW5nd3dwcm50Z2RqaWhsdnl+lJGokZKnjJCanZ6ym5uwnp6zACoqLjo7Pzk6PRkZHhQTGBUVGhQUGxIREx8oPCU6Wyg+NCxBMSsqIzMXGTUxUT83XS0oQzoyV0dFZEQ/YQAiIyYuLzIwMjQiIyYkJSgjJCcjJSghISEtOU46U3g5U0U5Uz48OzNHJygbIB4cHxwfISAbHhsrMykkKyMp/WsbrDCqYwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"로딩에 관한 지표들\"\n        title=\"\"\n        src=\"/static/1681089562233.2878107585246/baaa6/performance-timing.png\"\n        srcset=\"/static/1681089562233.2878107585246/63868/performance-timing.png 250w,\n/static/1681089562233.2878107585246/0b533/performance-timing.png 500w,\n/static/1681089562233.2878107585246/baaa6/performance-timing.png 813w\"\n        sizes=\"(max-width: 813px) 100vw, 813px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>로딩에 관한 지표들</p>\n<p>타이밍 레인에는 FP, DCL, L 등 이벤트도 표시됩니다.</p>\n<p>자세히 설명하자면 이 글이 너무 길어지고 내용이 산으로 갈 것 같아 각 지표들의 의미만 살펴보고 넘어가\n겠습니다.<br>\n해당 부분에 대한 건 따로 다른 글에서 자세히 설명하겠습니다.</p>\n<ul>\n<li>FP (First Paint): 페이지 네비게이션 후, 첫 픽셀을 그린 순간</li>\n<li>FCP (First Contentful Paint): 첫 엘리먼트를 그린 순간</li>\n<li>LCP (Largest Contentful Paint): 가장 큰 엘리먼트를 그린 순간</li>\n<li>DCL (Dom Content Loaded): DOM Tree를 구성하고, 스크립트(+ defer 스크립트)를 실행 완료했을 때 →\ndefer 스크립트가 없다면 FP 전에 DCL이 올 수 있습니다.</li>\n<li>L (Load): 다큐먼트의 리소스들을 모두 로드 완료했을 때</li>\n</ul>\n<h3 id=\"cpu-flame-chart\" style=\"position:relative;\"><a href=\"#cpu-flame-chart\" aria-label=\"cpu flame chart permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU flame chart</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABV0lEQVR42jWLXU+CYBiG+QEtax2UW5oftOUXLgp94UVEeQEBCdQsyjUzE3VIrq2f4DxSbKuTTqwO+p+9ubVdu5/rvreHmM9X728/wfJjFXyull/BAidmHSzWG/kD+39dvwbfs1ngv4wmzy4BxKaArkXlBmm3DHcBBJsG9QK0irxFAwNTgCYUba682XmLgRbN6mSGIzOQSPP3XK0Ptb7U8EvGpGL7ZcuTbA81nqDuQ2OMGr5xNZXsKatN2JoHda9Yc9N8Nw3viBjVKojdLHAEdcRJLi+PeMXl5EFJGWMpqQOhNkTmBFe26rLSGFTdaK65dYRCMUREsgZ5Wo9SZh42mXKbrXYAegDyY6HiFCsOp/RK+lDUe6ByyQhtKFkUZ4ZTeiiu7CRkYjeBj7qfMg9zVoQyybNWkm4k6VY0bx2fO2m2kyo6eDw40cIpNZKr75FqKCZv4+c4+gUZGG3RCsnSFwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Flame chart\"\n        title=\"\"\n        src=\"/static/1681089562232.488107585243/00d43/performance-flamechart.png\"\n        srcset=\"/static/1681089562232.488107585243/63868/performance-flamechart.png 250w,\n/static/1681089562232.488107585243/0b533/performance-flamechart.png 500w,\n/static/1681089562232.488107585243/00d43/performance-flamechart.png 1000w,\n/static/1681089562232.488107585243/aa440/performance-flamechart.png 1500w,\n/static/1681089562232.488107585243/ab40b/performance-flamechart.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Flame chart</p>\n<p>가장 핵심 부분이라고 생각합니다. 플레임 차트는 기록하는 동안 웹 페이지의 JS 실행을 시각적으로 표현한\n것입니다. <strong>성능 병목 현상이 발생할 수 있는 위치</strong>를 이해하는 데 중요한 부분입니다. 수평 레이어로 구\n성되며 각 레이어는 단일 JS 함수를 나타냅니다. 각 함수 블록의 너비는 함수의 실행 기간을 나타내고 색상\n은 작업 유형(스크립팅, 렌더링, 페인팅…)을 나타냅니다. 그러므로 이 섹션에서 <strong>어떤 함수가 호출되었고\n각 함수가 얼마나 오래 걸렸는지 정확하게 분석</strong>할 수 있습니다.</p>\n<p>위 사진에는 안 나왔지만 Register, GPU, Compositor 등 성능 문제 디버깅에 유용한 섹션들이 있습니다. 몇\n가지 설명드리겠습니다.</p>\n<p><strong>Network 섹션</strong>은 다운로드 요청과 완료 시간을 볼 수 있습니다. 그리고 <strong>Main 섹션</strong>은 렌더러의 메인\n스레드로, 알록달록한 색으로 된 지표들을 통해 프레임의 전체 시간과 프레임을 연장하는 데 가장 큰 영향\n을 미친 기능을 확인할 수 있습니다. 노란색은 자바스크립트가 실행 중임을 나타냅니다.</p>\n<p>이해를 쉽게 돕기 위해 UI 업데이트 또는 CPU 작업과 연관시키는 데 특히 유용한 Network 섹션을 통해\n<a href=\"https://stripe.com/\">Stripe</a> 홈페이지를 디버깅하는 예시를 들어 보겠습니다.</p>\n<p>아래 사진은 폰트 로드가 완료되기 직전의 Stripe 홈페이지입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC50lEQVR42gHcAiP9ADAwMyAgISYlJzc3OCYpKSUmKCAiIyEiJSgpKyooIigpKyIjJB4gISkrLRsdHicpLCYoKh4fISosLyEjJAA2PUhDS1o8RVNQWGdkaXpXWWdgYnFfYHJZXGtmZWxcXW9aXWxZW2pXWmpYWmpISFNJSVRKSVRISFJKSVQAP0FHP0JJQEJKODtCoqSu19bhz87bzMzYxsXQzsvNyMfTyMfTyMjSx8bSyMfSwb/Iw8HLw8HLxMLMwsDLACYnLCwuMissMCUnKzU6PzU4QDI3QDxASzI1OTw4NTY0ODEwNDMyNjQ1OS8yODI2PDQ4PTEyNzU2OTY4OgAjKDQrMT80OUkrL0AzN0c1OUknKzsxNkY0NUSdQV22UXykXY+fcqqVeMGPdsWdf7OzipXHkWzRpGLUs2UAlqzCmK7JhaGza46UZ4mRaIuRcJWYdZyfcI+SsHGdv43DsJ3Zp5fmn4XlqX/TuYu9zpie6quA9Lpz9sV2AKCfpKCepHR3dDxFOF1kW2BmXVBZTDE7KTU+L5GfyKW8+J+k8Ix+34Zs1ZB0zZZ/u7Khv8W2wLyvsd7W1gArLDAsLTIhIiZqZ3a+uNDEvtWWkKYVFRshIimMiMmojuyket6NbM1zZ8Jxd9F1ktqJt+eYyO6o0fXK2esAIiInIiMoFRYYaGZz0s3i1M7kmZanFxobJiYqnleVvWCqtmirlGmagHOggIy+lbnXl7bOqb3P2N7k7u/xAFlfWlxjXVtiW2RnaWlkdG5reFxbZSEjJickKbZZduCLqOCyyNrI1NnX3Nra3t3b3dTQ09zZ2uPh5Pj4+gBnb2Ztdmxze3JWZFcsQi8fKCIXFxoiJCYyNzXZ1tX//////v7v8fLo6+z6+/v4+vn8/f3+///+/f7v8PIAFBQZEhIXERAWHSEhLjsyJywrIyMnHyEjKi4u2dra////////19nd0NTZ/P38/f39/v7+/f39////5OXoVxdfwiCa7CoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stripe example\"\n        title=\"\"\n        src=\"/static/1681089562235.117107585248/00d43/stripe-not-loaded.png\"\n        srcset=\"/static/1681089562235.117107585248/63868/stripe-not-loaded.png 250w,\n/static/1681089562235.117107585248/0b533/stripe-not-loaded.png 500w,\n/static/1681089562235.117107585248/00d43/stripe-not-loaded.png 1000w,\n/static/1681089562235.117107585248/84bf8/stripe-not-loaded.png 1162w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>stripe example</p>\n<p>여기서 UI에 변경 사항이 있으면 네트워크 요청 섹션을 통해 UI 업데이트를 <strong>지연</strong>시키고 있던 <strong>네트워\n크 요청</strong>을 이렇게 식별할 수 있습니다.</p>\n<p>폰트 파일을 로드한 직후의 아래 사진에서 UI가 다운로드한 폰트를 사용해 재렌더링되었음을 확인할 수 있\n습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.199999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9ACUoLy80PDA1Py0yPElPWDY9RiMpMycsNycsNyctNiEmMTA1OisvMiMpNCUrNRwhKR4iKRkcJBwgJxwgKAA/Q0s/Q0xHTVlITllITVmen7C7uMe4tsW4tcWysb+3s8e4tL+5tb+wr8G1s8Svq7mno7GopLCqprKoo7AALzA0LzA0LzA0LjAzKy4wZ2txfoCJe3+JfYGLcnV4Zm9wbXNvcHRuaGtrbG5qbG5sbXBxaGxxaW52aWx1ADM0OCAhJiYoLi4vNiAgKCMkLB0dJhQTHSAiLCccJXIwQ3A4U2g/XWZOcltOflpPemhYb3RaVX1hQ4RxSABRYnxgc4xme5hkfJVeeY1feo9hfJFkf5JjhZdxc4jQY5XHf7e6kNKxlOirieu5jdbOmrjsqYr9vXL/zXAASU1Us7i9vcDHlZ+cTF9LVGdUV2pXV2tWS2NIWmddp6japLbsnaLsj3/dk3PUnnzArY6yyqmtz62c2b6nACgoLDo5QDs6QSgnLFlVY6qjubOrwW9pewsJDDEzQaGp8qKR7Jx74nhhyHNpzXN40ISb1qLG7KDG6bzR7AAdHSEhIiUhIiUWFxlta3jPyuHY0umBfo0QFBI6M0Cyarm0Z7WrbLN9YZhwbqt5l9CFs9mRs9O80uPp8PcAQUVDRkpISU1LRUpHYWFnfnqJiIWTYV9pGB0fPiw2z16G1YGk06fAv7O+ubfDxMjNvLzCwr/E0M3R+vr6AHN8cXR9cnqEeIKLgGBtYC5BMiIpJR8fIhwgIUtLSvnr7f////z8/eLm6Ons7PDw8e/w8vb3+P////T19wAYGBwXFxwVFRoUExkfJCQvPjQmKyoiIiYaHB5ITEz+/v7////6+vrIzNHo6uz9/f39/f3+/v7////08/ZpGj2cguMcPAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stripe example2\"\n        title=\"\"\n        src=\"/static/1682400641215.82112973136/00d43/stripe-loaded.png\"\n        srcset=\"/static/1682400641215.82112973136/63868/stripe-loaded.png 250w,\n/static/1682400641215.82112973136/0b533/stripe-loaded.png 500w,\n/static/1682400641215.82112973136/00d43/stripe-loaded.png 1000w,\n/static/1682400641215.82112973136/a13c9/stripe-loaded.png 1178w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>stripe example2</p>\n<h3 id=\"memory\" style=\"position:relative;\"><a href=\"#memory\" aria-label=\"memory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Memory</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAr0lEQVR42k3N22rDMAwG4DzHklqWrJOdntJuvWk3Ci0OLfT9X2fucjP4+BHoR+qm423cz2U/76b7vB1rWdevcnltPx+Ha909v9f1Z3qcT3VTr2XOukliopnFW3YBEgBBbNIH2ECKbsPKw8qHkHvwPmgg6yP0EFonkv+xpsNkmLQhViJmY/UcUSMxJqd2C5NIptZGB8pABiiLTtv/f6wIsyAteEmRIjq+D/N7y6LL8Av+2yUIPimhrwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Memory Image\"\n        title=\"\"\n        src=\"/static/1681089562232.7012107585244/00d43/performance-memory.png\"\n        srcset=\"/static/1681089562232.7012107585244/63868/performance-memory.png 250w,\n/static/1681089562232.7012107585244/0b533/performance-memory.png 500w,\n/static/1681089562232.7012107585244/00d43/performance-memory.png 1000w,\n/static/1681089562232.7012107585244/aa440/performance-memory.png 1500w,\n/static/1681089562232.7012107585244/ab40b/performance-memory.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>DOM 노드, 리스너 및 기타 메트릭이 이 차트에 요약되어 있습니다.</p>\n<p>DOM 노드, 리스너 및 기타 메트릭이 이 차트에 요약되어 있습니다. 색상별로 노드, 리스너 등을 구분할 수\n있습니다. 이 부분에서 앱의 추세를 볼 수 있으며 주로 <strong>메모리 누수를 추적</strong>할 때 유용하게 사용할 수있\n습니다.</p>\n<h3 id=\"cpu-activity-breakdown\" style=\"position:relative;\"><a href=\"#cpu-activity-breakdown\" aria-label=\"cpu activity breakdown permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU activity breakdown</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 632px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACpElEQVR42l1SS08TURSevaAkiJROZ9pO23ncO3M7nXamL/rEVqApihADGhMTJRgfiRujBuPCHQsQNHEhkfgHXGBcSwiuYWeiSyWphvhYIDvEbzoEDcnXyXd7znfOvd85HM/7KaWMGTzPBwLiQG2oWD6dL1Sy+SKhrFgeaKMKnusvl6u1XL6UyRVUTdeIwfEBkecFQBCCISlqxC3kIUD0uKxSrc3xPeBt0HYI4JJ2Bq1QNW6mVGLY6bzBEsFQBAiFox45wr0jwOEXiSrRmCpFYmHpAF7sEMgWg1JYcjkI4Ok5LwxBQAgLIjLkcDh2RGkwS9dZY+JOujhsGCyTK+qGiRIcZHwg1NPrJ9TQCPHzfYIYOmwOJS5F2m9ujgxnsjlC46ZlU91ECIYFE5a98ubtzx/fvmzMzz6cVVVHEEVPj/KwwEo5smZOXy7UqrbO7JSTgd69Nh68sbm5vf19Zmbm7q3x10sfnzxew/NQGHp8YbuZsBWNNOrT2cwgSpmWk7AcWSHcjZu39/b+1M8MdR7vPtHty2cbK8u/moNXff4+KSJDjFFhfqpG6/Vx2ynqLIGbsnjSFc/NzW9tbUVlbbg5WqnWqMGeL65eu/LolK9XiigQyzJBH0LMwYlyuuQwlrLTOZSANdzU1PX9/f2Rs6PHOro6OrvOj1349PlDc2zE5wt4nWOyBrdjCpm8eKlYqmiExRMpWaHumxFeX3+/s/N7YeHp4uKz3d3d1XdrweDB/BBVVOpmq3Ri0hXrDPZlUct1OyCEMKTl5Vet1tdWq/Vi6aVKdPzpKdHcSqZhWEwm9+4/aDbPUcP0dsbtjCRBDJ/s8SEPAMHxcM4giaSDzYXnugGYbZ/pvw1DBmTe3mFy/28IjqVKrb9QsZ2cnxfhMI7MTHqd/wKdScdWyb3W0wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Aggregated task breakdown\"\n        title=\"\"\n        src=\"/static/1681089562232.2976107585242/084e2/performance-cpu.png\"\n        srcset=\"/static/1681089562232.2976107585242/63868/performance-cpu.png 250w,\n/static/1681089562232.2976107585242/0b533/performance-cpu.png 500w,\n/static/1681089562232.2976107585242/084e2/performance-cpu.png 632w\"\n        sizes=\"(max-width: 632px) 100vw, 632px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Aggregated task breakdown</p>\n<p><code class=\"language-text\">Summary</code> 탭에서는 특정 CPU 작업을 선택하지 않은 경우, CPU 작업 내역이 다음 4가지 범주로 분류되어 표\n시됩니다.</p>\n<ul>\n<li><strong>Loading</strong>: 네트워크 요청 및 HTML 파싱</li>\n<li><strong>Scripting</strong>: JS 코드 파싱, 컴파일링 및 실행, 가비지 컬렉션(GC) 포함</li>\n<li><strong>Rendering</strong>: 스타일 및 레이아웃 계산</li>\n<li><strong>Painting</strong>: 이미지 페인팅, 합성, 리사이징 및 디코딩</li>\n</ul>\n<p>다른 쓰레드를 클릭하거나 위쪽 및 아래쪽 화살표 방향키를 사용해서 다른 쓰레드를 선택할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 818px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 116.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAIAAACEf/j0AAAACXBIWXMAAAsTAAALEwEAmpwYAAADt0lEQVR42o1Ta28UZRSeL0YapCC1te3u3Gdn57Lzzv3S7rK7tixLAQmg1a4IpjWpEiMa27SNsZpAjNXE2wejpAYN2hSKdk1Y2q2t0K0aSpNaSaOCEsMHid/9BZ7prMu6hsTkyZMz75xnznnecwZb+vzF5anB5amBta+Gfp0b/mXG59ulkYunBlv43uHjz7/y0gu00qs4/YrzbAXIPQaMnftoYf6LYmFidvbs3Mrc6rXLP60uXLuxfPPU+5NYgxeSO0NSx6Zwui6c3FSFOjwFjJ2fWDl3Zuni9I/5sysz0+vfL/xRmru1svjn2Fj+3tbUFiq7mchsY7Jb6V3VCE6wN8emLhXWS7PXV5duL1+6tTjz85WFm7+v/fXu29P3tCTvZyA1A3n1VKYawQn2+NETF6aunBkvFs5fzU+WZvNrff2vDw6Nj756GioHSXcVH+oZulxYg8rzF9YP9ozoO3pbpX3N4j4j+eRmvHMr5FGZbXcTG8mnPhn/ZvKzq91HTpDoEeyB+HZuTz29uy7cAW63kLsCvm+DK6inssBYE6E100ZDOIZHXM3t4mJpRk7R0o4I6uCUNCUmggBOiGh7DTCSwCMci+Mhnufb2xOO4xqmqWm657XZtqsoyIXAP7REUZIkuRrY3oyNNFPTbVWzRBnhBE3RHICkfKaZCEmxJF2Oa4CZlqnqFlINSUa66QAH4v8DTI7pUFOKqYKkyDGVj0pQiqKhms8UlKV8LqNGrCAQmyCDAD4BRwwXZdh/wAk+yo8CtFpTWdUMW5QUpPrODcsFWO3ZtvQBO97lJh/2kvvtxB4vfcBL7Y9EFZJi7oihz6gggxjAC1JwE1CH5crgIkEgsH5HfDUwy2lzvbisGFwUQf+QSm743ACDE0xLiCFJCGiCZAD/arullaBY6fATuZ5DKcgIE0zFGMfLho52d+pREcUUDQzCLKr1mKWLi4UP5r8u/lAcKU4c56MCQbI0A1PlopIab7OOdCdkxTRMBwap6jbYpCviT997evrjY61hFjx8lx84Ody9vRFnWLDNy8jwPO/g3p1Is8CdpluwEXCpldaw0pcD/UezIVJqCgknhx+d/PCZhiYCxPCOF0TDSGQeOizFEGjkmAa+Kivoi994+TFo2LXVnWnnt29fe66vC8SsL2Z5QY4nkrlcLoZ0mB/L8sGS3hHDw+l3+m6URq+XRt8azYVwuDBYbBYGAwJZ0WCQjhuH/SH/u2Fw143NpKErSJEbHyTLLyjOLywpkYgAf4gooWCENeK/ASmMSPlwemSIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"스크린샷 2023-04-08 오전 3.47.37.png\"\n        title=\"\"\n        src=\"/static/1681089562228.579107585238/64d87/any-function-call.png\"\n        srcset=\"/static/1681089562228.579107585238/63868/any-function-call.png 250w,\n/static/1681089562228.579107585238/0b533/any-function-call.png 500w,\n/static/1681089562228.579107585238/64d87/any-function-call.png 818w\"\n        sizes=\"(max-width: 818px) 100vw, 818px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 사진은 flame chart에서 특정 Function Call을 선택했습니다. 하단의 Aggregated Time은 해당 Function\nCall의 CPU 분석을 보여줍니다. 또한 링크(Graient~~~ )를 클릭하면 개발 도구의 소스 패널에 있는 코드 줄\n로 이동합니다.</p>\n<hr>\n<p><code class=\"language-text\">Bottom-Up</code> 탭에서는 CPU 활동에 대한 보다 세분화된 분석을 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABs0lEQVR42m2S2XLjIBRE9Se2JCQEiEXsAi2RvKacxElmKk8z//8bQ/I0sUOdJ+p23e6GzPmxhqQogDK91J53lnKFMCUt/xGE20SDCGUii72dBuudmqfYezNEO0+DkBYTVtWohvgbDenMrNyi/Sr0kEHYnFY99wQT6p1ZRrFbQlGiTV5ucvCdclvWbnoJ66+4+5D+mJUAKaWtxA1mxqg58MMaK0jyNHpHXgCup86t0u/bLmSoFcrGLp0UWIUhmrfrmclQAJTfU2FuVtWfVDhTOWcNcdKdUnohnXVxGtz766Ptl7LCedncsC1gv7xPpz/z+a+dnrMKMioiQoRQ3nLpBDuugQlTgnqzLW5spxsdzn6+9g+vyXxWQ8Q71aCWUNEyZQU9rCG5AFWz2SYBuEH6gx0udnzq7JrB1L5ypGWUd5Sb3snr00KFze9kn4WVdVKmthOd3X2K5ZeYcRWDn6N5vlzCuJYA3m/Oi9rPL3H/Me5/u3hItjETipDWaD5GPQZ52D3YfmRcFmX9FfV/cQUqnF4X1LiCOEufhnc67cctx1RqJY77SJiCDU6j984hFg1RCQDpPzW5gnmQy6QYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"bottom-up.png\"\n        title=\"\"\n        src=\"/static/1682400641213.6167112973135/00d43/bottom-up.png\"\n        srcset=\"/static/1682400641213.6167112973135/63868/bottom-up.png 250w,\n/static/1682400641213.6167112973135/0b533/bottom-up.png 500w,\n/static/1682400641213.6167112973135/00d43/bottom-up.png 1000w,\n/static/1682400641213.6167112973135/aa440/bottom-up.png 1500w,\n/static/1682400641213.6167112973135/d3deb/bottom-up.png 1758w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 사진처럼 하위 수준의 함수를 확장해서 어떤 코드가 함수를 호출하는지 확인할 수 있습니다. 이렇게 하\n면 제어할 수 있는 코드를 찾는 데 도움됩니다.</p>\n<hr>\n<p><code class=\"language-text\">Call Tree</code> 탭은 기록하는 동안 실행된 JS 함수의 계층적 표현입니다. 호출 트리는 가장 시간이 많이 걸리\n는 기능을 식별하는 데 도움이 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.400000000000006%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABN0lEQVR42mWQ607CQBCF+xyCofS691v3UnZbbUsFQUzw/V/GBRJFSc6fmck3c+Yk1gXKpFCGMFmUtVSWEAEhgYhiwh+FML2JMpEY57lohJDj2LfOdKENXcelEVJHHkByr9ih3DBhmXCU6yTWSreUkO2rPB+d1WQ/h9CPlKt0XdxrleZ5AYUdpZ1U+4b5JgGIisYWFbZafB0MBBVjaJ4CwCLLy39wVgDTHd3L52Y8xy1JNCMbV9UIIOY3hhKwWGa9l13nV+nD5RLd4HY4CzMkELNGt1WNMZVKOwDg4jlzhp0+ZkRUBH75eDmvm3ZnwsH2J9b0SQwwZlZF90x57yGET8v0fWt3+722oazgH35dMtVff54xd5efZWOrCiEig3cI1QA026nz3cCFjtMf+BoY4Ga4ZOYmRM03hq5XJb1W2d0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"호출 트리\"\n        title=\"\"\n        src=\"/static/1681089562231.061107585240/00d43/call-tree.png\"\n        srcset=\"/static/1681089562231.061107585240/63868/call-tree.png 250w,\n/static/1681089562231.061107585240/0b533/call-tree.png 500w,\n/static/1681089562231.061107585240/00d43/call-tree.png 1000w,\n/static/1681089562231.061107585240/aa440/call-tree.png 1500w,\n/static/1681089562231.061107585240/c830c/call-tree.png 1754w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>호출 트리</p>\n<p>위 사진에서 보이듯이 하향식 구조로 구성되며 시간이 가장 많이 걸리는 기능이 맨 위에 표시됩니다. 각 기\n능은 총 시간, 자체 시간 및 호출 횟수와 함께 나열됩니다.</p>\n<p>플레임 차트와 호출 트리 모두 JS 함수 실행에 대한 통찰을 제공하지만 서로 다른 방식으로 정보를 제공하\n고 다른 용도로 사용됩니다. 각 차트의 설명은 위에서 했으니, 둘 사이의 차이점과 각각의 장점을 살펴보겠\n습니다.</p>\n<p><code class=\"language-text\">플레임 차트</code>의 장점</p>\n<ul>\n<li>성능 문제를 일으킬 수 있는 장기 실행 함수 또는 코드 블록을 <strong>빠르게 식별</strong>할 수 있습니다.</li>\n<li>서로 다른 기능 간의 관계와 실행 순서를 보여줍니다.</li>\n</ul>\n<p><code class=\"language-text\">호출 트리</code>의 장점</p>\n<ul>\n<li>실행 시간 측면에서 가장 비용이 많이 드는 기능을 식별하는 데 도움이 되므로 <strong>최적화 작업의 우선 순\n위</strong>를 쉽게 지정할 수 있습니다.</li>\n<li>함수별 호출 횟수를 보여주기 때문에 필요 이상으로 <strong>자주 호출</strong>될 수 있는 함수를 정확히 찾아낼 수있\n습니다.</li>\n<li>함수 실행에 대한 집계 보기를 제공하여 전체 성능 비용에 대해 보다 명확한 관점을 제공합니다.</li>\n</ul>\n<p>따라서 플레임 차트는 JS 실행에 대해 시간순의 시각적 개요를 제공하는 데 탁월한 반면, 호출 트리는 반복\n되는 코드 호출을 집계하므로 평균적으로 어디서 시간이 소요되는지 쉽게 확인할 수 있습니다. 이렇듯 모두\n고유한 장점이 있으며 함께 사용하면 성능 병목 현상을 보다 효과적으로 식별하고 해결하는 데 도움이 될수\n있겠죠.</p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>이 외에도 웹 바이탈과 프레임 등 다양한 항목도 표시할 수 있는 좋은 기능들을 제공합니다.</p>\n<p>이제 Performance 탭에서 성능 결과 보고서를 보고 이해할 수 있을 겁니다. 당연하겠지만 보다 편안하게 사\n용하려면 연습밖에 없습니다. 본인이 만든 웹 페이지를 프로파일링하고 결과를 분석해보세요. 그러다보면웹\n애플리케이션의 성능 병목 현상을 식별하고 해결할 수 있을 겁니다.</p>\n<p>마지막으로 런타임 성능을 향상시키는 방법에는 여러 가지가 있습니다. 몇 가지 일반적인 최적화 전략은 다\n음과 같습니다.</p>\n<ul>\n<li>JavaScript의 실행을 최적화 (rAF 메소드를 사용한다던가, 오래 실행되는 JS를 메인 스레드에서 웹 워커\n로 이동한다던가 말이죠)</li>\n<li>캐싱, 압축 및 CDN을 활용하여 네트워크 요청을 최적화</li>\n<li>스타일 계산의 범위와 복잡성 감소</li>\n</ul>\n<p>프론트엔드 개발자라면 꼭 이러한 방법들을 숙지하시면 좋을 것 같습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li><a href=\"https://tv.naver.com/v/23652467\">https://tv.naver.com/v/23652467</a></li>\n<li><a href=\"https://www.debugbear.com/blog/devtools-performance\">https://www.debugbear.com/blog/devtools-performance</a></li>\n<li><a href=\"https://yonatankra.com/how-to-profile-javascript-performance-in-the-browser/\">https://yonatankra.com/how-to-profile-javascript-performance-in-the-browser/</a></li>\n<li><a href=\"https://developer.chrome.com/docs/devtools/performance/\">https://developer.chrome.com/docs/devtools/performance/</a></li>\n</ul>",
      "memory#Memory": "<p>성능 문제가 발생했을 때 해결하려면 웹 애플리케이션을 프로파일링하고 모니터링하는 방법을 알아야 합니\n다.</p>\n<p>웹 성능을 측정하는 방법들은 Lighthouse, Chrome DevTools Performance Tab, PageSpeed Insights 등 여러\n가지가 있습니다. 이 중, <strong>DevTools의 Performance를 이용</strong>해 세부적으로 웹의 동작을 들여다 보겠습니다\n. 그리고 웹 애플리케이션의 성능을 분석하고 개선하는 방법을 알아보겠습니다.</p>\n<h2 id=\"성능을-기록하는-방법\" style=\"position:relative;\"><a href=\"#%EC%84%B1%EB%8A%A5%EC%9D%84-%EA%B8%B0%EB%A1%9D%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"성능을 기록하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>성능을 기록하는 방법</h2>\n<ul>\n<li>Chrome 브라우저를 엽니다.</li>\n<li>분석하려는 웹 페이지를 로드합니다.</li>\n<li>페이지의 아무 곳에 마우스 오른쪽 버튼을 클릭해서 <code class=\"language-text\">검사</code>를 선택하거나 <code class=\"language-text\">Crtl+Shift+I</code>\n(Windows/Linux) 또는 <code class=\"language-text\">Cmd+Opt+I</code> (Mac)를 눌러 개발자 도구를 엽니다.</li>\n<li>개발자 도구의 <code class=\"language-text\">Performance</code> 탭을 클릭합니다.</li>\n<li>Performance 탭에서 <code class=\"language-text\">기록</code> 버튼(원 아이콘)을 클릭하거나 <code class=\"language-text\">Crtl+E</code> (Windows/Linux) 또는 <code class=\"language-text\">Cmd+E</code> (Mac)\n를 누릅니다.</li>\n<li>분석하려는 작업(성능 문제를 일으킬 것 같은 시나리오)을 수행한 다음 <code class=\"language-text\">중지</code> 버튼을 클릭하여 기록을중\n지합니다.</li>\n<li>기록이 완료되면 Chrome DevTools가 웹 페이지 성능에 대한 자세한 보고서를 표시합니다.</li>\n</ul>\n<h2 id=\"웹-페이지-성능-보고서를-보고-이해하는-방법\" style=\"position:relative;\"><a href=\"#%EC%9B%B9-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%84%B1%EB%8A%A5-%EB%B3%B4%EA%B3%A0%EC%84%9C%EB%A5%BC-%EB%B3%B4%EA%B3%A0-%EC%9D%B4%ED%95%B4%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"웹 페이지 성능 보고서를 보고 이해하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>웹 페이지 성능 보고서를 보고 이해하는 방법</h2>\n<p>이제 아래 사진처럼 성능에 대한 자세한 보고서를 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAADXElEQVR42o2Ua1MbNxSG9xc0bdpJJrTYu6tdaVd709619tpgfLe5B9trY2xTphDAhTQYGztTIF/afkj/cwVMOp3mCzPPaDSvznukI80R5weR70euFzpuYJg2Q8WG5xDXpzSkQcBExyIuCyC2R4jHRhaDsWlaPmd7zJ4JozigWc+PHC80iaubjh9mgij2gkg3CTZMk9gmcSzbNW0H6yYTVc3gPCsmWkQMX9V0w7BYlOf5luXYxHcd3yFe4NJMkA+c2LWoZ1HHDC3d07Hj2hEX6nVXrehqBmILqgSqtoQMCC0Lrxg4Z6gZV616qG6ALEErFszb6pqLS75Wjt0a19jcOhmPp4u73ybz6fz+iZvFp8n8dra4v765nX28v57/fjVbTOe3V9OPs8Xd5WRyfvXu8HjANdZb7eTk6OfF6PB6NJx2k8te9327ddFL3ifJRad9kbQvmNLf/9B5nPS6Hza3hmEuT+M8V9z6RYu7QWk/boxyzcOgPMzWh2G5n2uMouqArPai6sFqc1jYPLJX+15x4JcOgtJAj/tm5i0H3b0ftV1aPCLZXlw9jSvnudo4Wz3O187ytXFcOc1XT9eavxabl1HxLCycZyvjn/TdF0L9tVzilvXGEm7gcCdtbbgrnUwxiSsjWjqOykd0rZcpD3L1d4X1k9V6jxaSuNQKCm9fK/VvhMr3YoF7CTe+kxov5fVXeFswt0WzqdMWonuQ7gnONon7JO6amYTXt3ltnTebr1DtW7HyQqz9AAqcm020aKQGQyfb3wvCHSPYoX5hn0asiFbY38ju1mm7nN+xB+vmUEFURAQgmyErNgcEEQgAiDJDFBEASFElCUIAVACUB11SZagKgvgFFg4FUWZwKUFNCUpaQGlRSfFQlCQZYyamBSkNNB5gNgGSwgvyA6L6CHqCk6EsQbYsAra3JMoKAEBOpwHPPyAIEhsl6cnDUkBeAP/CCUCECGmGiTUd6wbWDIQwO+d/YeuKghVF/QJ+gmMJltMi1ghSdAbrR4i0/5llqEiy+jUcjeKD/gGQ0HJK0Fgr2rYMcZoHz4H7/Pnvs7Pz2c3izVKKdW+cL5iWy7NSnwH3x59/3d59mlxP3ywt00yuWK5IsvJ4H88wsz+l0+mKD08HNZ2wgiUJsSM9x/wP0Z//iaRvinMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Performance 기록 결과 화면\"\n        title=\"\"\n        src=\"/static/1681089562232.0251107585241/00d43/my-blog-performance.png\"\n        srcset=\"/static/1681089562232.0251107585241/63868/my-blog-performance.png 250w,\n/static/1681089562232.0251107585241/0b533/my-blog-performance.png 500w,\n/static/1681089562232.0251107585241/00d43/my-blog-performance.png 1000w,\n/static/1681089562232.0251107585241/aa440/my-blog-performance.png 1500w,\n/static/1681089562232.0251107585241/56e36/my-blog-performance.png 1750w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Performance 기록 결과 화면</p>\n<p>엄청난 양의 데이터로 인해 뭐부터 봐야할지 감이 안 잡힐 수도 있습니다. 천천히 하나씩 들여다 보며 이해\n해보겠습니다.</p>\n<h3 id=\"cpu-utilization--filmstrip\" style=\"position:relative;\"><a href=\"#cpu-utilization--filmstrip\" aria-label=\"cpu utilization  filmstrip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU Utilization &#x26; FilmStrip</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZklEQVR42hXFCwrCMBQEwB7HlLzdbH6mJSIVEalg7n8bIwzMElC9k5nc6r3HJCVDwFyRlELO8ZrUaJmY0uroLgDysmN0fJMOYzZWqhkS2Wp8lvgoOnocN43NXn987+HcePZw3svnB31WGFymD9SOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Timeline\"\n        title=\"\"\n        src=\"/static/1681089562233.096107585245/00d43/performance-timeline.png\"\n        srcset=\"/static/1681089562233.096107585245/63868/performance-timeline.png 250w,\n/static/1681089562233.096107585245/0b533/performance-timeline.png 500w,\n/static/1681089562233.096107585245/00d43/performance-timeline.png 1000w,\n/static/1681089562233.096107585245/aa440/performance-timeline.png 1500w,\n/static/1681089562233.096107585245/ab40b/performance-timeline.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Timeline</p>\n<p>상단의 CPU 타임라인에선 Critical Rendering Path(Javascript, style, layout, paint, composite)과 ajax\n호출 등을 보여줍니다. 주로 JavaScript(노란색) 및 레이아웃 작업(보라색)과 같은 다양한 유형의 작업으로\n인해 CPU가 얼마나 열일하는지 봅니다. 사진에서 보이듯 CPU 활동은 처음 활동을 시작한 후 상당히 조용해\n집니다.</p>\n<p>중앙의 FilmStrip은 왼쪽부터 시간순으로 나열되며 프레임 스크린샷을 통해 각 순간의 사이트가 어떤 모습\n인지 볼 수 있습니다. 이러한 애플리케이션의 시각적 상태는 “screenshot” 옵션을 체크했을 때만 존재합니\n다. FilmStrip 위로 마우스를 가져가면 해당 시점의 스크린샷을 크게 볼 수 있습니다.</p>\n<p>하단 부분은 애플리케이션의 메모리 추세를 보여줍니다. 위 예시 사진에서 메모리가 증가하고 잠시 후 감소\n하는 것을 볼 수 있습니다. 일반적으로 가비지 컬렉션 프로세스가 발생할 때까진 메모리가 증가합니다.</p>\n<h3 id=\"user-timing-metrix\" style=\"position:relative;\"><a href=\"#user-timing-metrix\" aria-label=\"user timing metrix permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>User Timing metrix</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 813px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.200000000000003%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPElEQVR42gExAc7+ACQlKCUmKiQkKDU4QmRoc19jbGFlb2FaRnpzXzw8OlBXU2ZsZmpuc2JpZ2NoY1hdXzQ2NigoMCIhKBEQFgBGSEpqbmxnbGeVn5bF0crI1M3N2dPGx6HR07Cws63N0czQ1c/KzMrR087L1cPBzraYoo1+iHh/iXh6hHMAPkFCVlpYYmZje4N6a3Noa3NoanFmbHVyZW5nd3dwcm50Z2RqaWhsdnl+lJGokZKnjJCanZ6ym5uwnp6zACoqLjo7Pzk6PRkZHhQTGBUVGhQUGxIREx8oPCU6Wyg+NCxBMSsqIzMXGTUxUT83XS0oQzoyV0dFZEQ/YQAiIyYuLzIwMjQiIyYkJSgjJCcjJSghISEtOU46U3g5U0U5Uz48OzNHJygbIB4cHxwfISAbHhsrMykkKyMp/WsbrDCqYwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"로딩에 관한 지표들\"\n        title=\"\"\n        src=\"/static/1681089562233.2878107585246/baaa6/performance-timing.png\"\n        srcset=\"/static/1681089562233.2878107585246/63868/performance-timing.png 250w,\n/static/1681089562233.2878107585246/0b533/performance-timing.png 500w,\n/static/1681089562233.2878107585246/baaa6/performance-timing.png 813w\"\n        sizes=\"(max-width: 813px) 100vw, 813px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>로딩에 관한 지표들</p>\n<p>타이밍 레인에는 FP, DCL, L 등 이벤트도 표시됩니다.</p>\n<p>자세히 설명하자면 이 글이 너무 길어지고 내용이 산으로 갈 것 같아 각 지표들의 의미만 살펴보고 넘어가\n겠습니다.<br>\n해당 부분에 대한 건 따로 다른 글에서 자세히 설명하겠습니다.</p>\n<ul>\n<li>FP (First Paint): 페이지 네비게이션 후, 첫 픽셀을 그린 순간</li>\n<li>FCP (First Contentful Paint): 첫 엘리먼트를 그린 순간</li>\n<li>LCP (Largest Contentful Paint): 가장 큰 엘리먼트를 그린 순간</li>\n<li>DCL (Dom Content Loaded): DOM Tree를 구성하고, 스크립트(+ defer 스크립트)를 실행 완료했을 때 →\ndefer 스크립트가 없다면 FP 전에 DCL이 올 수 있습니다.</li>\n<li>L (Load): 다큐먼트의 리소스들을 모두 로드 완료했을 때</li>\n</ul>\n<h3 id=\"cpu-flame-chart\" style=\"position:relative;\"><a href=\"#cpu-flame-chart\" aria-label=\"cpu flame chart permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU flame chart</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABV0lEQVR42jWLXU+CYBiG+QEtax2UW5oftOUXLgp94UVEeQEBCdQsyjUzE3VIrq2f4DxSbKuTTqwO+p+9ubVdu5/rvreHmM9X728/wfJjFXyull/BAidmHSzWG/kD+39dvwbfs1ngv4wmzy4BxKaArkXlBmm3DHcBBJsG9QK0irxFAwNTgCYUba682XmLgRbN6mSGIzOQSPP3XK0Ptb7U8EvGpGL7ZcuTbA81nqDuQ2OMGr5xNZXsKatN2JoHda9Yc9N8Nw3viBjVKojdLHAEdcRJLi+PeMXl5EFJGWMpqQOhNkTmBFe26rLSGFTdaK65dYRCMUREsgZ5Wo9SZh42mXKbrXYAegDyY6HiFCsOp/RK+lDUe6ByyQhtKFkUZ4ZTeiiu7CRkYjeBj7qfMg9zVoQyybNWkm4k6VY0bx2fO2m2kyo6eDw40cIpNZKr75FqKCZv4+c4+gUZGG3RCsnSFwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Flame chart\"\n        title=\"\"\n        src=\"/static/1681089562232.488107585243/00d43/performance-flamechart.png\"\n        srcset=\"/static/1681089562232.488107585243/63868/performance-flamechart.png 250w,\n/static/1681089562232.488107585243/0b533/performance-flamechart.png 500w,\n/static/1681089562232.488107585243/00d43/performance-flamechart.png 1000w,\n/static/1681089562232.488107585243/aa440/performance-flamechart.png 1500w,\n/static/1681089562232.488107585243/ab40b/performance-flamechart.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Flame chart</p>\n<p>가장 핵심 부분이라고 생각합니다. 플레임 차트는 기록하는 동안 웹 페이지의 JS 실행을 시각적으로 표현한\n것입니다. <strong>성능 병목 현상이 발생할 수 있는 위치</strong>를 이해하는 데 중요한 부분입니다. 수평 레이어로 구\n성되며 각 레이어는 단일 JS 함수를 나타냅니다. 각 함수 블록의 너비는 함수의 실행 기간을 나타내고 색상\n은 작업 유형(스크립팅, 렌더링, 페인팅…)을 나타냅니다. 그러므로 이 섹션에서 <strong>어떤 함수가 호출되었고\n각 함수가 얼마나 오래 걸렸는지 정확하게 분석</strong>할 수 있습니다.</p>\n<p>위 사진에는 안 나왔지만 Register, GPU, Compositor 등 성능 문제 디버깅에 유용한 섹션들이 있습니다. 몇\n가지 설명드리겠습니다.</p>\n<p><strong>Network 섹션</strong>은 다운로드 요청과 완료 시간을 볼 수 있습니다. 그리고 <strong>Main 섹션</strong>은 렌더러의 메인\n스레드로, 알록달록한 색으로 된 지표들을 통해 프레임의 전체 시간과 프레임을 연장하는 데 가장 큰 영향\n을 미친 기능을 확인할 수 있습니다. 노란색은 자바스크립트가 실행 중임을 나타냅니다.</p>\n<p>이해를 쉽게 돕기 위해 UI 업데이트 또는 CPU 작업과 연관시키는 데 특히 유용한 Network 섹션을 통해\n<a href=\"https://stripe.com/\">Stripe</a> 홈페이지를 디버깅하는 예시를 들어 보겠습니다.</p>\n<p>아래 사진은 폰트 로드가 완료되기 직전의 Stripe 홈페이지입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC50lEQVR42gHcAiP9ADAwMyAgISYlJzc3OCYpKSUmKCAiIyEiJSgpKyooIigpKyIjJB4gISkrLRsdHicpLCYoKh4fISosLyEjJAA2PUhDS1o8RVNQWGdkaXpXWWdgYnFfYHJZXGtmZWxcXW9aXWxZW2pXWmpYWmpISFNJSVRKSVRISFJKSVQAP0FHP0JJQEJKODtCoqSu19bhz87bzMzYxsXQzsvNyMfTyMfTyMjSx8bSyMfSwb/Iw8HLw8HLxMLMwsDLACYnLCwuMissMCUnKzU6PzU4QDI3QDxASzI1OTw4NTY0ODEwNDMyNjQ1OS8yODI2PDQ4PTEyNzU2OTY4OgAjKDQrMT80OUkrL0AzN0c1OUknKzsxNkY0NUSdQV22UXykXY+fcqqVeMGPdsWdf7OzipXHkWzRpGLUs2UAlqzCmK7JhaGza46UZ4mRaIuRcJWYdZyfcI+SsHGdv43DsJ3Zp5fmn4XlqX/TuYu9zpie6quA9Lpz9sV2AKCfpKCepHR3dDxFOF1kW2BmXVBZTDE7KTU+L5GfyKW8+J+k8Ix+34Zs1ZB0zZZ/u7Khv8W2wLyvsd7W1gArLDAsLTIhIiZqZ3a+uNDEvtWWkKYVFRshIimMiMmojuyket6NbM1zZ8Jxd9F1ktqJt+eYyO6o0fXK2esAIiInIiMoFRYYaGZz0s3i1M7kmZanFxobJiYqnleVvWCqtmirlGmagHOggIy+lbnXl7bOqb3P2N7k7u/xAFlfWlxjXVtiW2RnaWlkdG5reFxbZSEjJickKbZZduCLqOCyyNrI1NnX3Nra3t3b3dTQ09zZ2uPh5Pj4+gBnb2Ztdmxze3JWZFcsQi8fKCIXFxoiJCYyNzXZ1tX//////v7v8fLo6+z6+/v4+vn8/f3+///+/f7v8PIAFBQZEhIXERAWHSEhLjsyJywrIyMnHyEjKi4u2dra////////19nd0NTZ/P38/f39/v7+/f39////5OXoVxdfwiCa7CoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stripe example\"\n        title=\"\"\n        src=\"/static/1681089562235.117107585248/00d43/stripe-not-loaded.png\"\n        srcset=\"/static/1681089562235.117107585248/63868/stripe-not-loaded.png 250w,\n/static/1681089562235.117107585248/0b533/stripe-not-loaded.png 500w,\n/static/1681089562235.117107585248/00d43/stripe-not-loaded.png 1000w,\n/static/1681089562235.117107585248/84bf8/stripe-not-loaded.png 1162w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>stripe example</p>\n<p>여기서 UI에 변경 사항이 있으면 네트워크 요청 섹션을 통해 UI 업데이트를 <strong>지연</strong>시키고 있던 <strong>네트워\n크 요청</strong>을 이렇게 식별할 수 있습니다.</p>\n<p>폰트 파일을 로드한 직후의 아래 사진에서 UI가 다운로드한 폰트를 사용해 재렌더링되었음을 확인할 수 있\n습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.199999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9ACUoLy80PDA1Py0yPElPWDY9RiMpMycsNycsNyctNiEmMTA1OisvMiMpNCUrNRwhKR4iKRkcJBwgJxwgKAA/Q0s/Q0xHTVlITllITVmen7C7uMe4tsW4tcWysb+3s8e4tL+5tb+wr8G1s8Svq7mno7GopLCqprKoo7AALzA0LzA0LzA0LjAzKy4wZ2txfoCJe3+JfYGLcnV4Zm9wbXNvcHRuaGtrbG5qbG5sbXBxaGxxaW52aWx1ADM0OCAhJiYoLi4vNiAgKCMkLB0dJhQTHSAiLCccJXIwQ3A4U2g/XWZOcltOflpPemhYb3RaVX1hQ4RxSABRYnxgc4xme5hkfJVeeY1feo9hfJFkf5JjhZdxc4jQY5XHf7e6kNKxlOirieu5jdbOmrjsqYr9vXL/zXAASU1Us7i9vcDHlZ+cTF9LVGdUV2pXV2tWS2NIWmddp6japLbsnaLsj3/dk3PUnnzArY6yyqmtz62c2b6nACgoLDo5QDs6QSgnLFlVY6qjubOrwW9pewsJDDEzQaGp8qKR7Jx74nhhyHNpzXN40ISb1qLG7KDG6bzR7AAdHSEhIiUhIiUWFxlta3jPyuHY0umBfo0QFBI6M0Cyarm0Z7WrbLN9YZhwbqt5l9CFs9mRs9O80uPp8PcAQUVDRkpISU1LRUpHYWFnfnqJiIWTYV9pGB0fPiw2z16G1YGk06fAv7O+ubfDxMjNvLzCwr/E0M3R+vr6AHN8cXR9cnqEeIKLgGBtYC5BMiIpJR8fIhwgIUtLSvnr7f////z8/eLm6Ons7PDw8e/w8vb3+P////T19wAYGBwXFxwVFRoUExkfJCQvPjQmKyoiIiYaHB5ITEz+/v7////6+vrIzNHo6uz9/f39/f3+/v7////08/ZpGj2cguMcPAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stripe example2\"\n        title=\"\"\n        src=\"/static/1682400641215.82112973136/00d43/stripe-loaded.png\"\n        srcset=\"/static/1682400641215.82112973136/63868/stripe-loaded.png 250w,\n/static/1682400641215.82112973136/0b533/stripe-loaded.png 500w,\n/static/1682400641215.82112973136/00d43/stripe-loaded.png 1000w,\n/static/1682400641215.82112973136/a13c9/stripe-loaded.png 1178w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>stripe example2</p>\n<h3 id=\"memory\" style=\"position:relative;\"><a href=\"#memory\" aria-label=\"memory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Memory</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAr0lEQVR42k3N22rDMAwG4DzHklqWrJOdntJuvWk3Ci0OLfT9X2fucjP4+BHoR+qm423cz2U/76b7vB1rWdevcnltPx+Ha909v9f1Z3qcT3VTr2XOukliopnFW3YBEgBBbNIH2ECKbsPKw8qHkHvwPmgg6yP0EFonkv+xpsNkmLQhViJmY/UcUSMxJqd2C5NIptZGB8pABiiLTtv/f6wIsyAteEmRIjq+D/N7y6LL8Av+2yUIPimhrwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Memory Image\"\n        title=\"\"\n        src=\"/static/1681089562232.7012107585244/00d43/performance-memory.png\"\n        srcset=\"/static/1681089562232.7012107585244/63868/performance-memory.png 250w,\n/static/1681089562232.7012107585244/0b533/performance-memory.png 500w,\n/static/1681089562232.7012107585244/00d43/performance-memory.png 1000w,\n/static/1681089562232.7012107585244/aa440/performance-memory.png 1500w,\n/static/1681089562232.7012107585244/ab40b/performance-memory.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>DOM 노드, 리스너 및 기타 메트릭이 이 차트에 요약되어 있습니다.</p>\n<p>DOM 노드, 리스너 및 기타 메트릭이 이 차트에 요약되어 있습니다. 색상별로 노드, 리스너 등을 구분할 수\n있습니다. 이 부분에서 앱의 추세를 볼 수 있으며 주로 <strong>메모리 누수를 추적</strong>할 때 유용하게 사용할 수있\n습니다.</p>\n<h3 id=\"cpu-activity-breakdown\" style=\"position:relative;\"><a href=\"#cpu-activity-breakdown\" aria-label=\"cpu activity breakdown permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU activity breakdown</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 632px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACpElEQVR42l1SS08TURSevaAkiJROZ9pO23ncO3M7nXamL/rEVqApihADGhMTJRgfiRujBuPCHQsQNHEhkfgHXGBcSwiuYWeiSyWphvhYIDvEbzoEDcnXyXd7znfOvd85HM/7KaWMGTzPBwLiQG2oWD6dL1Sy+SKhrFgeaKMKnusvl6u1XL6UyRVUTdeIwfEBkecFQBCCISlqxC3kIUD0uKxSrc3xPeBt0HYI4JJ2Bq1QNW6mVGLY6bzBEsFQBAiFox45wr0jwOEXiSrRmCpFYmHpAF7sEMgWg1JYcjkI4Ok5LwxBQAgLIjLkcDh2RGkwS9dZY+JOujhsGCyTK+qGiRIcZHwg1NPrJ9TQCPHzfYIYOmwOJS5F2m9ujgxnsjlC46ZlU91ECIYFE5a98ubtzx/fvmzMzz6cVVVHEEVPj/KwwEo5smZOXy7UqrbO7JSTgd69Nh68sbm5vf19Zmbm7q3x10sfnzxew/NQGHp8YbuZsBWNNOrT2cwgSpmWk7AcWSHcjZu39/b+1M8MdR7vPtHty2cbK8u/moNXff4+KSJDjFFhfqpG6/Vx2ynqLIGbsnjSFc/NzW9tbUVlbbg5WqnWqMGeL65eu/LolK9XiigQyzJBH0LMwYlyuuQwlrLTOZSANdzU1PX9/f2Rs6PHOro6OrvOj1349PlDc2zE5wt4nWOyBrdjCpm8eKlYqmiExRMpWaHumxFeX3+/s/N7YeHp4uKz3d3d1XdrweDB/BBVVOpmq3Ri0hXrDPZlUct1OyCEMKTl5Vet1tdWq/Vi6aVKdPzpKdHcSqZhWEwm9+4/aDbPUcP0dsbtjCRBDJ/s8SEPAMHxcM4giaSDzYXnugGYbZ/pvw1DBmTe3mFy/28IjqVKrb9QsZ2cnxfhMI7MTHqd/wKdScdWyb3W0wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Aggregated task breakdown\"\n        title=\"\"\n        src=\"/static/1681089562232.2976107585242/084e2/performance-cpu.png\"\n        srcset=\"/static/1681089562232.2976107585242/63868/performance-cpu.png 250w,\n/static/1681089562232.2976107585242/0b533/performance-cpu.png 500w,\n/static/1681089562232.2976107585242/084e2/performance-cpu.png 632w\"\n        sizes=\"(max-width: 632px) 100vw, 632px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Aggregated task breakdown</p>\n<p><code class=\"language-text\">Summary</code> 탭에서는 특정 CPU 작업을 선택하지 않은 경우, CPU 작업 내역이 다음 4가지 범주로 분류되어 표\n시됩니다.</p>\n<ul>\n<li><strong>Loading</strong>: 네트워크 요청 및 HTML 파싱</li>\n<li><strong>Scripting</strong>: JS 코드 파싱, 컴파일링 및 실행, 가비지 컬렉션(GC) 포함</li>\n<li><strong>Rendering</strong>: 스타일 및 레이아웃 계산</li>\n<li><strong>Painting</strong>: 이미지 페인팅, 합성, 리사이징 및 디코딩</li>\n</ul>\n<p>다른 쓰레드를 클릭하거나 위쪽 및 아래쪽 화살표 방향키를 사용해서 다른 쓰레드를 선택할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 818px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 116.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAIAAACEf/j0AAAACXBIWXMAAAsTAAALEwEAmpwYAAADt0lEQVR42o1Ta28UZRSeL0YapCC1te3u3Gdn57Lzzv3S7rK7tixLAQmg1a4IpjWpEiMa27SNsZpAjNXE2wejpAYN2hSKdk1Y2q2t0K0aSpNaSaOCEsMHid/9BZ7prMu6hsTkyZMz75xnznnecwZb+vzF5anB5amBta+Gfp0b/mXG59ulkYunBlv43uHjz7/y0gu00qs4/YrzbAXIPQaMnftoYf6LYmFidvbs3Mrc6rXLP60uXLuxfPPU+5NYgxeSO0NSx6Zwui6c3FSFOjwFjJ2fWDl3Zuni9I/5sysz0+vfL/xRmru1svjn2Fj+3tbUFiq7mchsY7Jb6V3VCE6wN8emLhXWS7PXV5duL1+6tTjz85WFm7+v/fXu29P3tCTvZyA1A3n1VKYawQn2+NETF6aunBkvFs5fzU+WZvNrff2vDw6Nj756GioHSXcVH+oZulxYg8rzF9YP9ozoO3pbpX3N4j4j+eRmvHMr5FGZbXcTG8mnPhn/ZvKzq91HTpDoEeyB+HZuTz29uy7cAW63kLsCvm+DK6inssBYE6E100ZDOIZHXM3t4mJpRk7R0o4I6uCUNCUmggBOiGh7DTCSwCMci+Mhnufb2xOO4xqmqWm657XZtqsoyIXAP7REUZIkuRrY3oyNNFPTbVWzRBnhBE3RHICkfKaZCEmxJF2Oa4CZlqnqFlINSUa66QAH4v8DTI7pUFOKqYKkyDGVj0pQiqKhms8UlKV8LqNGrCAQmyCDAD4BRwwXZdh/wAk+yo8CtFpTWdUMW5QUpPrODcsFWO3ZtvQBO97lJh/2kvvtxB4vfcBL7Y9EFZJi7oihz6gggxjAC1JwE1CH5crgIkEgsH5HfDUwy2lzvbisGFwUQf+QSm743ACDE0xLiCFJCGiCZAD/arullaBY6fATuZ5DKcgIE0zFGMfLho52d+pREcUUDQzCLKr1mKWLi4UP5r8u/lAcKU4c56MCQbI0A1PlopIab7OOdCdkxTRMBwap6jbYpCviT997evrjY61hFjx8lx84Ody9vRFnWLDNy8jwPO/g3p1Is8CdpluwEXCpldaw0pcD/UezIVJqCgknhx+d/PCZhiYCxPCOF0TDSGQeOizFEGjkmAa+Kivoi994+TFo2LXVnWnnt29fe66vC8SsL2Z5QY4nkrlcLoZ0mB/L8sGS3hHDw+l3+m6URq+XRt8azYVwuDBYbBYGAwJZ0WCQjhuH/SH/u2Fw143NpKErSJEbHyTLLyjOLywpkYgAf4gooWCENeK/ASmMSPlwemSIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"스크린샷 2023-04-08 오전 3.47.37.png\"\n        title=\"\"\n        src=\"/static/1681089562228.579107585238/64d87/any-function-call.png\"\n        srcset=\"/static/1681089562228.579107585238/63868/any-function-call.png 250w,\n/static/1681089562228.579107585238/0b533/any-function-call.png 500w,\n/static/1681089562228.579107585238/64d87/any-function-call.png 818w\"\n        sizes=\"(max-width: 818px) 100vw, 818px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 사진은 flame chart에서 특정 Function Call을 선택했습니다. 하단의 Aggregated Time은 해당 Function\nCall의 CPU 분석을 보여줍니다. 또한 링크(Graient~~~ )를 클릭하면 개발 도구의 소스 패널에 있는 코드 줄\n로 이동합니다.</p>\n<hr>\n<p><code class=\"language-text\">Bottom-Up</code> 탭에서는 CPU 활동에 대한 보다 세분화된 분석을 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABs0lEQVR42m2S2XLjIBRE9Se2JCQEiEXsAi2RvKacxElmKk8z//8bQ/I0sUOdJ+p23e6GzPmxhqQogDK91J53lnKFMCUt/xGE20SDCGUii72dBuudmqfYezNEO0+DkBYTVtWohvgbDenMrNyi/Sr0kEHYnFY99wQT6p1ZRrFbQlGiTV5ucvCdclvWbnoJ66+4+5D+mJUAKaWtxA1mxqg58MMaK0jyNHpHXgCup86t0u/bLmSoFcrGLp0UWIUhmrfrmclQAJTfU2FuVtWfVDhTOWcNcdKdUnohnXVxGtz766Ptl7LCedncsC1gv7xPpz/z+a+dnrMKMioiQoRQ3nLpBDuugQlTgnqzLW5spxsdzn6+9g+vyXxWQ8Q71aCWUNEyZQU9rCG5AFWz2SYBuEH6gx0udnzq7JrB1L5ypGWUd5Sb3snr00KFze9kn4WVdVKmthOd3X2K5ZeYcRWDn6N5vlzCuJYA3m/Oi9rPL3H/Me5/u3hItjETipDWaD5GPQZ52D3YfmRcFmX9FfV/cQUqnF4X1LiCOEufhnc67cctx1RqJY77SJiCDU6j984hFg1RCQDpPzW5gnmQy6QYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"bottom-up.png\"\n        title=\"\"\n        src=\"/static/1682400641213.6167112973135/00d43/bottom-up.png\"\n        srcset=\"/static/1682400641213.6167112973135/63868/bottom-up.png 250w,\n/static/1682400641213.6167112973135/0b533/bottom-up.png 500w,\n/static/1682400641213.6167112973135/00d43/bottom-up.png 1000w,\n/static/1682400641213.6167112973135/aa440/bottom-up.png 1500w,\n/static/1682400641213.6167112973135/d3deb/bottom-up.png 1758w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 사진처럼 하위 수준의 함수를 확장해서 어떤 코드가 함수를 호출하는지 확인할 수 있습니다. 이렇게 하\n면 제어할 수 있는 코드를 찾는 데 도움됩니다.</p>\n<hr>\n<p><code class=\"language-text\">Call Tree</code> 탭은 기록하는 동안 실행된 JS 함수의 계층적 표현입니다. 호출 트리는 가장 시간이 많이 걸리\n는 기능을 식별하는 데 도움이 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.400000000000006%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABN0lEQVR42mWQ607CQBCF+xyCofS691v3UnZbbUsFQUzw/V/GBRJFSc6fmck3c+Yk1gXKpFCGMFmUtVSWEAEhgYhiwh+FML2JMpEY57lohJDj2LfOdKENXcelEVJHHkByr9ih3DBhmXCU6yTWSreUkO2rPB+d1WQ/h9CPlKt0XdxrleZ5AYUdpZ1U+4b5JgGIisYWFbZafB0MBBVjaJ4CwCLLy39wVgDTHd3L52Y8xy1JNCMbV9UIIOY3hhKwWGa9l13nV+nD5RLd4HY4CzMkELNGt1WNMZVKOwDg4jlzhp0+ZkRUBH75eDmvm3ZnwsH2J9b0SQwwZlZF90x57yGET8v0fWt3+722oazgH35dMtVff54xd5efZWOrCiEig3cI1QA026nz3cCFjtMf+BoY4Ga4ZOYmRM03hq5XJb1W2d0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"호출 트리\"\n        title=\"\"\n        src=\"/static/1681089562231.061107585240/00d43/call-tree.png\"\n        srcset=\"/static/1681089562231.061107585240/63868/call-tree.png 250w,\n/static/1681089562231.061107585240/0b533/call-tree.png 500w,\n/static/1681089562231.061107585240/00d43/call-tree.png 1000w,\n/static/1681089562231.061107585240/aa440/call-tree.png 1500w,\n/static/1681089562231.061107585240/c830c/call-tree.png 1754w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>호출 트리</p>\n<p>위 사진에서 보이듯이 하향식 구조로 구성되며 시간이 가장 많이 걸리는 기능이 맨 위에 표시됩니다. 각 기\n능은 총 시간, 자체 시간 및 호출 횟수와 함께 나열됩니다.</p>\n<p>플레임 차트와 호출 트리 모두 JS 함수 실행에 대한 통찰을 제공하지만 서로 다른 방식으로 정보를 제공하\n고 다른 용도로 사용됩니다. 각 차트의 설명은 위에서 했으니, 둘 사이의 차이점과 각각의 장점을 살펴보겠\n습니다.</p>\n<p><code class=\"language-text\">플레임 차트</code>의 장점</p>\n<ul>\n<li>성능 문제를 일으킬 수 있는 장기 실행 함수 또는 코드 블록을 <strong>빠르게 식별</strong>할 수 있습니다.</li>\n<li>서로 다른 기능 간의 관계와 실행 순서를 보여줍니다.</li>\n</ul>\n<p><code class=\"language-text\">호출 트리</code>의 장점</p>\n<ul>\n<li>실행 시간 측면에서 가장 비용이 많이 드는 기능을 식별하는 데 도움이 되므로 <strong>최적화 작업의 우선 순\n위</strong>를 쉽게 지정할 수 있습니다.</li>\n<li>함수별 호출 횟수를 보여주기 때문에 필요 이상으로 <strong>자주 호출</strong>될 수 있는 함수를 정확히 찾아낼 수있\n습니다.</li>\n<li>함수 실행에 대한 집계 보기를 제공하여 전체 성능 비용에 대해 보다 명확한 관점을 제공합니다.</li>\n</ul>\n<p>따라서 플레임 차트는 JS 실행에 대해 시간순의 시각적 개요를 제공하는 데 탁월한 반면, 호출 트리는 반복\n되는 코드 호출을 집계하므로 평균적으로 어디서 시간이 소요되는지 쉽게 확인할 수 있습니다. 이렇듯 모두\n고유한 장점이 있으며 함께 사용하면 성능 병목 현상을 보다 효과적으로 식별하고 해결하는 데 도움이 될수\n있겠죠.</p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>이 외에도 웹 바이탈과 프레임 등 다양한 항목도 표시할 수 있는 좋은 기능들을 제공합니다.</p>\n<p>이제 Performance 탭에서 성능 결과 보고서를 보고 이해할 수 있을 겁니다. 당연하겠지만 보다 편안하게 사\n용하려면 연습밖에 없습니다. 본인이 만든 웹 페이지를 프로파일링하고 결과를 분석해보세요. 그러다보면웹\n애플리케이션의 성능 병목 현상을 식별하고 해결할 수 있을 겁니다.</p>\n<p>마지막으로 런타임 성능을 향상시키는 방법에는 여러 가지가 있습니다. 몇 가지 일반적인 최적화 전략은 다\n음과 같습니다.</p>\n<ul>\n<li>JavaScript의 실행을 최적화 (rAF 메소드를 사용한다던가, 오래 실행되는 JS를 메인 스레드에서 웹 워커\n로 이동한다던가 말이죠)</li>\n<li>캐싱, 압축 및 CDN을 활용하여 네트워크 요청을 최적화</li>\n<li>스타일 계산의 범위와 복잡성 감소</li>\n</ul>\n<p>프론트엔드 개발자라면 꼭 이러한 방법들을 숙지하시면 좋을 것 같습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li><a href=\"https://tv.naver.com/v/23652467\">https://tv.naver.com/v/23652467</a></li>\n<li><a href=\"https://www.debugbear.com/blog/devtools-performance\">https://www.debugbear.com/blog/devtools-performance</a></li>\n<li><a href=\"https://yonatankra.com/how-to-profile-javascript-performance-in-the-browser/\">https://yonatankra.com/how-to-profile-javascript-performance-in-the-browser/</a></li>\n<li><a href=\"https://developer.chrome.com/docs/devtools/performance/\">https://developer.chrome.com/docs/devtools/performance/</a></li>\n</ul>",
      "cpu-activity-breakdown#CPU activity breakdown": "<p>성능 문제가 발생했을 때 해결하려면 웹 애플리케이션을 프로파일링하고 모니터링하는 방법을 알아야 합니\n다.</p>\n<p>웹 성능을 측정하는 방법들은 Lighthouse, Chrome DevTools Performance Tab, PageSpeed Insights 등 여러\n가지가 있습니다. 이 중, <strong>DevTools의 Performance를 이용</strong>해 세부적으로 웹의 동작을 들여다 보겠습니다\n. 그리고 웹 애플리케이션의 성능을 분석하고 개선하는 방법을 알아보겠습니다.</p>\n<h2 id=\"성능을-기록하는-방법\" style=\"position:relative;\"><a href=\"#%EC%84%B1%EB%8A%A5%EC%9D%84-%EA%B8%B0%EB%A1%9D%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"성능을 기록하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>성능을 기록하는 방법</h2>\n<ul>\n<li>Chrome 브라우저를 엽니다.</li>\n<li>분석하려는 웹 페이지를 로드합니다.</li>\n<li>페이지의 아무 곳에 마우스 오른쪽 버튼을 클릭해서 <code class=\"language-text\">검사</code>를 선택하거나 <code class=\"language-text\">Crtl+Shift+I</code>\n(Windows/Linux) 또는 <code class=\"language-text\">Cmd+Opt+I</code> (Mac)를 눌러 개발자 도구를 엽니다.</li>\n<li>개발자 도구의 <code class=\"language-text\">Performance</code> 탭을 클릭합니다.</li>\n<li>Performance 탭에서 <code class=\"language-text\">기록</code> 버튼(원 아이콘)을 클릭하거나 <code class=\"language-text\">Crtl+E</code> (Windows/Linux) 또는 <code class=\"language-text\">Cmd+E</code> (Mac)\n를 누릅니다.</li>\n<li>분석하려는 작업(성능 문제를 일으킬 것 같은 시나리오)을 수행한 다음 <code class=\"language-text\">중지</code> 버튼을 클릭하여 기록을중\n지합니다.</li>\n<li>기록이 완료되면 Chrome DevTools가 웹 페이지 성능에 대한 자세한 보고서를 표시합니다.</li>\n</ul>\n<h2 id=\"웹-페이지-성능-보고서를-보고-이해하는-방법\" style=\"position:relative;\"><a href=\"#%EC%9B%B9-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%84%B1%EB%8A%A5-%EB%B3%B4%EA%B3%A0%EC%84%9C%EB%A5%BC-%EB%B3%B4%EA%B3%A0-%EC%9D%B4%ED%95%B4%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"웹 페이지 성능 보고서를 보고 이해하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>웹 페이지 성능 보고서를 보고 이해하는 방법</h2>\n<p>이제 아래 사진처럼 성능에 대한 자세한 보고서를 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAADXElEQVR42o2Ua1MbNxSG9xc0bdpJJrTYu6tdaVd709619tpgfLe5B9trY2xTphDAhTQYGztTIF/afkj/cwVMOp3mCzPPaDSvznukI80R5weR70euFzpuYJg2Q8WG5xDXpzSkQcBExyIuCyC2R4jHRhaDsWlaPmd7zJ4JozigWc+PHC80iaubjh9mgij2gkg3CTZMk9gmcSzbNW0H6yYTVc3gPCsmWkQMX9V0w7BYlOf5luXYxHcd3yFe4NJMkA+c2LWoZ1HHDC3d07Hj2hEX6nVXrehqBmILqgSqtoQMCC0Lrxg4Z6gZV616qG6ALEErFszb6pqLS75Wjt0a19jcOhmPp4u73ybz6fz+iZvFp8n8dra4v765nX28v57/fjVbTOe3V9OPs8Xd5WRyfvXu8HjANdZb7eTk6OfF6PB6NJx2k8te9327ddFL3ifJRad9kbQvmNLf/9B5nPS6Hza3hmEuT+M8V9z6RYu7QWk/boxyzcOgPMzWh2G5n2uMouqArPai6sFqc1jYPLJX+15x4JcOgtJAj/tm5i0H3b0ftV1aPCLZXlw9jSvnudo4Wz3O187ytXFcOc1XT9eavxabl1HxLCycZyvjn/TdF0L9tVzilvXGEm7gcCdtbbgrnUwxiSsjWjqOykd0rZcpD3L1d4X1k9V6jxaSuNQKCm9fK/VvhMr3YoF7CTe+kxov5fVXeFswt0WzqdMWonuQ7gnONon7JO6amYTXt3ltnTebr1DtW7HyQqz9AAqcm020aKQGQyfb3wvCHSPYoX5hn0asiFbY38ju1mm7nN+xB+vmUEFURAQgmyErNgcEEQgAiDJDFBEASFElCUIAVACUB11SZagKgvgFFg4FUWZwKUFNCUpaQGlRSfFQlCQZYyamBSkNNB5gNgGSwgvyA6L6CHqCk6EsQbYsAra3JMoKAEBOpwHPPyAIEhsl6cnDUkBeAP/CCUCECGmGiTUd6wbWDIQwO+d/YeuKghVF/QJ+gmMJltMi1ghSdAbrR4i0/5llqEiy+jUcjeKD/gGQ0HJK0Fgr2rYMcZoHz4H7/Pnvs7Pz2c3izVKKdW+cL5iWy7NSnwH3x59/3d59mlxP3ywt00yuWK5IsvJ4H88wsz+l0+mKD08HNZ2wgiUJsSM9x/wP0Z//iaRvinMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Performance 기록 결과 화면\"\n        title=\"\"\n        src=\"/static/1681089562232.0251107585241/00d43/my-blog-performance.png\"\n        srcset=\"/static/1681089562232.0251107585241/63868/my-blog-performance.png 250w,\n/static/1681089562232.0251107585241/0b533/my-blog-performance.png 500w,\n/static/1681089562232.0251107585241/00d43/my-blog-performance.png 1000w,\n/static/1681089562232.0251107585241/aa440/my-blog-performance.png 1500w,\n/static/1681089562232.0251107585241/56e36/my-blog-performance.png 1750w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Performance 기록 결과 화면</p>\n<p>엄청난 양의 데이터로 인해 뭐부터 봐야할지 감이 안 잡힐 수도 있습니다. 천천히 하나씩 들여다 보며 이해\n해보겠습니다.</p>\n<h3 id=\"cpu-utilization--filmstrip\" style=\"position:relative;\"><a href=\"#cpu-utilization--filmstrip\" aria-label=\"cpu utilization  filmstrip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU Utilization &#x26; FilmStrip</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZklEQVR42hXFCwrCMBQEwB7HlLzdbH6mJSIVEalg7n8bIwzMElC9k5nc6r3HJCVDwFyRlELO8ZrUaJmY0uroLgDysmN0fJMOYzZWqhkS2Wp8lvgoOnocN43NXn987+HcePZw3svnB31WGFymD9SOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Timeline\"\n        title=\"\"\n        src=\"/static/1681089562233.096107585245/00d43/performance-timeline.png\"\n        srcset=\"/static/1681089562233.096107585245/63868/performance-timeline.png 250w,\n/static/1681089562233.096107585245/0b533/performance-timeline.png 500w,\n/static/1681089562233.096107585245/00d43/performance-timeline.png 1000w,\n/static/1681089562233.096107585245/aa440/performance-timeline.png 1500w,\n/static/1681089562233.096107585245/ab40b/performance-timeline.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Timeline</p>\n<p>상단의 CPU 타임라인에선 Critical Rendering Path(Javascript, style, layout, paint, composite)과 ajax\n호출 등을 보여줍니다. 주로 JavaScript(노란색) 및 레이아웃 작업(보라색)과 같은 다양한 유형의 작업으로\n인해 CPU가 얼마나 열일하는지 봅니다. 사진에서 보이듯 CPU 활동은 처음 활동을 시작한 후 상당히 조용해\n집니다.</p>\n<p>중앙의 FilmStrip은 왼쪽부터 시간순으로 나열되며 프레임 스크린샷을 통해 각 순간의 사이트가 어떤 모습\n인지 볼 수 있습니다. 이러한 애플리케이션의 시각적 상태는 “screenshot” 옵션을 체크했을 때만 존재합니\n다. FilmStrip 위로 마우스를 가져가면 해당 시점의 스크린샷을 크게 볼 수 있습니다.</p>\n<p>하단 부분은 애플리케이션의 메모리 추세를 보여줍니다. 위 예시 사진에서 메모리가 증가하고 잠시 후 감소\n하는 것을 볼 수 있습니다. 일반적으로 가비지 컬렉션 프로세스가 발생할 때까진 메모리가 증가합니다.</p>\n<h3 id=\"user-timing-metrix\" style=\"position:relative;\"><a href=\"#user-timing-metrix\" aria-label=\"user timing metrix permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>User Timing metrix</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 813px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.200000000000003%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPElEQVR42gExAc7+ACQlKCUmKiQkKDU4QmRoc19jbGFlb2FaRnpzXzw8OlBXU2ZsZmpuc2JpZ2NoY1hdXzQ2NigoMCIhKBEQFgBGSEpqbmxnbGeVn5bF0crI1M3N2dPGx6HR07Cws63N0czQ1c/KzMrR087L1cPBzraYoo1+iHh/iXh6hHMAPkFCVlpYYmZje4N6a3Noa3NoanFmbHVyZW5nd3dwcm50Z2RqaWhsdnl+lJGokZKnjJCanZ6ym5uwnp6zACoqLjo7Pzk6PRkZHhQTGBUVGhQUGxIREx8oPCU6Wyg+NCxBMSsqIzMXGTUxUT83XS0oQzoyV0dFZEQ/YQAiIyYuLzIwMjQiIyYkJSgjJCcjJSghISEtOU46U3g5U0U5Uz48OzNHJygbIB4cHxwfISAbHhsrMykkKyMp/WsbrDCqYwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"로딩에 관한 지표들\"\n        title=\"\"\n        src=\"/static/1681089562233.2878107585246/baaa6/performance-timing.png\"\n        srcset=\"/static/1681089562233.2878107585246/63868/performance-timing.png 250w,\n/static/1681089562233.2878107585246/0b533/performance-timing.png 500w,\n/static/1681089562233.2878107585246/baaa6/performance-timing.png 813w\"\n        sizes=\"(max-width: 813px) 100vw, 813px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>로딩에 관한 지표들</p>\n<p>타이밍 레인에는 FP, DCL, L 등 이벤트도 표시됩니다.</p>\n<p>자세히 설명하자면 이 글이 너무 길어지고 내용이 산으로 갈 것 같아 각 지표들의 의미만 살펴보고 넘어가\n겠습니다.<br>\n해당 부분에 대한 건 따로 다른 글에서 자세히 설명하겠습니다.</p>\n<ul>\n<li>FP (First Paint): 페이지 네비게이션 후, 첫 픽셀을 그린 순간</li>\n<li>FCP (First Contentful Paint): 첫 엘리먼트를 그린 순간</li>\n<li>LCP (Largest Contentful Paint): 가장 큰 엘리먼트를 그린 순간</li>\n<li>DCL (Dom Content Loaded): DOM Tree를 구성하고, 스크립트(+ defer 스크립트)를 실행 완료했을 때 →\ndefer 스크립트가 없다면 FP 전에 DCL이 올 수 있습니다.</li>\n<li>L (Load): 다큐먼트의 리소스들을 모두 로드 완료했을 때</li>\n</ul>\n<h3 id=\"cpu-flame-chart\" style=\"position:relative;\"><a href=\"#cpu-flame-chart\" aria-label=\"cpu flame chart permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU flame chart</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABV0lEQVR42jWLXU+CYBiG+QEtax2UW5oftOUXLgp94UVEeQEBCdQsyjUzE3VIrq2f4DxSbKuTTqwO+p+9ubVdu5/rvreHmM9X728/wfJjFXyull/BAidmHSzWG/kD+39dvwbfs1ngv4wmzy4BxKaArkXlBmm3DHcBBJsG9QK0irxFAwNTgCYUba682XmLgRbN6mSGIzOQSPP3XK0Ptb7U8EvGpGL7ZcuTbA81nqDuQ2OMGr5xNZXsKatN2JoHda9Yc9N8Nw3viBjVKojdLHAEdcRJLi+PeMXl5EFJGWMpqQOhNkTmBFe26rLSGFTdaK65dYRCMUREsgZ5Wo9SZh42mXKbrXYAegDyY6HiFCsOp/RK+lDUe6ByyQhtKFkUZ4ZTeiiu7CRkYjeBj7qfMg9zVoQyybNWkm4k6VY0bx2fO2m2kyo6eDw40cIpNZKr75FqKCZv4+c4+gUZGG3RCsnSFwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Flame chart\"\n        title=\"\"\n        src=\"/static/1681089562232.488107585243/00d43/performance-flamechart.png\"\n        srcset=\"/static/1681089562232.488107585243/63868/performance-flamechart.png 250w,\n/static/1681089562232.488107585243/0b533/performance-flamechart.png 500w,\n/static/1681089562232.488107585243/00d43/performance-flamechart.png 1000w,\n/static/1681089562232.488107585243/aa440/performance-flamechart.png 1500w,\n/static/1681089562232.488107585243/ab40b/performance-flamechart.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Flame chart</p>\n<p>가장 핵심 부분이라고 생각합니다. 플레임 차트는 기록하는 동안 웹 페이지의 JS 실행을 시각적으로 표현한\n것입니다. <strong>성능 병목 현상이 발생할 수 있는 위치</strong>를 이해하는 데 중요한 부분입니다. 수평 레이어로 구\n성되며 각 레이어는 단일 JS 함수를 나타냅니다. 각 함수 블록의 너비는 함수의 실행 기간을 나타내고 색상\n은 작업 유형(스크립팅, 렌더링, 페인팅…)을 나타냅니다. 그러므로 이 섹션에서 <strong>어떤 함수가 호출되었고\n각 함수가 얼마나 오래 걸렸는지 정확하게 분석</strong>할 수 있습니다.</p>\n<p>위 사진에는 안 나왔지만 Register, GPU, Compositor 등 성능 문제 디버깅에 유용한 섹션들이 있습니다. 몇\n가지 설명드리겠습니다.</p>\n<p><strong>Network 섹션</strong>은 다운로드 요청과 완료 시간을 볼 수 있습니다. 그리고 <strong>Main 섹션</strong>은 렌더러의 메인\n스레드로, 알록달록한 색으로 된 지표들을 통해 프레임의 전체 시간과 프레임을 연장하는 데 가장 큰 영향\n을 미친 기능을 확인할 수 있습니다. 노란색은 자바스크립트가 실행 중임을 나타냅니다.</p>\n<p>이해를 쉽게 돕기 위해 UI 업데이트 또는 CPU 작업과 연관시키는 데 특히 유용한 Network 섹션을 통해\n<a href=\"https://stripe.com/\">Stripe</a> 홈페이지를 디버깅하는 예시를 들어 보겠습니다.</p>\n<p>아래 사진은 폰트 로드가 완료되기 직전의 Stripe 홈페이지입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC50lEQVR42gHcAiP9ADAwMyAgISYlJzc3OCYpKSUmKCAiIyEiJSgpKyooIigpKyIjJB4gISkrLRsdHicpLCYoKh4fISosLyEjJAA2PUhDS1o8RVNQWGdkaXpXWWdgYnFfYHJZXGtmZWxcXW9aXWxZW2pXWmpYWmpISFNJSVRKSVRISFJKSVQAP0FHP0JJQEJKODtCoqSu19bhz87bzMzYxsXQzsvNyMfTyMfTyMjSx8bSyMfSwb/Iw8HLw8HLxMLMwsDLACYnLCwuMissMCUnKzU6PzU4QDI3QDxASzI1OTw4NTY0ODEwNDMyNjQ1OS8yODI2PDQ4PTEyNzU2OTY4OgAjKDQrMT80OUkrL0AzN0c1OUknKzsxNkY0NUSdQV22UXykXY+fcqqVeMGPdsWdf7OzipXHkWzRpGLUs2UAlqzCmK7JhaGza46UZ4mRaIuRcJWYdZyfcI+SsHGdv43DsJ3Zp5fmn4XlqX/TuYu9zpie6quA9Lpz9sV2AKCfpKCepHR3dDxFOF1kW2BmXVBZTDE7KTU+L5GfyKW8+J+k8Ix+34Zs1ZB0zZZ/u7Khv8W2wLyvsd7W1gArLDAsLTIhIiZqZ3a+uNDEvtWWkKYVFRshIimMiMmojuyket6NbM1zZ8Jxd9F1ktqJt+eYyO6o0fXK2esAIiInIiMoFRYYaGZz0s3i1M7kmZanFxobJiYqnleVvWCqtmirlGmagHOggIy+lbnXl7bOqb3P2N7k7u/xAFlfWlxjXVtiW2RnaWlkdG5reFxbZSEjJickKbZZduCLqOCyyNrI1NnX3Nra3t3b3dTQ09zZ2uPh5Pj4+gBnb2Ztdmxze3JWZFcsQi8fKCIXFxoiJCYyNzXZ1tX//////v7v8fLo6+z6+/v4+vn8/f3+///+/f7v8PIAFBQZEhIXERAWHSEhLjsyJywrIyMnHyEjKi4u2dra////////19nd0NTZ/P38/f39/v7+/f39////5OXoVxdfwiCa7CoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stripe example\"\n        title=\"\"\n        src=\"/static/1681089562235.117107585248/00d43/stripe-not-loaded.png\"\n        srcset=\"/static/1681089562235.117107585248/63868/stripe-not-loaded.png 250w,\n/static/1681089562235.117107585248/0b533/stripe-not-loaded.png 500w,\n/static/1681089562235.117107585248/00d43/stripe-not-loaded.png 1000w,\n/static/1681089562235.117107585248/84bf8/stripe-not-loaded.png 1162w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>stripe example</p>\n<p>여기서 UI에 변경 사항이 있으면 네트워크 요청 섹션을 통해 UI 업데이트를 <strong>지연</strong>시키고 있던 <strong>네트워\n크 요청</strong>을 이렇게 식별할 수 있습니다.</p>\n<p>폰트 파일을 로드한 직후의 아래 사진에서 UI가 다운로드한 폰트를 사용해 재렌더링되었음을 확인할 수 있\n습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.199999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9ACUoLy80PDA1Py0yPElPWDY9RiMpMycsNycsNyctNiEmMTA1OisvMiMpNCUrNRwhKR4iKRkcJBwgJxwgKAA/Q0s/Q0xHTVlITllITVmen7C7uMe4tsW4tcWysb+3s8e4tL+5tb+wr8G1s8Svq7mno7GopLCqprKoo7AALzA0LzA0LzA0LjAzKy4wZ2txfoCJe3+JfYGLcnV4Zm9wbXNvcHRuaGtrbG5qbG5sbXBxaGxxaW52aWx1ADM0OCAhJiYoLi4vNiAgKCMkLB0dJhQTHSAiLCccJXIwQ3A4U2g/XWZOcltOflpPemhYb3RaVX1hQ4RxSABRYnxgc4xme5hkfJVeeY1feo9hfJFkf5JjhZdxc4jQY5XHf7e6kNKxlOirieu5jdbOmrjsqYr9vXL/zXAASU1Us7i9vcDHlZ+cTF9LVGdUV2pXV2tWS2NIWmddp6japLbsnaLsj3/dk3PUnnzArY6yyqmtz62c2b6nACgoLDo5QDs6QSgnLFlVY6qjubOrwW9pewsJDDEzQaGp8qKR7Jx74nhhyHNpzXN40ISb1qLG7KDG6bzR7AAdHSEhIiUhIiUWFxlta3jPyuHY0umBfo0QFBI6M0Cyarm0Z7WrbLN9YZhwbqt5l9CFs9mRs9O80uPp8PcAQUVDRkpISU1LRUpHYWFnfnqJiIWTYV9pGB0fPiw2z16G1YGk06fAv7O+ubfDxMjNvLzCwr/E0M3R+vr6AHN8cXR9cnqEeIKLgGBtYC5BMiIpJR8fIhwgIUtLSvnr7f////z8/eLm6Ons7PDw8e/w8vb3+P////T19wAYGBwXFxwVFRoUExkfJCQvPjQmKyoiIiYaHB5ITEz+/v7////6+vrIzNHo6uz9/f39/f3+/v7////08/ZpGj2cguMcPAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stripe example2\"\n        title=\"\"\n        src=\"/static/1682400641215.82112973136/00d43/stripe-loaded.png\"\n        srcset=\"/static/1682400641215.82112973136/63868/stripe-loaded.png 250w,\n/static/1682400641215.82112973136/0b533/stripe-loaded.png 500w,\n/static/1682400641215.82112973136/00d43/stripe-loaded.png 1000w,\n/static/1682400641215.82112973136/a13c9/stripe-loaded.png 1178w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>stripe example2</p>\n<h3 id=\"memory\" style=\"position:relative;\"><a href=\"#memory\" aria-label=\"memory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Memory</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAr0lEQVR42k3N22rDMAwG4DzHklqWrJOdntJuvWk3Ci0OLfT9X2fucjP4+BHoR+qm423cz2U/76b7vB1rWdevcnltPx+Ha909v9f1Z3qcT3VTr2XOukliopnFW3YBEgBBbNIH2ECKbsPKw8qHkHvwPmgg6yP0EFonkv+xpsNkmLQhViJmY/UcUSMxJqd2C5NIptZGB8pABiiLTtv/f6wIsyAteEmRIjq+D/N7y6LL8Av+2yUIPimhrwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Memory Image\"\n        title=\"\"\n        src=\"/static/1681089562232.7012107585244/00d43/performance-memory.png\"\n        srcset=\"/static/1681089562232.7012107585244/63868/performance-memory.png 250w,\n/static/1681089562232.7012107585244/0b533/performance-memory.png 500w,\n/static/1681089562232.7012107585244/00d43/performance-memory.png 1000w,\n/static/1681089562232.7012107585244/aa440/performance-memory.png 1500w,\n/static/1681089562232.7012107585244/ab40b/performance-memory.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>DOM 노드, 리스너 및 기타 메트릭이 이 차트에 요약되어 있습니다.</p>\n<p>DOM 노드, 리스너 및 기타 메트릭이 이 차트에 요약되어 있습니다. 색상별로 노드, 리스너 등을 구분할 수\n있습니다. 이 부분에서 앱의 추세를 볼 수 있으며 주로 <strong>메모리 누수를 추적</strong>할 때 유용하게 사용할 수있\n습니다.</p>\n<h3 id=\"cpu-activity-breakdown\" style=\"position:relative;\"><a href=\"#cpu-activity-breakdown\" aria-label=\"cpu activity breakdown permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU activity breakdown</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 632px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACpElEQVR42l1SS08TURSevaAkiJROZ9pO23ncO3M7nXamL/rEVqApihADGhMTJRgfiRujBuPCHQsQNHEhkfgHXGBcSwiuYWeiSyWphvhYIDvEbzoEDcnXyXd7znfOvd85HM/7KaWMGTzPBwLiQG2oWD6dL1Sy+SKhrFgeaKMKnusvl6u1XL6UyRVUTdeIwfEBkecFQBCCISlqxC3kIUD0uKxSrc3xPeBt0HYI4JJ2Bq1QNW6mVGLY6bzBEsFQBAiFox45wr0jwOEXiSrRmCpFYmHpAF7sEMgWg1JYcjkI4Ok5LwxBQAgLIjLkcDh2RGkwS9dZY+JOujhsGCyTK+qGiRIcZHwg1NPrJ9TQCPHzfYIYOmwOJS5F2m9ujgxnsjlC46ZlU91ECIYFE5a98ubtzx/fvmzMzz6cVVVHEEVPj/KwwEo5smZOXy7UqrbO7JSTgd69Nh68sbm5vf19Zmbm7q3x10sfnzxew/NQGHp8YbuZsBWNNOrT2cwgSpmWk7AcWSHcjZu39/b+1M8MdR7vPtHty2cbK8u/moNXff4+KSJDjFFhfqpG6/Vx2ynqLIGbsnjSFc/NzW9tbUVlbbg5WqnWqMGeL65eu/LolK9XiigQyzJBH0LMwYlyuuQwlrLTOZSANdzU1PX9/f2Rs6PHOro6OrvOj1349PlDc2zE5wt4nWOyBrdjCpm8eKlYqmiExRMpWaHumxFeX3+/s/N7YeHp4uKz3d3d1XdrweDB/BBVVOpmq3Ri0hXrDPZlUct1OyCEMKTl5Vet1tdWq/Vi6aVKdPzpKdHcSqZhWEwm9+4/aDbPUcP0dsbtjCRBDJ/s8SEPAMHxcM4giaSDzYXnugGYbZ/pvw1DBmTe3mFy/28IjqVKrb9QsZ2cnxfhMI7MTHqd/wKdScdWyb3W0wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Aggregated task breakdown\"\n        title=\"\"\n        src=\"/static/1681089562232.2976107585242/084e2/performance-cpu.png\"\n        srcset=\"/static/1681089562232.2976107585242/63868/performance-cpu.png 250w,\n/static/1681089562232.2976107585242/0b533/performance-cpu.png 500w,\n/static/1681089562232.2976107585242/084e2/performance-cpu.png 632w\"\n        sizes=\"(max-width: 632px) 100vw, 632px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Aggregated task breakdown</p>\n<p><code class=\"language-text\">Summary</code> 탭에서는 특정 CPU 작업을 선택하지 않은 경우, CPU 작업 내역이 다음 4가지 범주로 분류되어 표\n시됩니다.</p>\n<ul>\n<li><strong>Loading</strong>: 네트워크 요청 및 HTML 파싱</li>\n<li><strong>Scripting</strong>: JS 코드 파싱, 컴파일링 및 실행, 가비지 컬렉션(GC) 포함</li>\n<li><strong>Rendering</strong>: 스타일 및 레이아웃 계산</li>\n<li><strong>Painting</strong>: 이미지 페인팅, 합성, 리사이징 및 디코딩</li>\n</ul>\n<p>다른 쓰레드를 클릭하거나 위쪽 및 아래쪽 화살표 방향키를 사용해서 다른 쓰레드를 선택할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 818px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 116.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAIAAACEf/j0AAAACXBIWXMAAAsTAAALEwEAmpwYAAADt0lEQVR42o1Ta28UZRSeL0YapCC1te3u3Gdn57Lzzv3S7rK7tixLAQmg1a4IpjWpEiMa27SNsZpAjNXE2wejpAYN2hSKdk1Y2q2t0K0aSpNaSaOCEsMHid/9BZ7prMu6hsTkyZMz75xnznnecwZb+vzF5anB5amBta+Gfp0b/mXG59ulkYunBlv43uHjz7/y0gu00qs4/YrzbAXIPQaMnftoYf6LYmFidvbs3Mrc6rXLP60uXLuxfPPU+5NYgxeSO0NSx6Zwui6c3FSFOjwFjJ2fWDl3Zuni9I/5sysz0+vfL/xRmru1svjn2Fj+3tbUFiq7mchsY7Jb6V3VCE6wN8emLhXWS7PXV5duL1+6tTjz85WFm7+v/fXu29P3tCTvZyA1A3n1VKYawQn2+NETF6aunBkvFs5fzU+WZvNrff2vDw6Nj756GioHSXcVH+oZulxYg8rzF9YP9ozoO3pbpX3N4j4j+eRmvHMr5FGZbXcTG8mnPhn/ZvKzq91HTpDoEeyB+HZuTz29uy7cAW63kLsCvm+DK6inssBYE6E100ZDOIZHXM3t4mJpRk7R0o4I6uCUNCUmggBOiGh7DTCSwCMci+Mhnufb2xOO4xqmqWm657XZtqsoyIXAP7REUZIkuRrY3oyNNFPTbVWzRBnhBE3RHICkfKaZCEmxJF2Oa4CZlqnqFlINSUa66QAH4v8DTI7pUFOKqYKkyDGVj0pQiqKhms8UlKV8LqNGrCAQmyCDAD4BRwwXZdh/wAk+yo8CtFpTWdUMW5QUpPrODcsFWO3ZtvQBO97lJh/2kvvtxB4vfcBL7Y9EFZJi7oihz6gggxjAC1JwE1CH5crgIkEgsH5HfDUwy2lzvbisGFwUQf+QSm743ACDE0xLiCFJCGiCZAD/arullaBY6fATuZ5DKcgIE0zFGMfLho52d+pREcUUDQzCLKr1mKWLi4UP5r8u/lAcKU4c56MCQbI0A1PlopIab7OOdCdkxTRMBwap6jbYpCviT997evrjY61hFjx8lx84Ody9vRFnWLDNy8jwPO/g3p1Is8CdpluwEXCpldaw0pcD/UezIVJqCgknhx+d/PCZhiYCxPCOF0TDSGQeOizFEGjkmAa+Kivoi994+TFo2LXVnWnnt29fe66vC8SsL2Z5QY4nkrlcLoZ0mB/L8sGS3hHDw+l3+m6URq+XRt8azYVwuDBYbBYGAwJZ0WCQjhuH/SH/u2Fw143NpKErSJEbHyTLLyjOLywpkYgAf4gooWCENeK/ASmMSPlwemSIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"스크린샷 2023-04-08 오전 3.47.37.png\"\n        title=\"\"\n        src=\"/static/1681089562228.579107585238/64d87/any-function-call.png\"\n        srcset=\"/static/1681089562228.579107585238/63868/any-function-call.png 250w,\n/static/1681089562228.579107585238/0b533/any-function-call.png 500w,\n/static/1681089562228.579107585238/64d87/any-function-call.png 818w\"\n        sizes=\"(max-width: 818px) 100vw, 818px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 사진은 flame chart에서 특정 Function Call을 선택했습니다. 하단의 Aggregated Time은 해당 Function\nCall의 CPU 분석을 보여줍니다. 또한 링크(Graient~~~ )를 클릭하면 개발 도구의 소스 패널에 있는 코드 줄\n로 이동합니다.</p>\n<hr>\n<p><code class=\"language-text\">Bottom-Up</code> 탭에서는 CPU 활동에 대한 보다 세분화된 분석을 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABs0lEQVR42m2S2XLjIBRE9Se2JCQEiEXsAi2RvKacxElmKk8z//8bQ/I0sUOdJ+p23e6GzPmxhqQogDK91J53lnKFMCUt/xGE20SDCGUii72dBuudmqfYezNEO0+DkBYTVtWohvgbDenMrNyi/Sr0kEHYnFY99wQT6p1ZRrFbQlGiTV5ucvCdclvWbnoJ66+4+5D+mJUAKaWtxA1mxqg58MMaK0jyNHpHXgCup86t0u/bLmSoFcrGLp0UWIUhmrfrmclQAJTfU2FuVtWfVDhTOWcNcdKdUnohnXVxGtz766Ptl7LCedncsC1gv7xPpz/z+a+dnrMKMioiQoRQ3nLpBDuugQlTgnqzLW5spxsdzn6+9g+vyXxWQ8Q71aCWUNEyZQU9rCG5AFWz2SYBuEH6gx0udnzq7JrB1L5ypGWUd5Sb3snr00KFze9kn4WVdVKmthOd3X2K5ZeYcRWDn6N5vlzCuJYA3m/Oi9rPL3H/Me5/u3hItjETipDWaD5GPQZ52D3YfmRcFmX9FfV/cQUqnF4X1LiCOEufhnc67cctx1RqJY77SJiCDU6j984hFg1RCQDpPzW5gnmQy6QYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"bottom-up.png\"\n        title=\"\"\n        src=\"/static/1682400641213.6167112973135/00d43/bottom-up.png\"\n        srcset=\"/static/1682400641213.6167112973135/63868/bottom-up.png 250w,\n/static/1682400641213.6167112973135/0b533/bottom-up.png 500w,\n/static/1682400641213.6167112973135/00d43/bottom-up.png 1000w,\n/static/1682400641213.6167112973135/aa440/bottom-up.png 1500w,\n/static/1682400641213.6167112973135/d3deb/bottom-up.png 1758w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 사진처럼 하위 수준의 함수를 확장해서 어떤 코드가 함수를 호출하는지 확인할 수 있습니다. 이렇게 하\n면 제어할 수 있는 코드를 찾는 데 도움됩니다.</p>\n<hr>\n<p><code class=\"language-text\">Call Tree</code> 탭은 기록하는 동안 실행된 JS 함수의 계층적 표현입니다. 호출 트리는 가장 시간이 많이 걸리\n는 기능을 식별하는 데 도움이 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.400000000000006%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABN0lEQVR42mWQ607CQBCF+xyCofS691v3UnZbbUsFQUzw/V/GBRJFSc6fmck3c+Yk1gXKpFCGMFmUtVSWEAEhgYhiwh+FML2JMpEY57lohJDj2LfOdKENXcelEVJHHkByr9ih3DBhmXCU6yTWSreUkO2rPB+d1WQ/h9CPlKt0XdxrleZ5AYUdpZ1U+4b5JgGIisYWFbZafB0MBBVjaJ4CwCLLy39wVgDTHd3L52Y8xy1JNCMbV9UIIOY3hhKwWGa9l13nV+nD5RLd4HY4CzMkELNGt1WNMZVKOwDg4jlzhp0+ZkRUBH75eDmvm3ZnwsH2J9b0SQwwZlZF90x57yGET8v0fWt3+722oazgH35dMtVff54xd5efZWOrCiEig3cI1QA026nz3cCFjtMf+BoY4Ga4ZOYmRM03hq5XJb1W2d0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"호출 트리\"\n        title=\"\"\n        src=\"/static/1681089562231.061107585240/00d43/call-tree.png\"\n        srcset=\"/static/1681089562231.061107585240/63868/call-tree.png 250w,\n/static/1681089562231.061107585240/0b533/call-tree.png 500w,\n/static/1681089562231.061107585240/00d43/call-tree.png 1000w,\n/static/1681089562231.061107585240/aa440/call-tree.png 1500w,\n/static/1681089562231.061107585240/c830c/call-tree.png 1754w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>호출 트리</p>\n<p>위 사진에서 보이듯이 하향식 구조로 구성되며 시간이 가장 많이 걸리는 기능이 맨 위에 표시됩니다. 각 기\n능은 총 시간, 자체 시간 및 호출 횟수와 함께 나열됩니다.</p>\n<p>플레임 차트와 호출 트리 모두 JS 함수 실행에 대한 통찰을 제공하지만 서로 다른 방식으로 정보를 제공하\n고 다른 용도로 사용됩니다. 각 차트의 설명은 위에서 했으니, 둘 사이의 차이점과 각각의 장점을 살펴보겠\n습니다.</p>\n<p><code class=\"language-text\">플레임 차트</code>의 장점</p>\n<ul>\n<li>성능 문제를 일으킬 수 있는 장기 실행 함수 또는 코드 블록을 <strong>빠르게 식별</strong>할 수 있습니다.</li>\n<li>서로 다른 기능 간의 관계와 실행 순서를 보여줍니다.</li>\n</ul>\n<p><code class=\"language-text\">호출 트리</code>의 장점</p>\n<ul>\n<li>실행 시간 측면에서 가장 비용이 많이 드는 기능을 식별하는 데 도움이 되므로 <strong>최적화 작업의 우선 순\n위</strong>를 쉽게 지정할 수 있습니다.</li>\n<li>함수별 호출 횟수를 보여주기 때문에 필요 이상으로 <strong>자주 호출</strong>될 수 있는 함수를 정확히 찾아낼 수있\n습니다.</li>\n<li>함수 실행에 대한 집계 보기를 제공하여 전체 성능 비용에 대해 보다 명확한 관점을 제공합니다.</li>\n</ul>\n<p>따라서 플레임 차트는 JS 실행에 대해 시간순의 시각적 개요를 제공하는 데 탁월한 반면, 호출 트리는 반복\n되는 코드 호출을 집계하므로 평균적으로 어디서 시간이 소요되는지 쉽게 확인할 수 있습니다. 이렇듯 모두\n고유한 장점이 있으며 함께 사용하면 성능 병목 현상을 보다 효과적으로 식별하고 해결하는 데 도움이 될수\n있겠죠.</p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>이 외에도 웹 바이탈과 프레임 등 다양한 항목도 표시할 수 있는 좋은 기능들을 제공합니다.</p>\n<p>이제 Performance 탭에서 성능 결과 보고서를 보고 이해할 수 있을 겁니다. 당연하겠지만 보다 편안하게 사\n용하려면 연습밖에 없습니다. 본인이 만든 웹 페이지를 프로파일링하고 결과를 분석해보세요. 그러다보면웹\n애플리케이션의 성능 병목 현상을 식별하고 해결할 수 있을 겁니다.</p>\n<p>마지막으로 런타임 성능을 향상시키는 방법에는 여러 가지가 있습니다. 몇 가지 일반적인 최적화 전략은 다\n음과 같습니다.</p>\n<ul>\n<li>JavaScript의 실행을 최적화 (rAF 메소드를 사용한다던가, 오래 실행되는 JS를 메인 스레드에서 웹 워커\n로 이동한다던가 말이죠)</li>\n<li>캐싱, 압축 및 CDN을 활용하여 네트워크 요청을 최적화</li>\n<li>스타일 계산의 범위와 복잡성 감소</li>\n</ul>\n<p>프론트엔드 개발자라면 꼭 이러한 방법들을 숙지하시면 좋을 것 같습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li><a href=\"https://tv.naver.com/v/23652467\">https://tv.naver.com/v/23652467</a></li>\n<li><a href=\"https://www.debugbear.com/blog/devtools-performance\">https://www.debugbear.com/blog/devtools-performance</a></li>\n<li><a href=\"https://yonatankra.com/how-to-profile-javascript-performance-in-the-browser/\">https://yonatankra.com/how-to-profile-javascript-performance-in-the-browser/</a></li>\n<li><a href=\"https://developer.chrome.com/docs/devtools/performance/\">https://developer.chrome.com/docs/devtools/performance/</a></li>\n</ul>",
      "%EB%A7%88%EB%AC%B4%EB%A6%AC#마무리": "<p>성능 문제가 발생했을 때 해결하려면 웹 애플리케이션을 프로파일링하고 모니터링하는 방법을 알아야 합니\n다.</p>\n<p>웹 성능을 측정하는 방법들은 Lighthouse, Chrome DevTools Performance Tab, PageSpeed Insights 등 여러\n가지가 있습니다. 이 중, <strong>DevTools의 Performance를 이용</strong>해 세부적으로 웹의 동작을 들여다 보겠습니다\n. 그리고 웹 애플리케이션의 성능을 분석하고 개선하는 방법을 알아보겠습니다.</p>\n<h2 id=\"성능을-기록하는-방법\" style=\"position:relative;\"><a href=\"#%EC%84%B1%EB%8A%A5%EC%9D%84-%EA%B8%B0%EB%A1%9D%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"성능을 기록하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>성능을 기록하는 방법</h2>\n<ul>\n<li>Chrome 브라우저를 엽니다.</li>\n<li>분석하려는 웹 페이지를 로드합니다.</li>\n<li>페이지의 아무 곳에 마우스 오른쪽 버튼을 클릭해서 <code class=\"language-text\">검사</code>를 선택하거나 <code class=\"language-text\">Crtl+Shift+I</code>\n(Windows/Linux) 또는 <code class=\"language-text\">Cmd+Opt+I</code> (Mac)를 눌러 개발자 도구를 엽니다.</li>\n<li>개발자 도구의 <code class=\"language-text\">Performance</code> 탭을 클릭합니다.</li>\n<li>Performance 탭에서 <code class=\"language-text\">기록</code> 버튼(원 아이콘)을 클릭하거나 <code class=\"language-text\">Crtl+E</code> (Windows/Linux) 또는 <code class=\"language-text\">Cmd+E</code> (Mac)\n를 누릅니다.</li>\n<li>분석하려는 작업(성능 문제를 일으킬 것 같은 시나리오)을 수행한 다음 <code class=\"language-text\">중지</code> 버튼을 클릭하여 기록을중\n지합니다.</li>\n<li>기록이 완료되면 Chrome DevTools가 웹 페이지 성능에 대한 자세한 보고서를 표시합니다.</li>\n</ul>\n<h2 id=\"웹-페이지-성능-보고서를-보고-이해하는-방법\" style=\"position:relative;\"><a href=\"#%EC%9B%B9-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%84%B1%EB%8A%A5-%EB%B3%B4%EA%B3%A0%EC%84%9C%EB%A5%BC-%EB%B3%B4%EA%B3%A0-%EC%9D%B4%ED%95%B4%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"웹 페이지 성능 보고서를 보고 이해하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>웹 페이지 성능 보고서를 보고 이해하는 방법</h2>\n<p>이제 아래 사진처럼 성능에 대한 자세한 보고서를 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAADXElEQVR42o2Ua1MbNxSG9xc0bdpJJrTYu6tdaVd709619tpgfLe5B9trY2xTphDAhTQYGztTIF/afkj/cwVMOp3mCzPPaDSvznukI80R5weR70euFzpuYJg2Q8WG5xDXpzSkQcBExyIuCyC2R4jHRhaDsWlaPmd7zJ4JozigWc+PHC80iaubjh9mgij2gkg3CTZMk9gmcSzbNW0H6yYTVc3gPCsmWkQMX9V0w7BYlOf5luXYxHcd3yFe4NJMkA+c2LWoZ1HHDC3d07Hj2hEX6nVXrehqBmILqgSqtoQMCC0Lrxg4Z6gZV616qG6ALEErFszb6pqLS75Wjt0a19jcOhmPp4u73ybz6fz+iZvFp8n8dra4v765nX28v57/fjVbTOe3V9OPs8Xd5WRyfvXu8HjANdZb7eTk6OfF6PB6NJx2k8te9327ddFL3ifJRad9kbQvmNLf/9B5nPS6Hza3hmEuT+M8V9z6RYu7QWk/boxyzcOgPMzWh2G5n2uMouqArPai6sFqc1jYPLJX+15x4JcOgtJAj/tm5i0H3b0ftV1aPCLZXlw9jSvnudo4Wz3O187ytXFcOc1XT9eavxabl1HxLCycZyvjn/TdF0L9tVzilvXGEm7gcCdtbbgrnUwxiSsjWjqOykd0rZcpD3L1d4X1k9V6jxaSuNQKCm9fK/VvhMr3YoF7CTe+kxov5fVXeFswt0WzqdMWonuQ7gnONon7JO6amYTXt3ltnTebr1DtW7HyQqz9AAqcm020aKQGQyfb3wvCHSPYoX5hn0asiFbY38ju1mm7nN+xB+vmUEFURAQgmyErNgcEEQgAiDJDFBEASFElCUIAVACUB11SZagKgvgFFg4FUWZwKUFNCUpaQGlRSfFQlCQZYyamBSkNNB5gNgGSwgvyA6L6CHqCk6EsQbYsAra3JMoKAEBOpwHPPyAIEhsl6cnDUkBeAP/CCUCECGmGiTUd6wbWDIQwO+d/YeuKghVF/QJ+gmMJltMi1ghSdAbrR4i0/5llqEiy+jUcjeKD/gGQ0HJK0Fgr2rYMcZoHz4H7/Pnvs7Pz2c3izVKKdW+cL5iWy7NSnwH3x59/3d59mlxP3ywt00yuWK5IsvJ4H88wsz+l0+mKD08HNZ2wgiUJsSM9x/wP0Z//iaRvinMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Performance 기록 결과 화면\"\n        title=\"\"\n        src=\"/static/1681089562232.0251107585241/00d43/my-blog-performance.png\"\n        srcset=\"/static/1681089562232.0251107585241/63868/my-blog-performance.png 250w,\n/static/1681089562232.0251107585241/0b533/my-blog-performance.png 500w,\n/static/1681089562232.0251107585241/00d43/my-blog-performance.png 1000w,\n/static/1681089562232.0251107585241/aa440/my-blog-performance.png 1500w,\n/static/1681089562232.0251107585241/56e36/my-blog-performance.png 1750w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Performance 기록 결과 화면</p>\n<p>엄청난 양의 데이터로 인해 뭐부터 봐야할지 감이 안 잡힐 수도 있습니다. 천천히 하나씩 들여다 보며 이해\n해보겠습니다.</p>\n<h3 id=\"cpu-utilization--filmstrip\" style=\"position:relative;\"><a href=\"#cpu-utilization--filmstrip\" aria-label=\"cpu utilization  filmstrip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU Utilization &#x26; FilmStrip</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZklEQVR42hXFCwrCMBQEwB7HlLzdbH6mJSIVEalg7n8bIwzMElC9k5nc6r3HJCVDwFyRlELO8ZrUaJmY0uroLgDysmN0fJMOYzZWqhkS2Wp8lvgoOnocN43NXn987+HcePZw3svnB31WGFymD9SOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Timeline\"\n        title=\"\"\n        src=\"/static/1681089562233.096107585245/00d43/performance-timeline.png\"\n        srcset=\"/static/1681089562233.096107585245/63868/performance-timeline.png 250w,\n/static/1681089562233.096107585245/0b533/performance-timeline.png 500w,\n/static/1681089562233.096107585245/00d43/performance-timeline.png 1000w,\n/static/1681089562233.096107585245/aa440/performance-timeline.png 1500w,\n/static/1681089562233.096107585245/ab40b/performance-timeline.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Timeline</p>\n<p>상단의 CPU 타임라인에선 Critical Rendering Path(Javascript, style, layout, paint, composite)과 ajax\n호출 등을 보여줍니다. 주로 JavaScript(노란색) 및 레이아웃 작업(보라색)과 같은 다양한 유형의 작업으로\n인해 CPU가 얼마나 열일하는지 봅니다. 사진에서 보이듯 CPU 활동은 처음 활동을 시작한 후 상당히 조용해\n집니다.</p>\n<p>중앙의 FilmStrip은 왼쪽부터 시간순으로 나열되며 프레임 스크린샷을 통해 각 순간의 사이트가 어떤 모습\n인지 볼 수 있습니다. 이러한 애플리케이션의 시각적 상태는 “screenshot” 옵션을 체크했을 때만 존재합니\n다. FilmStrip 위로 마우스를 가져가면 해당 시점의 스크린샷을 크게 볼 수 있습니다.</p>\n<p>하단 부분은 애플리케이션의 메모리 추세를 보여줍니다. 위 예시 사진에서 메모리가 증가하고 잠시 후 감소\n하는 것을 볼 수 있습니다. 일반적으로 가비지 컬렉션 프로세스가 발생할 때까진 메모리가 증가합니다.</p>\n<h3 id=\"user-timing-metrix\" style=\"position:relative;\"><a href=\"#user-timing-metrix\" aria-label=\"user timing metrix permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>User Timing metrix</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 813px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.200000000000003%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPElEQVR42gExAc7+ACQlKCUmKiQkKDU4QmRoc19jbGFlb2FaRnpzXzw8OlBXU2ZsZmpuc2JpZ2NoY1hdXzQ2NigoMCIhKBEQFgBGSEpqbmxnbGeVn5bF0crI1M3N2dPGx6HR07Cws63N0czQ1c/KzMrR087L1cPBzraYoo1+iHh/iXh6hHMAPkFCVlpYYmZje4N6a3Noa3NoanFmbHVyZW5nd3dwcm50Z2RqaWhsdnl+lJGokZKnjJCanZ6ym5uwnp6zACoqLjo7Pzk6PRkZHhQTGBUVGhQUGxIREx8oPCU6Wyg+NCxBMSsqIzMXGTUxUT83XS0oQzoyV0dFZEQ/YQAiIyYuLzIwMjQiIyYkJSgjJCcjJSghISEtOU46U3g5U0U5Uz48OzNHJygbIB4cHxwfISAbHhsrMykkKyMp/WsbrDCqYwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"로딩에 관한 지표들\"\n        title=\"\"\n        src=\"/static/1681089562233.2878107585246/baaa6/performance-timing.png\"\n        srcset=\"/static/1681089562233.2878107585246/63868/performance-timing.png 250w,\n/static/1681089562233.2878107585246/0b533/performance-timing.png 500w,\n/static/1681089562233.2878107585246/baaa6/performance-timing.png 813w\"\n        sizes=\"(max-width: 813px) 100vw, 813px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>로딩에 관한 지표들</p>\n<p>타이밍 레인에는 FP, DCL, L 등 이벤트도 표시됩니다.</p>\n<p>자세히 설명하자면 이 글이 너무 길어지고 내용이 산으로 갈 것 같아 각 지표들의 의미만 살펴보고 넘어가\n겠습니다.<br>\n해당 부분에 대한 건 따로 다른 글에서 자세히 설명하겠습니다.</p>\n<ul>\n<li>FP (First Paint): 페이지 네비게이션 후, 첫 픽셀을 그린 순간</li>\n<li>FCP (First Contentful Paint): 첫 엘리먼트를 그린 순간</li>\n<li>LCP (Largest Contentful Paint): 가장 큰 엘리먼트를 그린 순간</li>\n<li>DCL (Dom Content Loaded): DOM Tree를 구성하고, 스크립트(+ defer 스크립트)를 실행 완료했을 때 →\ndefer 스크립트가 없다면 FP 전에 DCL이 올 수 있습니다.</li>\n<li>L (Load): 다큐먼트의 리소스들을 모두 로드 완료했을 때</li>\n</ul>\n<h3 id=\"cpu-flame-chart\" style=\"position:relative;\"><a href=\"#cpu-flame-chart\" aria-label=\"cpu flame chart permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU flame chart</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABV0lEQVR42jWLXU+CYBiG+QEtax2UW5oftOUXLgp94UVEeQEBCdQsyjUzE3VIrq2f4DxSbKuTTqwO+p+9ubVdu5/rvreHmM9X728/wfJjFXyull/BAidmHSzWG/kD+39dvwbfs1ngv4wmzy4BxKaArkXlBmm3DHcBBJsG9QK0irxFAwNTgCYUba682XmLgRbN6mSGIzOQSPP3XK0Ptb7U8EvGpGL7ZcuTbA81nqDuQ2OMGr5xNZXsKatN2JoHda9Yc9N8Nw3viBjVKojdLHAEdcRJLi+PeMXl5EFJGWMpqQOhNkTmBFe26rLSGFTdaK65dYRCMUREsgZ5Wo9SZh42mXKbrXYAegDyY6HiFCsOp/RK+lDUe6ByyQhtKFkUZ4ZTeiiu7CRkYjeBj7qfMg9zVoQyybNWkm4k6VY0bx2fO2m2kyo6eDw40cIpNZKr75FqKCZv4+c4+gUZGG3RCsnSFwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Flame chart\"\n        title=\"\"\n        src=\"/static/1681089562232.488107585243/00d43/performance-flamechart.png\"\n        srcset=\"/static/1681089562232.488107585243/63868/performance-flamechart.png 250w,\n/static/1681089562232.488107585243/0b533/performance-flamechart.png 500w,\n/static/1681089562232.488107585243/00d43/performance-flamechart.png 1000w,\n/static/1681089562232.488107585243/aa440/performance-flamechart.png 1500w,\n/static/1681089562232.488107585243/ab40b/performance-flamechart.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Flame chart</p>\n<p>가장 핵심 부분이라고 생각합니다. 플레임 차트는 기록하는 동안 웹 페이지의 JS 실행을 시각적으로 표현한\n것입니다. <strong>성능 병목 현상이 발생할 수 있는 위치</strong>를 이해하는 데 중요한 부분입니다. 수평 레이어로 구\n성되며 각 레이어는 단일 JS 함수를 나타냅니다. 각 함수 블록의 너비는 함수의 실행 기간을 나타내고 색상\n은 작업 유형(스크립팅, 렌더링, 페인팅…)을 나타냅니다. 그러므로 이 섹션에서 <strong>어떤 함수가 호출되었고\n각 함수가 얼마나 오래 걸렸는지 정확하게 분석</strong>할 수 있습니다.</p>\n<p>위 사진에는 안 나왔지만 Register, GPU, Compositor 등 성능 문제 디버깅에 유용한 섹션들이 있습니다. 몇\n가지 설명드리겠습니다.</p>\n<p><strong>Network 섹션</strong>은 다운로드 요청과 완료 시간을 볼 수 있습니다. 그리고 <strong>Main 섹션</strong>은 렌더러의 메인\n스레드로, 알록달록한 색으로 된 지표들을 통해 프레임의 전체 시간과 프레임을 연장하는 데 가장 큰 영향\n을 미친 기능을 확인할 수 있습니다. 노란색은 자바스크립트가 실행 중임을 나타냅니다.</p>\n<p>이해를 쉽게 돕기 위해 UI 업데이트 또는 CPU 작업과 연관시키는 데 특히 유용한 Network 섹션을 통해\n<a href=\"https://stripe.com/\">Stripe</a> 홈페이지를 디버깅하는 예시를 들어 보겠습니다.</p>\n<p>아래 사진은 폰트 로드가 완료되기 직전의 Stripe 홈페이지입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC50lEQVR42gHcAiP9ADAwMyAgISYlJzc3OCYpKSUmKCAiIyEiJSgpKyooIigpKyIjJB4gISkrLRsdHicpLCYoKh4fISosLyEjJAA2PUhDS1o8RVNQWGdkaXpXWWdgYnFfYHJZXGtmZWxcXW9aXWxZW2pXWmpYWmpISFNJSVRKSVRISFJKSVQAP0FHP0JJQEJKODtCoqSu19bhz87bzMzYxsXQzsvNyMfTyMfTyMjSx8bSyMfSwb/Iw8HLw8HLxMLMwsDLACYnLCwuMissMCUnKzU6PzU4QDI3QDxASzI1OTw4NTY0ODEwNDMyNjQ1OS8yODI2PDQ4PTEyNzU2OTY4OgAjKDQrMT80OUkrL0AzN0c1OUknKzsxNkY0NUSdQV22UXykXY+fcqqVeMGPdsWdf7OzipXHkWzRpGLUs2UAlqzCmK7JhaGza46UZ4mRaIuRcJWYdZyfcI+SsHGdv43DsJ3Zp5fmn4XlqX/TuYu9zpie6quA9Lpz9sV2AKCfpKCepHR3dDxFOF1kW2BmXVBZTDE7KTU+L5GfyKW8+J+k8Ix+34Zs1ZB0zZZ/u7Khv8W2wLyvsd7W1gArLDAsLTIhIiZqZ3a+uNDEvtWWkKYVFRshIimMiMmojuyket6NbM1zZ8Jxd9F1ktqJt+eYyO6o0fXK2esAIiInIiMoFRYYaGZz0s3i1M7kmZanFxobJiYqnleVvWCqtmirlGmagHOggIy+lbnXl7bOqb3P2N7k7u/xAFlfWlxjXVtiW2RnaWlkdG5reFxbZSEjJickKbZZduCLqOCyyNrI1NnX3Nra3t3b3dTQ09zZ2uPh5Pj4+gBnb2Ztdmxze3JWZFcsQi8fKCIXFxoiJCYyNzXZ1tX//////v7v8fLo6+z6+/v4+vn8/f3+///+/f7v8PIAFBQZEhIXERAWHSEhLjsyJywrIyMnHyEjKi4u2dra////////19nd0NTZ/P38/f39/v7+/f39////5OXoVxdfwiCa7CoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stripe example\"\n        title=\"\"\n        src=\"/static/1681089562235.117107585248/00d43/stripe-not-loaded.png\"\n        srcset=\"/static/1681089562235.117107585248/63868/stripe-not-loaded.png 250w,\n/static/1681089562235.117107585248/0b533/stripe-not-loaded.png 500w,\n/static/1681089562235.117107585248/00d43/stripe-not-loaded.png 1000w,\n/static/1681089562235.117107585248/84bf8/stripe-not-loaded.png 1162w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>stripe example</p>\n<p>여기서 UI에 변경 사항이 있으면 네트워크 요청 섹션을 통해 UI 업데이트를 <strong>지연</strong>시키고 있던 <strong>네트워\n크 요청</strong>을 이렇게 식별할 수 있습니다.</p>\n<p>폰트 파일을 로드한 직후의 아래 사진에서 UI가 다운로드한 폰트를 사용해 재렌더링되었음을 확인할 수 있\n습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.199999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9ACUoLy80PDA1Py0yPElPWDY9RiMpMycsNycsNyctNiEmMTA1OisvMiMpNCUrNRwhKR4iKRkcJBwgJxwgKAA/Q0s/Q0xHTVlITllITVmen7C7uMe4tsW4tcWysb+3s8e4tL+5tb+wr8G1s8Svq7mno7GopLCqprKoo7AALzA0LzA0LzA0LjAzKy4wZ2txfoCJe3+JfYGLcnV4Zm9wbXNvcHRuaGtrbG5qbG5sbXBxaGxxaW52aWx1ADM0OCAhJiYoLi4vNiAgKCMkLB0dJhQTHSAiLCccJXIwQ3A4U2g/XWZOcltOflpPemhYb3RaVX1hQ4RxSABRYnxgc4xme5hkfJVeeY1feo9hfJFkf5JjhZdxc4jQY5XHf7e6kNKxlOirieu5jdbOmrjsqYr9vXL/zXAASU1Us7i9vcDHlZ+cTF9LVGdUV2pXV2tWS2NIWmddp6japLbsnaLsj3/dk3PUnnzArY6yyqmtz62c2b6nACgoLDo5QDs6QSgnLFlVY6qjubOrwW9pewsJDDEzQaGp8qKR7Jx74nhhyHNpzXN40ISb1qLG7KDG6bzR7AAdHSEhIiUhIiUWFxlta3jPyuHY0umBfo0QFBI6M0Cyarm0Z7WrbLN9YZhwbqt5l9CFs9mRs9O80uPp8PcAQUVDRkpISU1LRUpHYWFnfnqJiIWTYV9pGB0fPiw2z16G1YGk06fAv7O+ubfDxMjNvLzCwr/E0M3R+vr6AHN8cXR9cnqEeIKLgGBtYC5BMiIpJR8fIhwgIUtLSvnr7f////z8/eLm6Ons7PDw8e/w8vb3+P////T19wAYGBwXFxwVFRoUExkfJCQvPjQmKyoiIiYaHB5ITEz+/v7////6+vrIzNHo6uz9/f39/f3+/v7////08/ZpGj2cguMcPAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stripe example2\"\n        title=\"\"\n        src=\"/static/1682400641215.82112973136/00d43/stripe-loaded.png\"\n        srcset=\"/static/1682400641215.82112973136/63868/stripe-loaded.png 250w,\n/static/1682400641215.82112973136/0b533/stripe-loaded.png 500w,\n/static/1682400641215.82112973136/00d43/stripe-loaded.png 1000w,\n/static/1682400641215.82112973136/a13c9/stripe-loaded.png 1178w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>stripe example2</p>\n<h3 id=\"memory\" style=\"position:relative;\"><a href=\"#memory\" aria-label=\"memory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Memory</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAr0lEQVR42k3N22rDMAwG4DzHklqWrJOdntJuvWk3Ci0OLfT9X2fucjP4+BHoR+qm423cz2U/76b7vB1rWdevcnltPx+Ha909v9f1Z3qcT3VTr2XOukliopnFW3YBEgBBbNIH2ECKbsPKw8qHkHvwPmgg6yP0EFonkv+xpsNkmLQhViJmY/UcUSMxJqd2C5NIptZGB8pABiiLTtv/f6wIsyAteEmRIjq+D/N7y6LL8Av+2yUIPimhrwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Memory Image\"\n        title=\"\"\n        src=\"/static/1681089562232.7012107585244/00d43/performance-memory.png\"\n        srcset=\"/static/1681089562232.7012107585244/63868/performance-memory.png 250w,\n/static/1681089562232.7012107585244/0b533/performance-memory.png 500w,\n/static/1681089562232.7012107585244/00d43/performance-memory.png 1000w,\n/static/1681089562232.7012107585244/aa440/performance-memory.png 1500w,\n/static/1681089562232.7012107585244/ab40b/performance-memory.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>DOM 노드, 리스너 및 기타 메트릭이 이 차트에 요약되어 있습니다.</p>\n<p>DOM 노드, 리스너 및 기타 메트릭이 이 차트에 요약되어 있습니다. 색상별로 노드, 리스너 등을 구분할 수\n있습니다. 이 부분에서 앱의 추세를 볼 수 있으며 주로 <strong>메모리 누수를 추적</strong>할 때 유용하게 사용할 수있\n습니다.</p>\n<h3 id=\"cpu-activity-breakdown\" style=\"position:relative;\"><a href=\"#cpu-activity-breakdown\" aria-label=\"cpu activity breakdown permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU activity breakdown</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 632px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACpElEQVR42l1SS08TURSevaAkiJROZ9pO23ncO3M7nXamL/rEVqApihADGhMTJRgfiRujBuPCHQsQNHEhkfgHXGBcSwiuYWeiSyWphvhYIDvEbzoEDcnXyXd7znfOvd85HM/7KaWMGTzPBwLiQG2oWD6dL1Sy+SKhrFgeaKMKnusvl6u1XL6UyRVUTdeIwfEBkecFQBCCISlqxC3kIUD0uKxSrc3xPeBt0HYI4JJ2Bq1QNW6mVGLY6bzBEsFQBAiFox45wr0jwOEXiSrRmCpFYmHpAF7sEMgWg1JYcjkI4Ok5LwxBQAgLIjLkcDh2RGkwS9dZY+JOujhsGCyTK+qGiRIcZHwg1NPrJ9TQCPHzfYIYOmwOJS5F2m9ujgxnsjlC46ZlU91ECIYFE5a98ubtzx/fvmzMzz6cVVVHEEVPj/KwwEo5smZOXy7UqrbO7JSTgd69Nh68sbm5vf19Zmbm7q3x10sfnzxew/NQGHp8YbuZsBWNNOrT2cwgSpmWk7AcWSHcjZu39/b+1M8MdR7vPtHty2cbK8u/moNXff4+KSJDjFFhfqpG6/Vx2ynqLIGbsnjSFc/NzW9tbUVlbbg5WqnWqMGeL65eu/LolK9XiigQyzJBH0LMwYlyuuQwlrLTOZSANdzU1PX9/f2Rs6PHOro6OrvOj1349PlDc2zE5wt4nWOyBrdjCpm8eKlYqmiExRMpWaHumxFeX3+/s/N7YeHp4uKz3d3d1XdrweDB/BBVVOpmq3Ri0hXrDPZlUct1OyCEMKTl5Vet1tdWq/Vi6aVKdPzpKdHcSqZhWEwm9+4/aDbPUcP0dsbtjCRBDJ/s8SEPAMHxcM4giaSDzYXnugGYbZ/pvw1DBmTe3mFy/28IjqVKrb9QsZ2cnxfhMI7MTHqd/wKdScdWyb3W0wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Aggregated task breakdown\"\n        title=\"\"\n        src=\"/static/1681089562232.2976107585242/084e2/performance-cpu.png\"\n        srcset=\"/static/1681089562232.2976107585242/63868/performance-cpu.png 250w,\n/static/1681089562232.2976107585242/0b533/performance-cpu.png 500w,\n/static/1681089562232.2976107585242/084e2/performance-cpu.png 632w\"\n        sizes=\"(max-width: 632px) 100vw, 632px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Aggregated task breakdown</p>\n<p><code class=\"language-text\">Summary</code> 탭에서는 특정 CPU 작업을 선택하지 않은 경우, CPU 작업 내역이 다음 4가지 범주로 분류되어 표\n시됩니다.</p>\n<ul>\n<li><strong>Loading</strong>: 네트워크 요청 및 HTML 파싱</li>\n<li><strong>Scripting</strong>: JS 코드 파싱, 컴파일링 및 실행, 가비지 컬렉션(GC) 포함</li>\n<li><strong>Rendering</strong>: 스타일 및 레이아웃 계산</li>\n<li><strong>Painting</strong>: 이미지 페인팅, 합성, 리사이징 및 디코딩</li>\n</ul>\n<p>다른 쓰레드를 클릭하거나 위쪽 및 아래쪽 화살표 방향키를 사용해서 다른 쓰레드를 선택할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 818px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 116.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAIAAACEf/j0AAAACXBIWXMAAAsTAAALEwEAmpwYAAADt0lEQVR42o1Ta28UZRSeL0YapCC1te3u3Gdn57Lzzv3S7rK7tixLAQmg1a4IpjWpEiMa27SNsZpAjNXE2wejpAYN2hSKdk1Y2q2t0K0aSpNaSaOCEsMHid/9BZ7prMu6hsTkyZMz75xnznnecwZb+vzF5anB5amBta+Gfp0b/mXG59ulkYunBlv43uHjz7/y0gu00qs4/YrzbAXIPQaMnftoYf6LYmFidvbs3Mrc6rXLP60uXLuxfPPU+5NYgxeSO0NSx6Zwui6c3FSFOjwFjJ2fWDl3Zuni9I/5sysz0+vfL/xRmru1svjn2Fj+3tbUFiq7mchsY7Jb6V3VCE6wN8emLhXWS7PXV5duL1+6tTjz85WFm7+v/fXu29P3tCTvZyA1A3n1VKYawQn2+NETF6aunBkvFs5fzU+WZvNrff2vDw6Nj756GioHSXcVH+oZulxYg8rzF9YP9ozoO3pbpX3N4j4j+eRmvHMr5FGZbXcTG8mnPhn/ZvKzq91HTpDoEeyB+HZuTz29uy7cAW63kLsCvm+DK6inssBYE6E100ZDOIZHXM3t4mJpRk7R0o4I6uCUNCUmggBOiGh7DTCSwCMci+Mhnufb2xOO4xqmqWm657XZtqsoyIXAP7REUZIkuRrY3oyNNFPTbVWzRBnhBE3RHICkfKaZCEmxJF2Oa4CZlqnqFlINSUa66QAH4v8DTI7pUFOKqYKkyDGVj0pQiqKhms8UlKV8LqNGrCAQmyCDAD4BRwwXZdh/wAk+yo8CtFpTWdUMW5QUpPrODcsFWO3ZtvQBO97lJh/2kvvtxB4vfcBL7Y9EFZJi7oihz6gggxjAC1JwE1CH5crgIkEgsH5HfDUwy2lzvbisGFwUQf+QSm743ACDE0xLiCFJCGiCZAD/arullaBY6fATuZ5DKcgIE0zFGMfLho52d+pREcUUDQzCLKr1mKWLi4UP5r8u/lAcKU4c56MCQbI0A1PlopIab7OOdCdkxTRMBwap6jbYpCviT997evrjY61hFjx8lx84Ody9vRFnWLDNy8jwPO/g3p1Is8CdpluwEXCpldaw0pcD/UezIVJqCgknhx+d/PCZhiYCxPCOF0TDSGQeOizFEGjkmAa+Kivoi994+TFo2LXVnWnnt29fe66vC8SsL2Z5QY4nkrlcLoZ0mB/L8sGS3hHDw+l3+m6URq+XRt8azYVwuDBYbBYGAwJZ0WCQjhuH/SH/u2Fw143NpKErSJEbHyTLLyjOLywpkYgAf4gooWCENeK/ASmMSPlwemSIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"스크린샷 2023-04-08 오전 3.47.37.png\"\n        title=\"\"\n        src=\"/static/1681089562228.579107585238/64d87/any-function-call.png\"\n        srcset=\"/static/1681089562228.579107585238/63868/any-function-call.png 250w,\n/static/1681089562228.579107585238/0b533/any-function-call.png 500w,\n/static/1681089562228.579107585238/64d87/any-function-call.png 818w\"\n        sizes=\"(max-width: 818px) 100vw, 818px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 사진은 flame chart에서 특정 Function Call을 선택했습니다. 하단의 Aggregated Time은 해당 Function\nCall의 CPU 분석을 보여줍니다. 또한 링크(Graient~~~ )를 클릭하면 개발 도구의 소스 패널에 있는 코드 줄\n로 이동합니다.</p>\n<hr>\n<p><code class=\"language-text\">Bottom-Up</code> 탭에서는 CPU 활동에 대한 보다 세분화된 분석을 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABs0lEQVR42m2S2XLjIBRE9Se2JCQEiEXsAi2RvKacxElmKk8z//8bQ/I0sUOdJ+p23e6GzPmxhqQogDK91J53lnKFMCUt/xGE20SDCGUii72dBuudmqfYezNEO0+DkBYTVtWohvgbDenMrNyi/Sr0kEHYnFY99wQT6p1ZRrFbQlGiTV5ucvCdclvWbnoJ66+4+5D+mJUAKaWtxA1mxqg58MMaK0jyNHpHXgCup86t0u/bLmSoFcrGLp0UWIUhmrfrmclQAJTfU2FuVtWfVDhTOWcNcdKdUnohnXVxGtz766Ptl7LCedncsC1gv7xPpz/z+a+dnrMKMioiQoRQ3nLpBDuugQlTgnqzLW5spxsdzn6+9g+vyXxWQ8Q71aCWUNEyZQU9rCG5AFWz2SYBuEH6gx0udnzq7JrB1L5ypGWUd5Sb3snr00KFze9kn4WVdVKmthOd3X2K5ZeYcRWDn6N5vlzCuJYA3m/Oi9rPL3H/Me5/u3hItjETipDWaD5GPQZ52D3YfmRcFmX9FfV/cQUqnF4X1LiCOEufhnc67cctx1RqJY77SJiCDU6j984hFg1RCQDpPzW5gnmQy6QYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"bottom-up.png\"\n        title=\"\"\n        src=\"/static/1682400641213.6167112973135/00d43/bottom-up.png\"\n        srcset=\"/static/1682400641213.6167112973135/63868/bottom-up.png 250w,\n/static/1682400641213.6167112973135/0b533/bottom-up.png 500w,\n/static/1682400641213.6167112973135/00d43/bottom-up.png 1000w,\n/static/1682400641213.6167112973135/aa440/bottom-up.png 1500w,\n/static/1682400641213.6167112973135/d3deb/bottom-up.png 1758w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 사진처럼 하위 수준의 함수를 확장해서 어떤 코드가 함수를 호출하는지 확인할 수 있습니다. 이렇게 하\n면 제어할 수 있는 코드를 찾는 데 도움됩니다.</p>\n<hr>\n<p><code class=\"language-text\">Call Tree</code> 탭은 기록하는 동안 실행된 JS 함수의 계층적 표현입니다. 호출 트리는 가장 시간이 많이 걸리\n는 기능을 식별하는 데 도움이 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.400000000000006%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABN0lEQVR42mWQ607CQBCF+xyCofS691v3UnZbbUsFQUzw/V/GBRJFSc6fmck3c+Yk1gXKpFCGMFmUtVSWEAEhgYhiwh+FML2JMpEY57lohJDj2LfOdKENXcelEVJHHkByr9ih3DBhmXCU6yTWSreUkO2rPB+d1WQ/h9CPlKt0XdxrleZ5AYUdpZ1U+4b5JgGIisYWFbZafB0MBBVjaJ4CwCLLy39wVgDTHd3L52Y8xy1JNCMbV9UIIOY3hhKwWGa9l13nV+nD5RLd4HY4CzMkELNGt1WNMZVKOwDg4jlzhp0+ZkRUBH75eDmvm3ZnwsH2J9b0SQwwZlZF90x57yGET8v0fWt3+722oazgH35dMtVff54xd5efZWOrCiEig3cI1QA026nz3cCFjtMf+BoY4Ga4ZOYmRM03hq5XJb1W2d0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"호출 트리\"\n        title=\"\"\n        src=\"/static/1681089562231.061107585240/00d43/call-tree.png\"\n        srcset=\"/static/1681089562231.061107585240/63868/call-tree.png 250w,\n/static/1681089562231.061107585240/0b533/call-tree.png 500w,\n/static/1681089562231.061107585240/00d43/call-tree.png 1000w,\n/static/1681089562231.061107585240/aa440/call-tree.png 1500w,\n/static/1681089562231.061107585240/c830c/call-tree.png 1754w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>호출 트리</p>\n<p>위 사진에서 보이듯이 하향식 구조로 구성되며 시간이 가장 많이 걸리는 기능이 맨 위에 표시됩니다. 각 기\n능은 총 시간, 자체 시간 및 호출 횟수와 함께 나열됩니다.</p>\n<p>플레임 차트와 호출 트리 모두 JS 함수 실행에 대한 통찰을 제공하지만 서로 다른 방식으로 정보를 제공하\n고 다른 용도로 사용됩니다. 각 차트의 설명은 위에서 했으니, 둘 사이의 차이점과 각각의 장점을 살펴보겠\n습니다.</p>\n<p><code class=\"language-text\">플레임 차트</code>의 장점</p>\n<ul>\n<li>성능 문제를 일으킬 수 있는 장기 실행 함수 또는 코드 블록을 <strong>빠르게 식별</strong>할 수 있습니다.</li>\n<li>서로 다른 기능 간의 관계와 실행 순서를 보여줍니다.</li>\n</ul>\n<p><code class=\"language-text\">호출 트리</code>의 장점</p>\n<ul>\n<li>실행 시간 측면에서 가장 비용이 많이 드는 기능을 식별하는 데 도움이 되므로 <strong>최적화 작업의 우선 순\n위</strong>를 쉽게 지정할 수 있습니다.</li>\n<li>함수별 호출 횟수를 보여주기 때문에 필요 이상으로 <strong>자주 호출</strong>될 수 있는 함수를 정확히 찾아낼 수있\n습니다.</li>\n<li>함수 실행에 대한 집계 보기를 제공하여 전체 성능 비용에 대해 보다 명확한 관점을 제공합니다.</li>\n</ul>\n<p>따라서 플레임 차트는 JS 실행에 대해 시간순의 시각적 개요를 제공하는 데 탁월한 반면, 호출 트리는 반복\n되는 코드 호출을 집계하므로 평균적으로 어디서 시간이 소요되는지 쉽게 확인할 수 있습니다. 이렇듯 모두\n고유한 장점이 있으며 함께 사용하면 성능 병목 현상을 보다 효과적으로 식별하고 해결하는 데 도움이 될수\n있겠죠.</p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>이 외에도 웹 바이탈과 프레임 등 다양한 항목도 표시할 수 있는 좋은 기능들을 제공합니다.</p>\n<p>이제 Performance 탭에서 성능 결과 보고서를 보고 이해할 수 있을 겁니다. 당연하겠지만 보다 편안하게 사\n용하려면 연습밖에 없습니다. 본인이 만든 웹 페이지를 프로파일링하고 결과를 분석해보세요. 그러다보면웹\n애플리케이션의 성능 병목 현상을 식별하고 해결할 수 있을 겁니다.</p>\n<p>마지막으로 런타임 성능을 향상시키는 방법에는 여러 가지가 있습니다. 몇 가지 일반적인 최적화 전략은 다\n음과 같습니다.</p>\n<ul>\n<li>JavaScript의 실행을 최적화 (rAF 메소드를 사용한다던가, 오래 실행되는 JS를 메인 스레드에서 웹 워커\n로 이동한다던가 말이죠)</li>\n<li>캐싱, 압축 및 CDN을 활용하여 네트워크 요청을 최적화</li>\n<li>스타일 계산의 범위와 복잡성 감소</li>\n</ul>\n<p>프론트엔드 개발자라면 꼭 이러한 방법들을 숙지하시면 좋을 것 같습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li><a href=\"https://tv.naver.com/v/23652467\">https://tv.naver.com/v/23652467</a></li>\n<li><a href=\"https://www.debugbear.com/blog/devtools-performance\">https://www.debugbear.com/blog/devtools-performance</a></li>\n<li><a href=\"https://yonatankra.com/how-to-profile-javascript-performance-in-the-browser/\">https://yonatankra.com/how-to-profile-javascript-performance-in-the-browser/</a></li>\n<li><a href=\"https://developer.chrome.com/docs/devtools/performance/\">https://developer.chrome.com/docs/devtools/performance/</a></li>\n</ul>",
      "%EC%B0%B8%EA%B3%A0#참고": "<p>성능 문제가 발생했을 때 해결하려면 웹 애플리케이션을 프로파일링하고 모니터링하는 방법을 알아야 합니\n다.</p>\n<p>웹 성능을 측정하는 방법들은 Lighthouse, Chrome DevTools Performance Tab, PageSpeed Insights 등 여러\n가지가 있습니다. 이 중, <strong>DevTools의 Performance를 이용</strong>해 세부적으로 웹의 동작을 들여다 보겠습니다\n. 그리고 웹 애플리케이션의 성능을 분석하고 개선하는 방법을 알아보겠습니다.</p>\n<h2 id=\"성능을-기록하는-방법\" style=\"position:relative;\"><a href=\"#%EC%84%B1%EB%8A%A5%EC%9D%84-%EA%B8%B0%EB%A1%9D%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"성능을 기록하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>성능을 기록하는 방법</h2>\n<ul>\n<li>Chrome 브라우저를 엽니다.</li>\n<li>분석하려는 웹 페이지를 로드합니다.</li>\n<li>페이지의 아무 곳에 마우스 오른쪽 버튼을 클릭해서 <code class=\"language-text\">검사</code>를 선택하거나 <code class=\"language-text\">Crtl+Shift+I</code>\n(Windows/Linux) 또는 <code class=\"language-text\">Cmd+Opt+I</code> (Mac)를 눌러 개발자 도구를 엽니다.</li>\n<li>개발자 도구의 <code class=\"language-text\">Performance</code> 탭을 클릭합니다.</li>\n<li>Performance 탭에서 <code class=\"language-text\">기록</code> 버튼(원 아이콘)을 클릭하거나 <code class=\"language-text\">Crtl+E</code> (Windows/Linux) 또는 <code class=\"language-text\">Cmd+E</code> (Mac)\n를 누릅니다.</li>\n<li>분석하려는 작업(성능 문제를 일으킬 것 같은 시나리오)을 수행한 다음 <code class=\"language-text\">중지</code> 버튼을 클릭하여 기록을중\n지합니다.</li>\n<li>기록이 완료되면 Chrome DevTools가 웹 페이지 성능에 대한 자세한 보고서를 표시합니다.</li>\n</ul>\n<h2 id=\"웹-페이지-성능-보고서를-보고-이해하는-방법\" style=\"position:relative;\"><a href=\"#%EC%9B%B9-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%84%B1%EB%8A%A5-%EB%B3%B4%EA%B3%A0%EC%84%9C%EB%A5%BC-%EB%B3%B4%EA%B3%A0-%EC%9D%B4%ED%95%B4%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"웹 페이지 성능 보고서를 보고 이해하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>웹 페이지 성능 보고서를 보고 이해하는 방법</h2>\n<p>이제 아래 사진처럼 성능에 대한 자세한 보고서를 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAADXElEQVR42o2Ua1MbNxSG9xc0bdpJJrTYu6tdaVd709619tpgfLe5B9trY2xTphDAhTQYGztTIF/afkj/cwVMOp3mCzPPaDSvznukI80R5weR70euFzpuYJg2Q8WG5xDXpzSkQcBExyIuCyC2R4jHRhaDsWlaPmd7zJ4JozigWc+PHC80iaubjh9mgij2gkg3CTZMk9gmcSzbNW0H6yYTVc3gPCsmWkQMX9V0w7BYlOf5luXYxHcd3yFe4NJMkA+c2LWoZ1HHDC3d07Hj2hEX6nVXrehqBmILqgSqtoQMCC0Lrxg4Z6gZV616qG6ALEErFszb6pqLS75Wjt0a19jcOhmPp4u73ybz6fz+iZvFp8n8dra4v765nX28v57/fjVbTOe3V9OPs8Xd5WRyfvXu8HjANdZb7eTk6OfF6PB6NJx2k8te9327ddFL3ifJRad9kbQvmNLf/9B5nPS6Hza3hmEuT+M8V9z6RYu7QWk/boxyzcOgPMzWh2G5n2uMouqArPai6sFqc1jYPLJX+15x4JcOgtJAj/tm5i0H3b0ftV1aPCLZXlw9jSvnudo4Wz3O187ytXFcOc1XT9eavxabl1HxLCycZyvjn/TdF0L9tVzilvXGEm7gcCdtbbgrnUwxiSsjWjqOykd0rZcpD3L1d4X1k9V6jxaSuNQKCm9fK/VvhMr3YoF7CTe+kxov5fVXeFswt0WzqdMWonuQ7gnONon7JO6amYTXt3ltnTebr1DtW7HyQqz9AAqcm020aKQGQyfb3wvCHSPYoX5hn0asiFbY38ju1mm7nN+xB+vmUEFURAQgmyErNgcEEQgAiDJDFBEASFElCUIAVACUB11SZagKgvgFFg4FUWZwKUFNCUpaQGlRSfFQlCQZYyamBSkNNB5gNgGSwgvyA6L6CHqCk6EsQbYsAra3JMoKAEBOpwHPPyAIEhsl6cnDUkBeAP/CCUCECGmGiTUd6wbWDIQwO+d/YeuKghVF/QJ+gmMJltMi1ghSdAbrR4i0/5llqEiy+jUcjeKD/gGQ0HJK0Fgr2rYMcZoHz4H7/Pnvs7Pz2c3izVKKdW+cL5iWy7NSnwH3x59/3d59mlxP3ywt00yuWK5IsvJ4H88wsz+l0+mKD08HNZ2wgiUJsSM9x/wP0Z//iaRvinMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Performance 기록 결과 화면\"\n        title=\"\"\n        src=\"/static/1681089562232.0251107585241/00d43/my-blog-performance.png\"\n        srcset=\"/static/1681089562232.0251107585241/63868/my-blog-performance.png 250w,\n/static/1681089562232.0251107585241/0b533/my-blog-performance.png 500w,\n/static/1681089562232.0251107585241/00d43/my-blog-performance.png 1000w,\n/static/1681089562232.0251107585241/aa440/my-blog-performance.png 1500w,\n/static/1681089562232.0251107585241/56e36/my-blog-performance.png 1750w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Performance 기록 결과 화면</p>\n<p>엄청난 양의 데이터로 인해 뭐부터 봐야할지 감이 안 잡힐 수도 있습니다. 천천히 하나씩 들여다 보며 이해\n해보겠습니다.</p>\n<h3 id=\"cpu-utilization--filmstrip\" style=\"position:relative;\"><a href=\"#cpu-utilization--filmstrip\" aria-label=\"cpu utilization  filmstrip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU Utilization &#x26; FilmStrip</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZklEQVR42hXFCwrCMBQEwB7HlLzdbH6mJSIVEalg7n8bIwzMElC9k5nc6r3HJCVDwFyRlELO8ZrUaJmY0uroLgDysmN0fJMOYzZWqhkS2Wp8lvgoOnocN43NXn987+HcePZw3svnB31WGFymD9SOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Timeline\"\n        title=\"\"\n        src=\"/static/1681089562233.096107585245/00d43/performance-timeline.png\"\n        srcset=\"/static/1681089562233.096107585245/63868/performance-timeline.png 250w,\n/static/1681089562233.096107585245/0b533/performance-timeline.png 500w,\n/static/1681089562233.096107585245/00d43/performance-timeline.png 1000w,\n/static/1681089562233.096107585245/aa440/performance-timeline.png 1500w,\n/static/1681089562233.096107585245/ab40b/performance-timeline.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Timeline</p>\n<p>상단의 CPU 타임라인에선 Critical Rendering Path(Javascript, style, layout, paint, composite)과 ajax\n호출 등을 보여줍니다. 주로 JavaScript(노란색) 및 레이아웃 작업(보라색)과 같은 다양한 유형의 작업으로\n인해 CPU가 얼마나 열일하는지 봅니다. 사진에서 보이듯 CPU 활동은 처음 활동을 시작한 후 상당히 조용해\n집니다.</p>\n<p>중앙의 FilmStrip은 왼쪽부터 시간순으로 나열되며 프레임 스크린샷을 통해 각 순간의 사이트가 어떤 모습\n인지 볼 수 있습니다. 이러한 애플리케이션의 시각적 상태는 “screenshot” 옵션을 체크했을 때만 존재합니\n다. FilmStrip 위로 마우스를 가져가면 해당 시점의 스크린샷을 크게 볼 수 있습니다.</p>\n<p>하단 부분은 애플리케이션의 메모리 추세를 보여줍니다. 위 예시 사진에서 메모리가 증가하고 잠시 후 감소\n하는 것을 볼 수 있습니다. 일반적으로 가비지 컬렉션 프로세스가 발생할 때까진 메모리가 증가합니다.</p>\n<h3 id=\"user-timing-metrix\" style=\"position:relative;\"><a href=\"#user-timing-metrix\" aria-label=\"user timing metrix permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>User Timing metrix</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 813px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.200000000000003%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPElEQVR42gExAc7+ACQlKCUmKiQkKDU4QmRoc19jbGFlb2FaRnpzXzw8OlBXU2ZsZmpuc2JpZ2NoY1hdXzQ2NigoMCIhKBEQFgBGSEpqbmxnbGeVn5bF0crI1M3N2dPGx6HR07Cws63N0czQ1c/KzMrR087L1cPBzraYoo1+iHh/iXh6hHMAPkFCVlpYYmZje4N6a3Noa3NoanFmbHVyZW5nd3dwcm50Z2RqaWhsdnl+lJGokZKnjJCanZ6ym5uwnp6zACoqLjo7Pzk6PRkZHhQTGBUVGhQUGxIREx8oPCU6Wyg+NCxBMSsqIzMXGTUxUT83XS0oQzoyV0dFZEQ/YQAiIyYuLzIwMjQiIyYkJSgjJCcjJSghISEtOU46U3g5U0U5Uz48OzNHJygbIB4cHxwfISAbHhsrMykkKyMp/WsbrDCqYwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"로딩에 관한 지표들\"\n        title=\"\"\n        src=\"/static/1681089562233.2878107585246/baaa6/performance-timing.png\"\n        srcset=\"/static/1681089562233.2878107585246/63868/performance-timing.png 250w,\n/static/1681089562233.2878107585246/0b533/performance-timing.png 500w,\n/static/1681089562233.2878107585246/baaa6/performance-timing.png 813w\"\n        sizes=\"(max-width: 813px) 100vw, 813px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>로딩에 관한 지표들</p>\n<p>타이밍 레인에는 FP, DCL, L 등 이벤트도 표시됩니다.</p>\n<p>자세히 설명하자면 이 글이 너무 길어지고 내용이 산으로 갈 것 같아 각 지표들의 의미만 살펴보고 넘어가\n겠습니다.<br>\n해당 부분에 대한 건 따로 다른 글에서 자세히 설명하겠습니다.</p>\n<ul>\n<li>FP (First Paint): 페이지 네비게이션 후, 첫 픽셀을 그린 순간</li>\n<li>FCP (First Contentful Paint): 첫 엘리먼트를 그린 순간</li>\n<li>LCP (Largest Contentful Paint): 가장 큰 엘리먼트를 그린 순간</li>\n<li>DCL (Dom Content Loaded): DOM Tree를 구성하고, 스크립트(+ defer 스크립트)를 실행 완료했을 때 →\ndefer 스크립트가 없다면 FP 전에 DCL이 올 수 있습니다.</li>\n<li>L (Load): 다큐먼트의 리소스들을 모두 로드 완료했을 때</li>\n</ul>\n<h3 id=\"cpu-flame-chart\" style=\"position:relative;\"><a href=\"#cpu-flame-chart\" aria-label=\"cpu flame chart permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU flame chart</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABV0lEQVR42jWLXU+CYBiG+QEtax2UW5oftOUXLgp94UVEeQEBCdQsyjUzE3VIrq2f4DxSbKuTTqwO+p+9ubVdu5/rvreHmM9X728/wfJjFXyull/BAidmHSzWG/kD+39dvwbfs1ngv4wmzy4BxKaArkXlBmm3DHcBBJsG9QK0irxFAwNTgCYUba682XmLgRbN6mSGIzOQSPP3XK0Ptb7U8EvGpGL7ZcuTbA81nqDuQ2OMGr5xNZXsKatN2JoHda9Yc9N8Nw3viBjVKojdLHAEdcRJLi+PeMXl5EFJGWMpqQOhNkTmBFe26rLSGFTdaK65dYRCMUREsgZ5Wo9SZh42mXKbrXYAegDyY6HiFCsOp/RK+lDUe6ByyQhtKFkUZ4ZTeiiu7CRkYjeBj7qfMg9zVoQyybNWkm4k6VY0bx2fO2m2kyo6eDw40cIpNZKr75FqKCZv4+c4+gUZGG3RCsnSFwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Flame chart\"\n        title=\"\"\n        src=\"/static/1681089562232.488107585243/00d43/performance-flamechart.png\"\n        srcset=\"/static/1681089562232.488107585243/63868/performance-flamechart.png 250w,\n/static/1681089562232.488107585243/0b533/performance-flamechart.png 500w,\n/static/1681089562232.488107585243/00d43/performance-flamechart.png 1000w,\n/static/1681089562232.488107585243/aa440/performance-flamechart.png 1500w,\n/static/1681089562232.488107585243/ab40b/performance-flamechart.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Flame chart</p>\n<p>가장 핵심 부분이라고 생각합니다. 플레임 차트는 기록하는 동안 웹 페이지의 JS 실행을 시각적으로 표현한\n것입니다. <strong>성능 병목 현상이 발생할 수 있는 위치</strong>를 이해하는 데 중요한 부분입니다. 수평 레이어로 구\n성되며 각 레이어는 단일 JS 함수를 나타냅니다. 각 함수 블록의 너비는 함수의 실행 기간을 나타내고 색상\n은 작업 유형(스크립팅, 렌더링, 페인팅…)을 나타냅니다. 그러므로 이 섹션에서 <strong>어떤 함수가 호출되었고\n각 함수가 얼마나 오래 걸렸는지 정확하게 분석</strong>할 수 있습니다.</p>\n<p>위 사진에는 안 나왔지만 Register, GPU, Compositor 등 성능 문제 디버깅에 유용한 섹션들이 있습니다. 몇\n가지 설명드리겠습니다.</p>\n<p><strong>Network 섹션</strong>은 다운로드 요청과 완료 시간을 볼 수 있습니다. 그리고 <strong>Main 섹션</strong>은 렌더러의 메인\n스레드로, 알록달록한 색으로 된 지표들을 통해 프레임의 전체 시간과 프레임을 연장하는 데 가장 큰 영향\n을 미친 기능을 확인할 수 있습니다. 노란색은 자바스크립트가 실행 중임을 나타냅니다.</p>\n<p>이해를 쉽게 돕기 위해 UI 업데이트 또는 CPU 작업과 연관시키는 데 특히 유용한 Network 섹션을 통해\n<a href=\"https://stripe.com/\">Stripe</a> 홈페이지를 디버깅하는 예시를 들어 보겠습니다.</p>\n<p>아래 사진은 폰트 로드가 완료되기 직전의 Stripe 홈페이지입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC50lEQVR42gHcAiP9ADAwMyAgISYlJzc3OCYpKSUmKCAiIyEiJSgpKyooIigpKyIjJB4gISkrLRsdHicpLCYoKh4fISosLyEjJAA2PUhDS1o8RVNQWGdkaXpXWWdgYnFfYHJZXGtmZWxcXW9aXWxZW2pXWmpYWmpISFNJSVRKSVRISFJKSVQAP0FHP0JJQEJKODtCoqSu19bhz87bzMzYxsXQzsvNyMfTyMfTyMjSx8bSyMfSwb/Iw8HLw8HLxMLMwsDLACYnLCwuMissMCUnKzU6PzU4QDI3QDxASzI1OTw4NTY0ODEwNDMyNjQ1OS8yODI2PDQ4PTEyNzU2OTY4OgAjKDQrMT80OUkrL0AzN0c1OUknKzsxNkY0NUSdQV22UXykXY+fcqqVeMGPdsWdf7OzipXHkWzRpGLUs2UAlqzCmK7JhaGza46UZ4mRaIuRcJWYdZyfcI+SsHGdv43DsJ3Zp5fmn4XlqX/TuYu9zpie6quA9Lpz9sV2AKCfpKCepHR3dDxFOF1kW2BmXVBZTDE7KTU+L5GfyKW8+J+k8Ix+34Zs1ZB0zZZ/u7Khv8W2wLyvsd7W1gArLDAsLTIhIiZqZ3a+uNDEvtWWkKYVFRshIimMiMmojuyket6NbM1zZ8Jxd9F1ktqJt+eYyO6o0fXK2esAIiInIiMoFRYYaGZz0s3i1M7kmZanFxobJiYqnleVvWCqtmirlGmagHOggIy+lbnXl7bOqb3P2N7k7u/xAFlfWlxjXVtiW2RnaWlkdG5reFxbZSEjJickKbZZduCLqOCyyNrI1NnX3Nra3t3b3dTQ09zZ2uPh5Pj4+gBnb2Ztdmxze3JWZFcsQi8fKCIXFxoiJCYyNzXZ1tX//////v7v8fLo6+z6+/v4+vn8/f3+///+/f7v8PIAFBQZEhIXERAWHSEhLjsyJywrIyMnHyEjKi4u2dra////////19nd0NTZ/P38/f39/v7+/f39////5OXoVxdfwiCa7CoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stripe example\"\n        title=\"\"\n        src=\"/static/1681089562235.117107585248/00d43/stripe-not-loaded.png\"\n        srcset=\"/static/1681089562235.117107585248/63868/stripe-not-loaded.png 250w,\n/static/1681089562235.117107585248/0b533/stripe-not-loaded.png 500w,\n/static/1681089562235.117107585248/00d43/stripe-not-loaded.png 1000w,\n/static/1681089562235.117107585248/84bf8/stripe-not-loaded.png 1162w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>stripe example</p>\n<p>여기서 UI에 변경 사항이 있으면 네트워크 요청 섹션을 통해 UI 업데이트를 <strong>지연</strong>시키고 있던 <strong>네트워\n크 요청</strong>을 이렇게 식별할 수 있습니다.</p>\n<p>폰트 파일을 로드한 직후의 아래 사진에서 UI가 다운로드한 폰트를 사용해 재렌더링되었음을 확인할 수 있\n습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.199999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9ACUoLy80PDA1Py0yPElPWDY9RiMpMycsNycsNyctNiEmMTA1OisvMiMpNCUrNRwhKR4iKRkcJBwgJxwgKAA/Q0s/Q0xHTVlITllITVmen7C7uMe4tsW4tcWysb+3s8e4tL+5tb+wr8G1s8Svq7mno7GopLCqprKoo7AALzA0LzA0LzA0LjAzKy4wZ2txfoCJe3+JfYGLcnV4Zm9wbXNvcHRuaGtrbG5qbG5sbXBxaGxxaW52aWx1ADM0OCAhJiYoLi4vNiAgKCMkLB0dJhQTHSAiLCccJXIwQ3A4U2g/XWZOcltOflpPemhYb3RaVX1hQ4RxSABRYnxgc4xme5hkfJVeeY1feo9hfJFkf5JjhZdxc4jQY5XHf7e6kNKxlOirieu5jdbOmrjsqYr9vXL/zXAASU1Us7i9vcDHlZ+cTF9LVGdUV2pXV2tWS2NIWmddp6japLbsnaLsj3/dk3PUnnzArY6yyqmtz62c2b6nACgoLDo5QDs6QSgnLFlVY6qjubOrwW9pewsJDDEzQaGp8qKR7Jx74nhhyHNpzXN40ISb1qLG7KDG6bzR7AAdHSEhIiUhIiUWFxlta3jPyuHY0umBfo0QFBI6M0Cyarm0Z7WrbLN9YZhwbqt5l9CFs9mRs9O80uPp8PcAQUVDRkpISU1LRUpHYWFnfnqJiIWTYV9pGB0fPiw2z16G1YGk06fAv7O+ubfDxMjNvLzCwr/E0M3R+vr6AHN8cXR9cnqEeIKLgGBtYC5BMiIpJR8fIhwgIUtLSvnr7f////z8/eLm6Ons7PDw8e/w8vb3+P////T19wAYGBwXFxwVFRoUExkfJCQvPjQmKyoiIiYaHB5ITEz+/v7////6+vrIzNHo6uz9/f39/f3+/v7////08/ZpGj2cguMcPAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stripe example2\"\n        title=\"\"\n        src=\"/static/1682400641215.82112973136/00d43/stripe-loaded.png\"\n        srcset=\"/static/1682400641215.82112973136/63868/stripe-loaded.png 250w,\n/static/1682400641215.82112973136/0b533/stripe-loaded.png 500w,\n/static/1682400641215.82112973136/00d43/stripe-loaded.png 1000w,\n/static/1682400641215.82112973136/a13c9/stripe-loaded.png 1178w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>stripe example2</p>\n<h3 id=\"memory\" style=\"position:relative;\"><a href=\"#memory\" aria-label=\"memory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Memory</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAr0lEQVR42k3N22rDMAwG4DzHklqWrJOdntJuvWk3Ci0OLfT9X2fucjP4+BHoR+qm423cz2U/76b7vB1rWdevcnltPx+Ha909v9f1Z3qcT3VTr2XOukliopnFW3YBEgBBbNIH2ECKbsPKw8qHkHvwPmgg6yP0EFonkv+xpsNkmLQhViJmY/UcUSMxJqd2C5NIptZGB8pABiiLTtv/f6wIsyAteEmRIjq+D/N7y6LL8Av+2yUIPimhrwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Memory Image\"\n        title=\"\"\n        src=\"/static/1681089562232.7012107585244/00d43/performance-memory.png\"\n        srcset=\"/static/1681089562232.7012107585244/63868/performance-memory.png 250w,\n/static/1681089562232.7012107585244/0b533/performance-memory.png 500w,\n/static/1681089562232.7012107585244/00d43/performance-memory.png 1000w,\n/static/1681089562232.7012107585244/aa440/performance-memory.png 1500w,\n/static/1681089562232.7012107585244/ab40b/performance-memory.png 1736w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>DOM 노드, 리스너 및 기타 메트릭이 이 차트에 요약되어 있습니다.</p>\n<p>DOM 노드, 리스너 및 기타 메트릭이 이 차트에 요약되어 있습니다. 색상별로 노드, 리스너 등을 구분할 수\n있습니다. 이 부분에서 앱의 추세를 볼 수 있으며 주로 <strong>메모리 누수를 추적</strong>할 때 유용하게 사용할 수있\n습니다.</p>\n<h3 id=\"cpu-activity-breakdown\" style=\"position:relative;\"><a href=\"#cpu-activity-breakdown\" aria-label=\"cpu activity breakdown permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPU activity breakdown</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 632px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACpElEQVR42l1SS08TURSevaAkiJROZ9pO23ncO3M7nXamL/rEVqApihADGhMTJRgfiRujBuPCHQsQNHEhkfgHXGBcSwiuYWeiSyWphvhYIDvEbzoEDcnXyXd7znfOvd85HM/7KaWMGTzPBwLiQG2oWD6dL1Sy+SKhrFgeaKMKnusvl6u1XL6UyRVUTdeIwfEBkecFQBCCISlqxC3kIUD0uKxSrc3xPeBt0HYI4JJ2Bq1QNW6mVGLY6bzBEsFQBAiFox45wr0jwOEXiSrRmCpFYmHpAF7sEMgWg1JYcjkI4Ok5LwxBQAgLIjLkcDh2RGkwS9dZY+JOujhsGCyTK+qGiRIcZHwg1NPrJ9TQCPHzfYIYOmwOJS5F2m9ujgxnsjlC46ZlU91ECIYFE5a98ubtzx/fvmzMzz6cVVVHEEVPj/KwwEo5smZOXy7UqrbO7JSTgd69Nh68sbm5vf19Zmbm7q3x10sfnzxew/NQGHp8YbuZsBWNNOrT2cwgSpmWk7AcWSHcjZu39/b+1M8MdR7vPtHty2cbK8u/moNXff4+KSJDjFFhfqpG6/Vx2ynqLIGbsnjSFc/NzW9tbUVlbbg5WqnWqMGeL65eu/LolK9XiigQyzJBH0LMwYlyuuQwlrLTOZSANdzU1PX9/f2Rs6PHOro6OrvOj1349PlDc2zE5wt4nWOyBrdjCpm8eKlYqmiExRMpWaHumxFeX3+/s/N7YeHp4uKz3d3d1XdrweDB/BBVVOpmq3Ri0hXrDPZlUct1OyCEMKTl5Vet1tdWq/Vi6aVKdPzpKdHcSqZhWEwm9+4/aDbPUcP0dsbtjCRBDJ/s8SEPAMHxcM4giaSDzYXnugGYbZ/pvw1DBmTe3mFy/28IjqVKrb9QsZ2cnxfhMI7MTHqd/wKdScdWyb3W0wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Aggregated task breakdown\"\n        title=\"\"\n        src=\"/static/1681089562232.2976107585242/084e2/performance-cpu.png\"\n        srcset=\"/static/1681089562232.2976107585242/63868/performance-cpu.png 250w,\n/static/1681089562232.2976107585242/0b533/performance-cpu.png 500w,\n/static/1681089562232.2976107585242/084e2/performance-cpu.png 632w\"\n        sizes=\"(max-width: 632px) 100vw, 632px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Aggregated task breakdown</p>\n<p><code class=\"language-text\">Summary</code> 탭에서는 특정 CPU 작업을 선택하지 않은 경우, CPU 작업 내역이 다음 4가지 범주로 분류되어 표\n시됩니다.</p>\n<ul>\n<li><strong>Loading</strong>: 네트워크 요청 및 HTML 파싱</li>\n<li><strong>Scripting</strong>: JS 코드 파싱, 컴파일링 및 실행, 가비지 컬렉션(GC) 포함</li>\n<li><strong>Rendering</strong>: 스타일 및 레이아웃 계산</li>\n<li><strong>Painting</strong>: 이미지 페인팅, 합성, 리사이징 및 디코딩</li>\n</ul>\n<p>다른 쓰레드를 클릭하거나 위쪽 및 아래쪽 화살표 방향키를 사용해서 다른 쓰레드를 선택할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 818px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 116.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAIAAACEf/j0AAAACXBIWXMAAAsTAAALEwEAmpwYAAADt0lEQVR42o1Ta28UZRSeL0YapCC1te3u3Gdn57Lzzv3S7rK7tixLAQmg1a4IpjWpEiMa27SNsZpAjNXE2wejpAYN2hSKdk1Y2q2t0K0aSpNaSaOCEsMHid/9BZ7prMu6hsTkyZMz75xnznnecwZb+vzF5anB5amBta+Gfp0b/mXG59ulkYunBlv43uHjz7/y0gu00qs4/YrzbAXIPQaMnftoYf6LYmFidvbs3Mrc6rXLP60uXLuxfPPU+5NYgxeSO0NSx6Zwui6c3FSFOjwFjJ2fWDl3Zuni9I/5sysz0+vfL/xRmru1svjn2Fj+3tbUFiq7mchsY7Jb6V3VCE6wN8emLhXWS7PXV5duL1+6tTjz85WFm7+v/fXu29P3tCTvZyA1A3n1VKYawQn2+NETF6aunBkvFs5fzU+WZvNrff2vDw6Nj756GioHSXcVH+oZulxYg8rzF9YP9ozoO3pbpX3N4j4j+eRmvHMr5FGZbXcTG8mnPhn/ZvKzq91HTpDoEeyB+HZuTz29uy7cAW63kLsCvm+DK6inssBYE6E100ZDOIZHXM3t4mJpRk7R0o4I6uCUNCUmggBOiGh7DTCSwCMci+Mhnufb2xOO4xqmqWm657XZtqsoyIXAP7REUZIkuRrY3oyNNFPTbVWzRBnhBE3RHICkfKaZCEmxJF2Oa4CZlqnqFlINSUa66QAH4v8DTI7pUFOKqYKkyDGVj0pQiqKhms8UlKV8LqNGrCAQmyCDAD4BRwwXZdh/wAk+yo8CtFpTWdUMW5QUpPrODcsFWO3ZtvQBO97lJh/2kvvtxB4vfcBL7Y9EFZJi7oihz6gggxjAC1JwE1CH5crgIkEgsH5HfDUwy2lzvbisGFwUQf+QSm743ACDE0xLiCFJCGiCZAD/arullaBY6fATuZ5DKcgIE0zFGMfLho52d+pREcUUDQzCLKr1mKWLi4UP5r8u/lAcKU4c56MCQbI0A1PlopIab7OOdCdkxTRMBwap6jbYpCviT997evrjY61hFjx8lx84Ody9vRFnWLDNy8jwPO/g3p1Is8CdpluwEXCpldaw0pcD/UezIVJqCgknhx+d/PCZhiYCxPCOF0TDSGQeOizFEGjkmAa+Kivoi994+TFo2LXVnWnnt29fe66vC8SsL2Z5QY4nkrlcLoZ0mB/L8sGS3hHDw+l3+m6URq+XRt8azYVwuDBYbBYGAwJZ0WCQjhuH/SH/u2Fw143NpKErSJEbHyTLLyjOLywpkYgAf4gooWCENeK/ASmMSPlwemSIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"스크린샷 2023-04-08 오전 3.47.37.png\"\n        title=\"\"\n        src=\"/static/1681089562228.579107585238/64d87/any-function-call.png\"\n        srcset=\"/static/1681089562228.579107585238/63868/any-function-call.png 250w,\n/static/1681089562228.579107585238/0b533/any-function-call.png 500w,\n/static/1681089562228.579107585238/64d87/any-function-call.png 818w\"\n        sizes=\"(max-width: 818px) 100vw, 818px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 사진은 flame chart에서 특정 Function Call을 선택했습니다. 하단의 Aggregated Time은 해당 Function\nCall의 CPU 분석을 보여줍니다. 또한 링크(Graient~~~ )를 클릭하면 개발 도구의 소스 패널에 있는 코드 줄\n로 이동합니다.</p>\n<hr>\n<p><code class=\"language-text\">Bottom-Up</code> 탭에서는 CPU 활동에 대한 보다 세분화된 분석을 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABs0lEQVR42m2S2XLjIBRE9Se2JCQEiEXsAi2RvKacxElmKk8z//8bQ/I0sUOdJ+p23e6GzPmxhqQogDK91J53lnKFMCUt/xGE20SDCGUii72dBuudmqfYezNEO0+DkBYTVtWohvgbDenMrNyi/Sr0kEHYnFY99wQT6p1ZRrFbQlGiTV5ucvCdclvWbnoJ66+4+5D+mJUAKaWtxA1mxqg58MMaK0jyNHpHXgCup86t0u/bLmSoFcrGLp0UWIUhmrfrmclQAJTfU2FuVtWfVDhTOWcNcdKdUnohnXVxGtz766Ptl7LCedncsC1gv7xPpz/z+a+dnrMKMioiQoRQ3nLpBDuugQlTgnqzLW5spxsdzn6+9g+vyXxWQ8Q71aCWUNEyZQU9rCG5AFWz2SYBuEH6gx0udnzq7JrB1L5ypGWUd5Sb3snr00KFze9kn4WVdVKmthOd3X2K5ZeYcRWDn6N5vlzCuJYA3m/Oi9rPL3H/Me5/u3hItjETipDWaD5GPQZ52D3YfmRcFmX9FfV/cQUqnF4X1LiCOEufhnc67cctx1RqJY77SJiCDU6j984hFg1RCQDpPzW5gnmQy6QYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"bottom-up.png\"\n        title=\"\"\n        src=\"/static/1682400641213.6167112973135/00d43/bottom-up.png\"\n        srcset=\"/static/1682400641213.6167112973135/63868/bottom-up.png 250w,\n/static/1682400641213.6167112973135/0b533/bottom-up.png 500w,\n/static/1682400641213.6167112973135/00d43/bottom-up.png 1000w,\n/static/1682400641213.6167112973135/aa440/bottom-up.png 1500w,\n/static/1682400641213.6167112973135/d3deb/bottom-up.png 1758w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 사진처럼 하위 수준의 함수를 확장해서 어떤 코드가 함수를 호출하는지 확인할 수 있습니다. 이렇게 하\n면 제어할 수 있는 코드를 찾는 데 도움됩니다.</p>\n<hr>\n<p><code class=\"language-text\">Call Tree</code> 탭은 기록하는 동안 실행된 JS 함수의 계층적 표현입니다. 호출 트리는 가장 시간이 많이 걸리\n는 기능을 식별하는 데 도움이 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.400000000000006%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABN0lEQVR42mWQ607CQBCF+xyCofS691v3UnZbbUsFQUzw/V/GBRJFSc6fmck3c+Yk1gXKpFCGMFmUtVSWEAEhgYhiwh+FML2JMpEY57lohJDj2LfOdKENXcelEVJHHkByr9ih3DBhmXCU6yTWSreUkO2rPB+d1WQ/h9CPlKt0XdxrleZ5AYUdpZ1U+4b5JgGIisYWFbZafB0MBBVjaJ4CwCLLy39wVgDTHd3L52Y8xy1JNCMbV9UIIOY3hhKwWGa9l13nV+nD5RLd4HY4CzMkELNGt1WNMZVKOwDg4jlzhp0+ZkRUBH75eDmvm3ZnwsH2J9b0SQwwZlZF90x57yGET8v0fWt3+722oazgH35dMtVff54xd5efZWOrCiEig3cI1QA026nz3cCFjtMf+BoY4Ga4ZOYmRM03hq5XJb1W2d0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"호출 트리\"\n        title=\"\"\n        src=\"/static/1681089562231.061107585240/00d43/call-tree.png\"\n        srcset=\"/static/1681089562231.061107585240/63868/call-tree.png 250w,\n/static/1681089562231.061107585240/0b533/call-tree.png 500w,\n/static/1681089562231.061107585240/00d43/call-tree.png 1000w,\n/static/1681089562231.061107585240/aa440/call-tree.png 1500w,\n/static/1681089562231.061107585240/c830c/call-tree.png 1754w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>호출 트리</p>\n<p>위 사진에서 보이듯이 하향식 구조로 구성되며 시간이 가장 많이 걸리는 기능이 맨 위에 표시됩니다. 각 기\n능은 총 시간, 자체 시간 및 호출 횟수와 함께 나열됩니다.</p>\n<p>플레임 차트와 호출 트리 모두 JS 함수 실행에 대한 통찰을 제공하지만 서로 다른 방식으로 정보를 제공하\n고 다른 용도로 사용됩니다. 각 차트의 설명은 위에서 했으니, 둘 사이의 차이점과 각각의 장점을 살펴보겠\n습니다.</p>\n<p><code class=\"language-text\">플레임 차트</code>의 장점</p>\n<ul>\n<li>성능 문제를 일으킬 수 있는 장기 실행 함수 또는 코드 블록을 <strong>빠르게 식별</strong>할 수 있습니다.</li>\n<li>서로 다른 기능 간의 관계와 실행 순서를 보여줍니다.</li>\n</ul>\n<p><code class=\"language-text\">호출 트리</code>의 장점</p>\n<ul>\n<li>실행 시간 측면에서 가장 비용이 많이 드는 기능을 식별하는 데 도움이 되므로 <strong>최적화 작업의 우선 순\n위</strong>를 쉽게 지정할 수 있습니다.</li>\n<li>함수별 호출 횟수를 보여주기 때문에 필요 이상으로 <strong>자주 호출</strong>될 수 있는 함수를 정확히 찾아낼 수있\n습니다.</li>\n<li>함수 실행에 대한 집계 보기를 제공하여 전체 성능 비용에 대해 보다 명확한 관점을 제공합니다.</li>\n</ul>\n<p>따라서 플레임 차트는 JS 실행에 대해 시간순의 시각적 개요를 제공하는 데 탁월한 반면, 호출 트리는 반복\n되는 코드 호출을 집계하므로 평균적으로 어디서 시간이 소요되는지 쉽게 확인할 수 있습니다. 이렇듯 모두\n고유한 장점이 있으며 함께 사용하면 성능 병목 현상을 보다 효과적으로 식별하고 해결하는 데 도움이 될수\n있겠죠.</p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>이 외에도 웹 바이탈과 프레임 등 다양한 항목도 표시할 수 있는 좋은 기능들을 제공합니다.</p>\n<p>이제 Performance 탭에서 성능 결과 보고서를 보고 이해할 수 있을 겁니다. 당연하겠지만 보다 편안하게 사\n용하려면 연습밖에 없습니다. 본인이 만든 웹 페이지를 프로파일링하고 결과를 분석해보세요. 그러다보면웹\n애플리케이션의 성능 병목 현상을 식별하고 해결할 수 있을 겁니다.</p>\n<p>마지막으로 런타임 성능을 향상시키는 방법에는 여러 가지가 있습니다. 몇 가지 일반적인 최적화 전략은 다\n음과 같습니다.</p>\n<ul>\n<li>JavaScript의 실행을 최적화 (rAF 메소드를 사용한다던가, 오래 실행되는 JS를 메인 스레드에서 웹 워커\n로 이동한다던가 말이죠)</li>\n<li>캐싱, 압축 및 CDN을 활용하여 네트워크 요청을 최적화</li>\n<li>스타일 계산의 범위와 복잡성 감소</li>\n</ul>\n<p>프론트엔드 개발자라면 꼭 이러한 방법들을 숙지하시면 좋을 것 같습니다.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li><a href=\"https://tv.naver.com/v/23652467\">https://tv.naver.com/v/23652467</a></li>\n<li><a href=\"https://www.debugbear.com/blog/devtools-performance\">https://www.debugbear.com/blog/devtools-performance</a></li>\n<li><a href=\"https://yonatankra.com/how-to-profile-javascript-performance-in-the-browser/\">https://yonatankra.com/how-to-profile-javascript-performance-in-the-browser/</a></li>\n<li><a href=\"https://developer.chrome.com/docs/devtools/performance/\">https://developer.chrome.com/docs/devtools/performance/</a></li>\n</ul>"
    }
  },
  {
    "route": "https://lazy-dev.netlify.app/developments/improvements-tasks-new-team/",
    "data": {
      "%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%8C%80%EC%97%90-%ED%95%A9%EB%A5%98%ED%95%9C-%EC%9D%B4%ED%9B%84-%ED%96%88%EB%8D%98-%EA%B2%83-%EC%A4%91-%EA%B0%80%EC%9E%A5-%EB%B9%84%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%97%85%EB%AC%B4#새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무": "<h2 id=\"새로운-팀에-합류한-이후-했던-것-중-가장-비효율적인-업무\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%8C%80%EC%97%90-%ED%95%A9%EB%A5%98%ED%95%9C-%EC%9D%B4%ED%9B%84-%ED%96%88%EB%8D%98-%EA%B2%83-%EC%A4%91-%EA%B0%80%EC%9E%A5-%EB%B9%84%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%97%85%EB%AC%B4\" aria-label=\"새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무</h2>\n<h3 id=\"너무나도-번거로운-번역-작업\" style=\"position:relative;\"><a href=\"#%EB%84%88%EB%AC%B4%EB%82%98%EB%8F%84-%EB%B2%88%EA%B1%B0%EB%A1%9C%EC%9A%B4-%EB%B2%88%EC%97%AD-%EC%9E%91%EC%97%85\" aria-label=\"너무나도 번거로운 번역 작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>너무나도 번거로운 번역 작업</h3>\n<p>새로 합류한 팀의 프로젝트에서는 총 4개 국어(한국어, 영어, 일본어, 베트남어)를 지원해야 했습니다.\n<code class=\"language-text\">ko.lang.json</code> 또는 <code class=\"language-text\">en.lang.json</code> 이런식으로 이름을 짖고 <code class=\"language-text\">json</code> 파일 형식으로 관리하고 있었습니다.</p>\n<p>따로 번역 작업을 해주시는 분은 없고, 그냥 구글 번역기를 통해 얻은 값을 각 <code class=\"language-text\">json</code> 파일에 추가해서 다\n국어를 지원하고 있었죠.</p>\n<p>로직을 작성해나가며 하나하나 번역기를 돌리고 각 <code class=\"language-text\">json</code> 파일에 추가하는 작업은 보통 귀찮은 작업이 아\n니었습니다.</p>\n<h3 id=\"손수-작업의-한계\" style=\"position:relative;\"><a href=\"#%EC%86%90%EC%88%98-%EC%9E%91%EC%97%85%EC%9D%98-%ED%95%9C%EA%B3%84\" aria-label=\"손수 작업의 한계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>손수 작업의 한계</h3>\n<p>일일이 번역할 문구를 복사해 4개 국어로 번역하고, 번역된 문구를 다시 각각 복사해 4개의 <code class=\"language-text\">json</code> 파일에\n추가하는 과정이 필요합니다. 또한 여러 개발자가 작업하다보니 <code class=\"language-text\">key</code> 네이밍 문법도 정리가 안 되어 있었\n습니다. 어떤 것은 <code class=\"language-text\">camelCase</code>, 또 어떤 것은 <code class=\"language-text\">snake_case</code>로 되어 있었습니다. 워낙 바쁘다보면\n<code class=\"language-text\">en.lang.json</code> 파일에 한국어를 추가하는 실수를 범할 수도 있겠죠. 이 과정에서 많은 시간이 소모되고 실\n수를 하지 않는다는 보장이 없죠.</p>\n<p>이런 새로운 기능을 작업할때마다 반복되다 보니 어느 세월에 문구를 복사해서 변역하고 또 번역한 값을 복\n사해서 각 언어 파일에 키값과 함께 추가하고 로직은 언제 다 구현하지? 라는 마음이 들었습니다. 이 과정\n을 개선하기로 마음 먹었죠.</p>\n<h3 id=\"어차피-번역기를-사용해서-할거라면-스크립트를-작성해서-개선할-수-있지-않을까\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EC%B0%A8%ED%94%BC-%EB%B2%88%EC%97%AD%EA%B8%B0%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%ED%95%A0%EA%B1%B0%EB%9D%BC%EB%A9%B4-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%84%9C-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%A7%80-%EC%95%8A%EC%9D%84%EA%B9%8C\" aria-label=\"어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까?</h3>\n<p>구글 번역기를 사용하므로 google에서 제공하는 번역 API를 이용해 한 번에 4개의 언어로 번역해주고 파일\n에 자동으로 추가해주는 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있을 것 같았습니다.</p>\n<p>개발자가 번역할 문구와 키값을 입력하면 자동으로 4개 국어로 번역해주고 매칭되는 언어별 <code class=\"language-text\">json</code> 파일의\n마지막 줄에 추가해주는 방법이 좋을 것 같습니다. 또한 key 값도 입력받을 때 정해둔 네이밍 문법에 일치\n해야 하기 때문에 통일되는 이점도 동시에 따라 왔죠. 여기서 네이밍 문법은 애초에 정해져 있지 않았기 때\n문에 팀원분들께 미팅 요청을 드렸고 <code class=\"language-text\">camelCase</code>로 통일하기로 결정이 되었죠. 그리고 번역 값이 100프로\n정확할 순 없으니 번역 결과값을 받아 수정할 수 있도록 하면 더욱 좋겠죠.</p>\n<p>이제 생각한 것을 편하게 사용할 수 있도록 구현하면 되겠습니다.</p>\n<h2 id=\"모든-팀들이-편하게-사용하도록-웹-사이트로-만들자\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%A0-%ED%8C%80%EB%93%A4%EC%9D%B4-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8F%84%EB%A1%9D-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%9E%90\" aria-label=\"모든 팀들이 편하게 사용하도록 웹 사이트로 만들자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모든 팀들이 편하게 사용하도록 웹 사이트로 만들자</h2>\n<p>‘위 스크립트를 만들어도 어떻게 해야 팀원들이 쉽게 사용할 수 있을까?‘라는 고민이 들었습니다. 익숙한웹\n사이트에서 최대한 직관적이고 간단하게 구현해 각 팀별로 원하는 목적을 쉽게 달성할 수 있도록 구현하고\n싶었습니다. 다른 팀에서도 <code class=\"language-text\">json</code> 파일을 사용하진 않지만 구글 번역기를 이용해서 4개 국어를 지원하고\n있었기 때문에 이왕 만드는 거 다른 팀원분에게도 도움이 되고 싶었기 때문에 첫 진입 시, 팀을 선택하고\n각 팀별로 다른 화면을 보여주도록 플로우를 그렸죠.</p>\n<p>예로 A라는 팀에서는 <a href=\"https://locize.com/\">locize</a>라는 번역 관리 시스템을 사용해서 관리 중이었습니다.\nlocize를 사용하면 번역할 문구를 언어별로 locize에 붙여넣으면 됩니다. 따라서 <code class=\"language-text\">json</code> 파일을 사용하지않\n으므로 4개 국어로 번역하고 각 번역 값을 확인 후, 수정하고 복사할 수 있도록 하면 좋겠죠.</p>\n<p>제가 속해 있는 B 팀의 경우에는 번역한 값들을 각 언어별 <code class=\"language-text\">json</code> 파일에 key-value 형식으로 추가해줘야합\n니다. 따라서 key와 value를 입력받고 각 <code class=\"language-text\">json</code> 파일에 추가해주면 많이 편해질 겁니다.</p>\n<p>아래는 구현한 웹사이트에서 각 팀별로 번역 작업을 하는 1차 결과입니다.</p>\n<h3 id=\"teama\" style=\"position:relative;\"><a href=\"#teama\" aria-label=\"teama permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamA</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamA-web.gif\" alt=\"translate-teamA-web-example\"></p>\n<ul>\n<li>TeamA (<code class=\"language-text\">locize</code> 를 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamA를 선택합니다.</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다. (특수문자로만 이루어져서는 안 됩니다.)</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>복사하기 버튼을 눌러 클립보드에 복사하고 <code class=\"language-text\">locize</code> 에 붙여넣습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"teamb\" style=\"position:relative;\"><a href=\"#teamb\" aria-label=\"teamb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamB</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamB-web.gif\" alt=\"translate-teamB-web-example\"></p>\n<ul>\n<li>TeamB (<code class=\"language-text\">json</code> 파일을 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamB를 선택합니다.</li>\n<li>언어 파일이 위치한 폴더의 경로를 입력하지 않았었다면, 파일의 경로를 입력합니다.\n<ul>\n<li>입력한 경로에 <code class=\"language-text\">language.json</code> 파일이 존재하지 않는다면 저장되지 않습니다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">json</code> 파일에 추가할 텍스트를 입력합니다.\n<ul>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다.</li>\n</ul>\n</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>‘각 언어별 json 파일에 저장’ 버튼을 눌러 각 <code class=\"language-text\">json</code> 파일에 추가합니다.</li>\n</ul>\n</li>\n</ul>\n<p>일단 생각한대로 구현은 했습니다. <code class=\"language-text\">locize</code> 를 사용하는 TeamA의 경우에는 번역 작업이 편해진 것 같습니\n다. 하지만 <code class=\"language-text\">json</code> 파일을 사용하는 TeamB의 경우에는 번역 작업을 하려면 여전히 번거롭다고 느껴졌습니다\n. 번역 작업을 편하게 하기 위해 웹 사이트 주소를 알아야 하는 것은 물론, 팀을 선택하고 언어 파일 경로\n를 설정해야 했죠.</p>\n<h2 id=\"차라리-노드-스크립트로-만들어-더욱-편하게-사용하자\" style=\"position:relative;\"><a href=\"#%EC%B0%A8%EB%9D%BC%EB%A6%AC-%EB%85%B8%EB%93%9C-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%8D%94%EC%9A%B1-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90\" aria-label=\"차라리 노드 스크립트로 만들어 더욱 편하게 사용하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>차라리 노드 스크립트로 만들어 더욱 편하게 사용하자</h2>\n<p>언어 파일 경로를 설정하는 과정조차 없애고 싶었습니다. 그래서 TeamB의 경우에는 이 웹 사이트가 아닌,\n프로젝트에서 node script를 실행해 번역 작업을 더 간편하게 할 수 있게 방식을 변경하기로 결정했습니다.\n이렇게 하면 웹사이트의 주소를 알지 않아도 되고 필요한 기능만 명확히 수행할 것 같았습니다.</p>\n<p>간단하게 스크립트를 만들어 보겠습니다.</p>\n<p>먼저, 사용자에게서 터미널에서 key와 value를 입력받아야 합니다. 이 정보들을 입력받기 위해\n<a href=\"https://www.npmjs.com/package/inquirer\">inquirer.js</a> 라이브러리를 사용하겠습니다. <code class=\"language-text\">inquirer.js</code> 는\n터미널에서 다양한 UI로 사용자의 입력을 받거나, 출력해주는 라이브러리입니다. 아래 사진을 보시면 어떤\n느낌인지 감이 잡히실 겁니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 692px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAn0lEQVR42jWOwQqEIBCGe45tOwhmbLaupGmaQXSopMtSSNHB93+MHYL9DsPwzz/zT9J1XVmW1lrOuRCibVuttTFGKQUKNJRSxhiIwzDAtO/7PM9RxYlyyXVd4AshjOO4LMtxHNu2Qd333Tl3nue6rrAzTZP3/nsTY0SvN/6IpGkaQkhd19UNHBJ/4CMpJWRCFMYYIQSGoijmec6eaZY+fs09J+uMubsAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"inquirer-example\"\n        title=\"\"\n        src=\"/static/1683074758696.817115529904/91e7e/inquirer-example.png\"\n        srcset=\"/static/1683074758696.817115529904/63868/inquirer-example.png 250w,\n/static/1683074758696.817115529904/0b533/inquirer-example.png 500w,\n/static/1683074758696.817115529904/91e7e/inquirer-example.png 692w\"\n        sizes=\"(max-width: 692px) 100vw, 692px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"흐름-정리하기\" style=\"position:relative;\"><a href=\"#%ED%9D%90%EB%A6%84-%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"흐름 정리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>흐름 정리하기</h3>\n<ol>\n<li>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로를 정의합니다.</li>\n<li>사용자로부터 <code class=\"language-text\">key</code>를 입력받습니다.\n<ol>\n<li>값을 입력하지 않거나, 이미 존재하는 <code class=\"language-text\">key</code> 라면 오류 메시지를 반환하고 다시 입력 받습니다.</li>\n<li><code class=\"language-text\">camelCase</code> 가 아니라면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>사용자로부터 <code class=\"language-text\">value</code> 를 입력받습니다.\n<ol>\n<li>값을 입력하지 않으면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가합니다.\n<ol>\n<li>입력받은 <code class=\"language-text\">value</code>를 4개 국어로 번역합니다.</li>\n<li>정의해두었던 <code class=\"language-text\">json</code>파일이 존재하는 폴더 경로를 이용해, 해당 폴더의 하위에 존재하는 모든 언어파\n일들을 가져옵니다. 없다면 오류 메시지를 반환합니다.</li>\n<li>찾은 각 <code class=\"language-text\">json</code> 파일의 문자열을 분석하고, JS 객체로 변환합니다.</li>\n<li>변환한 JS 객체에 전달 받은 <code class=\"language-text\">key</code> 와 번역된 <code class=\"language-text\">value</code>를 추가합니다.</li>\n<li>변경된 JS 객체를 다시 JSON 문자열로 변환해 각 언어 파일에 작성합니다.</li>\n</ol>\n</li>\n<li>결과를 터미널에 출력합니다.</li>\n</ol>\n<p>정리하고 보니 빠르게 스크립트를 구현할 수 있을 것 같네요. 바로 코드로 구현해보겠습니다.</p>\n<h3 id=\"번역할-국가별-언어-코드-및-언어별-json-파일이-존재하는-폴더-경로-정의하기\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%97%AD%ED%95%A0-%EA%B5%AD%EA%B0%80%EB%B3%84-%EC%96%B8%EC%96%B4-%EC%BD%94%EB%93%9C-%EB%B0%8F-%EC%96%B8%EC%96%B4%EB%B3%84-json-%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%A1%B4%EC%9E%AC%ED%95%98%EB%8A%94-%ED%8F%B4%EB%8D%94-%EA%B2%BD%EB%A1%9C-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0\" aria-label=\"번역할 국가별 언어 코드 및 언어별 json 파일이 존재하는 폴더 경로 정의하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로 정의하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 정의한 언어 코드를 이용해 번역을 진행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGE_CODE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ko'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 언어별 json 파일이 존재하는 폴더 경로를 정의합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGES_DIR_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span><span class=\"token function\">cwd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'libs'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'locales'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'languages'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"사용자로부터-key와-value를-입력받기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90%EB%A1%9C%EB%B6%80%ED%84%B0-key%EC%99%80-value%EB%A5%BC-%EC%9E%85%EB%A0%A5%EB%B0%9B%EA%B8%B0\" aria-label=\"사용자로부터 key와 value를 입력받기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용자로부터 <code class=\"language-text\">key</code>와 <code class=\"language-text\">value</code>를 입력받기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 각 json 파일에 전달된 키가 존재하는지 검증합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">keyExistsInLangFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> convertedLanguageCode <span class=\"token operator\">=</span> <span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n          chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">The key '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">' already exists in '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json'.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNil</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isEmptyString</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">isNil</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> value<span class=\"token operator\">?.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 사용자에게 key와 value 값을 입력하라는 메시지를 표시합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">promptTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> key <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token function\">keyExistsInLangFiles</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> inputKey <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'key'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation key in camelCase:'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">validate</span><span class=\"token operator\">:</span> validateCamelCase<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    key <span class=\"token operator\">=</span> inputKey<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation value:'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">validate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token string\">'value cannot be empty. Please enter again:'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">inquirer</code> 라이브러리를 활용해 입력받도록 합니다. <code class=\"language-text\">type</code> 속성은 프롬프트의 유형을 정의합니다. input\ntype은 사용자에게서 문자열을 입력 받습니다. 그리고 <code class=\"language-text\">validate</code> 속성을 통해 사용자의 input 값에 제약을\n걸어줍니다.</p>\n<h3 id=\"각-언어-파일에-key-value를-추가하기\" style=\"position:relative;\"><a href=\"#%EA%B0%81-%EC%96%B8%EC%96%B4-%ED%8C%8C%EC%9D%BC%EC%97%90-key-value%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"각 언어 파일에 key value를 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 입력 받은 값을 번역하고 번역된 값을 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translateText</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token punctuation\">,</span> targetLanguage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://translation.googleapis.com/language/translate/v2'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">q</span><span class=\"token operator\">:</span> text<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> targetLanguage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token constant\">GOOGLE_TRANSLATE_API_KEY</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>translations<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>translatedText<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 전달받은 언어 코드에 해당하는 json 언어 파일을 찾아서 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">findLanguageFile</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">languageCode</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// `recursive-readdir` 라이브러리에서 제공하는 함수입니다.</span>\n  <span class=\"token comment\">// 해당 하위 디렉터리의 모든 파일을 재귀적으로 나열합니다.</span>\n  <span class=\"token keyword\">const</span> files <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">recursive</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> files<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> path<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>languageFile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Language file for </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> not found.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> languageFile<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 각 언어 파일에 키와 번역 값을 추가합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> translatedValue <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">translateText</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">findLanguageFile</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    translations<span class=\"token punctuation\">[</span>languageCode<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> translations<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"전체-번역-프로세스-실행하기\" style=\"position:relative;\"><a href=\"#%EC%A0%84%EC%B2%B4-%EB%B2%88%EC%97%AD-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"전체 번역 프로세스 실행하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>전체 번역 프로세스 실행하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 전체 번역 프로세스를 실행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promptTranslation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">addTranslation</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token string\">'번역 결과: '</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>translations<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Translation added to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">translate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 구현한 스크립트를 실행해보겠습니다. 아래는 스크립트 실행 결과입니다.</p>\n<p><img src=\"/images/new-team-productivity/translate-teamB-script.gif\" alt=\"translate-teamB-script.gif\"></p>\n<ul>\n<li><code class=\"language-text\">npm run translate</code> 명령어를 실행합니다.</li>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역을 원하는 텍스트를 입력 후, 엔터를 누릅니다.</li>\n<li>번역한 결과가 각 <code class=\"language-text\">json</code> 파일의 마지막 라인에 자동으로 추가되며 포맷팅을 실행합니다.</li>\n</ul>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByUlEQVR42o2QS2/TQBSF/S9oXn6MXzPjedjjcZzEebpOXwlQIYpKu0KlbGGP2FRq1/0ViBViwZIfx3WMsmjTCuno6uja38ycY8hiH4lskpHjIlTM75iuaXs9q56NwG+13TTT8KkMIpnEMlNScIGJIJEICcO0NiSSIeG1p7DkW1EWBzgyCI+FykOmLC9CIfMI94jwMEc+QR52fQrTC6gfUnez2SxrY6PACLgKhG7ZwQvT37N8MC0nrNV1Wh1rq3bXfqBOzzFkolM9EFKptI8JMy0E6ploE89vQnZNBL8+loEpX+wfTOfVbLEsJgvdH8oki1UfZiQUGC5T6GY3HPFE6RwqaQRNYMoI5SCXyEikAWY7yRoWsa4OjvqDQumBjHWssjTVSZzAkfAJioHAT8LQZJaPgIHwEY/hZsokvDYfjplIoFJ4juX4TUMP4WFRLg9fzxbHSToejMp5eTKZHToubnct6KnRkzefrM/enV9dXX/+/uPn1293q1cX7y+vQyJbHfMZ7B98tHr75uzDx09ffv3+c3N7//L08vwCYPFf8HQ6X69Pq+U6y+ejcVVWK4iAPALPfp6sYa3KUCg3gJA2FLvXNkE763kM/wUP7og3R7wHKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"translate-slack-reaction.png\"\n        title=\"\"\n        src=\"/static/1692836624195.603146242730/00d43/translate-slack-reaction.png\"\n        srcset=\"/static/1692836624195.603146242730/63868/translate-slack-reaction.png 250w,\n/static/1692836624195.603146242730/0b533/translate-slack-reaction.png 500w,\n/static/1692836624195.603146242730/00d43/translate-slack-reaction.png 1000w,\n/static/1692836624195.603146242730/aa440/translate-slack-reaction.png 1500w,\n/static/1692836624195.603146242730/e8950/translate-slack-reaction.png 2000w,\n/static/1692836624195.603146242730/922e6/translate-slack-reaction.png 2140w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>작업 이후 좋은 반응과 함께 번거롭던 번역 작업이 편해졌다는 의견이 많았습니다. 여러 고민을 거쳐 만든\n보람이 있었죠. 이렇게 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있었습니다. 이제 번역 업\n무에서 발생하는 시간을 크게 줄일 수 있게 되었습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://nodejs.org/api/fs.html\">https://nodejs.org/api/fs.html</a></li>\n<li><a href=\"https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/\">https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/</a></li>\n</ul>",
      "%EB%84%88%EB%AC%B4%EB%82%98%EB%8F%84-%EB%B2%88%EA%B1%B0%EB%A1%9C%EC%9A%B4-%EB%B2%88%EC%97%AD-%EC%9E%91%EC%97%85#너무나도 번거로운 번역 작업": "<h2 id=\"새로운-팀에-합류한-이후-했던-것-중-가장-비효율적인-업무\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%8C%80%EC%97%90-%ED%95%A9%EB%A5%98%ED%95%9C-%EC%9D%B4%ED%9B%84-%ED%96%88%EB%8D%98-%EA%B2%83-%EC%A4%91-%EA%B0%80%EC%9E%A5-%EB%B9%84%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%97%85%EB%AC%B4\" aria-label=\"새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무</h2>\n<h3 id=\"너무나도-번거로운-번역-작업\" style=\"position:relative;\"><a href=\"#%EB%84%88%EB%AC%B4%EB%82%98%EB%8F%84-%EB%B2%88%EA%B1%B0%EB%A1%9C%EC%9A%B4-%EB%B2%88%EC%97%AD-%EC%9E%91%EC%97%85\" aria-label=\"너무나도 번거로운 번역 작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>너무나도 번거로운 번역 작업</h3>\n<p>새로 합류한 팀의 프로젝트에서는 총 4개 국어(한국어, 영어, 일본어, 베트남어)를 지원해야 했습니다.\n<code class=\"language-text\">ko.lang.json</code> 또는 <code class=\"language-text\">en.lang.json</code> 이런식으로 이름을 짖고 <code class=\"language-text\">json</code> 파일 형식으로 관리하고 있었습니다.</p>\n<p>따로 번역 작업을 해주시는 분은 없고, 그냥 구글 번역기를 통해 얻은 값을 각 <code class=\"language-text\">json</code> 파일에 추가해서 다\n국어를 지원하고 있었죠.</p>\n<p>로직을 작성해나가며 하나하나 번역기를 돌리고 각 <code class=\"language-text\">json</code> 파일에 추가하는 작업은 보통 귀찮은 작업이 아\n니었습니다.</p>\n<h3 id=\"손수-작업의-한계\" style=\"position:relative;\"><a href=\"#%EC%86%90%EC%88%98-%EC%9E%91%EC%97%85%EC%9D%98-%ED%95%9C%EA%B3%84\" aria-label=\"손수 작업의 한계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>손수 작업의 한계</h3>\n<p>일일이 번역할 문구를 복사해 4개 국어로 번역하고, 번역된 문구를 다시 각각 복사해 4개의 <code class=\"language-text\">json</code> 파일에\n추가하는 과정이 필요합니다. 또한 여러 개발자가 작업하다보니 <code class=\"language-text\">key</code> 네이밍 문법도 정리가 안 되어 있었\n습니다. 어떤 것은 <code class=\"language-text\">camelCase</code>, 또 어떤 것은 <code class=\"language-text\">snake_case</code>로 되어 있었습니다. 워낙 바쁘다보면\n<code class=\"language-text\">en.lang.json</code> 파일에 한국어를 추가하는 실수를 범할 수도 있겠죠. 이 과정에서 많은 시간이 소모되고 실\n수를 하지 않는다는 보장이 없죠.</p>\n<p>이런 새로운 기능을 작업할때마다 반복되다 보니 어느 세월에 문구를 복사해서 변역하고 또 번역한 값을 복\n사해서 각 언어 파일에 키값과 함께 추가하고 로직은 언제 다 구현하지? 라는 마음이 들었습니다. 이 과정\n을 개선하기로 마음 먹었죠.</p>\n<h3 id=\"어차피-번역기를-사용해서-할거라면-스크립트를-작성해서-개선할-수-있지-않을까\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EC%B0%A8%ED%94%BC-%EB%B2%88%EC%97%AD%EA%B8%B0%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%ED%95%A0%EA%B1%B0%EB%9D%BC%EB%A9%B4-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%84%9C-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%A7%80-%EC%95%8A%EC%9D%84%EA%B9%8C\" aria-label=\"어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까?</h3>\n<p>구글 번역기를 사용하므로 google에서 제공하는 번역 API를 이용해 한 번에 4개의 언어로 번역해주고 파일\n에 자동으로 추가해주는 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있을 것 같았습니다.</p>\n<p>개발자가 번역할 문구와 키값을 입력하면 자동으로 4개 국어로 번역해주고 매칭되는 언어별 <code class=\"language-text\">json</code> 파일의\n마지막 줄에 추가해주는 방법이 좋을 것 같습니다. 또한 key 값도 입력받을 때 정해둔 네이밍 문법에 일치\n해야 하기 때문에 통일되는 이점도 동시에 따라 왔죠. 여기서 네이밍 문법은 애초에 정해져 있지 않았기 때\n문에 팀원분들께 미팅 요청을 드렸고 <code class=\"language-text\">camelCase</code>로 통일하기로 결정이 되었죠. 그리고 번역 값이 100프로\n정확할 순 없으니 번역 결과값을 받아 수정할 수 있도록 하면 더욱 좋겠죠.</p>\n<p>이제 생각한 것을 편하게 사용할 수 있도록 구현하면 되겠습니다.</p>\n<h2 id=\"모든-팀들이-편하게-사용하도록-웹-사이트로-만들자\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%A0-%ED%8C%80%EB%93%A4%EC%9D%B4-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8F%84%EB%A1%9D-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%9E%90\" aria-label=\"모든 팀들이 편하게 사용하도록 웹 사이트로 만들자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모든 팀들이 편하게 사용하도록 웹 사이트로 만들자</h2>\n<p>‘위 스크립트를 만들어도 어떻게 해야 팀원들이 쉽게 사용할 수 있을까?‘라는 고민이 들었습니다. 익숙한웹\n사이트에서 최대한 직관적이고 간단하게 구현해 각 팀별로 원하는 목적을 쉽게 달성할 수 있도록 구현하고\n싶었습니다. 다른 팀에서도 <code class=\"language-text\">json</code> 파일을 사용하진 않지만 구글 번역기를 이용해서 4개 국어를 지원하고\n있었기 때문에 이왕 만드는 거 다른 팀원분에게도 도움이 되고 싶었기 때문에 첫 진입 시, 팀을 선택하고\n각 팀별로 다른 화면을 보여주도록 플로우를 그렸죠.</p>\n<p>예로 A라는 팀에서는 <a href=\"https://locize.com/\">locize</a>라는 번역 관리 시스템을 사용해서 관리 중이었습니다.\nlocize를 사용하면 번역할 문구를 언어별로 locize에 붙여넣으면 됩니다. 따라서 <code class=\"language-text\">json</code> 파일을 사용하지않\n으므로 4개 국어로 번역하고 각 번역 값을 확인 후, 수정하고 복사할 수 있도록 하면 좋겠죠.</p>\n<p>제가 속해 있는 B 팀의 경우에는 번역한 값들을 각 언어별 <code class=\"language-text\">json</code> 파일에 key-value 형식으로 추가해줘야합\n니다. 따라서 key와 value를 입력받고 각 <code class=\"language-text\">json</code> 파일에 추가해주면 많이 편해질 겁니다.</p>\n<p>아래는 구현한 웹사이트에서 각 팀별로 번역 작업을 하는 1차 결과입니다.</p>\n<h3 id=\"teama\" style=\"position:relative;\"><a href=\"#teama\" aria-label=\"teama permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamA</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamA-web.gif\" alt=\"translate-teamA-web-example\"></p>\n<ul>\n<li>TeamA (<code class=\"language-text\">locize</code> 를 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamA를 선택합니다.</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다. (특수문자로만 이루어져서는 안 됩니다.)</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>복사하기 버튼을 눌러 클립보드에 복사하고 <code class=\"language-text\">locize</code> 에 붙여넣습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"teamb\" style=\"position:relative;\"><a href=\"#teamb\" aria-label=\"teamb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamB</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamB-web.gif\" alt=\"translate-teamB-web-example\"></p>\n<ul>\n<li>TeamB (<code class=\"language-text\">json</code> 파일을 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamB를 선택합니다.</li>\n<li>언어 파일이 위치한 폴더의 경로를 입력하지 않았었다면, 파일의 경로를 입력합니다.\n<ul>\n<li>입력한 경로에 <code class=\"language-text\">language.json</code> 파일이 존재하지 않는다면 저장되지 않습니다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">json</code> 파일에 추가할 텍스트를 입력합니다.\n<ul>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다.</li>\n</ul>\n</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>‘각 언어별 json 파일에 저장’ 버튼을 눌러 각 <code class=\"language-text\">json</code> 파일에 추가합니다.</li>\n</ul>\n</li>\n</ul>\n<p>일단 생각한대로 구현은 했습니다. <code class=\"language-text\">locize</code> 를 사용하는 TeamA의 경우에는 번역 작업이 편해진 것 같습니\n다. 하지만 <code class=\"language-text\">json</code> 파일을 사용하는 TeamB의 경우에는 번역 작업을 하려면 여전히 번거롭다고 느껴졌습니다\n. 번역 작업을 편하게 하기 위해 웹 사이트 주소를 알아야 하는 것은 물론, 팀을 선택하고 언어 파일 경로\n를 설정해야 했죠.</p>\n<h2 id=\"차라리-노드-스크립트로-만들어-더욱-편하게-사용하자\" style=\"position:relative;\"><a href=\"#%EC%B0%A8%EB%9D%BC%EB%A6%AC-%EB%85%B8%EB%93%9C-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%8D%94%EC%9A%B1-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90\" aria-label=\"차라리 노드 스크립트로 만들어 더욱 편하게 사용하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>차라리 노드 스크립트로 만들어 더욱 편하게 사용하자</h2>\n<p>언어 파일 경로를 설정하는 과정조차 없애고 싶었습니다. 그래서 TeamB의 경우에는 이 웹 사이트가 아닌,\n프로젝트에서 node script를 실행해 번역 작업을 더 간편하게 할 수 있게 방식을 변경하기로 결정했습니다.\n이렇게 하면 웹사이트의 주소를 알지 않아도 되고 필요한 기능만 명확히 수행할 것 같았습니다.</p>\n<p>간단하게 스크립트를 만들어 보겠습니다.</p>\n<p>먼저, 사용자에게서 터미널에서 key와 value를 입력받아야 합니다. 이 정보들을 입력받기 위해\n<a href=\"https://www.npmjs.com/package/inquirer\">inquirer.js</a> 라이브러리를 사용하겠습니다. <code class=\"language-text\">inquirer.js</code> 는\n터미널에서 다양한 UI로 사용자의 입력을 받거나, 출력해주는 라이브러리입니다. 아래 사진을 보시면 어떤\n느낌인지 감이 잡히실 겁니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 692px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAn0lEQVR42jWOwQqEIBCGe45tOwhmbLaupGmaQXSopMtSSNHB93+MHYL9DsPwzz/zT9J1XVmW1lrOuRCibVuttTFGKQUKNJRSxhiIwzDAtO/7PM9RxYlyyXVd4AshjOO4LMtxHNu2Qd333Tl3nue6rrAzTZP3/nsTY0SvN/6IpGkaQkhd19UNHBJ/4CMpJWRCFMYYIQSGoijmec6eaZY+fs09J+uMubsAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"inquirer-example\"\n        title=\"\"\n        src=\"/static/1683074758696.817115529904/91e7e/inquirer-example.png\"\n        srcset=\"/static/1683074758696.817115529904/63868/inquirer-example.png 250w,\n/static/1683074758696.817115529904/0b533/inquirer-example.png 500w,\n/static/1683074758696.817115529904/91e7e/inquirer-example.png 692w\"\n        sizes=\"(max-width: 692px) 100vw, 692px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"흐름-정리하기\" style=\"position:relative;\"><a href=\"#%ED%9D%90%EB%A6%84-%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"흐름 정리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>흐름 정리하기</h3>\n<ol>\n<li>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로를 정의합니다.</li>\n<li>사용자로부터 <code class=\"language-text\">key</code>를 입력받습니다.\n<ol>\n<li>값을 입력하지 않거나, 이미 존재하는 <code class=\"language-text\">key</code> 라면 오류 메시지를 반환하고 다시 입력 받습니다.</li>\n<li><code class=\"language-text\">camelCase</code> 가 아니라면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>사용자로부터 <code class=\"language-text\">value</code> 를 입력받습니다.\n<ol>\n<li>값을 입력하지 않으면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가합니다.\n<ol>\n<li>입력받은 <code class=\"language-text\">value</code>를 4개 국어로 번역합니다.</li>\n<li>정의해두었던 <code class=\"language-text\">json</code>파일이 존재하는 폴더 경로를 이용해, 해당 폴더의 하위에 존재하는 모든 언어파\n일들을 가져옵니다. 없다면 오류 메시지를 반환합니다.</li>\n<li>찾은 각 <code class=\"language-text\">json</code> 파일의 문자열을 분석하고, JS 객체로 변환합니다.</li>\n<li>변환한 JS 객체에 전달 받은 <code class=\"language-text\">key</code> 와 번역된 <code class=\"language-text\">value</code>를 추가합니다.</li>\n<li>변경된 JS 객체를 다시 JSON 문자열로 변환해 각 언어 파일에 작성합니다.</li>\n</ol>\n</li>\n<li>결과를 터미널에 출력합니다.</li>\n</ol>\n<p>정리하고 보니 빠르게 스크립트를 구현할 수 있을 것 같네요. 바로 코드로 구현해보겠습니다.</p>\n<h3 id=\"번역할-국가별-언어-코드-및-언어별-json-파일이-존재하는-폴더-경로-정의하기\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%97%AD%ED%95%A0-%EA%B5%AD%EA%B0%80%EB%B3%84-%EC%96%B8%EC%96%B4-%EC%BD%94%EB%93%9C-%EB%B0%8F-%EC%96%B8%EC%96%B4%EB%B3%84-json-%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%A1%B4%EC%9E%AC%ED%95%98%EB%8A%94-%ED%8F%B4%EB%8D%94-%EA%B2%BD%EB%A1%9C-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0\" aria-label=\"번역할 국가별 언어 코드 및 언어별 json 파일이 존재하는 폴더 경로 정의하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로 정의하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 정의한 언어 코드를 이용해 번역을 진행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGE_CODE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ko'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 언어별 json 파일이 존재하는 폴더 경로를 정의합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGES_DIR_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span><span class=\"token function\">cwd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'libs'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'locales'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'languages'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"사용자로부터-key와-value를-입력받기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90%EB%A1%9C%EB%B6%80%ED%84%B0-key%EC%99%80-value%EB%A5%BC-%EC%9E%85%EB%A0%A5%EB%B0%9B%EA%B8%B0\" aria-label=\"사용자로부터 key와 value를 입력받기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용자로부터 <code class=\"language-text\">key</code>와 <code class=\"language-text\">value</code>를 입력받기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 각 json 파일에 전달된 키가 존재하는지 검증합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">keyExistsInLangFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> convertedLanguageCode <span class=\"token operator\">=</span> <span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n          chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">The key '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">' already exists in '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json'.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNil</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isEmptyString</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">isNil</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> value<span class=\"token operator\">?.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 사용자에게 key와 value 값을 입력하라는 메시지를 표시합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">promptTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> key <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token function\">keyExistsInLangFiles</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> inputKey <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'key'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation key in camelCase:'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">validate</span><span class=\"token operator\">:</span> validateCamelCase<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    key <span class=\"token operator\">=</span> inputKey<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation value:'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">validate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token string\">'value cannot be empty. Please enter again:'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">inquirer</code> 라이브러리를 활용해 입력받도록 합니다. <code class=\"language-text\">type</code> 속성은 프롬프트의 유형을 정의합니다. input\ntype은 사용자에게서 문자열을 입력 받습니다. 그리고 <code class=\"language-text\">validate</code> 속성을 통해 사용자의 input 값에 제약을\n걸어줍니다.</p>\n<h3 id=\"각-언어-파일에-key-value를-추가하기\" style=\"position:relative;\"><a href=\"#%EA%B0%81-%EC%96%B8%EC%96%B4-%ED%8C%8C%EC%9D%BC%EC%97%90-key-value%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"각 언어 파일에 key value를 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 입력 받은 값을 번역하고 번역된 값을 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translateText</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token punctuation\">,</span> targetLanguage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://translation.googleapis.com/language/translate/v2'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">q</span><span class=\"token operator\">:</span> text<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> targetLanguage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token constant\">GOOGLE_TRANSLATE_API_KEY</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>translations<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>translatedText<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 전달받은 언어 코드에 해당하는 json 언어 파일을 찾아서 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">findLanguageFile</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">languageCode</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// `recursive-readdir` 라이브러리에서 제공하는 함수입니다.</span>\n  <span class=\"token comment\">// 해당 하위 디렉터리의 모든 파일을 재귀적으로 나열합니다.</span>\n  <span class=\"token keyword\">const</span> files <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">recursive</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> files<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> path<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>languageFile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Language file for </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> not found.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> languageFile<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 각 언어 파일에 키와 번역 값을 추가합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> translatedValue <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">translateText</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">findLanguageFile</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    translations<span class=\"token punctuation\">[</span>languageCode<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> translations<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"전체-번역-프로세스-실행하기\" style=\"position:relative;\"><a href=\"#%EC%A0%84%EC%B2%B4-%EB%B2%88%EC%97%AD-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"전체 번역 프로세스 실행하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>전체 번역 프로세스 실행하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 전체 번역 프로세스를 실행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promptTranslation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">addTranslation</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token string\">'번역 결과: '</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>translations<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Translation added to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">translate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 구현한 스크립트를 실행해보겠습니다. 아래는 스크립트 실행 결과입니다.</p>\n<p><img src=\"/images/new-team-productivity/translate-teamB-script.gif\" alt=\"translate-teamB-script.gif\"></p>\n<ul>\n<li><code class=\"language-text\">npm run translate</code> 명령어를 실행합니다.</li>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역을 원하는 텍스트를 입력 후, 엔터를 누릅니다.</li>\n<li>번역한 결과가 각 <code class=\"language-text\">json</code> 파일의 마지막 라인에 자동으로 추가되며 포맷팅을 실행합니다.</li>\n</ul>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByUlEQVR42o2QS2/TQBSF/S9oXn6MXzPjedjjcZzEebpOXwlQIYpKu0KlbGGP2FRq1/0ViBViwZIfx3WMsmjTCuno6uja38ycY8hiH4lskpHjIlTM75iuaXs9q56NwG+13TTT8KkMIpnEMlNScIGJIJEICcO0NiSSIeG1p7DkW1EWBzgyCI+FykOmLC9CIfMI94jwMEc+QR52fQrTC6gfUnez2SxrY6PACLgKhG7ZwQvT37N8MC0nrNV1Wh1rq3bXfqBOzzFkolM9EFKptI8JMy0E6ploE89vQnZNBL8+loEpX+wfTOfVbLEsJgvdH8oki1UfZiQUGC5T6GY3HPFE6RwqaQRNYMoI5SCXyEikAWY7yRoWsa4OjvqDQumBjHWssjTVSZzAkfAJioHAT8LQZJaPgIHwEY/hZsokvDYfjplIoFJ4juX4TUMP4WFRLg9fzxbHSToejMp5eTKZHToubnct6KnRkzefrM/enV9dXX/+/uPn1293q1cX7y+vQyJbHfMZ7B98tHr75uzDx09ffv3+c3N7//L08vwCYPFf8HQ6X69Pq+U6y+ejcVVWK4iAPALPfp6sYa3KUCg3gJA2FLvXNkE763kM/wUP7og3R7wHKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"translate-slack-reaction.png\"\n        title=\"\"\n        src=\"/static/1692836624195.603146242730/00d43/translate-slack-reaction.png\"\n        srcset=\"/static/1692836624195.603146242730/63868/translate-slack-reaction.png 250w,\n/static/1692836624195.603146242730/0b533/translate-slack-reaction.png 500w,\n/static/1692836624195.603146242730/00d43/translate-slack-reaction.png 1000w,\n/static/1692836624195.603146242730/aa440/translate-slack-reaction.png 1500w,\n/static/1692836624195.603146242730/e8950/translate-slack-reaction.png 2000w,\n/static/1692836624195.603146242730/922e6/translate-slack-reaction.png 2140w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>작업 이후 좋은 반응과 함께 번거롭던 번역 작업이 편해졌다는 의견이 많았습니다. 여러 고민을 거쳐 만든\n보람이 있었죠. 이렇게 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있었습니다. 이제 번역 업\n무에서 발생하는 시간을 크게 줄일 수 있게 되었습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://nodejs.org/api/fs.html\">https://nodejs.org/api/fs.html</a></li>\n<li><a href=\"https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/\">https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/</a></li>\n</ul>",
      "%EC%86%90%EC%88%98-%EC%9E%91%EC%97%85%EC%9D%98-%ED%95%9C%EA%B3%84#손수 작업의 한계": "<h2 id=\"새로운-팀에-합류한-이후-했던-것-중-가장-비효율적인-업무\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%8C%80%EC%97%90-%ED%95%A9%EB%A5%98%ED%95%9C-%EC%9D%B4%ED%9B%84-%ED%96%88%EB%8D%98-%EA%B2%83-%EC%A4%91-%EA%B0%80%EC%9E%A5-%EB%B9%84%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%97%85%EB%AC%B4\" aria-label=\"새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무</h2>\n<h3 id=\"너무나도-번거로운-번역-작업\" style=\"position:relative;\"><a href=\"#%EB%84%88%EB%AC%B4%EB%82%98%EB%8F%84-%EB%B2%88%EA%B1%B0%EB%A1%9C%EC%9A%B4-%EB%B2%88%EC%97%AD-%EC%9E%91%EC%97%85\" aria-label=\"너무나도 번거로운 번역 작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>너무나도 번거로운 번역 작업</h3>\n<p>새로 합류한 팀의 프로젝트에서는 총 4개 국어(한국어, 영어, 일본어, 베트남어)를 지원해야 했습니다.\n<code class=\"language-text\">ko.lang.json</code> 또는 <code class=\"language-text\">en.lang.json</code> 이런식으로 이름을 짖고 <code class=\"language-text\">json</code> 파일 형식으로 관리하고 있었습니다.</p>\n<p>따로 번역 작업을 해주시는 분은 없고, 그냥 구글 번역기를 통해 얻은 값을 각 <code class=\"language-text\">json</code> 파일에 추가해서 다\n국어를 지원하고 있었죠.</p>\n<p>로직을 작성해나가며 하나하나 번역기를 돌리고 각 <code class=\"language-text\">json</code> 파일에 추가하는 작업은 보통 귀찮은 작업이 아\n니었습니다.</p>\n<h3 id=\"손수-작업의-한계\" style=\"position:relative;\"><a href=\"#%EC%86%90%EC%88%98-%EC%9E%91%EC%97%85%EC%9D%98-%ED%95%9C%EA%B3%84\" aria-label=\"손수 작업의 한계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>손수 작업의 한계</h3>\n<p>일일이 번역할 문구를 복사해 4개 국어로 번역하고, 번역된 문구를 다시 각각 복사해 4개의 <code class=\"language-text\">json</code> 파일에\n추가하는 과정이 필요합니다. 또한 여러 개발자가 작업하다보니 <code class=\"language-text\">key</code> 네이밍 문법도 정리가 안 되어 있었\n습니다. 어떤 것은 <code class=\"language-text\">camelCase</code>, 또 어떤 것은 <code class=\"language-text\">snake_case</code>로 되어 있었습니다. 워낙 바쁘다보면\n<code class=\"language-text\">en.lang.json</code> 파일에 한국어를 추가하는 실수를 범할 수도 있겠죠. 이 과정에서 많은 시간이 소모되고 실\n수를 하지 않는다는 보장이 없죠.</p>\n<p>이런 새로운 기능을 작업할때마다 반복되다 보니 어느 세월에 문구를 복사해서 변역하고 또 번역한 값을 복\n사해서 각 언어 파일에 키값과 함께 추가하고 로직은 언제 다 구현하지? 라는 마음이 들었습니다. 이 과정\n을 개선하기로 마음 먹었죠.</p>\n<h3 id=\"어차피-번역기를-사용해서-할거라면-스크립트를-작성해서-개선할-수-있지-않을까\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EC%B0%A8%ED%94%BC-%EB%B2%88%EC%97%AD%EA%B8%B0%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%ED%95%A0%EA%B1%B0%EB%9D%BC%EB%A9%B4-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%84%9C-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%A7%80-%EC%95%8A%EC%9D%84%EA%B9%8C\" aria-label=\"어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까?</h3>\n<p>구글 번역기를 사용하므로 google에서 제공하는 번역 API를 이용해 한 번에 4개의 언어로 번역해주고 파일\n에 자동으로 추가해주는 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있을 것 같았습니다.</p>\n<p>개발자가 번역할 문구와 키값을 입력하면 자동으로 4개 국어로 번역해주고 매칭되는 언어별 <code class=\"language-text\">json</code> 파일의\n마지막 줄에 추가해주는 방법이 좋을 것 같습니다. 또한 key 값도 입력받을 때 정해둔 네이밍 문법에 일치\n해야 하기 때문에 통일되는 이점도 동시에 따라 왔죠. 여기서 네이밍 문법은 애초에 정해져 있지 않았기 때\n문에 팀원분들께 미팅 요청을 드렸고 <code class=\"language-text\">camelCase</code>로 통일하기로 결정이 되었죠. 그리고 번역 값이 100프로\n정확할 순 없으니 번역 결과값을 받아 수정할 수 있도록 하면 더욱 좋겠죠.</p>\n<p>이제 생각한 것을 편하게 사용할 수 있도록 구현하면 되겠습니다.</p>\n<h2 id=\"모든-팀들이-편하게-사용하도록-웹-사이트로-만들자\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%A0-%ED%8C%80%EB%93%A4%EC%9D%B4-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8F%84%EB%A1%9D-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%9E%90\" aria-label=\"모든 팀들이 편하게 사용하도록 웹 사이트로 만들자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모든 팀들이 편하게 사용하도록 웹 사이트로 만들자</h2>\n<p>‘위 스크립트를 만들어도 어떻게 해야 팀원들이 쉽게 사용할 수 있을까?‘라는 고민이 들었습니다. 익숙한웹\n사이트에서 최대한 직관적이고 간단하게 구현해 각 팀별로 원하는 목적을 쉽게 달성할 수 있도록 구현하고\n싶었습니다. 다른 팀에서도 <code class=\"language-text\">json</code> 파일을 사용하진 않지만 구글 번역기를 이용해서 4개 국어를 지원하고\n있었기 때문에 이왕 만드는 거 다른 팀원분에게도 도움이 되고 싶었기 때문에 첫 진입 시, 팀을 선택하고\n각 팀별로 다른 화면을 보여주도록 플로우를 그렸죠.</p>\n<p>예로 A라는 팀에서는 <a href=\"https://locize.com/\">locize</a>라는 번역 관리 시스템을 사용해서 관리 중이었습니다.\nlocize를 사용하면 번역할 문구를 언어별로 locize에 붙여넣으면 됩니다. 따라서 <code class=\"language-text\">json</code> 파일을 사용하지않\n으므로 4개 국어로 번역하고 각 번역 값을 확인 후, 수정하고 복사할 수 있도록 하면 좋겠죠.</p>\n<p>제가 속해 있는 B 팀의 경우에는 번역한 값들을 각 언어별 <code class=\"language-text\">json</code> 파일에 key-value 형식으로 추가해줘야합\n니다. 따라서 key와 value를 입력받고 각 <code class=\"language-text\">json</code> 파일에 추가해주면 많이 편해질 겁니다.</p>\n<p>아래는 구현한 웹사이트에서 각 팀별로 번역 작업을 하는 1차 결과입니다.</p>\n<h3 id=\"teama\" style=\"position:relative;\"><a href=\"#teama\" aria-label=\"teama permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamA</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamA-web.gif\" alt=\"translate-teamA-web-example\"></p>\n<ul>\n<li>TeamA (<code class=\"language-text\">locize</code> 를 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamA를 선택합니다.</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다. (특수문자로만 이루어져서는 안 됩니다.)</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>복사하기 버튼을 눌러 클립보드에 복사하고 <code class=\"language-text\">locize</code> 에 붙여넣습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"teamb\" style=\"position:relative;\"><a href=\"#teamb\" aria-label=\"teamb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamB</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamB-web.gif\" alt=\"translate-teamB-web-example\"></p>\n<ul>\n<li>TeamB (<code class=\"language-text\">json</code> 파일을 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamB를 선택합니다.</li>\n<li>언어 파일이 위치한 폴더의 경로를 입력하지 않았었다면, 파일의 경로를 입력합니다.\n<ul>\n<li>입력한 경로에 <code class=\"language-text\">language.json</code> 파일이 존재하지 않는다면 저장되지 않습니다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">json</code> 파일에 추가할 텍스트를 입력합니다.\n<ul>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다.</li>\n</ul>\n</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>‘각 언어별 json 파일에 저장’ 버튼을 눌러 각 <code class=\"language-text\">json</code> 파일에 추가합니다.</li>\n</ul>\n</li>\n</ul>\n<p>일단 생각한대로 구현은 했습니다. <code class=\"language-text\">locize</code> 를 사용하는 TeamA의 경우에는 번역 작업이 편해진 것 같습니\n다. 하지만 <code class=\"language-text\">json</code> 파일을 사용하는 TeamB의 경우에는 번역 작업을 하려면 여전히 번거롭다고 느껴졌습니다\n. 번역 작업을 편하게 하기 위해 웹 사이트 주소를 알아야 하는 것은 물론, 팀을 선택하고 언어 파일 경로\n를 설정해야 했죠.</p>\n<h2 id=\"차라리-노드-스크립트로-만들어-더욱-편하게-사용하자\" style=\"position:relative;\"><a href=\"#%EC%B0%A8%EB%9D%BC%EB%A6%AC-%EB%85%B8%EB%93%9C-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%8D%94%EC%9A%B1-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90\" aria-label=\"차라리 노드 스크립트로 만들어 더욱 편하게 사용하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>차라리 노드 스크립트로 만들어 더욱 편하게 사용하자</h2>\n<p>언어 파일 경로를 설정하는 과정조차 없애고 싶었습니다. 그래서 TeamB의 경우에는 이 웹 사이트가 아닌,\n프로젝트에서 node script를 실행해 번역 작업을 더 간편하게 할 수 있게 방식을 변경하기로 결정했습니다.\n이렇게 하면 웹사이트의 주소를 알지 않아도 되고 필요한 기능만 명확히 수행할 것 같았습니다.</p>\n<p>간단하게 스크립트를 만들어 보겠습니다.</p>\n<p>먼저, 사용자에게서 터미널에서 key와 value를 입력받아야 합니다. 이 정보들을 입력받기 위해\n<a href=\"https://www.npmjs.com/package/inquirer\">inquirer.js</a> 라이브러리를 사용하겠습니다. <code class=\"language-text\">inquirer.js</code> 는\n터미널에서 다양한 UI로 사용자의 입력을 받거나, 출력해주는 라이브러리입니다. 아래 사진을 보시면 어떤\n느낌인지 감이 잡히실 겁니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 692px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAn0lEQVR42jWOwQqEIBCGe45tOwhmbLaupGmaQXSopMtSSNHB93+MHYL9DsPwzz/zT9J1XVmW1lrOuRCibVuttTFGKQUKNJRSxhiIwzDAtO/7PM9RxYlyyXVd4AshjOO4LMtxHNu2Qd333Tl3nue6rrAzTZP3/nsTY0SvN/6IpGkaQkhd19UNHBJ/4CMpJWRCFMYYIQSGoijmec6eaZY+fs09J+uMubsAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"inquirer-example\"\n        title=\"\"\n        src=\"/static/1683074758696.817115529904/91e7e/inquirer-example.png\"\n        srcset=\"/static/1683074758696.817115529904/63868/inquirer-example.png 250w,\n/static/1683074758696.817115529904/0b533/inquirer-example.png 500w,\n/static/1683074758696.817115529904/91e7e/inquirer-example.png 692w\"\n        sizes=\"(max-width: 692px) 100vw, 692px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"흐름-정리하기\" style=\"position:relative;\"><a href=\"#%ED%9D%90%EB%A6%84-%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"흐름 정리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>흐름 정리하기</h3>\n<ol>\n<li>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로를 정의합니다.</li>\n<li>사용자로부터 <code class=\"language-text\">key</code>를 입력받습니다.\n<ol>\n<li>값을 입력하지 않거나, 이미 존재하는 <code class=\"language-text\">key</code> 라면 오류 메시지를 반환하고 다시 입력 받습니다.</li>\n<li><code class=\"language-text\">camelCase</code> 가 아니라면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>사용자로부터 <code class=\"language-text\">value</code> 를 입력받습니다.\n<ol>\n<li>값을 입력하지 않으면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가합니다.\n<ol>\n<li>입력받은 <code class=\"language-text\">value</code>를 4개 국어로 번역합니다.</li>\n<li>정의해두었던 <code class=\"language-text\">json</code>파일이 존재하는 폴더 경로를 이용해, 해당 폴더의 하위에 존재하는 모든 언어파\n일들을 가져옵니다. 없다면 오류 메시지를 반환합니다.</li>\n<li>찾은 각 <code class=\"language-text\">json</code> 파일의 문자열을 분석하고, JS 객체로 변환합니다.</li>\n<li>변환한 JS 객체에 전달 받은 <code class=\"language-text\">key</code> 와 번역된 <code class=\"language-text\">value</code>를 추가합니다.</li>\n<li>변경된 JS 객체를 다시 JSON 문자열로 변환해 각 언어 파일에 작성합니다.</li>\n</ol>\n</li>\n<li>결과를 터미널에 출력합니다.</li>\n</ol>\n<p>정리하고 보니 빠르게 스크립트를 구현할 수 있을 것 같네요. 바로 코드로 구현해보겠습니다.</p>\n<h3 id=\"번역할-국가별-언어-코드-및-언어별-json-파일이-존재하는-폴더-경로-정의하기\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%97%AD%ED%95%A0-%EA%B5%AD%EA%B0%80%EB%B3%84-%EC%96%B8%EC%96%B4-%EC%BD%94%EB%93%9C-%EB%B0%8F-%EC%96%B8%EC%96%B4%EB%B3%84-json-%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%A1%B4%EC%9E%AC%ED%95%98%EB%8A%94-%ED%8F%B4%EB%8D%94-%EA%B2%BD%EB%A1%9C-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0\" aria-label=\"번역할 국가별 언어 코드 및 언어별 json 파일이 존재하는 폴더 경로 정의하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로 정의하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 정의한 언어 코드를 이용해 번역을 진행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGE_CODE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ko'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 언어별 json 파일이 존재하는 폴더 경로를 정의합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGES_DIR_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span><span class=\"token function\">cwd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'libs'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'locales'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'languages'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"사용자로부터-key와-value를-입력받기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90%EB%A1%9C%EB%B6%80%ED%84%B0-key%EC%99%80-value%EB%A5%BC-%EC%9E%85%EB%A0%A5%EB%B0%9B%EA%B8%B0\" aria-label=\"사용자로부터 key와 value를 입력받기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용자로부터 <code class=\"language-text\">key</code>와 <code class=\"language-text\">value</code>를 입력받기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 각 json 파일에 전달된 키가 존재하는지 검증합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">keyExistsInLangFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> convertedLanguageCode <span class=\"token operator\">=</span> <span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n          chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">The key '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">' already exists in '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json'.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNil</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isEmptyString</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">isNil</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> value<span class=\"token operator\">?.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 사용자에게 key와 value 값을 입력하라는 메시지를 표시합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">promptTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> key <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token function\">keyExistsInLangFiles</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> inputKey <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'key'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation key in camelCase:'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">validate</span><span class=\"token operator\">:</span> validateCamelCase<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    key <span class=\"token operator\">=</span> inputKey<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation value:'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">validate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token string\">'value cannot be empty. Please enter again:'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">inquirer</code> 라이브러리를 활용해 입력받도록 합니다. <code class=\"language-text\">type</code> 속성은 프롬프트의 유형을 정의합니다. input\ntype은 사용자에게서 문자열을 입력 받습니다. 그리고 <code class=\"language-text\">validate</code> 속성을 통해 사용자의 input 값에 제약을\n걸어줍니다.</p>\n<h3 id=\"각-언어-파일에-key-value를-추가하기\" style=\"position:relative;\"><a href=\"#%EA%B0%81-%EC%96%B8%EC%96%B4-%ED%8C%8C%EC%9D%BC%EC%97%90-key-value%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"각 언어 파일에 key value를 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 입력 받은 값을 번역하고 번역된 값을 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translateText</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token punctuation\">,</span> targetLanguage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://translation.googleapis.com/language/translate/v2'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">q</span><span class=\"token operator\">:</span> text<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> targetLanguage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token constant\">GOOGLE_TRANSLATE_API_KEY</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>translations<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>translatedText<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 전달받은 언어 코드에 해당하는 json 언어 파일을 찾아서 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">findLanguageFile</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">languageCode</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// `recursive-readdir` 라이브러리에서 제공하는 함수입니다.</span>\n  <span class=\"token comment\">// 해당 하위 디렉터리의 모든 파일을 재귀적으로 나열합니다.</span>\n  <span class=\"token keyword\">const</span> files <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">recursive</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> files<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> path<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>languageFile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Language file for </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> not found.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> languageFile<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 각 언어 파일에 키와 번역 값을 추가합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> translatedValue <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">translateText</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">findLanguageFile</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    translations<span class=\"token punctuation\">[</span>languageCode<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> translations<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"전체-번역-프로세스-실행하기\" style=\"position:relative;\"><a href=\"#%EC%A0%84%EC%B2%B4-%EB%B2%88%EC%97%AD-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"전체 번역 프로세스 실행하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>전체 번역 프로세스 실행하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 전체 번역 프로세스를 실행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promptTranslation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">addTranslation</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token string\">'번역 결과: '</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>translations<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Translation added to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">translate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 구현한 스크립트를 실행해보겠습니다. 아래는 스크립트 실행 결과입니다.</p>\n<p><img src=\"/images/new-team-productivity/translate-teamB-script.gif\" alt=\"translate-teamB-script.gif\"></p>\n<ul>\n<li><code class=\"language-text\">npm run translate</code> 명령어를 실행합니다.</li>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역을 원하는 텍스트를 입력 후, 엔터를 누릅니다.</li>\n<li>번역한 결과가 각 <code class=\"language-text\">json</code> 파일의 마지막 라인에 자동으로 추가되며 포맷팅을 실행합니다.</li>\n</ul>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByUlEQVR42o2QS2/TQBSF/S9oXn6MXzPjedjjcZzEebpOXwlQIYpKu0KlbGGP2FRq1/0ViBViwZIfx3WMsmjTCuno6uja38ycY8hiH4lskpHjIlTM75iuaXs9q56NwG+13TTT8KkMIpnEMlNScIGJIJEICcO0NiSSIeG1p7DkW1EWBzgyCI+FykOmLC9CIfMI94jwMEc+QR52fQrTC6gfUnez2SxrY6PACLgKhG7ZwQvT37N8MC0nrNV1Wh1rq3bXfqBOzzFkolM9EFKptI8JMy0E6ploE89vQnZNBL8+loEpX+wfTOfVbLEsJgvdH8oki1UfZiQUGC5T6GY3HPFE6RwqaQRNYMoI5SCXyEikAWY7yRoWsa4OjvqDQumBjHWssjTVSZzAkfAJioHAT8LQZJaPgIHwEY/hZsokvDYfjplIoFJ4juX4TUMP4WFRLg9fzxbHSToejMp5eTKZHToubnct6KnRkzefrM/enV9dXX/+/uPn1293q1cX7y+vQyJbHfMZ7B98tHr75uzDx09ffv3+c3N7//L08vwCYPFf8HQ6X69Pq+U6y+ejcVVWK4iAPALPfp6sYa3KUCg3gJA2FLvXNkE763kM/wUP7og3R7wHKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"translate-slack-reaction.png\"\n        title=\"\"\n        src=\"/static/1692836624195.603146242730/00d43/translate-slack-reaction.png\"\n        srcset=\"/static/1692836624195.603146242730/63868/translate-slack-reaction.png 250w,\n/static/1692836624195.603146242730/0b533/translate-slack-reaction.png 500w,\n/static/1692836624195.603146242730/00d43/translate-slack-reaction.png 1000w,\n/static/1692836624195.603146242730/aa440/translate-slack-reaction.png 1500w,\n/static/1692836624195.603146242730/e8950/translate-slack-reaction.png 2000w,\n/static/1692836624195.603146242730/922e6/translate-slack-reaction.png 2140w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>작업 이후 좋은 반응과 함께 번거롭던 번역 작업이 편해졌다는 의견이 많았습니다. 여러 고민을 거쳐 만든\n보람이 있었죠. 이렇게 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있었습니다. 이제 번역 업\n무에서 발생하는 시간을 크게 줄일 수 있게 되었습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://nodejs.org/api/fs.html\">https://nodejs.org/api/fs.html</a></li>\n<li><a href=\"https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/\">https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/</a></li>\n</ul>",
      "%EC%96%B4%EC%B0%A8%ED%94%BC-%EB%B2%88%EC%97%AD%EA%B8%B0%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%ED%95%A0%EA%B1%B0%EB%9D%BC%EB%A9%B4-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%84%9C-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%A7%80-%EC%95%8A%EC%9D%84%EA%B9%8C#어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까?": "<h2 id=\"새로운-팀에-합류한-이후-했던-것-중-가장-비효율적인-업무\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%8C%80%EC%97%90-%ED%95%A9%EB%A5%98%ED%95%9C-%EC%9D%B4%ED%9B%84-%ED%96%88%EB%8D%98-%EA%B2%83-%EC%A4%91-%EA%B0%80%EC%9E%A5-%EB%B9%84%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%97%85%EB%AC%B4\" aria-label=\"새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무</h2>\n<h3 id=\"너무나도-번거로운-번역-작업\" style=\"position:relative;\"><a href=\"#%EB%84%88%EB%AC%B4%EB%82%98%EB%8F%84-%EB%B2%88%EA%B1%B0%EB%A1%9C%EC%9A%B4-%EB%B2%88%EC%97%AD-%EC%9E%91%EC%97%85\" aria-label=\"너무나도 번거로운 번역 작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>너무나도 번거로운 번역 작업</h3>\n<p>새로 합류한 팀의 프로젝트에서는 총 4개 국어(한국어, 영어, 일본어, 베트남어)를 지원해야 했습니다.\n<code class=\"language-text\">ko.lang.json</code> 또는 <code class=\"language-text\">en.lang.json</code> 이런식으로 이름을 짖고 <code class=\"language-text\">json</code> 파일 형식으로 관리하고 있었습니다.</p>\n<p>따로 번역 작업을 해주시는 분은 없고, 그냥 구글 번역기를 통해 얻은 값을 각 <code class=\"language-text\">json</code> 파일에 추가해서 다\n국어를 지원하고 있었죠.</p>\n<p>로직을 작성해나가며 하나하나 번역기를 돌리고 각 <code class=\"language-text\">json</code> 파일에 추가하는 작업은 보통 귀찮은 작업이 아\n니었습니다.</p>\n<h3 id=\"손수-작업의-한계\" style=\"position:relative;\"><a href=\"#%EC%86%90%EC%88%98-%EC%9E%91%EC%97%85%EC%9D%98-%ED%95%9C%EA%B3%84\" aria-label=\"손수 작업의 한계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>손수 작업의 한계</h3>\n<p>일일이 번역할 문구를 복사해 4개 국어로 번역하고, 번역된 문구를 다시 각각 복사해 4개의 <code class=\"language-text\">json</code> 파일에\n추가하는 과정이 필요합니다. 또한 여러 개발자가 작업하다보니 <code class=\"language-text\">key</code> 네이밍 문법도 정리가 안 되어 있었\n습니다. 어떤 것은 <code class=\"language-text\">camelCase</code>, 또 어떤 것은 <code class=\"language-text\">snake_case</code>로 되어 있었습니다. 워낙 바쁘다보면\n<code class=\"language-text\">en.lang.json</code> 파일에 한국어를 추가하는 실수를 범할 수도 있겠죠. 이 과정에서 많은 시간이 소모되고 실\n수를 하지 않는다는 보장이 없죠.</p>\n<p>이런 새로운 기능을 작업할때마다 반복되다 보니 어느 세월에 문구를 복사해서 변역하고 또 번역한 값을 복\n사해서 각 언어 파일에 키값과 함께 추가하고 로직은 언제 다 구현하지? 라는 마음이 들었습니다. 이 과정\n을 개선하기로 마음 먹었죠.</p>\n<h3 id=\"어차피-번역기를-사용해서-할거라면-스크립트를-작성해서-개선할-수-있지-않을까\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EC%B0%A8%ED%94%BC-%EB%B2%88%EC%97%AD%EA%B8%B0%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%ED%95%A0%EA%B1%B0%EB%9D%BC%EB%A9%B4-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%84%9C-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%A7%80-%EC%95%8A%EC%9D%84%EA%B9%8C\" aria-label=\"어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까?</h3>\n<p>구글 번역기를 사용하므로 google에서 제공하는 번역 API를 이용해 한 번에 4개의 언어로 번역해주고 파일\n에 자동으로 추가해주는 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있을 것 같았습니다.</p>\n<p>개발자가 번역할 문구와 키값을 입력하면 자동으로 4개 국어로 번역해주고 매칭되는 언어별 <code class=\"language-text\">json</code> 파일의\n마지막 줄에 추가해주는 방법이 좋을 것 같습니다. 또한 key 값도 입력받을 때 정해둔 네이밍 문법에 일치\n해야 하기 때문에 통일되는 이점도 동시에 따라 왔죠. 여기서 네이밍 문법은 애초에 정해져 있지 않았기 때\n문에 팀원분들께 미팅 요청을 드렸고 <code class=\"language-text\">camelCase</code>로 통일하기로 결정이 되었죠. 그리고 번역 값이 100프로\n정확할 순 없으니 번역 결과값을 받아 수정할 수 있도록 하면 더욱 좋겠죠.</p>\n<p>이제 생각한 것을 편하게 사용할 수 있도록 구현하면 되겠습니다.</p>\n<h2 id=\"모든-팀들이-편하게-사용하도록-웹-사이트로-만들자\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%A0-%ED%8C%80%EB%93%A4%EC%9D%B4-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8F%84%EB%A1%9D-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%9E%90\" aria-label=\"모든 팀들이 편하게 사용하도록 웹 사이트로 만들자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모든 팀들이 편하게 사용하도록 웹 사이트로 만들자</h2>\n<p>‘위 스크립트를 만들어도 어떻게 해야 팀원들이 쉽게 사용할 수 있을까?‘라는 고민이 들었습니다. 익숙한웹\n사이트에서 최대한 직관적이고 간단하게 구현해 각 팀별로 원하는 목적을 쉽게 달성할 수 있도록 구현하고\n싶었습니다. 다른 팀에서도 <code class=\"language-text\">json</code> 파일을 사용하진 않지만 구글 번역기를 이용해서 4개 국어를 지원하고\n있었기 때문에 이왕 만드는 거 다른 팀원분에게도 도움이 되고 싶었기 때문에 첫 진입 시, 팀을 선택하고\n각 팀별로 다른 화면을 보여주도록 플로우를 그렸죠.</p>\n<p>예로 A라는 팀에서는 <a href=\"https://locize.com/\">locize</a>라는 번역 관리 시스템을 사용해서 관리 중이었습니다.\nlocize를 사용하면 번역할 문구를 언어별로 locize에 붙여넣으면 됩니다. 따라서 <code class=\"language-text\">json</code> 파일을 사용하지않\n으므로 4개 국어로 번역하고 각 번역 값을 확인 후, 수정하고 복사할 수 있도록 하면 좋겠죠.</p>\n<p>제가 속해 있는 B 팀의 경우에는 번역한 값들을 각 언어별 <code class=\"language-text\">json</code> 파일에 key-value 형식으로 추가해줘야합\n니다. 따라서 key와 value를 입력받고 각 <code class=\"language-text\">json</code> 파일에 추가해주면 많이 편해질 겁니다.</p>\n<p>아래는 구현한 웹사이트에서 각 팀별로 번역 작업을 하는 1차 결과입니다.</p>\n<h3 id=\"teama\" style=\"position:relative;\"><a href=\"#teama\" aria-label=\"teama permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamA</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamA-web.gif\" alt=\"translate-teamA-web-example\"></p>\n<ul>\n<li>TeamA (<code class=\"language-text\">locize</code> 를 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamA를 선택합니다.</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다. (특수문자로만 이루어져서는 안 됩니다.)</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>복사하기 버튼을 눌러 클립보드에 복사하고 <code class=\"language-text\">locize</code> 에 붙여넣습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"teamb\" style=\"position:relative;\"><a href=\"#teamb\" aria-label=\"teamb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamB</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamB-web.gif\" alt=\"translate-teamB-web-example\"></p>\n<ul>\n<li>TeamB (<code class=\"language-text\">json</code> 파일을 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamB를 선택합니다.</li>\n<li>언어 파일이 위치한 폴더의 경로를 입력하지 않았었다면, 파일의 경로를 입력합니다.\n<ul>\n<li>입력한 경로에 <code class=\"language-text\">language.json</code> 파일이 존재하지 않는다면 저장되지 않습니다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">json</code> 파일에 추가할 텍스트를 입력합니다.\n<ul>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다.</li>\n</ul>\n</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>‘각 언어별 json 파일에 저장’ 버튼을 눌러 각 <code class=\"language-text\">json</code> 파일에 추가합니다.</li>\n</ul>\n</li>\n</ul>\n<p>일단 생각한대로 구현은 했습니다. <code class=\"language-text\">locize</code> 를 사용하는 TeamA의 경우에는 번역 작업이 편해진 것 같습니\n다. 하지만 <code class=\"language-text\">json</code> 파일을 사용하는 TeamB의 경우에는 번역 작업을 하려면 여전히 번거롭다고 느껴졌습니다\n. 번역 작업을 편하게 하기 위해 웹 사이트 주소를 알아야 하는 것은 물론, 팀을 선택하고 언어 파일 경로\n를 설정해야 했죠.</p>\n<h2 id=\"차라리-노드-스크립트로-만들어-더욱-편하게-사용하자\" style=\"position:relative;\"><a href=\"#%EC%B0%A8%EB%9D%BC%EB%A6%AC-%EB%85%B8%EB%93%9C-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%8D%94%EC%9A%B1-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90\" aria-label=\"차라리 노드 스크립트로 만들어 더욱 편하게 사용하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>차라리 노드 스크립트로 만들어 더욱 편하게 사용하자</h2>\n<p>언어 파일 경로를 설정하는 과정조차 없애고 싶었습니다. 그래서 TeamB의 경우에는 이 웹 사이트가 아닌,\n프로젝트에서 node script를 실행해 번역 작업을 더 간편하게 할 수 있게 방식을 변경하기로 결정했습니다.\n이렇게 하면 웹사이트의 주소를 알지 않아도 되고 필요한 기능만 명확히 수행할 것 같았습니다.</p>\n<p>간단하게 스크립트를 만들어 보겠습니다.</p>\n<p>먼저, 사용자에게서 터미널에서 key와 value를 입력받아야 합니다. 이 정보들을 입력받기 위해\n<a href=\"https://www.npmjs.com/package/inquirer\">inquirer.js</a> 라이브러리를 사용하겠습니다. <code class=\"language-text\">inquirer.js</code> 는\n터미널에서 다양한 UI로 사용자의 입력을 받거나, 출력해주는 라이브러리입니다. 아래 사진을 보시면 어떤\n느낌인지 감이 잡히실 겁니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 692px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAn0lEQVR42jWOwQqEIBCGe45tOwhmbLaupGmaQXSopMtSSNHB93+MHYL9DsPwzz/zT9J1XVmW1lrOuRCibVuttTFGKQUKNJRSxhiIwzDAtO/7PM9RxYlyyXVd4AshjOO4LMtxHNu2Qd333Tl3nue6rrAzTZP3/nsTY0SvN/6IpGkaQkhd19UNHBJ/4CMpJWRCFMYYIQSGoijmec6eaZY+fs09J+uMubsAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"inquirer-example\"\n        title=\"\"\n        src=\"/static/1683074758696.817115529904/91e7e/inquirer-example.png\"\n        srcset=\"/static/1683074758696.817115529904/63868/inquirer-example.png 250w,\n/static/1683074758696.817115529904/0b533/inquirer-example.png 500w,\n/static/1683074758696.817115529904/91e7e/inquirer-example.png 692w\"\n        sizes=\"(max-width: 692px) 100vw, 692px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"흐름-정리하기\" style=\"position:relative;\"><a href=\"#%ED%9D%90%EB%A6%84-%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"흐름 정리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>흐름 정리하기</h3>\n<ol>\n<li>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로를 정의합니다.</li>\n<li>사용자로부터 <code class=\"language-text\">key</code>를 입력받습니다.\n<ol>\n<li>값을 입력하지 않거나, 이미 존재하는 <code class=\"language-text\">key</code> 라면 오류 메시지를 반환하고 다시 입력 받습니다.</li>\n<li><code class=\"language-text\">camelCase</code> 가 아니라면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>사용자로부터 <code class=\"language-text\">value</code> 를 입력받습니다.\n<ol>\n<li>값을 입력하지 않으면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가합니다.\n<ol>\n<li>입력받은 <code class=\"language-text\">value</code>를 4개 국어로 번역합니다.</li>\n<li>정의해두었던 <code class=\"language-text\">json</code>파일이 존재하는 폴더 경로를 이용해, 해당 폴더의 하위에 존재하는 모든 언어파\n일들을 가져옵니다. 없다면 오류 메시지를 반환합니다.</li>\n<li>찾은 각 <code class=\"language-text\">json</code> 파일의 문자열을 분석하고, JS 객체로 변환합니다.</li>\n<li>변환한 JS 객체에 전달 받은 <code class=\"language-text\">key</code> 와 번역된 <code class=\"language-text\">value</code>를 추가합니다.</li>\n<li>변경된 JS 객체를 다시 JSON 문자열로 변환해 각 언어 파일에 작성합니다.</li>\n</ol>\n</li>\n<li>결과를 터미널에 출력합니다.</li>\n</ol>\n<p>정리하고 보니 빠르게 스크립트를 구현할 수 있을 것 같네요. 바로 코드로 구현해보겠습니다.</p>\n<h3 id=\"번역할-국가별-언어-코드-및-언어별-json-파일이-존재하는-폴더-경로-정의하기\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%97%AD%ED%95%A0-%EA%B5%AD%EA%B0%80%EB%B3%84-%EC%96%B8%EC%96%B4-%EC%BD%94%EB%93%9C-%EB%B0%8F-%EC%96%B8%EC%96%B4%EB%B3%84-json-%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%A1%B4%EC%9E%AC%ED%95%98%EB%8A%94-%ED%8F%B4%EB%8D%94-%EA%B2%BD%EB%A1%9C-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0\" aria-label=\"번역할 국가별 언어 코드 및 언어별 json 파일이 존재하는 폴더 경로 정의하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로 정의하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 정의한 언어 코드를 이용해 번역을 진행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGE_CODE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ko'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 언어별 json 파일이 존재하는 폴더 경로를 정의합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGES_DIR_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span><span class=\"token function\">cwd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'libs'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'locales'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'languages'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"사용자로부터-key와-value를-입력받기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90%EB%A1%9C%EB%B6%80%ED%84%B0-key%EC%99%80-value%EB%A5%BC-%EC%9E%85%EB%A0%A5%EB%B0%9B%EA%B8%B0\" aria-label=\"사용자로부터 key와 value를 입력받기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용자로부터 <code class=\"language-text\">key</code>와 <code class=\"language-text\">value</code>를 입력받기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 각 json 파일에 전달된 키가 존재하는지 검증합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">keyExistsInLangFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> convertedLanguageCode <span class=\"token operator\">=</span> <span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n          chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">The key '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">' already exists in '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json'.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNil</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isEmptyString</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">isNil</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> value<span class=\"token operator\">?.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 사용자에게 key와 value 값을 입력하라는 메시지를 표시합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">promptTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> key <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token function\">keyExistsInLangFiles</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> inputKey <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'key'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation key in camelCase:'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">validate</span><span class=\"token operator\">:</span> validateCamelCase<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    key <span class=\"token operator\">=</span> inputKey<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation value:'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">validate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token string\">'value cannot be empty. Please enter again:'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">inquirer</code> 라이브러리를 활용해 입력받도록 합니다. <code class=\"language-text\">type</code> 속성은 프롬프트의 유형을 정의합니다. input\ntype은 사용자에게서 문자열을 입력 받습니다. 그리고 <code class=\"language-text\">validate</code> 속성을 통해 사용자의 input 값에 제약을\n걸어줍니다.</p>\n<h3 id=\"각-언어-파일에-key-value를-추가하기\" style=\"position:relative;\"><a href=\"#%EA%B0%81-%EC%96%B8%EC%96%B4-%ED%8C%8C%EC%9D%BC%EC%97%90-key-value%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"각 언어 파일에 key value를 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 입력 받은 값을 번역하고 번역된 값을 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translateText</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token punctuation\">,</span> targetLanguage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://translation.googleapis.com/language/translate/v2'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">q</span><span class=\"token operator\">:</span> text<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> targetLanguage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token constant\">GOOGLE_TRANSLATE_API_KEY</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>translations<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>translatedText<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 전달받은 언어 코드에 해당하는 json 언어 파일을 찾아서 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">findLanguageFile</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">languageCode</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// `recursive-readdir` 라이브러리에서 제공하는 함수입니다.</span>\n  <span class=\"token comment\">// 해당 하위 디렉터리의 모든 파일을 재귀적으로 나열합니다.</span>\n  <span class=\"token keyword\">const</span> files <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">recursive</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> files<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> path<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>languageFile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Language file for </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> not found.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> languageFile<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 각 언어 파일에 키와 번역 값을 추가합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> translatedValue <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">translateText</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">findLanguageFile</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    translations<span class=\"token punctuation\">[</span>languageCode<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> translations<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"전체-번역-프로세스-실행하기\" style=\"position:relative;\"><a href=\"#%EC%A0%84%EC%B2%B4-%EB%B2%88%EC%97%AD-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"전체 번역 프로세스 실행하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>전체 번역 프로세스 실행하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 전체 번역 프로세스를 실행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promptTranslation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">addTranslation</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token string\">'번역 결과: '</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>translations<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Translation added to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">translate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 구현한 스크립트를 실행해보겠습니다. 아래는 스크립트 실행 결과입니다.</p>\n<p><img src=\"/images/new-team-productivity/translate-teamB-script.gif\" alt=\"translate-teamB-script.gif\"></p>\n<ul>\n<li><code class=\"language-text\">npm run translate</code> 명령어를 실행합니다.</li>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역을 원하는 텍스트를 입력 후, 엔터를 누릅니다.</li>\n<li>번역한 결과가 각 <code class=\"language-text\">json</code> 파일의 마지막 라인에 자동으로 추가되며 포맷팅을 실행합니다.</li>\n</ul>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByUlEQVR42o2QS2/TQBSF/S9oXn6MXzPjedjjcZzEebpOXwlQIYpKu0KlbGGP2FRq1/0ViBViwZIfx3WMsmjTCuno6uja38ycY8hiH4lskpHjIlTM75iuaXs9q56NwG+13TTT8KkMIpnEMlNScIGJIJEICcO0NiSSIeG1p7DkW1EWBzgyCI+FykOmLC9CIfMI94jwMEc+QR52fQrTC6gfUnez2SxrY6PACLgKhG7ZwQvT37N8MC0nrNV1Wh1rq3bXfqBOzzFkolM9EFKptI8JMy0E6ploE89vQnZNBL8+loEpX+wfTOfVbLEsJgvdH8oki1UfZiQUGC5T6GY3HPFE6RwqaQRNYMoI5SCXyEikAWY7yRoWsa4OjvqDQumBjHWssjTVSZzAkfAJioHAT8LQZJaPgIHwEY/hZsokvDYfjplIoFJ4juX4TUMP4WFRLg9fzxbHSToejMp5eTKZHToubnct6KnRkzefrM/enV9dXX/+/uPn1293q1cX7y+vQyJbHfMZ7B98tHr75uzDx09ffv3+c3N7//L08vwCYPFf8HQ6X69Pq+U6y+ejcVVWK4iAPALPfp6sYa3KUCg3gJA2FLvXNkE763kM/wUP7og3R7wHKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"translate-slack-reaction.png\"\n        title=\"\"\n        src=\"/static/1692836624195.603146242730/00d43/translate-slack-reaction.png\"\n        srcset=\"/static/1692836624195.603146242730/63868/translate-slack-reaction.png 250w,\n/static/1692836624195.603146242730/0b533/translate-slack-reaction.png 500w,\n/static/1692836624195.603146242730/00d43/translate-slack-reaction.png 1000w,\n/static/1692836624195.603146242730/aa440/translate-slack-reaction.png 1500w,\n/static/1692836624195.603146242730/e8950/translate-slack-reaction.png 2000w,\n/static/1692836624195.603146242730/922e6/translate-slack-reaction.png 2140w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>작업 이후 좋은 반응과 함께 번거롭던 번역 작업이 편해졌다는 의견이 많았습니다. 여러 고민을 거쳐 만든\n보람이 있었죠. 이렇게 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있었습니다. 이제 번역 업\n무에서 발생하는 시간을 크게 줄일 수 있게 되었습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://nodejs.org/api/fs.html\">https://nodejs.org/api/fs.html</a></li>\n<li><a href=\"https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/\">https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/</a></li>\n</ul>",
      "%EB%AA%A8%EB%93%A0-%ED%8C%80%EB%93%A4%EC%9D%B4-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8F%84%EB%A1%9D-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%9E%90#모든 팀들이 편하게 사용하도록 웹 사이트로 만들자": "<h2 id=\"새로운-팀에-합류한-이후-했던-것-중-가장-비효율적인-업무\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%8C%80%EC%97%90-%ED%95%A9%EB%A5%98%ED%95%9C-%EC%9D%B4%ED%9B%84-%ED%96%88%EB%8D%98-%EA%B2%83-%EC%A4%91-%EA%B0%80%EC%9E%A5-%EB%B9%84%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%97%85%EB%AC%B4\" aria-label=\"새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무</h2>\n<h3 id=\"너무나도-번거로운-번역-작업\" style=\"position:relative;\"><a href=\"#%EB%84%88%EB%AC%B4%EB%82%98%EB%8F%84-%EB%B2%88%EA%B1%B0%EB%A1%9C%EC%9A%B4-%EB%B2%88%EC%97%AD-%EC%9E%91%EC%97%85\" aria-label=\"너무나도 번거로운 번역 작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>너무나도 번거로운 번역 작업</h3>\n<p>새로 합류한 팀의 프로젝트에서는 총 4개 국어(한국어, 영어, 일본어, 베트남어)를 지원해야 했습니다.\n<code class=\"language-text\">ko.lang.json</code> 또는 <code class=\"language-text\">en.lang.json</code> 이런식으로 이름을 짖고 <code class=\"language-text\">json</code> 파일 형식으로 관리하고 있었습니다.</p>\n<p>따로 번역 작업을 해주시는 분은 없고, 그냥 구글 번역기를 통해 얻은 값을 각 <code class=\"language-text\">json</code> 파일에 추가해서 다\n국어를 지원하고 있었죠.</p>\n<p>로직을 작성해나가며 하나하나 번역기를 돌리고 각 <code class=\"language-text\">json</code> 파일에 추가하는 작업은 보통 귀찮은 작업이 아\n니었습니다.</p>\n<h3 id=\"손수-작업의-한계\" style=\"position:relative;\"><a href=\"#%EC%86%90%EC%88%98-%EC%9E%91%EC%97%85%EC%9D%98-%ED%95%9C%EA%B3%84\" aria-label=\"손수 작업의 한계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>손수 작업의 한계</h3>\n<p>일일이 번역할 문구를 복사해 4개 국어로 번역하고, 번역된 문구를 다시 각각 복사해 4개의 <code class=\"language-text\">json</code> 파일에\n추가하는 과정이 필요합니다. 또한 여러 개발자가 작업하다보니 <code class=\"language-text\">key</code> 네이밍 문법도 정리가 안 되어 있었\n습니다. 어떤 것은 <code class=\"language-text\">camelCase</code>, 또 어떤 것은 <code class=\"language-text\">snake_case</code>로 되어 있었습니다. 워낙 바쁘다보면\n<code class=\"language-text\">en.lang.json</code> 파일에 한국어를 추가하는 실수를 범할 수도 있겠죠. 이 과정에서 많은 시간이 소모되고 실\n수를 하지 않는다는 보장이 없죠.</p>\n<p>이런 새로운 기능을 작업할때마다 반복되다 보니 어느 세월에 문구를 복사해서 변역하고 또 번역한 값을 복\n사해서 각 언어 파일에 키값과 함께 추가하고 로직은 언제 다 구현하지? 라는 마음이 들었습니다. 이 과정\n을 개선하기로 마음 먹었죠.</p>\n<h3 id=\"어차피-번역기를-사용해서-할거라면-스크립트를-작성해서-개선할-수-있지-않을까\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EC%B0%A8%ED%94%BC-%EB%B2%88%EC%97%AD%EA%B8%B0%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%ED%95%A0%EA%B1%B0%EB%9D%BC%EB%A9%B4-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%84%9C-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%A7%80-%EC%95%8A%EC%9D%84%EA%B9%8C\" aria-label=\"어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까?</h3>\n<p>구글 번역기를 사용하므로 google에서 제공하는 번역 API를 이용해 한 번에 4개의 언어로 번역해주고 파일\n에 자동으로 추가해주는 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있을 것 같았습니다.</p>\n<p>개발자가 번역할 문구와 키값을 입력하면 자동으로 4개 국어로 번역해주고 매칭되는 언어별 <code class=\"language-text\">json</code> 파일의\n마지막 줄에 추가해주는 방법이 좋을 것 같습니다. 또한 key 값도 입력받을 때 정해둔 네이밍 문법에 일치\n해야 하기 때문에 통일되는 이점도 동시에 따라 왔죠. 여기서 네이밍 문법은 애초에 정해져 있지 않았기 때\n문에 팀원분들께 미팅 요청을 드렸고 <code class=\"language-text\">camelCase</code>로 통일하기로 결정이 되었죠. 그리고 번역 값이 100프로\n정확할 순 없으니 번역 결과값을 받아 수정할 수 있도록 하면 더욱 좋겠죠.</p>\n<p>이제 생각한 것을 편하게 사용할 수 있도록 구현하면 되겠습니다.</p>\n<h2 id=\"모든-팀들이-편하게-사용하도록-웹-사이트로-만들자\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%A0-%ED%8C%80%EB%93%A4%EC%9D%B4-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8F%84%EB%A1%9D-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%9E%90\" aria-label=\"모든 팀들이 편하게 사용하도록 웹 사이트로 만들자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모든 팀들이 편하게 사용하도록 웹 사이트로 만들자</h2>\n<p>‘위 스크립트를 만들어도 어떻게 해야 팀원들이 쉽게 사용할 수 있을까?‘라는 고민이 들었습니다. 익숙한웹\n사이트에서 최대한 직관적이고 간단하게 구현해 각 팀별로 원하는 목적을 쉽게 달성할 수 있도록 구현하고\n싶었습니다. 다른 팀에서도 <code class=\"language-text\">json</code> 파일을 사용하진 않지만 구글 번역기를 이용해서 4개 국어를 지원하고\n있었기 때문에 이왕 만드는 거 다른 팀원분에게도 도움이 되고 싶었기 때문에 첫 진입 시, 팀을 선택하고\n각 팀별로 다른 화면을 보여주도록 플로우를 그렸죠.</p>\n<p>예로 A라는 팀에서는 <a href=\"https://locize.com/\">locize</a>라는 번역 관리 시스템을 사용해서 관리 중이었습니다.\nlocize를 사용하면 번역할 문구를 언어별로 locize에 붙여넣으면 됩니다. 따라서 <code class=\"language-text\">json</code> 파일을 사용하지않\n으므로 4개 국어로 번역하고 각 번역 값을 확인 후, 수정하고 복사할 수 있도록 하면 좋겠죠.</p>\n<p>제가 속해 있는 B 팀의 경우에는 번역한 값들을 각 언어별 <code class=\"language-text\">json</code> 파일에 key-value 형식으로 추가해줘야합\n니다. 따라서 key와 value를 입력받고 각 <code class=\"language-text\">json</code> 파일에 추가해주면 많이 편해질 겁니다.</p>\n<p>아래는 구현한 웹사이트에서 각 팀별로 번역 작업을 하는 1차 결과입니다.</p>\n<h3 id=\"teama\" style=\"position:relative;\"><a href=\"#teama\" aria-label=\"teama permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamA</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamA-web.gif\" alt=\"translate-teamA-web-example\"></p>\n<ul>\n<li>TeamA (<code class=\"language-text\">locize</code> 를 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamA를 선택합니다.</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다. (특수문자로만 이루어져서는 안 됩니다.)</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>복사하기 버튼을 눌러 클립보드에 복사하고 <code class=\"language-text\">locize</code> 에 붙여넣습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"teamb\" style=\"position:relative;\"><a href=\"#teamb\" aria-label=\"teamb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamB</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamB-web.gif\" alt=\"translate-teamB-web-example\"></p>\n<ul>\n<li>TeamB (<code class=\"language-text\">json</code> 파일을 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamB를 선택합니다.</li>\n<li>언어 파일이 위치한 폴더의 경로를 입력하지 않았었다면, 파일의 경로를 입력합니다.\n<ul>\n<li>입력한 경로에 <code class=\"language-text\">language.json</code> 파일이 존재하지 않는다면 저장되지 않습니다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">json</code> 파일에 추가할 텍스트를 입력합니다.\n<ul>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다.</li>\n</ul>\n</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>‘각 언어별 json 파일에 저장’ 버튼을 눌러 각 <code class=\"language-text\">json</code> 파일에 추가합니다.</li>\n</ul>\n</li>\n</ul>\n<p>일단 생각한대로 구현은 했습니다. <code class=\"language-text\">locize</code> 를 사용하는 TeamA의 경우에는 번역 작업이 편해진 것 같습니\n다. 하지만 <code class=\"language-text\">json</code> 파일을 사용하는 TeamB의 경우에는 번역 작업을 하려면 여전히 번거롭다고 느껴졌습니다\n. 번역 작업을 편하게 하기 위해 웹 사이트 주소를 알아야 하는 것은 물론, 팀을 선택하고 언어 파일 경로\n를 설정해야 했죠.</p>\n<h2 id=\"차라리-노드-스크립트로-만들어-더욱-편하게-사용하자\" style=\"position:relative;\"><a href=\"#%EC%B0%A8%EB%9D%BC%EB%A6%AC-%EB%85%B8%EB%93%9C-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%8D%94%EC%9A%B1-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90\" aria-label=\"차라리 노드 스크립트로 만들어 더욱 편하게 사용하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>차라리 노드 스크립트로 만들어 더욱 편하게 사용하자</h2>\n<p>언어 파일 경로를 설정하는 과정조차 없애고 싶었습니다. 그래서 TeamB의 경우에는 이 웹 사이트가 아닌,\n프로젝트에서 node script를 실행해 번역 작업을 더 간편하게 할 수 있게 방식을 변경하기로 결정했습니다.\n이렇게 하면 웹사이트의 주소를 알지 않아도 되고 필요한 기능만 명확히 수행할 것 같았습니다.</p>\n<p>간단하게 스크립트를 만들어 보겠습니다.</p>\n<p>먼저, 사용자에게서 터미널에서 key와 value를 입력받아야 합니다. 이 정보들을 입력받기 위해\n<a href=\"https://www.npmjs.com/package/inquirer\">inquirer.js</a> 라이브러리를 사용하겠습니다. <code class=\"language-text\">inquirer.js</code> 는\n터미널에서 다양한 UI로 사용자의 입력을 받거나, 출력해주는 라이브러리입니다. 아래 사진을 보시면 어떤\n느낌인지 감이 잡히실 겁니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 692px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAn0lEQVR42jWOwQqEIBCGe45tOwhmbLaupGmaQXSopMtSSNHB93+MHYL9DsPwzz/zT9J1XVmW1lrOuRCibVuttTFGKQUKNJRSxhiIwzDAtO/7PM9RxYlyyXVd4AshjOO4LMtxHNu2Qd333Tl3nue6rrAzTZP3/nsTY0SvN/6IpGkaQkhd19UNHBJ/4CMpJWRCFMYYIQSGoijmec6eaZY+fs09J+uMubsAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"inquirer-example\"\n        title=\"\"\n        src=\"/static/1683074758696.817115529904/91e7e/inquirer-example.png\"\n        srcset=\"/static/1683074758696.817115529904/63868/inquirer-example.png 250w,\n/static/1683074758696.817115529904/0b533/inquirer-example.png 500w,\n/static/1683074758696.817115529904/91e7e/inquirer-example.png 692w\"\n        sizes=\"(max-width: 692px) 100vw, 692px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"흐름-정리하기\" style=\"position:relative;\"><a href=\"#%ED%9D%90%EB%A6%84-%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"흐름 정리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>흐름 정리하기</h3>\n<ol>\n<li>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로를 정의합니다.</li>\n<li>사용자로부터 <code class=\"language-text\">key</code>를 입력받습니다.\n<ol>\n<li>값을 입력하지 않거나, 이미 존재하는 <code class=\"language-text\">key</code> 라면 오류 메시지를 반환하고 다시 입력 받습니다.</li>\n<li><code class=\"language-text\">camelCase</code> 가 아니라면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>사용자로부터 <code class=\"language-text\">value</code> 를 입력받습니다.\n<ol>\n<li>값을 입력하지 않으면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가합니다.\n<ol>\n<li>입력받은 <code class=\"language-text\">value</code>를 4개 국어로 번역합니다.</li>\n<li>정의해두었던 <code class=\"language-text\">json</code>파일이 존재하는 폴더 경로를 이용해, 해당 폴더의 하위에 존재하는 모든 언어파\n일들을 가져옵니다. 없다면 오류 메시지를 반환합니다.</li>\n<li>찾은 각 <code class=\"language-text\">json</code> 파일의 문자열을 분석하고, JS 객체로 변환합니다.</li>\n<li>변환한 JS 객체에 전달 받은 <code class=\"language-text\">key</code> 와 번역된 <code class=\"language-text\">value</code>를 추가합니다.</li>\n<li>변경된 JS 객체를 다시 JSON 문자열로 변환해 각 언어 파일에 작성합니다.</li>\n</ol>\n</li>\n<li>결과를 터미널에 출력합니다.</li>\n</ol>\n<p>정리하고 보니 빠르게 스크립트를 구현할 수 있을 것 같네요. 바로 코드로 구현해보겠습니다.</p>\n<h3 id=\"번역할-국가별-언어-코드-및-언어별-json-파일이-존재하는-폴더-경로-정의하기\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%97%AD%ED%95%A0-%EA%B5%AD%EA%B0%80%EB%B3%84-%EC%96%B8%EC%96%B4-%EC%BD%94%EB%93%9C-%EB%B0%8F-%EC%96%B8%EC%96%B4%EB%B3%84-json-%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%A1%B4%EC%9E%AC%ED%95%98%EB%8A%94-%ED%8F%B4%EB%8D%94-%EA%B2%BD%EB%A1%9C-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0\" aria-label=\"번역할 국가별 언어 코드 및 언어별 json 파일이 존재하는 폴더 경로 정의하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로 정의하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 정의한 언어 코드를 이용해 번역을 진행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGE_CODE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ko'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 언어별 json 파일이 존재하는 폴더 경로를 정의합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGES_DIR_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span><span class=\"token function\">cwd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'libs'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'locales'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'languages'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"사용자로부터-key와-value를-입력받기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90%EB%A1%9C%EB%B6%80%ED%84%B0-key%EC%99%80-value%EB%A5%BC-%EC%9E%85%EB%A0%A5%EB%B0%9B%EA%B8%B0\" aria-label=\"사용자로부터 key와 value를 입력받기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용자로부터 <code class=\"language-text\">key</code>와 <code class=\"language-text\">value</code>를 입력받기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 각 json 파일에 전달된 키가 존재하는지 검증합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">keyExistsInLangFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> convertedLanguageCode <span class=\"token operator\">=</span> <span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n          chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">The key '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">' already exists in '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json'.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNil</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isEmptyString</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">isNil</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> value<span class=\"token operator\">?.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 사용자에게 key와 value 값을 입력하라는 메시지를 표시합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">promptTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> key <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token function\">keyExistsInLangFiles</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> inputKey <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'key'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation key in camelCase:'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">validate</span><span class=\"token operator\">:</span> validateCamelCase<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    key <span class=\"token operator\">=</span> inputKey<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation value:'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">validate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token string\">'value cannot be empty. Please enter again:'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">inquirer</code> 라이브러리를 활용해 입력받도록 합니다. <code class=\"language-text\">type</code> 속성은 프롬프트의 유형을 정의합니다. input\ntype은 사용자에게서 문자열을 입력 받습니다. 그리고 <code class=\"language-text\">validate</code> 속성을 통해 사용자의 input 값에 제약을\n걸어줍니다.</p>\n<h3 id=\"각-언어-파일에-key-value를-추가하기\" style=\"position:relative;\"><a href=\"#%EA%B0%81-%EC%96%B8%EC%96%B4-%ED%8C%8C%EC%9D%BC%EC%97%90-key-value%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"각 언어 파일에 key value를 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 입력 받은 값을 번역하고 번역된 값을 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translateText</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token punctuation\">,</span> targetLanguage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://translation.googleapis.com/language/translate/v2'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">q</span><span class=\"token operator\">:</span> text<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> targetLanguage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token constant\">GOOGLE_TRANSLATE_API_KEY</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>translations<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>translatedText<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 전달받은 언어 코드에 해당하는 json 언어 파일을 찾아서 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">findLanguageFile</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">languageCode</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// `recursive-readdir` 라이브러리에서 제공하는 함수입니다.</span>\n  <span class=\"token comment\">// 해당 하위 디렉터리의 모든 파일을 재귀적으로 나열합니다.</span>\n  <span class=\"token keyword\">const</span> files <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">recursive</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> files<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> path<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>languageFile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Language file for </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> not found.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> languageFile<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 각 언어 파일에 키와 번역 값을 추가합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> translatedValue <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">translateText</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">findLanguageFile</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    translations<span class=\"token punctuation\">[</span>languageCode<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> translations<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"전체-번역-프로세스-실행하기\" style=\"position:relative;\"><a href=\"#%EC%A0%84%EC%B2%B4-%EB%B2%88%EC%97%AD-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"전체 번역 프로세스 실행하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>전체 번역 프로세스 실행하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 전체 번역 프로세스를 실행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promptTranslation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">addTranslation</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token string\">'번역 결과: '</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>translations<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Translation added to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">translate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 구현한 스크립트를 실행해보겠습니다. 아래는 스크립트 실행 결과입니다.</p>\n<p><img src=\"/images/new-team-productivity/translate-teamB-script.gif\" alt=\"translate-teamB-script.gif\"></p>\n<ul>\n<li><code class=\"language-text\">npm run translate</code> 명령어를 실행합니다.</li>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역을 원하는 텍스트를 입력 후, 엔터를 누릅니다.</li>\n<li>번역한 결과가 각 <code class=\"language-text\">json</code> 파일의 마지막 라인에 자동으로 추가되며 포맷팅을 실행합니다.</li>\n</ul>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByUlEQVR42o2QS2/TQBSF/S9oXn6MXzPjedjjcZzEebpOXwlQIYpKu0KlbGGP2FRq1/0ViBViwZIfx3WMsmjTCuno6uja38ycY8hiH4lskpHjIlTM75iuaXs9q56NwG+13TTT8KkMIpnEMlNScIGJIJEICcO0NiSSIeG1p7DkW1EWBzgyCI+FykOmLC9CIfMI94jwMEc+QR52fQrTC6gfUnez2SxrY6PACLgKhG7ZwQvT37N8MC0nrNV1Wh1rq3bXfqBOzzFkolM9EFKptI8JMy0E6ploE89vQnZNBL8+loEpX+wfTOfVbLEsJgvdH8oki1UfZiQUGC5T6GY3HPFE6RwqaQRNYMoI5SCXyEikAWY7yRoWsa4OjvqDQumBjHWssjTVSZzAkfAJioHAT8LQZJaPgIHwEY/hZsokvDYfjplIoFJ4juX4TUMP4WFRLg9fzxbHSToejMp5eTKZHToubnct6KnRkzefrM/enV9dXX/+/uPn1293q1cX7y+vQyJbHfMZ7B98tHr75uzDx09ffv3+c3N7//L08vwCYPFf8HQ6X69Pq+U6y+ejcVVWK4iAPALPfp6sYa3KUCg3gJA2FLvXNkE763kM/wUP7og3R7wHKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"translate-slack-reaction.png\"\n        title=\"\"\n        src=\"/static/1692836624195.603146242730/00d43/translate-slack-reaction.png\"\n        srcset=\"/static/1692836624195.603146242730/63868/translate-slack-reaction.png 250w,\n/static/1692836624195.603146242730/0b533/translate-slack-reaction.png 500w,\n/static/1692836624195.603146242730/00d43/translate-slack-reaction.png 1000w,\n/static/1692836624195.603146242730/aa440/translate-slack-reaction.png 1500w,\n/static/1692836624195.603146242730/e8950/translate-slack-reaction.png 2000w,\n/static/1692836624195.603146242730/922e6/translate-slack-reaction.png 2140w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>작업 이후 좋은 반응과 함께 번거롭던 번역 작업이 편해졌다는 의견이 많았습니다. 여러 고민을 거쳐 만든\n보람이 있었죠. 이렇게 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있었습니다. 이제 번역 업\n무에서 발생하는 시간을 크게 줄일 수 있게 되었습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://nodejs.org/api/fs.html\">https://nodejs.org/api/fs.html</a></li>\n<li><a href=\"https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/\">https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/</a></li>\n</ul>",
      "teama#TeamA": "<h2 id=\"새로운-팀에-합류한-이후-했던-것-중-가장-비효율적인-업무\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%8C%80%EC%97%90-%ED%95%A9%EB%A5%98%ED%95%9C-%EC%9D%B4%ED%9B%84-%ED%96%88%EB%8D%98-%EA%B2%83-%EC%A4%91-%EA%B0%80%EC%9E%A5-%EB%B9%84%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%97%85%EB%AC%B4\" aria-label=\"새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무</h2>\n<h3 id=\"너무나도-번거로운-번역-작업\" style=\"position:relative;\"><a href=\"#%EB%84%88%EB%AC%B4%EB%82%98%EB%8F%84-%EB%B2%88%EA%B1%B0%EB%A1%9C%EC%9A%B4-%EB%B2%88%EC%97%AD-%EC%9E%91%EC%97%85\" aria-label=\"너무나도 번거로운 번역 작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>너무나도 번거로운 번역 작업</h3>\n<p>새로 합류한 팀의 프로젝트에서는 총 4개 국어(한국어, 영어, 일본어, 베트남어)를 지원해야 했습니다.\n<code class=\"language-text\">ko.lang.json</code> 또는 <code class=\"language-text\">en.lang.json</code> 이런식으로 이름을 짖고 <code class=\"language-text\">json</code> 파일 형식으로 관리하고 있었습니다.</p>\n<p>따로 번역 작업을 해주시는 분은 없고, 그냥 구글 번역기를 통해 얻은 값을 각 <code class=\"language-text\">json</code> 파일에 추가해서 다\n국어를 지원하고 있었죠.</p>\n<p>로직을 작성해나가며 하나하나 번역기를 돌리고 각 <code class=\"language-text\">json</code> 파일에 추가하는 작업은 보통 귀찮은 작업이 아\n니었습니다.</p>\n<h3 id=\"손수-작업의-한계\" style=\"position:relative;\"><a href=\"#%EC%86%90%EC%88%98-%EC%9E%91%EC%97%85%EC%9D%98-%ED%95%9C%EA%B3%84\" aria-label=\"손수 작업의 한계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>손수 작업의 한계</h3>\n<p>일일이 번역할 문구를 복사해 4개 국어로 번역하고, 번역된 문구를 다시 각각 복사해 4개의 <code class=\"language-text\">json</code> 파일에\n추가하는 과정이 필요합니다. 또한 여러 개발자가 작업하다보니 <code class=\"language-text\">key</code> 네이밍 문법도 정리가 안 되어 있었\n습니다. 어떤 것은 <code class=\"language-text\">camelCase</code>, 또 어떤 것은 <code class=\"language-text\">snake_case</code>로 되어 있었습니다. 워낙 바쁘다보면\n<code class=\"language-text\">en.lang.json</code> 파일에 한국어를 추가하는 실수를 범할 수도 있겠죠. 이 과정에서 많은 시간이 소모되고 실\n수를 하지 않는다는 보장이 없죠.</p>\n<p>이런 새로운 기능을 작업할때마다 반복되다 보니 어느 세월에 문구를 복사해서 변역하고 또 번역한 값을 복\n사해서 각 언어 파일에 키값과 함께 추가하고 로직은 언제 다 구현하지? 라는 마음이 들었습니다. 이 과정\n을 개선하기로 마음 먹었죠.</p>\n<h3 id=\"어차피-번역기를-사용해서-할거라면-스크립트를-작성해서-개선할-수-있지-않을까\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EC%B0%A8%ED%94%BC-%EB%B2%88%EC%97%AD%EA%B8%B0%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%ED%95%A0%EA%B1%B0%EB%9D%BC%EB%A9%B4-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%84%9C-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%A7%80-%EC%95%8A%EC%9D%84%EA%B9%8C\" aria-label=\"어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까?</h3>\n<p>구글 번역기를 사용하므로 google에서 제공하는 번역 API를 이용해 한 번에 4개의 언어로 번역해주고 파일\n에 자동으로 추가해주는 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있을 것 같았습니다.</p>\n<p>개발자가 번역할 문구와 키값을 입력하면 자동으로 4개 국어로 번역해주고 매칭되는 언어별 <code class=\"language-text\">json</code> 파일의\n마지막 줄에 추가해주는 방법이 좋을 것 같습니다. 또한 key 값도 입력받을 때 정해둔 네이밍 문법에 일치\n해야 하기 때문에 통일되는 이점도 동시에 따라 왔죠. 여기서 네이밍 문법은 애초에 정해져 있지 않았기 때\n문에 팀원분들께 미팅 요청을 드렸고 <code class=\"language-text\">camelCase</code>로 통일하기로 결정이 되었죠. 그리고 번역 값이 100프로\n정확할 순 없으니 번역 결과값을 받아 수정할 수 있도록 하면 더욱 좋겠죠.</p>\n<p>이제 생각한 것을 편하게 사용할 수 있도록 구현하면 되겠습니다.</p>\n<h2 id=\"모든-팀들이-편하게-사용하도록-웹-사이트로-만들자\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%A0-%ED%8C%80%EB%93%A4%EC%9D%B4-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8F%84%EB%A1%9D-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%9E%90\" aria-label=\"모든 팀들이 편하게 사용하도록 웹 사이트로 만들자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모든 팀들이 편하게 사용하도록 웹 사이트로 만들자</h2>\n<p>‘위 스크립트를 만들어도 어떻게 해야 팀원들이 쉽게 사용할 수 있을까?‘라는 고민이 들었습니다. 익숙한웹\n사이트에서 최대한 직관적이고 간단하게 구현해 각 팀별로 원하는 목적을 쉽게 달성할 수 있도록 구현하고\n싶었습니다. 다른 팀에서도 <code class=\"language-text\">json</code> 파일을 사용하진 않지만 구글 번역기를 이용해서 4개 국어를 지원하고\n있었기 때문에 이왕 만드는 거 다른 팀원분에게도 도움이 되고 싶었기 때문에 첫 진입 시, 팀을 선택하고\n각 팀별로 다른 화면을 보여주도록 플로우를 그렸죠.</p>\n<p>예로 A라는 팀에서는 <a href=\"https://locize.com/\">locize</a>라는 번역 관리 시스템을 사용해서 관리 중이었습니다.\nlocize를 사용하면 번역할 문구를 언어별로 locize에 붙여넣으면 됩니다. 따라서 <code class=\"language-text\">json</code> 파일을 사용하지않\n으므로 4개 국어로 번역하고 각 번역 값을 확인 후, 수정하고 복사할 수 있도록 하면 좋겠죠.</p>\n<p>제가 속해 있는 B 팀의 경우에는 번역한 값들을 각 언어별 <code class=\"language-text\">json</code> 파일에 key-value 형식으로 추가해줘야합\n니다. 따라서 key와 value를 입력받고 각 <code class=\"language-text\">json</code> 파일에 추가해주면 많이 편해질 겁니다.</p>\n<p>아래는 구현한 웹사이트에서 각 팀별로 번역 작업을 하는 1차 결과입니다.</p>\n<h3 id=\"teama\" style=\"position:relative;\"><a href=\"#teama\" aria-label=\"teama permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamA</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamA-web.gif\" alt=\"translate-teamA-web-example\"></p>\n<ul>\n<li>TeamA (<code class=\"language-text\">locize</code> 를 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamA를 선택합니다.</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다. (특수문자로만 이루어져서는 안 됩니다.)</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>복사하기 버튼을 눌러 클립보드에 복사하고 <code class=\"language-text\">locize</code> 에 붙여넣습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"teamb\" style=\"position:relative;\"><a href=\"#teamb\" aria-label=\"teamb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamB</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamB-web.gif\" alt=\"translate-teamB-web-example\"></p>\n<ul>\n<li>TeamB (<code class=\"language-text\">json</code> 파일을 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamB를 선택합니다.</li>\n<li>언어 파일이 위치한 폴더의 경로를 입력하지 않았었다면, 파일의 경로를 입력합니다.\n<ul>\n<li>입력한 경로에 <code class=\"language-text\">language.json</code> 파일이 존재하지 않는다면 저장되지 않습니다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">json</code> 파일에 추가할 텍스트를 입력합니다.\n<ul>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다.</li>\n</ul>\n</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>‘각 언어별 json 파일에 저장’ 버튼을 눌러 각 <code class=\"language-text\">json</code> 파일에 추가합니다.</li>\n</ul>\n</li>\n</ul>\n<p>일단 생각한대로 구현은 했습니다. <code class=\"language-text\">locize</code> 를 사용하는 TeamA의 경우에는 번역 작업이 편해진 것 같습니\n다. 하지만 <code class=\"language-text\">json</code> 파일을 사용하는 TeamB의 경우에는 번역 작업을 하려면 여전히 번거롭다고 느껴졌습니다\n. 번역 작업을 편하게 하기 위해 웹 사이트 주소를 알아야 하는 것은 물론, 팀을 선택하고 언어 파일 경로\n를 설정해야 했죠.</p>\n<h2 id=\"차라리-노드-스크립트로-만들어-더욱-편하게-사용하자\" style=\"position:relative;\"><a href=\"#%EC%B0%A8%EB%9D%BC%EB%A6%AC-%EB%85%B8%EB%93%9C-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%8D%94%EC%9A%B1-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90\" aria-label=\"차라리 노드 스크립트로 만들어 더욱 편하게 사용하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>차라리 노드 스크립트로 만들어 더욱 편하게 사용하자</h2>\n<p>언어 파일 경로를 설정하는 과정조차 없애고 싶었습니다. 그래서 TeamB의 경우에는 이 웹 사이트가 아닌,\n프로젝트에서 node script를 실행해 번역 작업을 더 간편하게 할 수 있게 방식을 변경하기로 결정했습니다.\n이렇게 하면 웹사이트의 주소를 알지 않아도 되고 필요한 기능만 명확히 수행할 것 같았습니다.</p>\n<p>간단하게 스크립트를 만들어 보겠습니다.</p>\n<p>먼저, 사용자에게서 터미널에서 key와 value를 입력받아야 합니다. 이 정보들을 입력받기 위해\n<a href=\"https://www.npmjs.com/package/inquirer\">inquirer.js</a> 라이브러리를 사용하겠습니다. <code class=\"language-text\">inquirer.js</code> 는\n터미널에서 다양한 UI로 사용자의 입력을 받거나, 출력해주는 라이브러리입니다. 아래 사진을 보시면 어떤\n느낌인지 감이 잡히실 겁니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 692px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAn0lEQVR42jWOwQqEIBCGe45tOwhmbLaupGmaQXSopMtSSNHB93+MHYL9DsPwzz/zT9J1XVmW1lrOuRCibVuttTFGKQUKNJRSxhiIwzDAtO/7PM9RxYlyyXVd4AshjOO4LMtxHNu2Qd333Tl3nue6rrAzTZP3/nsTY0SvN/6IpGkaQkhd19UNHBJ/4CMpJWRCFMYYIQSGoijmec6eaZY+fs09J+uMubsAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"inquirer-example\"\n        title=\"\"\n        src=\"/static/1683074758696.817115529904/91e7e/inquirer-example.png\"\n        srcset=\"/static/1683074758696.817115529904/63868/inquirer-example.png 250w,\n/static/1683074758696.817115529904/0b533/inquirer-example.png 500w,\n/static/1683074758696.817115529904/91e7e/inquirer-example.png 692w\"\n        sizes=\"(max-width: 692px) 100vw, 692px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"흐름-정리하기\" style=\"position:relative;\"><a href=\"#%ED%9D%90%EB%A6%84-%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"흐름 정리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>흐름 정리하기</h3>\n<ol>\n<li>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로를 정의합니다.</li>\n<li>사용자로부터 <code class=\"language-text\">key</code>를 입력받습니다.\n<ol>\n<li>값을 입력하지 않거나, 이미 존재하는 <code class=\"language-text\">key</code> 라면 오류 메시지를 반환하고 다시 입력 받습니다.</li>\n<li><code class=\"language-text\">camelCase</code> 가 아니라면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>사용자로부터 <code class=\"language-text\">value</code> 를 입력받습니다.\n<ol>\n<li>값을 입력하지 않으면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가합니다.\n<ol>\n<li>입력받은 <code class=\"language-text\">value</code>를 4개 국어로 번역합니다.</li>\n<li>정의해두었던 <code class=\"language-text\">json</code>파일이 존재하는 폴더 경로를 이용해, 해당 폴더의 하위에 존재하는 모든 언어파\n일들을 가져옵니다. 없다면 오류 메시지를 반환합니다.</li>\n<li>찾은 각 <code class=\"language-text\">json</code> 파일의 문자열을 분석하고, JS 객체로 변환합니다.</li>\n<li>변환한 JS 객체에 전달 받은 <code class=\"language-text\">key</code> 와 번역된 <code class=\"language-text\">value</code>를 추가합니다.</li>\n<li>변경된 JS 객체를 다시 JSON 문자열로 변환해 각 언어 파일에 작성합니다.</li>\n</ol>\n</li>\n<li>결과를 터미널에 출력합니다.</li>\n</ol>\n<p>정리하고 보니 빠르게 스크립트를 구현할 수 있을 것 같네요. 바로 코드로 구현해보겠습니다.</p>\n<h3 id=\"번역할-국가별-언어-코드-및-언어별-json-파일이-존재하는-폴더-경로-정의하기\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%97%AD%ED%95%A0-%EA%B5%AD%EA%B0%80%EB%B3%84-%EC%96%B8%EC%96%B4-%EC%BD%94%EB%93%9C-%EB%B0%8F-%EC%96%B8%EC%96%B4%EB%B3%84-json-%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%A1%B4%EC%9E%AC%ED%95%98%EB%8A%94-%ED%8F%B4%EB%8D%94-%EA%B2%BD%EB%A1%9C-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0\" aria-label=\"번역할 국가별 언어 코드 및 언어별 json 파일이 존재하는 폴더 경로 정의하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로 정의하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 정의한 언어 코드를 이용해 번역을 진행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGE_CODE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ko'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 언어별 json 파일이 존재하는 폴더 경로를 정의합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGES_DIR_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span><span class=\"token function\">cwd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'libs'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'locales'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'languages'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"사용자로부터-key와-value를-입력받기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90%EB%A1%9C%EB%B6%80%ED%84%B0-key%EC%99%80-value%EB%A5%BC-%EC%9E%85%EB%A0%A5%EB%B0%9B%EA%B8%B0\" aria-label=\"사용자로부터 key와 value를 입력받기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용자로부터 <code class=\"language-text\">key</code>와 <code class=\"language-text\">value</code>를 입력받기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 각 json 파일에 전달된 키가 존재하는지 검증합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">keyExistsInLangFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> convertedLanguageCode <span class=\"token operator\">=</span> <span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n          chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">The key '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">' already exists in '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json'.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNil</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isEmptyString</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">isNil</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> value<span class=\"token operator\">?.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 사용자에게 key와 value 값을 입력하라는 메시지를 표시합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">promptTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> key <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token function\">keyExistsInLangFiles</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> inputKey <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'key'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation key in camelCase:'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">validate</span><span class=\"token operator\">:</span> validateCamelCase<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    key <span class=\"token operator\">=</span> inputKey<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation value:'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">validate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token string\">'value cannot be empty. Please enter again:'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">inquirer</code> 라이브러리를 활용해 입력받도록 합니다. <code class=\"language-text\">type</code> 속성은 프롬프트의 유형을 정의합니다. input\ntype은 사용자에게서 문자열을 입력 받습니다. 그리고 <code class=\"language-text\">validate</code> 속성을 통해 사용자의 input 값에 제약을\n걸어줍니다.</p>\n<h3 id=\"각-언어-파일에-key-value를-추가하기\" style=\"position:relative;\"><a href=\"#%EA%B0%81-%EC%96%B8%EC%96%B4-%ED%8C%8C%EC%9D%BC%EC%97%90-key-value%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"각 언어 파일에 key value를 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 입력 받은 값을 번역하고 번역된 값을 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translateText</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token punctuation\">,</span> targetLanguage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://translation.googleapis.com/language/translate/v2'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">q</span><span class=\"token operator\">:</span> text<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> targetLanguage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token constant\">GOOGLE_TRANSLATE_API_KEY</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>translations<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>translatedText<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 전달받은 언어 코드에 해당하는 json 언어 파일을 찾아서 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">findLanguageFile</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">languageCode</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// `recursive-readdir` 라이브러리에서 제공하는 함수입니다.</span>\n  <span class=\"token comment\">// 해당 하위 디렉터리의 모든 파일을 재귀적으로 나열합니다.</span>\n  <span class=\"token keyword\">const</span> files <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">recursive</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> files<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> path<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>languageFile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Language file for </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> not found.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> languageFile<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 각 언어 파일에 키와 번역 값을 추가합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> translatedValue <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">translateText</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">findLanguageFile</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    translations<span class=\"token punctuation\">[</span>languageCode<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> translations<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"전체-번역-프로세스-실행하기\" style=\"position:relative;\"><a href=\"#%EC%A0%84%EC%B2%B4-%EB%B2%88%EC%97%AD-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"전체 번역 프로세스 실행하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>전체 번역 프로세스 실행하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 전체 번역 프로세스를 실행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promptTranslation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">addTranslation</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token string\">'번역 결과: '</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>translations<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Translation added to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">translate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 구현한 스크립트를 실행해보겠습니다. 아래는 스크립트 실행 결과입니다.</p>\n<p><img src=\"/images/new-team-productivity/translate-teamB-script.gif\" alt=\"translate-teamB-script.gif\"></p>\n<ul>\n<li><code class=\"language-text\">npm run translate</code> 명령어를 실행합니다.</li>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역을 원하는 텍스트를 입력 후, 엔터를 누릅니다.</li>\n<li>번역한 결과가 각 <code class=\"language-text\">json</code> 파일의 마지막 라인에 자동으로 추가되며 포맷팅을 실행합니다.</li>\n</ul>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByUlEQVR42o2QS2/TQBSF/S9oXn6MXzPjedjjcZzEebpOXwlQIYpKu0KlbGGP2FRq1/0ViBViwZIfx3WMsmjTCuno6uja38ycY8hiH4lskpHjIlTM75iuaXs9q56NwG+13TTT8KkMIpnEMlNScIGJIJEICcO0NiSSIeG1p7DkW1EWBzgyCI+FykOmLC9CIfMI94jwMEc+QR52fQrTC6gfUnez2SxrY6PACLgKhG7ZwQvT37N8MC0nrNV1Wh1rq3bXfqBOzzFkolM9EFKptI8JMy0E6ploE89vQnZNBL8+loEpX+wfTOfVbLEsJgvdH8oki1UfZiQUGC5T6GY3HPFE6RwqaQRNYMoI5SCXyEikAWY7yRoWsa4OjvqDQumBjHWssjTVSZzAkfAJioHAT8LQZJaPgIHwEY/hZsokvDYfjplIoFJ4juX4TUMP4WFRLg9fzxbHSToejMp5eTKZHToubnct6KnRkzefrM/enV9dXX/+/uPn1293q1cX7y+vQyJbHfMZ7B98tHr75uzDx09ffv3+c3N7//L08vwCYPFf8HQ6X69Pq+U6y+ejcVVWK4iAPALPfp6sYa3KUCg3gJA2FLvXNkE763kM/wUP7og3R7wHKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"translate-slack-reaction.png\"\n        title=\"\"\n        src=\"/static/1692836624195.603146242730/00d43/translate-slack-reaction.png\"\n        srcset=\"/static/1692836624195.603146242730/63868/translate-slack-reaction.png 250w,\n/static/1692836624195.603146242730/0b533/translate-slack-reaction.png 500w,\n/static/1692836624195.603146242730/00d43/translate-slack-reaction.png 1000w,\n/static/1692836624195.603146242730/aa440/translate-slack-reaction.png 1500w,\n/static/1692836624195.603146242730/e8950/translate-slack-reaction.png 2000w,\n/static/1692836624195.603146242730/922e6/translate-slack-reaction.png 2140w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>작업 이후 좋은 반응과 함께 번거롭던 번역 작업이 편해졌다는 의견이 많았습니다. 여러 고민을 거쳐 만든\n보람이 있었죠. 이렇게 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있었습니다. 이제 번역 업\n무에서 발생하는 시간을 크게 줄일 수 있게 되었습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://nodejs.org/api/fs.html\">https://nodejs.org/api/fs.html</a></li>\n<li><a href=\"https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/\">https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/</a></li>\n</ul>",
      "teamb#TeamB": "<h2 id=\"새로운-팀에-합류한-이후-했던-것-중-가장-비효율적인-업무\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%8C%80%EC%97%90-%ED%95%A9%EB%A5%98%ED%95%9C-%EC%9D%B4%ED%9B%84-%ED%96%88%EB%8D%98-%EA%B2%83-%EC%A4%91-%EA%B0%80%EC%9E%A5-%EB%B9%84%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%97%85%EB%AC%B4\" aria-label=\"새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무</h2>\n<h3 id=\"너무나도-번거로운-번역-작업\" style=\"position:relative;\"><a href=\"#%EB%84%88%EB%AC%B4%EB%82%98%EB%8F%84-%EB%B2%88%EA%B1%B0%EB%A1%9C%EC%9A%B4-%EB%B2%88%EC%97%AD-%EC%9E%91%EC%97%85\" aria-label=\"너무나도 번거로운 번역 작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>너무나도 번거로운 번역 작업</h3>\n<p>새로 합류한 팀의 프로젝트에서는 총 4개 국어(한국어, 영어, 일본어, 베트남어)를 지원해야 했습니다.\n<code class=\"language-text\">ko.lang.json</code> 또는 <code class=\"language-text\">en.lang.json</code> 이런식으로 이름을 짖고 <code class=\"language-text\">json</code> 파일 형식으로 관리하고 있었습니다.</p>\n<p>따로 번역 작업을 해주시는 분은 없고, 그냥 구글 번역기를 통해 얻은 값을 각 <code class=\"language-text\">json</code> 파일에 추가해서 다\n국어를 지원하고 있었죠.</p>\n<p>로직을 작성해나가며 하나하나 번역기를 돌리고 각 <code class=\"language-text\">json</code> 파일에 추가하는 작업은 보통 귀찮은 작업이 아\n니었습니다.</p>\n<h3 id=\"손수-작업의-한계\" style=\"position:relative;\"><a href=\"#%EC%86%90%EC%88%98-%EC%9E%91%EC%97%85%EC%9D%98-%ED%95%9C%EA%B3%84\" aria-label=\"손수 작업의 한계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>손수 작업의 한계</h3>\n<p>일일이 번역할 문구를 복사해 4개 국어로 번역하고, 번역된 문구를 다시 각각 복사해 4개의 <code class=\"language-text\">json</code> 파일에\n추가하는 과정이 필요합니다. 또한 여러 개발자가 작업하다보니 <code class=\"language-text\">key</code> 네이밍 문법도 정리가 안 되어 있었\n습니다. 어떤 것은 <code class=\"language-text\">camelCase</code>, 또 어떤 것은 <code class=\"language-text\">snake_case</code>로 되어 있었습니다. 워낙 바쁘다보면\n<code class=\"language-text\">en.lang.json</code> 파일에 한국어를 추가하는 실수를 범할 수도 있겠죠. 이 과정에서 많은 시간이 소모되고 실\n수를 하지 않는다는 보장이 없죠.</p>\n<p>이런 새로운 기능을 작업할때마다 반복되다 보니 어느 세월에 문구를 복사해서 변역하고 또 번역한 값을 복\n사해서 각 언어 파일에 키값과 함께 추가하고 로직은 언제 다 구현하지? 라는 마음이 들었습니다. 이 과정\n을 개선하기로 마음 먹었죠.</p>\n<h3 id=\"어차피-번역기를-사용해서-할거라면-스크립트를-작성해서-개선할-수-있지-않을까\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EC%B0%A8%ED%94%BC-%EB%B2%88%EC%97%AD%EA%B8%B0%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%ED%95%A0%EA%B1%B0%EB%9D%BC%EB%A9%B4-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%84%9C-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%A7%80-%EC%95%8A%EC%9D%84%EA%B9%8C\" aria-label=\"어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까?</h3>\n<p>구글 번역기를 사용하므로 google에서 제공하는 번역 API를 이용해 한 번에 4개의 언어로 번역해주고 파일\n에 자동으로 추가해주는 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있을 것 같았습니다.</p>\n<p>개발자가 번역할 문구와 키값을 입력하면 자동으로 4개 국어로 번역해주고 매칭되는 언어별 <code class=\"language-text\">json</code> 파일의\n마지막 줄에 추가해주는 방법이 좋을 것 같습니다. 또한 key 값도 입력받을 때 정해둔 네이밍 문법에 일치\n해야 하기 때문에 통일되는 이점도 동시에 따라 왔죠. 여기서 네이밍 문법은 애초에 정해져 있지 않았기 때\n문에 팀원분들께 미팅 요청을 드렸고 <code class=\"language-text\">camelCase</code>로 통일하기로 결정이 되었죠. 그리고 번역 값이 100프로\n정확할 순 없으니 번역 결과값을 받아 수정할 수 있도록 하면 더욱 좋겠죠.</p>\n<p>이제 생각한 것을 편하게 사용할 수 있도록 구현하면 되겠습니다.</p>\n<h2 id=\"모든-팀들이-편하게-사용하도록-웹-사이트로-만들자\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%A0-%ED%8C%80%EB%93%A4%EC%9D%B4-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8F%84%EB%A1%9D-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%9E%90\" aria-label=\"모든 팀들이 편하게 사용하도록 웹 사이트로 만들자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모든 팀들이 편하게 사용하도록 웹 사이트로 만들자</h2>\n<p>‘위 스크립트를 만들어도 어떻게 해야 팀원들이 쉽게 사용할 수 있을까?‘라는 고민이 들었습니다. 익숙한웹\n사이트에서 최대한 직관적이고 간단하게 구현해 각 팀별로 원하는 목적을 쉽게 달성할 수 있도록 구현하고\n싶었습니다. 다른 팀에서도 <code class=\"language-text\">json</code> 파일을 사용하진 않지만 구글 번역기를 이용해서 4개 국어를 지원하고\n있었기 때문에 이왕 만드는 거 다른 팀원분에게도 도움이 되고 싶었기 때문에 첫 진입 시, 팀을 선택하고\n각 팀별로 다른 화면을 보여주도록 플로우를 그렸죠.</p>\n<p>예로 A라는 팀에서는 <a href=\"https://locize.com/\">locize</a>라는 번역 관리 시스템을 사용해서 관리 중이었습니다.\nlocize를 사용하면 번역할 문구를 언어별로 locize에 붙여넣으면 됩니다. 따라서 <code class=\"language-text\">json</code> 파일을 사용하지않\n으므로 4개 국어로 번역하고 각 번역 값을 확인 후, 수정하고 복사할 수 있도록 하면 좋겠죠.</p>\n<p>제가 속해 있는 B 팀의 경우에는 번역한 값들을 각 언어별 <code class=\"language-text\">json</code> 파일에 key-value 형식으로 추가해줘야합\n니다. 따라서 key와 value를 입력받고 각 <code class=\"language-text\">json</code> 파일에 추가해주면 많이 편해질 겁니다.</p>\n<p>아래는 구현한 웹사이트에서 각 팀별로 번역 작업을 하는 1차 결과입니다.</p>\n<h3 id=\"teama\" style=\"position:relative;\"><a href=\"#teama\" aria-label=\"teama permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamA</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamA-web.gif\" alt=\"translate-teamA-web-example\"></p>\n<ul>\n<li>TeamA (<code class=\"language-text\">locize</code> 를 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamA를 선택합니다.</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다. (특수문자로만 이루어져서는 안 됩니다.)</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>복사하기 버튼을 눌러 클립보드에 복사하고 <code class=\"language-text\">locize</code> 에 붙여넣습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"teamb\" style=\"position:relative;\"><a href=\"#teamb\" aria-label=\"teamb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamB</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamB-web.gif\" alt=\"translate-teamB-web-example\"></p>\n<ul>\n<li>TeamB (<code class=\"language-text\">json</code> 파일을 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamB를 선택합니다.</li>\n<li>언어 파일이 위치한 폴더의 경로를 입력하지 않았었다면, 파일의 경로를 입력합니다.\n<ul>\n<li>입력한 경로에 <code class=\"language-text\">language.json</code> 파일이 존재하지 않는다면 저장되지 않습니다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">json</code> 파일에 추가할 텍스트를 입력합니다.\n<ul>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다.</li>\n</ul>\n</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>‘각 언어별 json 파일에 저장’ 버튼을 눌러 각 <code class=\"language-text\">json</code> 파일에 추가합니다.</li>\n</ul>\n</li>\n</ul>\n<p>일단 생각한대로 구현은 했습니다. <code class=\"language-text\">locize</code> 를 사용하는 TeamA의 경우에는 번역 작업이 편해진 것 같습니\n다. 하지만 <code class=\"language-text\">json</code> 파일을 사용하는 TeamB의 경우에는 번역 작업을 하려면 여전히 번거롭다고 느껴졌습니다\n. 번역 작업을 편하게 하기 위해 웹 사이트 주소를 알아야 하는 것은 물론, 팀을 선택하고 언어 파일 경로\n를 설정해야 했죠.</p>\n<h2 id=\"차라리-노드-스크립트로-만들어-더욱-편하게-사용하자\" style=\"position:relative;\"><a href=\"#%EC%B0%A8%EB%9D%BC%EB%A6%AC-%EB%85%B8%EB%93%9C-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%8D%94%EC%9A%B1-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90\" aria-label=\"차라리 노드 스크립트로 만들어 더욱 편하게 사용하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>차라리 노드 스크립트로 만들어 더욱 편하게 사용하자</h2>\n<p>언어 파일 경로를 설정하는 과정조차 없애고 싶었습니다. 그래서 TeamB의 경우에는 이 웹 사이트가 아닌,\n프로젝트에서 node script를 실행해 번역 작업을 더 간편하게 할 수 있게 방식을 변경하기로 결정했습니다.\n이렇게 하면 웹사이트의 주소를 알지 않아도 되고 필요한 기능만 명확히 수행할 것 같았습니다.</p>\n<p>간단하게 스크립트를 만들어 보겠습니다.</p>\n<p>먼저, 사용자에게서 터미널에서 key와 value를 입력받아야 합니다. 이 정보들을 입력받기 위해\n<a href=\"https://www.npmjs.com/package/inquirer\">inquirer.js</a> 라이브러리를 사용하겠습니다. <code class=\"language-text\">inquirer.js</code> 는\n터미널에서 다양한 UI로 사용자의 입력을 받거나, 출력해주는 라이브러리입니다. 아래 사진을 보시면 어떤\n느낌인지 감이 잡히실 겁니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 692px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAn0lEQVR42jWOwQqEIBCGe45tOwhmbLaupGmaQXSopMtSSNHB93+MHYL9DsPwzz/zT9J1XVmW1lrOuRCibVuttTFGKQUKNJRSxhiIwzDAtO/7PM9RxYlyyXVd4AshjOO4LMtxHNu2Qd333Tl3nue6rrAzTZP3/nsTY0SvN/6IpGkaQkhd19UNHBJ/4CMpJWRCFMYYIQSGoijmec6eaZY+fs09J+uMubsAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"inquirer-example\"\n        title=\"\"\n        src=\"/static/1683074758696.817115529904/91e7e/inquirer-example.png\"\n        srcset=\"/static/1683074758696.817115529904/63868/inquirer-example.png 250w,\n/static/1683074758696.817115529904/0b533/inquirer-example.png 500w,\n/static/1683074758696.817115529904/91e7e/inquirer-example.png 692w\"\n        sizes=\"(max-width: 692px) 100vw, 692px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"흐름-정리하기\" style=\"position:relative;\"><a href=\"#%ED%9D%90%EB%A6%84-%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"흐름 정리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>흐름 정리하기</h3>\n<ol>\n<li>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로를 정의합니다.</li>\n<li>사용자로부터 <code class=\"language-text\">key</code>를 입력받습니다.\n<ol>\n<li>값을 입력하지 않거나, 이미 존재하는 <code class=\"language-text\">key</code> 라면 오류 메시지를 반환하고 다시 입력 받습니다.</li>\n<li><code class=\"language-text\">camelCase</code> 가 아니라면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>사용자로부터 <code class=\"language-text\">value</code> 를 입력받습니다.\n<ol>\n<li>값을 입력하지 않으면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가합니다.\n<ol>\n<li>입력받은 <code class=\"language-text\">value</code>를 4개 국어로 번역합니다.</li>\n<li>정의해두었던 <code class=\"language-text\">json</code>파일이 존재하는 폴더 경로를 이용해, 해당 폴더의 하위에 존재하는 모든 언어파\n일들을 가져옵니다. 없다면 오류 메시지를 반환합니다.</li>\n<li>찾은 각 <code class=\"language-text\">json</code> 파일의 문자열을 분석하고, JS 객체로 변환합니다.</li>\n<li>변환한 JS 객체에 전달 받은 <code class=\"language-text\">key</code> 와 번역된 <code class=\"language-text\">value</code>를 추가합니다.</li>\n<li>변경된 JS 객체를 다시 JSON 문자열로 변환해 각 언어 파일에 작성합니다.</li>\n</ol>\n</li>\n<li>결과를 터미널에 출력합니다.</li>\n</ol>\n<p>정리하고 보니 빠르게 스크립트를 구현할 수 있을 것 같네요. 바로 코드로 구현해보겠습니다.</p>\n<h3 id=\"번역할-국가별-언어-코드-및-언어별-json-파일이-존재하는-폴더-경로-정의하기\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%97%AD%ED%95%A0-%EA%B5%AD%EA%B0%80%EB%B3%84-%EC%96%B8%EC%96%B4-%EC%BD%94%EB%93%9C-%EB%B0%8F-%EC%96%B8%EC%96%B4%EB%B3%84-json-%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%A1%B4%EC%9E%AC%ED%95%98%EB%8A%94-%ED%8F%B4%EB%8D%94-%EA%B2%BD%EB%A1%9C-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0\" aria-label=\"번역할 국가별 언어 코드 및 언어별 json 파일이 존재하는 폴더 경로 정의하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로 정의하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 정의한 언어 코드를 이용해 번역을 진행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGE_CODE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ko'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 언어별 json 파일이 존재하는 폴더 경로를 정의합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGES_DIR_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span><span class=\"token function\">cwd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'libs'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'locales'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'languages'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"사용자로부터-key와-value를-입력받기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90%EB%A1%9C%EB%B6%80%ED%84%B0-key%EC%99%80-value%EB%A5%BC-%EC%9E%85%EB%A0%A5%EB%B0%9B%EA%B8%B0\" aria-label=\"사용자로부터 key와 value를 입력받기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용자로부터 <code class=\"language-text\">key</code>와 <code class=\"language-text\">value</code>를 입력받기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 각 json 파일에 전달된 키가 존재하는지 검증합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">keyExistsInLangFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> convertedLanguageCode <span class=\"token operator\">=</span> <span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n          chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">The key '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">' already exists in '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json'.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNil</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isEmptyString</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">isNil</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> value<span class=\"token operator\">?.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 사용자에게 key와 value 값을 입력하라는 메시지를 표시합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">promptTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> key <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token function\">keyExistsInLangFiles</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> inputKey <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'key'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation key in camelCase:'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">validate</span><span class=\"token operator\">:</span> validateCamelCase<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    key <span class=\"token operator\">=</span> inputKey<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation value:'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">validate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token string\">'value cannot be empty. Please enter again:'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">inquirer</code> 라이브러리를 활용해 입력받도록 합니다. <code class=\"language-text\">type</code> 속성은 프롬프트의 유형을 정의합니다. input\ntype은 사용자에게서 문자열을 입력 받습니다. 그리고 <code class=\"language-text\">validate</code> 속성을 통해 사용자의 input 값에 제약을\n걸어줍니다.</p>\n<h3 id=\"각-언어-파일에-key-value를-추가하기\" style=\"position:relative;\"><a href=\"#%EA%B0%81-%EC%96%B8%EC%96%B4-%ED%8C%8C%EC%9D%BC%EC%97%90-key-value%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"각 언어 파일에 key value를 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 입력 받은 값을 번역하고 번역된 값을 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translateText</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token punctuation\">,</span> targetLanguage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://translation.googleapis.com/language/translate/v2'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">q</span><span class=\"token operator\">:</span> text<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> targetLanguage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token constant\">GOOGLE_TRANSLATE_API_KEY</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>translations<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>translatedText<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 전달받은 언어 코드에 해당하는 json 언어 파일을 찾아서 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">findLanguageFile</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">languageCode</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// `recursive-readdir` 라이브러리에서 제공하는 함수입니다.</span>\n  <span class=\"token comment\">// 해당 하위 디렉터리의 모든 파일을 재귀적으로 나열합니다.</span>\n  <span class=\"token keyword\">const</span> files <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">recursive</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> files<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> path<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>languageFile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Language file for </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> not found.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> languageFile<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 각 언어 파일에 키와 번역 값을 추가합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> translatedValue <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">translateText</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">findLanguageFile</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    translations<span class=\"token punctuation\">[</span>languageCode<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> translations<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"전체-번역-프로세스-실행하기\" style=\"position:relative;\"><a href=\"#%EC%A0%84%EC%B2%B4-%EB%B2%88%EC%97%AD-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"전체 번역 프로세스 실행하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>전체 번역 프로세스 실행하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 전체 번역 프로세스를 실행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promptTranslation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">addTranslation</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token string\">'번역 결과: '</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>translations<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Translation added to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">translate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 구현한 스크립트를 실행해보겠습니다. 아래는 스크립트 실행 결과입니다.</p>\n<p><img src=\"/images/new-team-productivity/translate-teamB-script.gif\" alt=\"translate-teamB-script.gif\"></p>\n<ul>\n<li><code class=\"language-text\">npm run translate</code> 명령어를 실행합니다.</li>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역을 원하는 텍스트를 입력 후, 엔터를 누릅니다.</li>\n<li>번역한 결과가 각 <code class=\"language-text\">json</code> 파일의 마지막 라인에 자동으로 추가되며 포맷팅을 실행합니다.</li>\n</ul>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByUlEQVR42o2QS2/TQBSF/S9oXn6MXzPjedjjcZzEebpOXwlQIYpKu0KlbGGP2FRq1/0ViBViwZIfx3WMsmjTCuno6uja38ycY8hiH4lskpHjIlTM75iuaXs9q56NwG+13TTT8KkMIpnEMlNScIGJIJEICcO0NiSSIeG1p7DkW1EWBzgyCI+FykOmLC9CIfMI94jwMEc+QR52fQrTC6gfUnez2SxrY6PACLgKhG7ZwQvT37N8MC0nrNV1Wh1rq3bXfqBOzzFkolM9EFKptI8JMy0E6ploE89vQnZNBL8+loEpX+wfTOfVbLEsJgvdH8oki1UfZiQUGC5T6GY3HPFE6RwqaQRNYMoI5SCXyEikAWY7yRoWsa4OjvqDQumBjHWssjTVSZzAkfAJioHAT8LQZJaPgIHwEY/hZsokvDYfjplIoFJ4juX4TUMP4WFRLg9fzxbHSToejMp5eTKZHToubnct6KnRkzefrM/enV9dXX/+/uPn1293q1cX7y+vQyJbHfMZ7B98tHr75uzDx09ffv3+c3N7//L08vwCYPFf8HQ6X69Pq+U6y+ejcVVWK4iAPALPfp6sYa3KUCg3gJA2FLvXNkE763kM/wUP7og3R7wHKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"translate-slack-reaction.png\"\n        title=\"\"\n        src=\"/static/1692836624195.603146242730/00d43/translate-slack-reaction.png\"\n        srcset=\"/static/1692836624195.603146242730/63868/translate-slack-reaction.png 250w,\n/static/1692836624195.603146242730/0b533/translate-slack-reaction.png 500w,\n/static/1692836624195.603146242730/00d43/translate-slack-reaction.png 1000w,\n/static/1692836624195.603146242730/aa440/translate-slack-reaction.png 1500w,\n/static/1692836624195.603146242730/e8950/translate-slack-reaction.png 2000w,\n/static/1692836624195.603146242730/922e6/translate-slack-reaction.png 2140w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>작업 이후 좋은 반응과 함께 번거롭던 번역 작업이 편해졌다는 의견이 많았습니다. 여러 고민을 거쳐 만든\n보람이 있었죠. 이렇게 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있었습니다. 이제 번역 업\n무에서 발생하는 시간을 크게 줄일 수 있게 되었습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://nodejs.org/api/fs.html\">https://nodejs.org/api/fs.html</a></li>\n<li><a href=\"https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/\">https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/</a></li>\n</ul>",
      "%EC%B0%A8%EB%9D%BC%EB%A6%AC-%EB%85%B8%EB%93%9C-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%8D%94%EC%9A%B1-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90#차라리 노드 스크립트로 만들어 더욱 편하게 사용하자": "<h2 id=\"새로운-팀에-합류한-이후-했던-것-중-가장-비효율적인-업무\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%8C%80%EC%97%90-%ED%95%A9%EB%A5%98%ED%95%9C-%EC%9D%B4%ED%9B%84-%ED%96%88%EB%8D%98-%EA%B2%83-%EC%A4%91-%EA%B0%80%EC%9E%A5-%EB%B9%84%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%97%85%EB%AC%B4\" aria-label=\"새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무</h2>\n<h3 id=\"너무나도-번거로운-번역-작업\" style=\"position:relative;\"><a href=\"#%EB%84%88%EB%AC%B4%EB%82%98%EB%8F%84-%EB%B2%88%EA%B1%B0%EB%A1%9C%EC%9A%B4-%EB%B2%88%EC%97%AD-%EC%9E%91%EC%97%85\" aria-label=\"너무나도 번거로운 번역 작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>너무나도 번거로운 번역 작업</h3>\n<p>새로 합류한 팀의 프로젝트에서는 총 4개 국어(한국어, 영어, 일본어, 베트남어)를 지원해야 했습니다.\n<code class=\"language-text\">ko.lang.json</code> 또는 <code class=\"language-text\">en.lang.json</code> 이런식으로 이름을 짖고 <code class=\"language-text\">json</code> 파일 형식으로 관리하고 있었습니다.</p>\n<p>따로 번역 작업을 해주시는 분은 없고, 그냥 구글 번역기를 통해 얻은 값을 각 <code class=\"language-text\">json</code> 파일에 추가해서 다\n국어를 지원하고 있었죠.</p>\n<p>로직을 작성해나가며 하나하나 번역기를 돌리고 각 <code class=\"language-text\">json</code> 파일에 추가하는 작업은 보통 귀찮은 작업이 아\n니었습니다.</p>\n<h3 id=\"손수-작업의-한계\" style=\"position:relative;\"><a href=\"#%EC%86%90%EC%88%98-%EC%9E%91%EC%97%85%EC%9D%98-%ED%95%9C%EA%B3%84\" aria-label=\"손수 작업의 한계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>손수 작업의 한계</h3>\n<p>일일이 번역할 문구를 복사해 4개 국어로 번역하고, 번역된 문구를 다시 각각 복사해 4개의 <code class=\"language-text\">json</code> 파일에\n추가하는 과정이 필요합니다. 또한 여러 개발자가 작업하다보니 <code class=\"language-text\">key</code> 네이밍 문법도 정리가 안 되어 있었\n습니다. 어떤 것은 <code class=\"language-text\">camelCase</code>, 또 어떤 것은 <code class=\"language-text\">snake_case</code>로 되어 있었습니다. 워낙 바쁘다보면\n<code class=\"language-text\">en.lang.json</code> 파일에 한국어를 추가하는 실수를 범할 수도 있겠죠. 이 과정에서 많은 시간이 소모되고 실\n수를 하지 않는다는 보장이 없죠.</p>\n<p>이런 새로운 기능을 작업할때마다 반복되다 보니 어느 세월에 문구를 복사해서 변역하고 또 번역한 값을 복\n사해서 각 언어 파일에 키값과 함께 추가하고 로직은 언제 다 구현하지? 라는 마음이 들었습니다. 이 과정\n을 개선하기로 마음 먹었죠.</p>\n<h3 id=\"어차피-번역기를-사용해서-할거라면-스크립트를-작성해서-개선할-수-있지-않을까\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EC%B0%A8%ED%94%BC-%EB%B2%88%EC%97%AD%EA%B8%B0%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%ED%95%A0%EA%B1%B0%EB%9D%BC%EB%A9%B4-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%84%9C-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%A7%80-%EC%95%8A%EC%9D%84%EA%B9%8C\" aria-label=\"어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까?</h3>\n<p>구글 번역기를 사용하므로 google에서 제공하는 번역 API를 이용해 한 번에 4개의 언어로 번역해주고 파일\n에 자동으로 추가해주는 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있을 것 같았습니다.</p>\n<p>개발자가 번역할 문구와 키값을 입력하면 자동으로 4개 국어로 번역해주고 매칭되는 언어별 <code class=\"language-text\">json</code> 파일의\n마지막 줄에 추가해주는 방법이 좋을 것 같습니다. 또한 key 값도 입력받을 때 정해둔 네이밍 문법에 일치\n해야 하기 때문에 통일되는 이점도 동시에 따라 왔죠. 여기서 네이밍 문법은 애초에 정해져 있지 않았기 때\n문에 팀원분들께 미팅 요청을 드렸고 <code class=\"language-text\">camelCase</code>로 통일하기로 결정이 되었죠. 그리고 번역 값이 100프로\n정확할 순 없으니 번역 결과값을 받아 수정할 수 있도록 하면 더욱 좋겠죠.</p>\n<p>이제 생각한 것을 편하게 사용할 수 있도록 구현하면 되겠습니다.</p>\n<h2 id=\"모든-팀들이-편하게-사용하도록-웹-사이트로-만들자\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%A0-%ED%8C%80%EB%93%A4%EC%9D%B4-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8F%84%EB%A1%9D-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%9E%90\" aria-label=\"모든 팀들이 편하게 사용하도록 웹 사이트로 만들자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모든 팀들이 편하게 사용하도록 웹 사이트로 만들자</h2>\n<p>‘위 스크립트를 만들어도 어떻게 해야 팀원들이 쉽게 사용할 수 있을까?‘라는 고민이 들었습니다. 익숙한웹\n사이트에서 최대한 직관적이고 간단하게 구현해 각 팀별로 원하는 목적을 쉽게 달성할 수 있도록 구현하고\n싶었습니다. 다른 팀에서도 <code class=\"language-text\">json</code> 파일을 사용하진 않지만 구글 번역기를 이용해서 4개 국어를 지원하고\n있었기 때문에 이왕 만드는 거 다른 팀원분에게도 도움이 되고 싶었기 때문에 첫 진입 시, 팀을 선택하고\n각 팀별로 다른 화면을 보여주도록 플로우를 그렸죠.</p>\n<p>예로 A라는 팀에서는 <a href=\"https://locize.com/\">locize</a>라는 번역 관리 시스템을 사용해서 관리 중이었습니다.\nlocize를 사용하면 번역할 문구를 언어별로 locize에 붙여넣으면 됩니다. 따라서 <code class=\"language-text\">json</code> 파일을 사용하지않\n으므로 4개 국어로 번역하고 각 번역 값을 확인 후, 수정하고 복사할 수 있도록 하면 좋겠죠.</p>\n<p>제가 속해 있는 B 팀의 경우에는 번역한 값들을 각 언어별 <code class=\"language-text\">json</code> 파일에 key-value 형식으로 추가해줘야합\n니다. 따라서 key와 value를 입력받고 각 <code class=\"language-text\">json</code> 파일에 추가해주면 많이 편해질 겁니다.</p>\n<p>아래는 구현한 웹사이트에서 각 팀별로 번역 작업을 하는 1차 결과입니다.</p>\n<h3 id=\"teama\" style=\"position:relative;\"><a href=\"#teama\" aria-label=\"teama permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamA</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamA-web.gif\" alt=\"translate-teamA-web-example\"></p>\n<ul>\n<li>TeamA (<code class=\"language-text\">locize</code> 를 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamA를 선택합니다.</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다. (특수문자로만 이루어져서는 안 됩니다.)</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>복사하기 버튼을 눌러 클립보드에 복사하고 <code class=\"language-text\">locize</code> 에 붙여넣습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"teamb\" style=\"position:relative;\"><a href=\"#teamb\" aria-label=\"teamb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamB</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamB-web.gif\" alt=\"translate-teamB-web-example\"></p>\n<ul>\n<li>TeamB (<code class=\"language-text\">json</code> 파일을 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamB를 선택합니다.</li>\n<li>언어 파일이 위치한 폴더의 경로를 입력하지 않았었다면, 파일의 경로를 입력합니다.\n<ul>\n<li>입력한 경로에 <code class=\"language-text\">language.json</code> 파일이 존재하지 않는다면 저장되지 않습니다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">json</code> 파일에 추가할 텍스트를 입력합니다.\n<ul>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다.</li>\n</ul>\n</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>‘각 언어별 json 파일에 저장’ 버튼을 눌러 각 <code class=\"language-text\">json</code> 파일에 추가합니다.</li>\n</ul>\n</li>\n</ul>\n<p>일단 생각한대로 구현은 했습니다. <code class=\"language-text\">locize</code> 를 사용하는 TeamA의 경우에는 번역 작업이 편해진 것 같습니\n다. 하지만 <code class=\"language-text\">json</code> 파일을 사용하는 TeamB의 경우에는 번역 작업을 하려면 여전히 번거롭다고 느껴졌습니다\n. 번역 작업을 편하게 하기 위해 웹 사이트 주소를 알아야 하는 것은 물론, 팀을 선택하고 언어 파일 경로\n를 설정해야 했죠.</p>\n<h2 id=\"차라리-노드-스크립트로-만들어-더욱-편하게-사용하자\" style=\"position:relative;\"><a href=\"#%EC%B0%A8%EB%9D%BC%EB%A6%AC-%EB%85%B8%EB%93%9C-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%8D%94%EC%9A%B1-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90\" aria-label=\"차라리 노드 스크립트로 만들어 더욱 편하게 사용하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>차라리 노드 스크립트로 만들어 더욱 편하게 사용하자</h2>\n<p>언어 파일 경로를 설정하는 과정조차 없애고 싶었습니다. 그래서 TeamB의 경우에는 이 웹 사이트가 아닌,\n프로젝트에서 node script를 실행해 번역 작업을 더 간편하게 할 수 있게 방식을 변경하기로 결정했습니다.\n이렇게 하면 웹사이트의 주소를 알지 않아도 되고 필요한 기능만 명확히 수행할 것 같았습니다.</p>\n<p>간단하게 스크립트를 만들어 보겠습니다.</p>\n<p>먼저, 사용자에게서 터미널에서 key와 value를 입력받아야 합니다. 이 정보들을 입력받기 위해\n<a href=\"https://www.npmjs.com/package/inquirer\">inquirer.js</a> 라이브러리를 사용하겠습니다. <code class=\"language-text\">inquirer.js</code> 는\n터미널에서 다양한 UI로 사용자의 입력을 받거나, 출력해주는 라이브러리입니다. 아래 사진을 보시면 어떤\n느낌인지 감이 잡히실 겁니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 692px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAn0lEQVR42jWOwQqEIBCGe45tOwhmbLaupGmaQXSopMtSSNHB93+MHYL9DsPwzz/zT9J1XVmW1lrOuRCibVuttTFGKQUKNJRSxhiIwzDAtO/7PM9RxYlyyXVd4AshjOO4LMtxHNu2Qd333Tl3nue6rrAzTZP3/nsTY0SvN/6IpGkaQkhd19UNHBJ/4CMpJWRCFMYYIQSGoijmec6eaZY+fs09J+uMubsAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"inquirer-example\"\n        title=\"\"\n        src=\"/static/1683074758696.817115529904/91e7e/inquirer-example.png\"\n        srcset=\"/static/1683074758696.817115529904/63868/inquirer-example.png 250w,\n/static/1683074758696.817115529904/0b533/inquirer-example.png 500w,\n/static/1683074758696.817115529904/91e7e/inquirer-example.png 692w\"\n        sizes=\"(max-width: 692px) 100vw, 692px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"흐름-정리하기\" style=\"position:relative;\"><a href=\"#%ED%9D%90%EB%A6%84-%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"흐름 정리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>흐름 정리하기</h3>\n<ol>\n<li>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로를 정의합니다.</li>\n<li>사용자로부터 <code class=\"language-text\">key</code>를 입력받습니다.\n<ol>\n<li>값을 입력하지 않거나, 이미 존재하는 <code class=\"language-text\">key</code> 라면 오류 메시지를 반환하고 다시 입력 받습니다.</li>\n<li><code class=\"language-text\">camelCase</code> 가 아니라면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>사용자로부터 <code class=\"language-text\">value</code> 를 입력받습니다.\n<ol>\n<li>값을 입력하지 않으면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가합니다.\n<ol>\n<li>입력받은 <code class=\"language-text\">value</code>를 4개 국어로 번역합니다.</li>\n<li>정의해두었던 <code class=\"language-text\">json</code>파일이 존재하는 폴더 경로를 이용해, 해당 폴더의 하위에 존재하는 모든 언어파\n일들을 가져옵니다. 없다면 오류 메시지를 반환합니다.</li>\n<li>찾은 각 <code class=\"language-text\">json</code> 파일의 문자열을 분석하고, JS 객체로 변환합니다.</li>\n<li>변환한 JS 객체에 전달 받은 <code class=\"language-text\">key</code> 와 번역된 <code class=\"language-text\">value</code>를 추가합니다.</li>\n<li>변경된 JS 객체를 다시 JSON 문자열로 변환해 각 언어 파일에 작성합니다.</li>\n</ol>\n</li>\n<li>결과를 터미널에 출력합니다.</li>\n</ol>\n<p>정리하고 보니 빠르게 스크립트를 구현할 수 있을 것 같네요. 바로 코드로 구현해보겠습니다.</p>\n<h3 id=\"번역할-국가별-언어-코드-및-언어별-json-파일이-존재하는-폴더-경로-정의하기\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%97%AD%ED%95%A0-%EA%B5%AD%EA%B0%80%EB%B3%84-%EC%96%B8%EC%96%B4-%EC%BD%94%EB%93%9C-%EB%B0%8F-%EC%96%B8%EC%96%B4%EB%B3%84-json-%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%A1%B4%EC%9E%AC%ED%95%98%EB%8A%94-%ED%8F%B4%EB%8D%94-%EA%B2%BD%EB%A1%9C-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0\" aria-label=\"번역할 국가별 언어 코드 및 언어별 json 파일이 존재하는 폴더 경로 정의하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로 정의하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 정의한 언어 코드를 이용해 번역을 진행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGE_CODE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ko'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 언어별 json 파일이 존재하는 폴더 경로를 정의합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGES_DIR_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span><span class=\"token function\">cwd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'libs'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'locales'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'languages'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"사용자로부터-key와-value를-입력받기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90%EB%A1%9C%EB%B6%80%ED%84%B0-key%EC%99%80-value%EB%A5%BC-%EC%9E%85%EB%A0%A5%EB%B0%9B%EA%B8%B0\" aria-label=\"사용자로부터 key와 value를 입력받기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용자로부터 <code class=\"language-text\">key</code>와 <code class=\"language-text\">value</code>를 입력받기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 각 json 파일에 전달된 키가 존재하는지 검증합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">keyExistsInLangFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> convertedLanguageCode <span class=\"token operator\">=</span> <span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n          chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">The key '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">' already exists in '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json'.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNil</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isEmptyString</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">isNil</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> value<span class=\"token operator\">?.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 사용자에게 key와 value 값을 입력하라는 메시지를 표시합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">promptTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> key <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token function\">keyExistsInLangFiles</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> inputKey <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'key'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation key in camelCase:'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">validate</span><span class=\"token operator\">:</span> validateCamelCase<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    key <span class=\"token operator\">=</span> inputKey<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation value:'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">validate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token string\">'value cannot be empty. Please enter again:'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">inquirer</code> 라이브러리를 활용해 입력받도록 합니다. <code class=\"language-text\">type</code> 속성은 프롬프트의 유형을 정의합니다. input\ntype은 사용자에게서 문자열을 입력 받습니다. 그리고 <code class=\"language-text\">validate</code> 속성을 통해 사용자의 input 값에 제약을\n걸어줍니다.</p>\n<h3 id=\"각-언어-파일에-key-value를-추가하기\" style=\"position:relative;\"><a href=\"#%EA%B0%81-%EC%96%B8%EC%96%B4-%ED%8C%8C%EC%9D%BC%EC%97%90-key-value%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"각 언어 파일에 key value를 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 입력 받은 값을 번역하고 번역된 값을 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translateText</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token punctuation\">,</span> targetLanguage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://translation.googleapis.com/language/translate/v2'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">q</span><span class=\"token operator\">:</span> text<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> targetLanguage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token constant\">GOOGLE_TRANSLATE_API_KEY</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>translations<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>translatedText<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 전달받은 언어 코드에 해당하는 json 언어 파일을 찾아서 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">findLanguageFile</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">languageCode</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// `recursive-readdir` 라이브러리에서 제공하는 함수입니다.</span>\n  <span class=\"token comment\">// 해당 하위 디렉터리의 모든 파일을 재귀적으로 나열합니다.</span>\n  <span class=\"token keyword\">const</span> files <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">recursive</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> files<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> path<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>languageFile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Language file for </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> not found.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> languageFile<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 각 언어 파일에 키와 번역 값을 추가합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> translatedValue <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">translateText</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">findLanguageFile</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    translations<span class=\"token punctuation\">[</span>languageCode<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> translations<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"전체-번역-프로세스-실행하기\" style=\"position:relative;\"><a href=\"#%EC%A0%84%EC%B2%B4-%EB%B2%88%EC%97%AD-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"전체 번역 프로세스 실행하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>전체 번역 프로세스 실행하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 전체 번역 프로세스를 실행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promptTranslation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">addTranslation</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token string\">'번역 결과: '</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>translations<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Translation added to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">translate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 구현한 스크립트를 실행해보겠습니다. 아래는 스크립트 실행 결과입니다.</p>\n<p><img src=\"/images/new-team-productivity/translate-teamB-script.gif\" alt=\"translate-teamB-script.gif\"></p>\n<ul>\n<li><code class=\"language-text\">npm run translate</code> 명령어를 실행합니다.</li>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역을 원하는 텍스트를 입력 후, 엔터를 누릅니다.</li>\n<li>번역한 결과가 각 <code class=\"language-text\">json</code> 파일의 마지막 라인에 자동으로 추가되며 포맷팅을 실행합니다.</li>\n</ul>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByUlEQVR42o2QS2/TQBSF/S9oXn6MXzPjedjjcZzEebpOXwlQIYpKu0KlbGGP2FRq1/0ViBViwZIfx3WMsmjTCuno6uja38ycY8hiH4lskpHjIlTM75iuaXs9q56NwG+13TTT8KkMIpnEMlNScIGJIJEICcO0NiSSIeG1p7DkW1EWBzgyCI+FykOmLC9CIfMI94jwMEc+QR52fQrTC6gfUnez2SxrY6PACLgKhG7ZwQvT37N8MC0nrNV1Wh1rq3bXfqBOzzFkolM9EFKptI8JMy0E6ploE89vQnZNBL8+loEpX+wfTOfVbLEsJgvdH8oki1UfZiQUGC5T6GY3HPFE6RwqaQRNYMoI5SCXyEikAWY7yRoWsa4OjvqDQumBjHWssjTVSZzAkfAJioHAT8LQZJaPgIHwEY/hZsokvDYfjplIoFJ4juX4TUMP4WFRLg9fzxbHSToejMp5eTKZHToubnct6KnRkzefrM/enV9dXX/+/uPn1293q1cX7y+vQyJbHfMZ7B98tHr75uzDx09ffv3+c3N7//L08vwCYPFf8HQ6X69Pq+U6y+ejcVVWK4iAPALPfp6sYa3KUCg3gJA2FLvXNkE763kM/wUP7og3R7wHKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"translate-slack-reaction.png\"\n        title=\"\"\n        src=\"/static/1692836624195.603146242730/00d43/translate-slack-reaction.png\"\n        srcset=\"/static/1692836624195.603146242730/63868/translate-slack-reaction.png 250w,\n/static/1692836624195.603146242730/0b533/translate-slack-reaction.png 500w,\n/static/1692836624195.603146242730/00d43/translate-slack-reaction.png 1000w,\n/static/1692836624195.603146242730/aa440/translate-slack-reaction.png 1500w,\n/static/1692836624195.603146242730/e8950/translate-slack-reaction.png 2000w,\n/static/1692836624195.603146242730/922e6/translate-slack-reaction.png 2140w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>작업 이후 좋은 반응과 함께 번거롭던 번역 작업이 편해졌다는 의견이 많았습니다. 여러 고민을 거쳐 만든\n보람이 있었죠. 이렇게 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있었습니다. 이제 번역 업\n무에서 발생하는 시간을 크게 줄일 수 있게 되었습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://nodejs.org/api/fs.html\">https://nodejs.org/api/fs.html</a></li>\n<li><a href=\"https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/\">https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/</a></li>\n</ul>",
      "%ED%9D%90%EB%A6%84-%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0#흐름 정리하기": "<h2 id=\"새로운-팀에-합류한-이후-했던-것-중-가장-비효율적인-업무\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%8C%80%EC%97%90-%ED%95%A9%EB%A5%98%ED%95%9C-%EC%9D%B4%ED%9B%84-%ED%96%88%EB%8D%98-%EA%B2%83-%EC%A4%91-%EA%B0%80%EC%9E%A5-%EB%B9%84%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%97%85%EB%AC%B4\" aria-label=\"새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무</h2>\n<h3 id=\"너무나도-번거로운-번역-작업\" style=\"position:relative;\"><a href=\"#%EB%84%88%EB%AC%B4%EB%82%98%EB%8F%84-%EB%B2%88%EA%B1%B0%EB%A1%9C%EC%9A%B4-%EB%B2%88%EC%97%AD-%EC%9E%91%EC%97%85\" aria-label=\"너무나도 번거로운 번역 작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>너무나도 번거로운 번역 작업</h3>\n<p>새로 합류한 팀의 프로젝트에서는 총 4개 국어(한국어, 영어, 일본어, 베트남어)를 지원해야 했습니다.\n<code class=\"language-text\">ko.lang.json</code> 또는 <code class=\"language-text\">en.lang.json</code> 이런식으로 이름을 짖고 <code class=\"language-text\">json</code> 파일 형식으로 관리하고 있었습니다.</p>\n<p>따로 번역 작업을 해주시는 분은 없고, 그냥 구글 번역기를 통해 얻은 값을 각 <code class=\"language-text\">json</code> 파일에 추가해서 다\n국어를 지원하고 있었죠.</p>\n<p>로직을 작성해나가며 하나하나 번역기를 돌리고 각 <code class=\"language-text\">json</code> 파일에 추가하는 작업은 보통 귀찮은 작업이 아\n니었습니다.</p>\n<h3 id=\"손수-작업의-한계\" style=\"position:relative;\"><a href=\"#%EC%86%90%EC%88%98-%EC%9E%91%EC%97%85%EC%9D%98-%ED%95%9C%EA%B3%84\" aria-label=\"손수 작업의 한계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>손수 작업의 한계</h3>\n<p>일일이 번역할 문구를 복사해 4개 국어로 번역하고, 번역된 문구를 다시 각각 복사해 4개의 <code class=\"language-text\">json</code> 파일에\n추가하는 과정이 필요합니다. 또한 여러 개발자가 작업하다보니 <code class=\"language-text\">key</code> 네이밍 문법도 정리가 안 되어 있었\n습니다. 어떤 것은 <code class=\"language-text\">camelCase</code>, 또 어떤 것은 <code class=\"language-text\">snake_case</code>로 되어 있었습니다. 워낙 바쁘다보면\n<code class=\"language-text\">en.lang.json</code> 파일에 한국어를 추가하는 실수를 범할 수도 있겠죠. 이 과정에서 많은 시간이 소모되고 실\n수를 하지 않는다는 보장이 없죠.</p>\n<p>이런 새로운 기능을 작업할때마다 반복되다 보니 어느 세월에 문구를 복사해서 변역하고 또 번역한 값을 복\n사해서 각 언어 파일에 키값과 함께 추가하고 로직은 언제 다 구현하지? 라는 마음이 들었습니다. 이 과정\n을 개선하기로 마음 먹었죠.</p>\n<h3 id=\"어차피-번역기를-사용해서-할거라면-스크립트를-작성해서-개선할-수-있지-않을까\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EC%B0%A8%ED%94%BC-%EB%B2%88%EC%97%AD%EA%B8%B0%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%ED%95%A0%EA%B1%B0%EB%9D%BC%EB%A9%B4-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%84%9C-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%A7%80-%EC%95%8A%EC%9D%84%EA%B9%8C\" aria-label=\"어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까?</h3>\n<p>구글 번역기를 사용하므로 google에서 제공하는 번역 API를 이용해 한 번에 4개의 언어로 번역해주고 파일\n에 자동으로 추가해주는 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있을 것 같았습니다.</p>\n<p>개발자가 번역할 문구와 키값을 입력하면 자동으로 4개 국어로 번역해주고 매칭되는 언어별 <code class=\"language-text\">json</code> 파일의\n마지막 줄에 추가해주는 방법이 좋을 것 같습니다. 또한 key 값도 입력받을 때 정해둔 네이밍 문법에 일치\n해야 하기 때문에 통일되는 이점도 동시에 따라 왔죠. 여기서 네이밍 문법은 애초에 정해져 있지 않았기 때\n문에 팀원분들께 미팅 요청을 드렸고 <code class=\"language-text\">camelCase</code>로 통일하기로 결정이 되었죠. 그리고 번역 값이 100프로\n정확할 순 없으니 번역 결과값을 받아 수정할 수 있도록 하면 더욱 좋겠죠.</p>\n<p>이제 생각한 것을 편하게 사용할 수 있도록 구현하면 되겠습니다.</p>\n<h2 id=\"모든-팀들이-편하게-사용하도록-웹-사이트로-만들자\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%A0-%ED%8C%80%EB%93%A4%EC%9D%B4-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8F%84%EB%A1%9D-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%9E%90\" aria-label=\"모든 팀들이 편하게 사용하도록 웹 사이트로 만들자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모든 팀들이 편하게 사용하도록 웹 사이트로 만들자</h2>\n<p>‘위 스크립트를 만들어도 어떻게 해야 팀원들이 쉽게 사용할 수 있을까?‘라는 고민이 들었습니다. 익숙한웹\n사이트에서 최대한 직관적이고 간단하게 구현해 각 팀별로 원하는 목적을 쉽게 달성할 수 있도록 구현하고\n싶었습니다. 다른 팀에서도 <code class=\"language-text\">json</code> 파일을 사용하진 않지만 구글 번역기를 이용해서 4개 국어를 지원하고\n있었기 때문에 이왕 만드는 거 다른 팀원분에게도 도움이 되고 싶었기 때문에 첫 진입 시, 팀을 선택하고\n각 팀별로 다른 화면을 보여주도록 플로우를 그렸죠.</p>\n<p>예로 A라는 팀에서는 <a href=\"https://locize.com/\">locize</a>라는 번역 관리 시스템을 사용해서 관리 중이었습니다.\nlocize를 사용하면 번역할 문구를 언어별로 locize에 붙여넣으면 됩니다. 따라서 <code class=\"language-text\">json</code> 파일을 사용하지않\n으므로 4개 국어로 번역하고 각 번역 값을 확인 후, 수정하고 복사할 수 있도록 하면 좋겠죠.</p>\n<p>제가 속해 있는 B 팀의 경우에는 번역한 값들을 각 언어별 <code class=\"language-text\">json</code> 파일에 key-value 형식으로 추가해줘야합\n니다. 따라서 key와 value를 입력받고 각 <code class=\"language-text\">json</code> 파일에 추가해주면 많이 편해질 겁니다.</p>\n<p>아래는 구현한 웹사이트에서 각 팀별로 번역 작업을 하는 1차 결과입니다.</p>\n<h3 id=\"teama\" style=\"position:relative;\"><a href=\"#teama\" aria-label=\"teama permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamA</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamA-web.gif\" alt=\"translate-teamA-web-example\"></p>\n<ul>\n<li>TeamA (<code class=\"language-text\">locize</code> 를 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamA를 선택합니다.</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다. (특수문자로만 이루어져서는 안 됩니다.)</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>복사하기 버튼을 눌러 클립보드에 복사하고 <code class=\"language-text\">locize</code> 에 붙여넣습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"teamb\" style=\"position:relative;\"><a href=\"#teamb\" aria-label=\"teamb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamB</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamB-web.gif\" alt=\"translate-teamB-web-example\"></p>\n<ul>\n<li>TeamB (<code class=\"language-text\">json</code> 파일을 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamB를 선택합니다.</li>\n<li>언어 파일이 위치한 폴더의 경로를 입력하지 않았었다면, 파일의 경로를 입력합니다.\n<ul>\n<li>입력한 경로에 <code class=\"language-text\">language.json</code> 파일이 존재하지 않는다면 저장되지 않습니다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">json</code> 파일에 추가할 텍스트를 입력합니다.\n<ul>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다.</li>\n</ul>\n</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>‘각 언어별 json 파일에 저장’ 버튼을 눌러 각 <code class=\"language-text\">json</code> 파일에 추가합니다.</li>\n</ul>\n</li>\n</ul>\n<p>일단 생각한대로 구현은 했습니다. <code class=\"language-text\">locize</code> 를 사용하는 TeamA의 경우에는 번역 작업이 편해진 것 같습니\n다. 하지만 <code class=\"language-text\">json</code> 파일을 사용하는 TeamB의 경우에는 번역 작업을 하려면 여전히 번거롭다고 느껴졌습니다\n. 번역 작업을 편하게 하기 위해 웹 사이트 주소를 알아야 하는 것은 물론, 팀을 선택하고 언어 파일 경로\n를 설정해야 했죠.</p>\n<h2 id=\"차라리-노드-스크립트로-만들어-더욱-편하게-사용하자\" style=\"position:relative;\"><a href=\"#%EC%B0%A8%EB%9D%BC%EB%A6%AC-%EB%85%B8%EB%93%9C-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%8D%94%EC%9A%B1-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90\" aria-label=\"차라리 노드 스크립트로 만들어 더욱 편하게 사용하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>차라리 노드 스크립트로 만들어 더욱 편하게 사용하자</h2>\n<p>언어 파일 경로를 설정하는 과정조차 없애고 싶었습니다. 그래서 TeamB의 경우에는 이 웹 사이트가 아닌,\n프로젝트에서 node script를 실행해 번역 작업을 더 간편하게 할 수 있게 방식을 변경하기로 결정했습니다.\n이렇게 하면 웹사이트의 주소를 알지 않아도 되고 필요한 기능만 명확히 수행할 것 같았습니다.</p>\n<p>간단하게 스크립트를 만들어 보겠습니다.</p>\n<p>먼저, 사용자에게서 터미널에서 key와 value를 입력받아야 합니다. 이 정보들을 입력받기 위해\n<a href=\"https://www.npmjs.com/package/inquirer\">inquirer.js</a> 라이브러리를 사용하겠습니다. <code class=\"language-text\">inquirer.js</code> 는\n터미널에서 다양한 UI로 사용자의 입력을 받거나, 출력해주는 라이브러리입니다. 아래 사진을 보시면 어떤\n느낌인지 감이 잡히실 겁니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 692px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAn0lEQVR42jWOwQqEIBCGe45tOwhmbLaupGmaQXSopMtSSNHB93+MHYL9DsPwzz/zT9J1XVmW1lrOuRCibVuttTFGKQUKNJRSxhiIwzDAtO/7PM9RxYlyyXVd4AshjOO4LMtxHNu2Qd333Tl3nue6rrAzTZP3/nsTY0SvN/6IpGkaQkhd19UNHBJ/4CMpJWRCFMYYIQSGoijmec6eaZY+fs09J+uMubsAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"inquirer-example\"\n        title=\"\"\n        src=\"/static/1683074758696.817115529904/91e7e/inquirer-example.png\"\n        srcset=\"/static/1683074758696.817115529904/63868/inquirer-example.png 250w,\n/static/1683074758696.817115529904/0b533/inquirer-example.png 500w,\n/static/1683074758696.817115529904/91e7e/inquirer-example.png 692w\"\n        sizes=\"(max-width: 692px) 100vw, 692px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"흐름-정리하기\" style=\"position:relative;\"><a href=\"#%ED%9D%90%EB%A6%84-%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"흐름 정리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>흐름 정리하기</h3>\n<ol>\n<li>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로를 정의합니다.</li>\n<li>사용자로부터 <code class=\"language-text\">key</code>를 입력받습니다.\n<ol>\n<li>값을 입력하지 않거나, 이미 존재하는 <code class=\"language-text\">key</code> 라면 오류 메시지를 반환하고 다시 입력 받습니다.</li>\n<li><code class=\"language-text\">camelCase</code> 가 아니라면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>사용자로부터 <code class=\"language-text\">value</code> 를 입력받습니다.\n<ol>\n<li>값을 입력하지 않으면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가합니다.\n<ol>\n<li>입력받은 <code class=\"language-text\">value</code>를 4개 국어로 번역합니다.</li>\n<li>정의해두었던 <code class=\"language-text\">json</code>파일이 존재하는 폴더 경로를 이용해, 해당 폴더의 하위에 존재하는 모든 언어파\n일들을 가져옵니다. 없다면 오류 메시지를 반환합니다.</li>\n<li>찾은 각 <code class=\"language-text\">json</code> 파일의 문자열을 분석하고, JS 객체로 변환합니다.</li>\n<li>변환한 JS 객체에 전달 받은 <code class=\"language-text\">key</code> 와 번역된 <code class=\"language-text\">value</code>를 추가합니다.</li>\n<li>변경된 JS 객체를 다시 JSON 문자열로 변환해 각 언어 파일에 작성합니다.</li>\n</ol>\n</li>\n<li>결과를 터미널에 출력합니다.</li>\n</ol>\n<p>정리하고 보니 빠르게 스크립트를 구현할 수 있을 것 같네요. 바로 코드로 구현해보겠습니다.</p>\n<h3 id=\"번역할-국가별-언어-코드-및-언어별-json-파일이-존재하는-폴더-경로-정의하기\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%97%AD%ED%95%A0-%EA%B5%AD%EA%B0%80%EB%B3%84-%EC%96%B8%EC%96%B4-%EC%BD%94%EB%93%9C-%EB%B0%8F-%EC%96%B8%EC%96%B4%EB%B3%84-json-%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%A1%B4%EC%9E%AC%ED%95%98%EB%8A%94-%ED%8F%B4%EB%8D%94-%EA%B2%BD%EB%A1%9C-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0\" aria-label=\"번역할 국가별 언어 코드 및 언어별 json 파일이 존재하는 폴더 경로 정의하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로 정의하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 정의한 언어 코드를 이용해 번역을 진행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGE_CODE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ko'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 언어별 json 파일이 존재하는 폴더 경로를 정의합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGES_DIR_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span><span class=\"token function\">cwd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'libs'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'locales'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'languages'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"사용자로부터-key와-value를-입력받기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90%EB%A1%9C%EB%B6%80%ED%84%B0-key%EC%99%80-value%EB%A5%BC-%EC%9E%85%EB%A0%A5%EB%B0%9B%EA%B8%B0\" aria-label=\"사용자로부터 key와 value를 입력받기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용자로부터 <code class=\"language-text\">key</code>와 <code class=\"language-text\">value</code>를 입력받기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 각 json 파일에 전달된 키가 존재하는지 검증합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">keyExistsInLangFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> convertedLanguageCode <span class=\"token operator\">=</span> <span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n          chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">The key '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">' already exists in '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json'.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNil</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isEmptyString</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">isNil</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> value<span class=\"token operator\">?.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 사용자에게 key와 value 값을 입력하라는 메시지를 표시합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">promptTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> key <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token function\">keyExistsInLangFiles</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> inputKey <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'key'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation key in camelCase:'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">validate</span><span class=\"token operator\">:</span> validateCamelCase<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    key <span class=\"token operator\">=</span> inputKey<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation value:'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">validate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token string\">'value cannot be empty. Please enter again:'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">inquirer</code> 라이브러리를 활용해 입력받도록 합니다. <code class=\"language-text\">type</code> 속성은 프롬프트의 유형을 정의합니다. input\ntype은 사용자에게서 문자열을 입력 받습니다. 그리고 <code class=\"language-text\">validate</code> 속성을 통해 사용자의 input 값에 제약을\n걸어줍니다.</p>\n<h3 id=\"각-언어-파일에-key-value를-추가하기\" style=\"position:relative;\"><a href=\"#%EA%B0%81-%EC%96%B8%EC%96%B4-%ED%8C%8C%EC%9D%BC%EC%97%90-key-value%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"각 언어 파일에 key value를 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 입력 받은 값을 번역하고 번역된 값을 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translateText</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token punctuation\">,</span> targetLanguage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://translation.googleapis.com/language/translate/v2'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">q</span><span class=\"token operator\">:</span> text<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> targetLanguage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token constant\">GOOGLE_TRANSLATE_API_KEY</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>translations<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>translatedText<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 전달받은 언어 코드에 해당하는 json 언어 파일을 찾아서 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">findLanguageFile</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">languageCode</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// `recursive-readdir` 라이브러리에서 제공하는 함수입니다.</span>\n  <span class=\"token comment\">// 해당 하위 디렉터리의 모든 파일을 재귀적으로 나열합니다.</span>\n  <span class=\"token keyword\">const</span> files <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">recursive</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> files<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> path<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>languageFile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Language file for </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> not found.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> languageFile<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 각 언어 파일에 키와 번역 값을 추가합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> translatedValue <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">translateText</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">findLanguageFile</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    translations<span class=\"token punctuation\">[</span>languageCode<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> translations<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"전체-번역-프로세스-실행하기\" style=\"position:relative;\"><a href=\"#%EC%A0%84%EC%B2%B4-%EB%B2%88%EC%97%AD-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"전체 번역 프로세스 실행하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>전체 번역 프로세스 실행하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 전체 번역 프로세스를 실행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promptTranslation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">addTranslation</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token string\">'번역 결과: '</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>translations<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Translation added to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">translate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 구현한 스크립트를 실행해보겠습니다. 아래는 스크립트 실행 결과입니다.</p>\n<p><img src=\"/images/new-team-productivity/translate-teamB-script.gif\" alt=\"translate-teamB-script.gif\"></p>\n<ul>\n<li><code class=\"language-text\">npm run translate</code> 명령어를 실행합니다.</li>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역을 원하는 텍스트를 입력 후, 엔터를 누릅니다.</li>\n<li>번역한 결과가 각 <code class=\"language-text\">json</code> 파일의 마지막 라인에 자동으로 추가되며 포맷팅을 실행합니다.</li>\n</ul>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByUlEQVR42o2QS2/TQBSF/S9oXn6MXzPjedjjcZzEebpOXwlQIYpKu0KlbGGP2FRq1/0ViBViwZIfx3WMsmjTCuno6uja38ycY8hiH4lskpHjIlTM75iuaXs9q56NwG+13TTT8KkMIpnEMlNScIGJIJEICcO0NiSSIeG1p7DkW1EWBzgyCI+FykOmLC9CIfMI94jwMEc+QR52fQrTC6gfUnez2SxrY6PACLgKhG7ZwQvT37N8MC0nrNV1Wh1rq3bXfqBOzzFkolM9EFKptI8JMy0E6ploE89vQnZNBL8+loEpX+wfTOfVbLEsJgvdH8oki1UfZiQUGC5T6GY3HPFE6RwqaQRNYMoI5SCXyEikAWY7yRoWsa4OjvqDQumBjHWssjTVSZzAkfAJioHAT8LQZJaPgIHwEY/hZsokvDYfjplIoFJ4juX4TUMP4WFRLg9fzxbHSToejMp5eTKZHToubnct6KnRkzefrM/enV9dXX/+/uPn1293q1cX7y+vQyJbHfMZ7B98tHr75uzDx09ffv3+c3N7//L08vwCYPFf8HQ6X69Pq+U6y+ejcVVWK4iAPALPfp6sYa3KUCg3gJA2FLvXNkE763kM/wUP7og3R7wHKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"translate-slack-reaction.png\"\n        title=\"\"\n        src=\"/static/1692836624195.603146242730/00d43/translate-slack-reaction.png\"\n        srcset=\"/static/1692836624195.603146242730/63868/translate-slack-reaction.png 250w,\n/static/1692836624195.603146242730/0b533/translate-slack-reaction.png 500w,\n/static/1692836624195.603146242730/00d43/translate-slack-reaction.png 1000w,\n/static/1692836624195.603146242730/aa440/translate-slack-reaction.png 1500w,\n/static/1692836624195.603146242730/e8950/translate-slack-reaction.png 2000w,\n/static/1692836624195.603146242730/922e6/translate-slack-reaction.png 2140w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>작업 이후 좋은 반응과 함께 번거롭던 번역 작업이 편해졌다는 의견이 많았습니다. 여러 고민을 거쳐 만든\n보람이 있었죠. 이렇게 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있었습니다. 이제 번역 업\n무에서 발생하는 시간을 크게 줄일 수 있게 되었습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://nodejs.org/api/fs.html\">https://nodejs.org/api/fs.html</a></li>\n<li><a href=\"https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/\">https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/</a></li>\n</ul>",
      "%EB%B2%88%EC%97%AD%ED%95%A0-%EA%B5%AD%EA%B0%80%EB%B3%84-%EC%96%B8%EC%96%B4-%EC%BD%94%EB%93%9C-%EB%B0%8F-%EC%96%B8%EC%96%B4%EB%B3%84-json-%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%A1%B4%EC%9E%AC%ED%95%98%EB%8A%94-%ED%8F%B4%EB%8D%94-%EA%B2%BD%EB%A1%9C-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0#번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로 정의하기": "<h2 id=\"새로운-팀에-합류한-이후-했던-것-중-가장-비효율적인-업무\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%8C%80%EC%97%90-%ED%95%A9%EB%A5%98%ED%95%9C-%EC%9D%B4%ED%9B%84-%ED%96%88%EB%8D%98-%EA%B2%83-%EC%A4%91-%EA%B0%80%EC%9E%A5-%EB%B9%84%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%97%85%EB%AC%B4\" aria-label=\"새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무</h2>\n<h3 id=\"너무나도-번거로운-번역-작업\" style=\"position:relative;\"><a href=\"#%EB%84%88%EB%AC%B4%EB%82%98%EB%8F%84-%EB%B2%88%EA%B1%B0%EB%A1%9C%EC%9A%B4-%EB%B2%88%EC%97%AD-%EC%9E%91%EC%97%85\" aria-label=\"너무나도 번거로운 번역 작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>너무나도 번거로운 번역 작업</h3>\n<p>새로 합류한 팀의 프로젝트에서는 총 4개 국어(한국어, 영어, 일본어, 베트남어)를 지원해야 했습니다.\n<code class=\"language-text\">ko.lang.json</code> 또는 <code class=\"language-text\">en.lang.json</code> 이런식으로 이름을 짖고 <code class=\"language-text\">json</code> 파일 형식으로 관리하고 있었습니다.</p>\n<p>따로 번역 작업을 해주시는 분은 없고, 그냥 구글 번역기를 통해 얻은 값을 각 <code class=\"language-text\">json</code> 파일에 추가해서 다\n국어를 지원하고 있었죠.</p>\n<p>로직을 작성해나가며 하나하나 번역기를 돌리고 각 <code class=\"language-text\">json</code> 파일에 추가하는 작업은 보통 귀찮은 작업이 아\n니었습니다.</p>\n<h3 id=\"손수-작업의-한계\" style=\"position:relative;\"><a href=\"#%EC%86%90%EC%88%98-%EC%9E%91%EC%97%85%EC%9D%98-%ED%95%9C%EA%B3%84\" aria-label=\"손수 작업의 한계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>손수 작업의 한계</h3>\n<p>일일이 번역할 문구를 복사해 4개 국어로 번역하고, 번역된 문구를 다시 각각 복사해 4개의 <code class=\"language-text\">json</code> 파일에\n추가하는 과정이 필요합니다. 또한 여러 개발자가 작업하다보니 <code class=\"language-text\">key</code> 네이밍 문법도 정리가 안 되어 있었\n습니다. 어떤 것은 <code class=\"language-text\">camelCase</code>, 또 어떤 것은 <code class=\"language-text\">snake_case</code>로 되어 있었습니다. 워낙 바쁘다보면\n<code class=\"language-text\">en.lang.json</code> 파일에 한국어를 추가하는 실수를 범할 수도 있겠죠. 이 과정에서 많은 시간이 소모되고 실\n수를 하지 않는다는 보장이 없죠.</p>\n<p>이런 새로운 기능을 작업할때마다 반복되다 보니 어느 세월에 문구를 복사해서 변역하고 또 번역한 값을 복\n사해서 각 언어 파일에 키값과 함께 추가하고 로직은 언제 다 구현하지? 라는 마음이 들었습니다. 이 과정\n을 개선하기로 마음 먹었죠.</p>\n<h3 id=\"어차피-번역기를-사용해서-할거라면-스크립트를-작성해서-개선할-수-있지-않을까\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EC%B0%A8%ED%94%BC-%EB%B2%88%EC%97%AD%EA%B8%B0%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%ED%95%A0%EA%B1%B0%EB%9D%BC%EB%A9%B4-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%84%9C-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%A7%80-%EC%95%8A%EC%9D%84%EA%B9%8C\" aria-label=\"어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까?</h3>\n<p>구글 번역기를 사용하므로 google에서 제공하는 번역 API를 이용해 한 번에 4개의 언어로 번역해주고 파일\n에 자동으로 추가해주는 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있을 것 같았습니다.</p>\n<p>개발자가 번역할 문구와 키값을 입력하면 자동으로 4개 국어로 번역해주고 매칭되는 언어별 <code class=\"language-text\">json</code> 파일의\n마지막 줄에 추가해주는 방법이 좋을 것 같습니다. 또한 key 값도 입력받을 때 정해둔 네이밍 문법에 일치\n해야 하기 때문에 통일되는 이점도 동시에 따라 왔죠. 여기서 네이밍 문법은 애초에 정해져 있지 않았기 때\n문에 팀원분들께 미팅 요청을 드렸고 <code class=\"language-text\">camelCase</code>로 통일하기로 결정이 되었죠. 그리고 번역 값이 100프로\n정확할 순 없으니 번역 결과값을 받아 수정할 수 있도록 하면 더욱 좋겠죠.</p>\n<p>이제 생각한 것을 편하게 사용할 수 있도록 구현하면 되겠습니다.</p>\n<h2 id=\"모든-팀들이-편하게-사용하도록-웹-사이트로-만들자\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%A0-%ED%8C%80%EB%93%A4%EC%9D%B4-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8F%84%EB%A1%9D-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%9E%90\" aria-label=\"모든 팀들이 편하게 사용하도록 웹 사이트로 만들자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모든 팀들이 편하게 사용하도록 웹 사이트로 만들자</h2>\n<p>‘위 스크립트를 만들어도 어떻게 해야 팀원들이 쉽게 사용할 수 있을까?‘라는 고민이 들었습니다. 익숙한웹\n사이트에서 최대한 직관적이고 간단하게 구현해 각 팀별로 원하는 목적을 쉽게 달성할 수 있도록 구현하고\n싶었습니다. 다른 팀에서도 <code class=\"language-text\">json</code> 파일을 사용하진 않지만 구글 번역기를 이용해서 4개 국어를 지원하고\n있었기 때문에 이왕 만드는 거 다른 팀원분에게도 도움이 되고 싶었기 때문에 첫 진입 시, 팀을 선택하고\n각 팀별로 다른 화면을 보여주도록 플로우를 그렸죠.</p>\n<p>예로 A라는 팀에서는 <a href=\"https://locize.com/\">locize</a>라는 번역 관리 시스템을 사용해서 관리 중이었습니다.\nlocize를 사용하면 번역할 문구를 언어별로 locize에 붙여넣으면 됩니다. 따라서 <code class=\"language-text\">json</code> 파일을 사용하지않\n으므로 4개 국어로 번역하고 각 번역 값을 확인 후, 수정하고 복사할 수 있도록 하면 좋겠죠.</p>\n<p>제가 속해 있는 B 팀의 경우에는 번역한 값들을 각 언어별 <code class=\"language-text\">json</code> 파일에 key-value 형식으로 추가해줘야합\n니다. 따라서 key와 value를 입력받고 각 <code class=\"language-text\">json</code> 파일에 추가해주면 많이 편해질 겁니다.</p>\n<p>아래는 구현한 웹사이트에서 각 팀별로 번역 작업을 하는 1차 결과입니다.</p>\n<h3 id=\"teama\" style=\"position:relative;\"><a href=\"#teama\" aria-label=\"teama permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamA</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamA-web.gif\" alt=\"translate-teamA-web-example\"></p>\n<ul>\n<li>TeamA (<code class=\"language-text\">locize</code> 를 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamA를 선택합니다.</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다. (특수문자로만 이루어져서는 안 됩니다.)</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>복사하기 버튼을 눌러 클립보드에 복사하고 <code class=\"language-text\">locize</code> 에 붙여넣습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"teamb\" style=\"position:relative;\"><a href=\"#teamb\" aria-label=\"teamb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamB</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamB-web.gif\" alt=\"translate-teamB-web-example\"></p>\n<ul>\n<li>TeamB (<code class=\"language-text\">json</code> 파일을 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamB를 선택합니다.</li>\n<li>언어 파일이 위치한 폴더의 경로를 입력하지 않았었다면, 파일의 경로를 입력합니다.\n<ul>\n<li>입력한 경로에 <code class=\"language-text\">language.json</code> 파일이 존재하지 않는다면 저장되지 않습니다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">json</code> 파일에 추가할 텍스트를 입력합니다.\n<ul>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다.</li>\n</ul>\n</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>‘각 언어별 json 파일에 저장’ 버튼을 눌러 각 <code class=\"language-text\">json</code> 파일에 추가합니다.</li>\n</ul>\n</li>\n</ul>\n<p>일단 생각한대로 구현은 했습니다. <code class=\"language-text\">locize</code> 를 사용하는 TeamA의 경우에는 번역 작업이 편해진 것 같습니\n다. 하지만 <code class=\"language-text\">json</code> 파일을 사용하는 TeamB의 경우에는 번역 작업을 하려면 여전히 번거롭다고 느껴졌습니다\n. 번역 작업을 편하게 하기 위해 웹 사이트 주소를 알아야 하는 것은 물론, 팀을 선택하고 언어 파일 경로\n를 설정해야 했죠.</p>\n<h2 id=\"차라리-노드-스크립트로-만들어-더욱-편하게-사용하자\" style=\"position:relative;\"><a href=\"#%EC%B0%A8%EB%9D%BC%EB%A6%AC-%EB%85%B8%EB%93%9C-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%8D%94%EC%9A%B1-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90\" aria-label=\"차라리 노드 스크립트로 만들어 더욱 편하게 사용하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>차라리 노드 스크립트로 만들어 더욱 편하게 사용하자</h2>\n<p>언어 파일 경로를 설정하는 과정조차 없애고 싶었습니다. 그래서 TeamB의 경우에는 이 웹 사이트가 아닌,\n프로젝트에서 node script를 실행해 번역 작업을 더 간편하게 할 수 있게 방식을 변경하기로 결정했습니다.\n이렇게 하면 웹사이트의 주소를 알지 않아도 되고 필요한 기능만 명확히 수행할 것 같았습니다.</p>\n<p>간단하게 스크립트를 만들어 보겠습니다.</p>\n<p>먼저, 사용자에게서 터미널에서 key와 value를 입력받아야 합니다. 이 정보들을 입력받기 위해\n<a href=\"https://www.npmjs.com/package/inquirer\">inquirer.js</a> 라이브러리를 사용하겠습니다. <code class=\"language-text\">inquirer.js</code> 는\n터미널에서 다양한 UI로 사용자의 입력을 받거나, 출력해주는 라이브러리입니다. 아래 사진을 보시면 어떤\n느낌인지 감이 잡히실 겁니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 692px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAn0lEQVR42jWOwQqEIBCGe45tOwhmbLaupGmaQXSopMtSSNHB93+MHYL9DsPwzz/zT9J1XVmW1lrOuRCibVuttTFGKQUKNJRSxhiIwzDAtO/7PM9RxYlyyXVd4AshjOO4LMtxHNu2Qd333Tl3nue6rrAzTZP3/nsTY0SvN/6IpGkaQkhd19UNHBJ/4CMpJWRCFMYYIQSGoijmec6eaZY+fs09J+uMubsAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"inquirer-example\"\n        title=\"\"\n        src=\"/static/1683074758696.817115529904/91e7e/inquirer-example.png\"\n        srcset=\"/static/1683074758696.817115529904/63868/inquirer-example.png 250w,\n/static/1683074758696.817115529904/0b533/inquirer-example.png 500w,\n/static/1683074758696.817115529904/91e7e/inquirer-example.png 692w\"\n        sizes=\"(max-width: 692px) 100vw, 692px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"흐름-정리하기\" style=\"position:relative;\"><a href=\"#%ED%9D%90%EB%A6%84-%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"흐름 정리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>흐름 정리하기</h3>\n<ol>\n<li>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로를 정의합니다.</li>\n<li>사용자로부터 <code class=\"language-text\">key</code>를 입력받습니다.\n<ol>\n<li>값을 입력하지 않거나, 이미 존재하는 <code class=\"language-text\">key</code> 라면 오류 메시지를 반환하고 다시 입력 받습니다.</li>\n<li><code class=\"language-text\">camelCase</code> 가 아니라면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>사용자로부터 <code class=\"language-text\">value</code> 를 입력받습니다.\n<ol>\n<li>값을 입력하지 않으면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가합니다.\n<ol>\n<li>입력받은 <code class=\"language-text\">value</code>를 4개 국어로 번역합니다.</li>\n<li>정의해두었던 <code class=\"language-text\">json</code>파일이 존재하는 폴더 경로를 이용해, 해당 폴더의 하위에 존재하는 모든 언어파\n일들을 가져옵니다. 없다면 오류 메시지를 반환합니다.</li>\n<li>찾은 각 <code class=\"language-text\">json</code> 파일의 문자열을 분석하고, JS 객체로 변환합니다.</li>\n<li>변환한 JS 객체에 전달 받은 <code class=\"language-text\">key</code> 와 번역된 <code class=\"language-text\">value</code>를 추가합니다.</li>\n<li>변경된 JS 객체를 다시 JSON 문자열로 변환해 각 언어 파일에 작성합니다.</li>\n</ol>\n</li>\n<li>결과를 터미널에 출력합니다.</li>\n</ol>\n<p>정리하고 보니 빠르게 스크립트를 구현할 수 있을 것 같네요. 바로 코드로 구현해보겠습니다.</p>\n<h3 id=\"번역할-국가별-언어-코드-및-언어별-json-파일이-존재하는-폴더-경로-정의하기\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%97%AD%ED%95%A0-%EA%B5%AD%EA%B0%80%EB%B3%84-%EC%96%B8%EC%96%B4-%EC%BD%94%EB%93%9C-%EB%B0%8F-%EC%96%B8%EC%96%B4%EB%B3%84-json-%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%A1%B4%EC%9E%AC%ED%95%98%EB%8A%94-%ED%8F%B4%EB%8D%94-%EA%B2%BD%EB%A1%9C-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0\" aria-label=\"번역할 국가별 언어 코드 및 언어별 json 파일이 존재하는 폴더 경로 정의하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로 정의하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 정의한 언어 코드를 이용해 번역을 진행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGE_CODE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ko'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 언어별 json 파일이 존재하는 폴더 경로를 정의합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGES_DIR_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span><span class=\"token function\">cwd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'libs'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'locales'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'languages'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"사용자로부터-key와-value를-입력받기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90%EB%A1%9C%EB%B6%80%ED%84%B0-key%EC%99%80-value%EB%A5%BC-%EC%9E%85%EB%A0%A5%EB%B0%9B%EA%B8%B0\" aria-label=\"사용자로부터 key와 value를 입력받기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용자로부터 <code class=\"language-text\">key</code>와 <code class=\"language-text\">value</code>를 입력받기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 각 json 파일에 전달된 키가 존재하는지 검증합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">keyExistsInLangFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> convertedLanguageCode <span class=\"token operator\">=</span> <span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n          chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">The key '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">' already exists in '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json'.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNil</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isEmptyString</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">isNil</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> value<span class=\"token operator\">?.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 사용자에게 key와 value 값을 입력하라는 메시지를 표시합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">promptTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> key <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token function\">keyExistsInLangFiles</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> inputKey <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'key'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation key in camelCase:'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">validate</span><span class=\"token operator\">:</span> validateCamelCase<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    key <span class=\"token operator\">=</span> inputKey<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation value:'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">validate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token string\">'value cannot be empty. Please enter again:'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">inquirer</code> 라이브러리를 활용해 입력받도록 합니다. <code class=\"language-text\">type</code> 속성은 프롬프트의 유형을 정의합니다. input\ntype은 사용자에게서 문자열을 입력 받습니다. 그리고 <code class=\"language-text\">validate</code> 속성을 통해 사용자의 input 값에 제약을\n걸어줍니다.</p>\n<h3 id=\"각-언어-파일에-key-value를-추가하기\" style=\"position:relative;\"><a href=\"#%EA%B0%81-%EC%96%B8%EC%96%B4-%ED%8C%8C%EC%9D%BC%EC%97%90-key-value%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"각 언어 파일에 key value를 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 입력 받은 값을 번역하고 번역된 값을 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translateText</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token punctuation\">,</span> targetLanguage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://translation.googleapis.com/language/translate/v2'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">q</span><span class=\"token operator\">:</span> text<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> targetLanguage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token constant\">GOOGLE_TRANSLATE_API_KEY</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>translations<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>translatedText<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 전달받은 언어 코드에 해당하는 json 언어 파일을 찾아서 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">findLanguageFile</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">languageCode</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// `recursive-readdir` 라이브러리에서 제공하는 함수입니다.</span>\n  <span class=\"token comment\">// 해당 하위 디렉터리의 모든 파일을 재귀적으로 나열합니다.</span>\n  <span class=\"token keyword\">const</span> files <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">recursive</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> files<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> path<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>languageFile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Language file for </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> not found.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> languageFile<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 각 언어 파일에 키와 번역 값을 추가합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> translatedValue <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">translateText</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">findLanguageFile</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    translations<span class=\"token punctuation\">[</span>languageCode<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> translations<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"전체-번역-프로세스-실행하기\" style=\"position:relative;\"><a href=\"#%EC%A0%84%EC%B2%B4-%EB%B2%88%EC%97%AD-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"전체 번역 프로세스 실행하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>전체 번역 프로세스 실행하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 전체 번역 프로세스를 실행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promptTranslation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">addTranslation</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token string\">'번역 결과: '</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>translations<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Translation added to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">translate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 구현한 스크립트를 실행해보겠습니다. 아래는 스크립트 실행 결과입니다.</p>\n<p><img src=\"/images/new-team-productivity/translate-teamB-script.gif\" alt=\"translate-teamB-script.gif\"></p>\n<ul>\n<li><code class=\"language-text\">npm run translate</code> 명령어를 실행합니다.</li>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역을 원하는 텍스트를 입력 후, 엔터를 누릅니다.</li>\n<li>번역한 결과가 각 <code class=\"language-text\">json</code> 파일의 마지막 라인에 자동으로 추가되며 포맷팅을 실행합니다.</li>\n</ul>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByUlEQVR42o2QS2/TQBSF/S9oXn6MXzPjedjjcZzEebpOXwlQIYpKu0KlbGGP2FRq1/0ViBViwZIfx3WMsmjTCuno6uja38ycY8hiH4lskpHjIlTM75iuaXs9q56NwG+13TTT8KkMIpnEMlNScIGJIJEICcO0NiSSIeG1p7DkW1EWBzgyCI+FykOmLC9CIfMI94jwMEc+QR52fQrTC6gfUnez2SxrY6PACLgKhG7ZwQvT37N8MC0nrNV1Wh1rq3bXfqBOzzFkolM9EFKptI8JMy0E6ploE89vQnZNBL8+loEpX+wfTOfVbLEsJgvdH8oki1UfZiQUGC5T6GY3HPFE6RwqaQRNYMoI5SCXyEikAWY7yRoWsa4OjvqDQumBjHWssjTVSZzAkfAJioHAT8LQZJaPgIHwEY/hZsokvDYfjplIoFJ4juX4TUMP4WFRLg9fzxbHSToejMp5eTKZHToubnct6KnRkzefrM/enV9dXX/+/uPn1293q1cX7y+vQyJbHfMZ7B98tHr75uzDx09ffv3+c3N7//L08vwCYPFf8HQ6X69Pq+U6y+ejcVVWK4iAPALPfp6sYa3KUCg3gJA2FLvXNkE763kM/wUP7og3R7wHKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"translate-slack-reaction.png\"\n        title=\"\"\n        src=\"/static/1692836624195.603146242730/00d43/translate-slack-reaction.png\"\n        srcset=\"/static/1692836624195.603146242730/63868/translate-slack-reaction.png 250w,\n/static/1692836624195.603146242730/0b533/translate-slack-reaction.png 500w,\n/static/1692836624195.603146242730/00d43/translate-slack-reaction.png 1000w,\n/static/1692836624195.603146242730/aa440/translate-slack-reaction.png 1500w,\n/static/1692836624195.603146242730/e8950/translate-slack-reaction.png 2000w,\n/static/1692836624195.603146242730/922e6/translate-slack-reaction.png 2140w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>작업 이후 좋은 반응과 함께 번거롭던 번역 작업이 편해졌다는 의견이 많았습니다. 여러 고민을 거쳐 만든\n보람이 있었죠. 이렇게 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있었습니다. 이제 번역 업\n무에서 발생하는 시간을 크게 줄일 수 있게 되었습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://nodejs.org/api/fs.html\">https://nodejs.org/api/fs.html</a></li>\n<li><a href=\"https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/\">https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/</a></li>\n</ul>",
      "%EC%82%AC%EC%9A%A9%EC%9E%90%EB%A1%9C%EB%B6%80%ED%84%B0-key%EC%99%80-value%EB%A5%BC-%EC%9E%85%EB%A0%A5%EB%B0%9B%EA%B8%B0#사용자로부터 <code class=\"language-text\">key</code>와 <code class=\"language-text\">value</code>를 입력받기": "<h2 id=\"새로운-팀에-합류한-이후-했던-것-중-가장-비효율적인-업무\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%8C%80%EC%97%90-%ED%95%A9%EB%A5%98%ED%95%9C-%EC%9D%B4%ED%9B%84-%ED%96%88%EB%8D%98-%EA%B2%83-%EC%A4%91-%EA%B0%80%EC%9E%A5-%EB%B9%84%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%97%85%EB%AC%B4\" aria-label=\"새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무</h2>\n<h3 id=\"너무나도-번거로운-번역-작업\" style=\"position:relative;\"><a href=\"#%EB%84%88%EB%AC%B4%EB%82%98%EB%8F%84-%EB%B2%88%EA%B1%B0%EB%A1%9C%EC%9A%B4-%EB%B2%88%EC%97%AD-%EC%9E%91%EC%97%85\" aria-label=\"너무나도 번거로운 번역 작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>너무나도 번거로운 번역 작업</h3>\n<p>새로 합류한 팀의 프로젝트에서는 총 4개 국어(한국어, 영어, 일본어, 베트남어)를 지원해야 했습니다.\n<code class=\"language-text\">ko.lang.json</code> 또는 <code class=\"language-text\">en.lang.json</code> 이런식으로 이름을 짖고 <code class=\"language-text\">json</code> 파일 형식으로 관리하고 있었습니다.</p>\n<p>따로 번역 작업을 해주시는 분은 없고, 그냥 구글 번역기를 통해 얻은 값을 각 <code class=\"language-text\">json</code> 파일에 추가해서 다\n국어를 지원하고 있었죠.</p>\n<p>로직을 작성해나가며 하나하나 번역기를 돌리고 각 <code class=\"language-text\">json</code> 파일에 추가하는 작업은 보통 귀찮은 작업이 아\n니었습니다.</p>\n<h3 id=\"손수-작업의-한계\" style=\"position:relative;\"><a href=\"#%EC%86%90%EC%88%98-%EC%9E%91%EC%97%85%EC%9D%98-%ED%95%9C%EA%B3%84\" aria-label=\"손수 작업의 한계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>손수 작업의 한계</h3>\n<p>일일이 번역할 문구를 복사해 4개 국어로 번역하고, 번역된 문구를 다시 각각 복사해 4개의 <code class=\"language-text\">json</code> 파일에\n추가하는 과정이 필요합니다. 또한 여러 개발자가 작업하다보니 <code class=\"language-text\">key</code> 네이밍 문법도 정리가 안 되어 있었\n습니다. 어떤 것은 <code class=\"language-text\">camelCase</code>, 또 어떤 것은 <code class=\"language-text\">snake_case</code>로 되어 있었습니다. 워낙 바쁘다보면\n<code class=\"language-text\">en.lang.json</code> 파일에 한국어를 추가하는 실수를 범할 수도 있겠죠. 이 과정에서 많은 시간이 소모되고 실\n수를 하지 않는다는 보장이 없죠.</p>\n<p>이런 새로운 기능을 작업할때마다 반복되다 보니 어느 세월에 문구를 복사해서 변역하고 또 번역한 값을 복\n사해서 각 언어 파일에 키값과 함께 추가하고 로직은 언제 다 구현하지? 라는 마음이 들었습니다. 이 과정\n을 개선하기로 마음 먹었죠.</p>\n<h3 id=\"어차피-번역기를-사용해서-할거라면-스크립트를-작성해서-개선할-수-있지-않을까\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EC%B0%A8%ED%94%BC-%EB%B2%88%EC%97%AD%EA%B8%B0%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%ED%95%A0%EA%B1%B0%EB%9D%BC%EB%A9%B4-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%84%9C-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%A7%80-%EC%95%8A%EC%9D%84%EA%B9%8C\" aria-label=\"어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까?</h3>\n<p>구글 번역기를 사용하므로 google에서 제공하는 번역 API를 이용해 한 번에 4개의 언어로 번역해주고 파일\n에 자동으로 추가해주는 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있을 것 같았습니다.</p>\n<p>개발자가 번역할 문구와 키값을 입력하면 자동으로 4개 국어로 번역해주고 매칭되는 언어별 <code class=\"language-text\">json</code> 파일의\n마지막 줄에 추가해주는 방법이 좋을 것 같습니다. 또한 key 값도 입력받을 때 정해둔 네이밍 문법에 일치\n해야 하기 때문에 통일되는 이점도 동시에 따라 왔죠. 여기서 네이밍 문법은 애초에 정해져 있지 않았기 때\n문에 팀원분들께 미팅 요청을 드렸고 <code class=\"language-text\">camelCase</code>로 통일하기로 결정이 되었죠. 그리고 번역 값이 100프로\n정확할 순 없으니 번역 결과값을 받아 수정할 수 있도록 하면 더욱 좋겠죠.</p>\n<p>이제 생각한 것을 편하게 사용할 수 있도록 구현하면 되겠습니다.</p>\n<h2 id=\"모든-팀들이-편하게-사용하도록-웹-사이트로-만들자\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%A0-%ED%8C%80%EB%93%A4%EC%9D%B4-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8F%84%EB%A1%9D-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%9E%90\" aria-label=\"모든 팀들이 편하게 사용하도록 웹 사이트로 만들자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모든 팀들이 편하게 사용하도록 웹 사이트로 만들자</h2>\n<p>‘위 스크립트를 만들어도 어떻게 해야 팀원들이 쉽게 사용할 수 있을까?‘라는 고민이 들었습니다. 익숙한웹\n사이트에서 최대한 직관적이고 간단하게 구현해 각 팀별로 원하는 목적을 쉽게 달성할 수 있도록 구현하고\n싶었습니다. 다른 팀에서도 <code class=\"language-text\">json</code> 파일을 사용하진 않지만 구글 번역기를 이용해서 4개 국어를 지원하고\n있었기 때문에 이왕 만드는 거 다른 팀원분에게도 도움이 되고 싶었기 때문에 첫 진입 시, 팀을 선택하고\n각 팀별로 다른 화면을 보여주도록 플로우를 그렸죠.</p>\n<p>예로 A라는 팀에서는 <a href=\"https://locize.com/\">locize</a>라는 번역 관리 시스템을 사용해서 관리 중이었습니다.\nlocize를 사용하면 번역할 문구를 언어별로 locize에 붙여넣으면 됩니다. 따라서 <code class=\"language-text\">json</code> 파일을 사용하지않\n으므로 4개 국어로 번역하고 각 번역 값을 확인 후, 수정하고 복사할 수 있도록 하면 좋겠죠.</p>\n<p>제가 속해 있는 B 팀의 경우에는 번역한 값들을 각 언어별 <code class=\"language-text\">json</code> 파일에 key-value 형식으로 추가해줘야합\n니다. 따라서 key와 value를 입력받고 각 <code class=\"language-text\">json</code> 파일에 추가해주면 많이 편해질 겁니다.</p>\n<p>아래는 구현한 웹사이트에서 각 팀별로 번역 작업을 하는 1차 결과입니다.</p>\n<h3 id=\"teama\" style=\"position:relative;\"><a href=\"#teama\" aria-label=\"teama permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamA</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamA-web.gif\" alt=\"translate-teamA-web-example\"></p>\n<ul>\n<li>TeamA (<code class=\"language-text\">locize</code> 를 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamA를 선택합니다.</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다. (특수문자로만 이루어져서는 안 됩니다.)</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>복사하기 버튼을 눌러 클립보드에 복사하고 <code class=\"language-text\">locize</code> 에 붙여넣습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"teamb\" style=\"position:relative;\"><a href=\"#teamb\" aria-label=\"teamb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamB</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamB-web.gif\" alt=\"translate-teamB-web-example\"></p>\n<ul>\n<li>TeamB (<code class=\"language-text\">json</code> 파일을 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamB를 선택합니다.</li>\n<li>언어 파일이 위치한 폴더의 경로를 입력하지 않았었다면, 파일의 경로를 입력합니다.\n<ul>\n<li>입력한 경로에 <code class=\"language-text\">language.json</code> 파일이 존재하지 않는다면 저장되지 않습니다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">json</code> 파일에 추가할 텍스트를 입력합니다.\n<ul>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다.</li>\n</ul>\n</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>‘각 언어별 json 파일에 저장’ 버튼을 눌러 각 <code class=\"language-text\">json</code> 파일에 추가합니다.</li>\n</ul>\n</li>\n</ul>\n<p>일단 생각한대로 구현은 했습니다. <code class=\"language-text\">locize</code> 를 사용하는 TeamA의 경우에는 번역 작업이 편해진 것 같습니\n다. 하지만 <code class=\"language-text\">json</code> 파일을 사용하는 TeamB의 경우에는 번역 작업을 하려면 여전히 번거롭다고 느껴졌습니다\n. 번역 작업을 편하게 하기 위해 웹 사이트 주소를 알아야 하는 것은 물론, 팀을 선택하고 언어 파일 경로\n를 설정해야 했죠.</p>\n<h2 id=\"차라리-노드-스크립트로-만들어-더욱-편하게-사용하자\" style=\"position:relative;\"><a href=\"#%EC%B0%A8%EB%9D%BC%EB%A6%AC-%EB%85%B8%EB%93%9C-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%8D%94%EC%9A%B1-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90\" aria-label=\"차라리 노드 스크립트로 만들어 더욱 편하게 사용하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>차라리 노드 스크립트로 만들어 더욱 편하게 사용하자</h2>\n<p>언어 파일 경로를 설정하는 과정조차 없애고 싶었습니다. 그래서 TeamB의 경우에는 이 웹 사이트가 아닌,\n프로젝트에서 node script를 실행해 번역 작업을 더 간편하게 할 수 있게 방식을 변경하기로 결정했습니다.\n이렇게 하면 웹사이트의 주소를 알지 않아도 되고 필요한 기능만 명확히 수행할 것 같았습니다.</p>\n<p>간단하게 스크립트를 만들어 보겠습니다.</p>\n<p>먼저, 사용자에게서 터미널에서 key와 value를 입력받아야 합니다. 이 정보들을 입력받기 위해\n<a href=\"https://www.npmjs.com/package/inquirer\">inquirer.js</a> 라이브러리를 사용하겠습니다. <code class=\"language-text\">inquirer.js</code> 는\n터미널에서 다양한 UI로 사용자의 입력을 받거나, 출력해주는 라이브러리입니다. 아래 사진을 보시면 어떤\n느낌인지 감이 잡히실 겁니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 692px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAn0lEQVR42jWOwQqEIBCGe45tOwhmbLaupGmaQXSopMtSSNHB93+MHYL9DsPwzz/zT9J1XVmW1lrOuRCibVuttTFGKQUKNJRSxhiIwzDAtO/7PM9RxYlyyXVd4AshjOO4LMtxHNu2Qd333Tl3nue6rrAzTZP3/nsTY0SvN/6IpGkaQkhd19UNHBJ/4CMpJWRCFMYYIQSGoijmec6eaZY+fs09J+uMubsAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"inquirer-example\"\n        title=\"\"\n        src=\"/static/1683074758696.817115529904/91e7e/inquirer-example.png\"\n        srcset=\"/static/1683074758696.817115529904/63868/inquirer-example.png 250w,\n/static/1683074758696.817115529904/0b533/inquirer-example.png 500w,\n/static/1683074758696.817115529904/91e7e/inquirer-example.png 692w\"\n        sizes=\"(max-width: 692px) 100vw, 692px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"흐름-정리하기\" style=\"position:relative;\"><a href=\"#%ED%9D%90%EB%A6%84-%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"흐름 정리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>흐름 정리하기</h3>\n<ol>\n<li>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로를 정의합니다.</li>\n<li>사용자로부터 <code class=\"language-text\">key</code>를 입력받습니다.\n<ol>\n<li>값을 입력하지 않거나, 이미 존재하는 <code class=\"language-text\">key</code> 라면 오류 메시지를 반환하고 다시 입력 받습니다.</li>\n<li><code class=\"language-text\">camelCase</code> 가 아니라면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>사용자로부터 <code class=\"language-text\">value</code> 를 입력받습니다.\n<ol>\n<li>값을 입력하지 않으면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가합니다.\n<ol>\n<li>입력받은 <code class=\"language-text\">value</code>를 4개 국어로 번역합니다.</li>\n<li>정의해두었던 <code class=\"language-text\">json</code>파일이 존재하는 폴더 경로를 이용해, 해당 폴더의 하위에 존재하는 모든 언어파\n일들을 가져옵니다. 없다면 오류 메시지를 반환합니다.</li>\n<li>찾은 각 <code class=\"language-text\">json</code> 파일의 문자열을 분석하고, JS 객체로 변환합니다.</li>\n<li>변환한 JS 객체에 전달 받은 <code class=\"language-text\">key</code> 와 번역된 <code class=\"language-text\">value</code>를 추가합니다.</li>\n<li>변경된 JS 객체를 다시 JSON 문자열로 변환해 각 언어 파일에 작성합니다.</li>\n</ol>\n</li>\n<li>결과를 터미널에 출력합니다.</li>\n</ol>\n<p>정리하고 보니 빠르게 스크립트를 구현할 수 있을 것 같네요. 바로 코드로 구현해보겠습니다.</p>\n<h3 id=\"번역할-국가별-언어-코드-및-언어별-json-파일이-존재하는-폴더-경로-정의하기\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%97%AD%ED%95%A0-%EA%B5%AD%EA%B0%80%EB%B3%84-%EC%96%B8%EC%96%B4-%EC%BD%94%EB%93%9C-%EB%B0%8F-%EC%96%B8%EC%96%B4%EB%B3%84-json-%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%A1%B4%EC%9E%AC%ED%95%98%EB%8A%94-%ED%8F%B4%EB%8D%94-%EA%B2%BD%EB%A1%9C-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0\" aria-label=\"번역할 국가별 언어 코드 및 언어별 json 파일이 존재하는 폴더 경로 정의하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로 정의하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 정의한 언어 코드를 이용해 번역을 진행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGE_CODE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ko'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 언어별 json 파일이 존재하는 폴더 경로를 정의합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGES_DIR_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span><span class=\"token function\">cwd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'libs'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'locales'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'languages'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"사용자로부터-key와-value를-입력받기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90%EB%A1%9C%EB%B6%80%ED%84%B0-key%EC%99%80-value%EB%A5%BC-%EC%9E%85%EB%A0%A5%EB%B0%9B%EA%B8%B0\" aria-label=\"사용자로부터 key와 value를 입력받기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용자로부터 <code class=\"language-text\">key</code>와 <code class=\"language-text\">value</code>를 입력받기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 각 json 파일에 전달된 키가 존재하는지 검증합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">keyExistsInLangFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> convertedLanguageCode <span class=\"token operator\">=</span> <span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n          chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">The key '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">' already exists in '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json'.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNil</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isEmptyString</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">isNil</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> value<span class=\"token operator\">?.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 사용자에게 key와 value 값을 입력하라는 메시지를 표시합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">promptTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> key <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token function\">keyExistsInLangFiles</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> inputKey <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'key'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation key in camelCase:'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">validate</span><span class=\"token operator\">:</span> validateCamelCase<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    key <span class=\"token operator\">=</span> inputKey<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation value:'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">validate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token string\">'value cannot be empty. Please enter again:'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">inquirer</code> 라이브러리를 활용해 입력받도록 합니다. <code class=\"language-text\">type</code> 속성은 프롬프트의 유형을 정의합니다. input\ntype은 사용자에게서 문자열을 입력 받습니다. 그리고 <code class=\"language-text\">validate</code> 속성을 통해 사용자의 input 값에 제약을\n걸어줍니다.</p>\n<h3 id=\"각-언어-파일에-key-value를-추가하기\" style=\"position:relative;\"><a href=\"#%EA%B0%81-%EC%96%B8%EC%96%B4-%ED%8C%8C%EC%9D%BC%EC%97%90-key-value%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"각 언어 파일에 key value를 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 입력 받은 값을 번역하고 번역된 값을 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translateText</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token punctuation\">,</span> targetLanguage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://translation.googleapis.com/language/translate/v2'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">q</span><span class=\"token operator\">:</span> text<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> targetLanguage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token constant\">GOOGLE_TRANSLATE_API_KEY</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>translations<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>translatedText<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 전달받은 언어 코드에 해당하는 json 언어 파일을 찾아서 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">findLanguageFile</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">languageCode</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// `recursive-readdir` 라이브러리에서 제공하는 함수입니다.</span>\n  <span class=\"token comment\">// 해당 하위 디렉터리의 모든 파일을 재귀적으로 나열합니다.</span>\n  <span class=\"token keyword\">const</span> files <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">recursive</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> files<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> path<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>languageFile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Language file for </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> not found.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> languageFile<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 각 언어 파일에 키와 번역 값을 추가합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> translatedValue <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">translateText</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">findLanguageFile</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    translations<span class=\"token punctuation\">[</span>languageCode<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> translations<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"전체-번역-프로세스-실행하기\" style=\"position:relative;\"><a href=\"#%EC%A0%84%EC%B2%B4-%EB%B2%88%EC%97%AD-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"전체 번역 프로세스 실행하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>전체 번역 프로세스 실행하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 전체 번역 프로세스를 실행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promptTranslation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">addTranslation</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token string\">'번역 결과: '</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>translations<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Translation added to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">translate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 구현한 스크립트를 실행해보겠습니다. 아래는 스크립트 실행 결과입니다.</p>\n<p><img src=\"/images/new-team-productivity/translate-teamB-script.gif\" alt=\"translate-teamB-script.gif\"></p>\n<ul>\n<li><code class=\"language-text\">npm run translate</code> 명령어를 실행합니다.</li>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역을 원하는 텍스트를 입력 후, 엔터를 누릅니다.</li>\n<li>번역한 결과가 각 <code class=\"language-text\">json</code> 파일의 마지막 라인에 자동으로 추가되며 포맷팅을 실행합니다.</li>\n</ul>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByUlEQVR42o2QS2/TQBSF/S9oXn6MXzPjedjjcZzEebpOXwlQIYpKu0KlbGGP2FRq1/0ViBViwZIfx3WMsmjTCuno6uja38ycY8hiH4lskpHjIlTM75iuaXs9q56NwG+13TTT8KkMIpnEMlNScIGJIJEICcO0NiSSIeG1p7DkW1EWBzgyCI+FykOmLC9CIfMI94jwMEc+QR52fQrTC6gfUnez2SxrY6PACLgKhG7ZwQvT37N8MC0nrNV1Wh1rq3bXfqBOzzFkolM9EFKptI8JMy0E6ploE89vQnZNBL8+loEpX+wfTOfVbLEsJgvdH8oki1UfZiQUGC5T6GY3HPFE6RwqaQRNYMoI5SCXyEikAWY7yRoWsa4OjvqDQumBjHWssjTVSZzAkfAJioHAT8LQZJaPgIHwEY/hZsokvDYfjplIoFJ4juX4TUMP4WFRLg9fzxbHSToejMp5eTKZHToubnct6KnRkzefrM/enV9dXX/+/uPn1293q1cX7y+vQyJbHfMZ7B98tHr75uzDx09ffv3+c3N7//L08vwCYPFf8HQ6X69Pq+U6y+ejcVVWK4iAPALPfp6sYa3KUCg3gJA2FLvXNkE763kM/wUP7og3R7wHKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"translate-slack-reaction.png\"\n        title=\"\"\n        src=\"/static/1692836624195.603146242730/00d43/translate-slack-reaction.png\"\n        srcset=\"/static/1692836624195.603146242730/63868/translate-slack-reaction.png 250w,\n/static/1692836624195.603146242730/0b533/translate-slack-reaction.png 500w,\n/static/1692836624195.603146242730/00d43/translate-slack-reaction.png 1000w,\n/static/1692836624195.603146242730/aa440/translate-slack-reaction.png 1500w,\n/static/1692836624195.603146242730/e8950/translate-slack-reaction.png 2000w,\n/static/1692836624195.603146242730/922e6/translate-slack-reaction.png 2140w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>작업 이후 좋은 반응과 함께 번거롭던 번역 작업이 편해졌다는 의견이 많았습니다. 여러 고민을 거쳐 만든\n보람이 있었죠. 이렇게 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있었습니다. 이제 번역 업\n무에서 발생하는 시간을 크게 줄일 수 있게 되었습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://nodejs.org/api/fs.html\">https://nodejs.org/api/fs.html</a></li>\n<li><a href=\"https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/\">https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/</a></li>\n</ul>",
      "%EA%B0%81-%EC%96%B8%EC%96%B4-%ED%8C%8C%EC%9D%BC%EC%97%90-key-value%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0#각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가하기": "<h2 id=\"새로운-팀에-합류한-이후-했던-것-중-가장-비효율적인-업무\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%8C%80%EC%97%90-%ED%95%A9%EB%A5%98%ED%95%9C-%EC%9D%B4%ED%9B%84-%ED%96%88%EB%8D%98-%EA%B2%83-%EC%A4%91-%EA%B0%80%EC%9E%A5-%EB%B9%84%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%97%85%EB%AC%B4\" aria-label=\"새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무</h2>\n<h3 id=\"너무나도-번거로운-번역-작업\" style=\"position:relative;\"><a href=\"#%EB%84%88%EB%AC%B4%EB%82%98%EB%8F%84-%EB%B2%88%EA%B1%B0%EB%A1%9C%EC%9A%B4-%EB%B2%88%EC%97%AD-%EC%9E%91%EC%97%85\" aria-label=\"너무나도 번거로운 번역 작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>너무나도 번거로운 번역 작업</h3>\n<p>새로 합류한 팀의 프로젝트에서는 총 4개 국어(한국어, 영어, 일본어, 베트남어)를 지원해야 했습니다.\n<code class=\"language-text\">ko.lang.json</code> 또는 <code class=\"language-text\">en.lang.json</code> 이런식으로 이름을 짖고 <code class=\"language-text\">json</code> 파일 형식으로 관리하고 있었습니다.</p>\n<p>따로 번역 작업을 해주시는 분은 없고, 그냥 구글 번역기를 통해 얻은 값을 각 <code class=\"language-text\">json</code> 파일에 추가해서 다\n국어를 지원하고 있었죠.</p>\n<p>로직을 작성해나가며 하나하나 번역기를 돌리고 각 <code class=\"language-text\">json</code> 파일에 추가하는 작업은 보통 귀찮은 작업이 아\n니었습니다.</p>\n<h3 id=\"손수-작업의-한계\" style=\"position:relative;\"><a href=\"#%EC%86%90%EC%88%98-%EC%9E%91%EC%97%85%EC%9D%98-%ED%95%9C%EA%B3%84\" aria-label=\"손수 작업의 한계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>손수 작업의 한계</h3>\n<p>일일이 번역할 문구를 복사해 4개 국어로 번역하고, 번역된 문구를 다시 각각 복사해 4개의 <code class=\"language-text\">json</code> 파일에\n추가하는 과정이 필요합니다. 또한 여러 개발자가 작업하다보니 <code class=\"language-text\">key</code> 네이밍 문법도 정리가 안 되어 있었\n습니다. 어떤 것은 <code class=\"language-text\">camelCase</code>, 또 어떤 것은 <code class=\"language-text\">snake_case</code>로 되어 있었습니다. 워낙 바쁘다보면\n<code class=\"language-text\">en.lang.json</code> 파일에 한국어를 추가하는 실수를 범할 수도 있겠죠. 이 과정에서 많은 시간이 소모되고 실\n수를 하지 않는다는 보장이 없죠.</p>\n<p>이런 새로운 기능을 작업할때마다 반복되다 보니 어느 세월에 문구를 복사해서 변역하고 또 번역한 값을 복\n사해서 각 언어 파일에 키값과 함께 추가하고 로직은 언제 다 구현하지? 라는 마음이 들었습니다. 이 과정\n을 개선하기로 마음 먹었죠.</p>\n<h3 id=\"어차피-번역기를-사용해서-할거라면-스크립트를-작성해서-개선할-수-있지-않을까\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EC%B0%A8%ED%94%BC-%EB%B2%88%EC%97%AD%EA%B8%B0%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%ED%95%A0%EA%B1%B0%EB%9D%BC%EB%A9%B4-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%84%9C-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%A7%80-%EC%95%8A%EC%9D%84%EA%B9%8C\" aria-label=\"어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까?</h3>\n<p>구글 번역기를 사용하므로 google에서 제공하는 번역 API를 이용해 한 번에 4개의 언어로 번역해주고 파일\n에 자동으로 추가해주는 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있을 것 같았습니다.</p>\n<p>개발자가 번역할 문구와 키값을 입력하면 자동으로 4개 국어로 번역해주고 매칭되는 언어별 <code class=\"language-text\">json</code> 파일의\n마지막 줄에 추가해주는 방법이 좋을 것 같습니다. 또한 key 값도 입력받을 때 정해둔 네이밍 문법에 일치\n해야 하기 때문에 통일되는 이점도 동시에 따라 왔죠. 여기서 네이밍 문법은 애초에 정해져 있지 않았기 때\n문에 팀원분들께 미팅 요청을 드렸고 <code class=\"language-text\">camelCase</code>로 통일하기로 결정이 되었죠. 그리고 번역 값이 100프로\n정확할 순 없으니 번역 결과값을 받아 수정할 수 있도록 하면 더욱 좋겠죠.</p>\n<p>이제 생각한 것을 편하게 사용할 수 있도록 구현하면 되겠습니다.</p>\n<h2 id=\"모든-팀들이-편하게-사용하도록-웹-사이트로-만들자\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%A0-%ED%8C%80%EB%93%A4%EC%9D%B4-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8F%84%EB%A1%9D-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%9E%90\" aria-label=\"모든 팀들이 편하게 사용하도록 웹 사이트로 만들자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모든 팀들이 편하게 사용하도록 웹 사이트로 만들자</h2>\n<p>‘위 스크립트를 만들어도 어떻게 해야 팀원들이 쉽게 사용할 수 있을까?‘라는 고민이 들었습니다. 익숙한웹\n사이트에서 최대한 직관적이고 간단하게 구현해 각 팀별로 원하는 목적을 쉽게 달성할 수 있도록 구현하고\n싶었습니다. 다른 팀에서도 <code class=\"language-text\">json</code> 파일을 사용하진 않지만 구글 번역기를 이용해서 4개 국어를 지원하고\n있었기 때문에 이왕 만드는 거 다른 팀원분에게도 도움이 되고 싶었기 때문에 첫 진입 시, 팀을 선택하고\n각 팀별로 다른 화면을 보여주도록 플로우를 그렸죠.</p>\n<p>예로 A라는 팀에서는 <a href=\"https://locize.com/\">locize</a>라는 번역 관리 시스템을 사용해서 관리 중이었습니다.\nlocize를 사용하면 번역할 문구를 언어별로 locize에 붙여넣으면 됩니다. 따라서 <code class=\"language-text\">json</code> 파일을 사용하지않\n으므로 4개 국어로 번역하고 각 번역 값을 확인 후, 수정하고 복사할 수 있도록 하면 좋겠죠.</p>\n<p>제가 속해 있는 B 팀의 경우에는 번역한 값들을 각 언어별 <code class=\"language-text\">json</code> 파일에 key-value 형식으로 추가해줘야합\n니다. 따라서 key와 value를 입력받고 각 <code class=\"language-text\">json</code> 파일에 추가해주면 많이 편해질 겁니다.</p>\n<p>아래는 구현한 웹사이트에서 각 팀별로 번역 작업을 하는 1차 결과입니다.</p>\n<h3 id=\"teama\" style=\"position:relative;\"><a href=\"#teama\" aria-label=\"teama permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamA</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamA-web.gif\" alt=\"translate-teamA-web-example\"></p>\n<ul>\n<li>TeamA (<code class=\"language-text\">locize</code> 를 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamA를 선택합니다.</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다. (특수문자로만 이루어져서는 안 됩니다.)</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>복사하기 버튼을 눌러 클립보드에 복사하고 <code class=\"language-text\">locize</code> 에 붙여넣습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"teamb\" style=\"position:relative;\"><a href=\"#teamb\" aria-label=\"teamb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamB</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamB-web.gif\" alt=\"translate-teamB-web-example\"></p>\n<ul>\n<li>TeamB (<code class=\"language-text\">json</code> 파일을 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamB를 선택합니다.</li>\n<li>언어 파일이 위치한 폴더의 경로를 입력하지 않았었다면, 파일의 경로를 입력합니다.\n<ul>\n<li>입력한 경로에 <code class=\"language-text\">language.json</code> 파일이 존재하지 않는다면 저장되지 않습니다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">json</code> 파일에 추가할 텍스트를 입력합니다.\n<ul>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다.</li>\n</ul>\n</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>‘각 언어별 json 파일에 저장’ 버튼을 눌러 각 <code class=\"language-text\">json</code> 파일에 추가합니다.</li>\n</ul>\n</li>\n</ul>\n<p>일단 생각한대로 구현은 했습니다. <code class=\"language-text\">locize</code> 를 사용하는 TeamA의 경우에는 번역 작업이 편해진 것 같습니\n다. 하지만 <code class=\"language-text\">json</code> 파일을 사용하는 TeamB의 경우에는 번역 작업을 하려면 여전히 번거롭다고 느껴졌습니다\n. 번역 작업을 편하게 하기 위해 웹 사이트 주소를 알아야 하는 것은 물론, 팀을 선택하고 언어 파일 경로\n를 설정해야 했죠.</p>\n<h2 id=\"차라리-노드-스크립트로-만들어-더욱-편하게-사용하자\" style=\"position:relative;\"><a href=\"#%EC%B0%A8%EB%9D%BC%EB%A6%AC-%EB%85%B8%EB%93%9C-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%8D%94%EC%9A%B1-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90\" aria-label=\"차라리 노드 스크립트로 만들어 더욱 편하게 사용하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>차라리 노드 스크립트로 만들어 더욱 편하게 사용하자</h2>\n<p>언어 파일 경로를 설정하는 과정조차 없애고 싶었습니다. 그래서 TeamB의 경우에는 이 웹 사이트가 아닌,\n프로젝트에서 node script를 실행해 번역 작업을 더 간편하게 할 수 있게 방식을 변경하기로 결정했습니다.\n이렇게 하면 웹사이트의 주소를 알지 않아도 되고 필요한 기능만 명확히 수행할 것 같았습니다.</p>\n<p>간단하게 스크립트를 만들어 보겠습니다.</p>\n<p>먼저, 사용자에게서 터미널에서 key와 value를 입력받아야 합니다. 이 정보들을 입력받기 위해\n<a href=\"https://www.npmjs.com/package/inquirer\">inquirer.js</a> 라이브러리를 사용하겠습니다. <code class=\"language-text\">inquirer.js</code> 는\n터미널에서 다양한 UI로 사용자의 입력을 받거나, 출력해주는 라이브러리입니다. 아래 사진을 보시면 어떤\n느낌인지 감이 잡히실 겁니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 692px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAn0lEQVR42jWOwQqEIBCGe45tOwhmbLaupGmaQXSopMtSSNHB93+MHYL9DsPwzz/zT9J1XVmW1lrOuRCibVuttTFGKQUKNJRSxhiIwzDAtO/7PM9RxYlyyXVd4AshjOO4LMtxHNu2Qd333Tl3nue6rrAzTZP3/nsTY0SvN/6IpGkaQkhd19UNHBJ/4CMpJWRCFMYYIQSGoijmec6eaZY+fs09J+uMubsAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"inquirer-example\"\n        title=\"\"\n        src=\"/static/1683074758696.817115529904/91e7e/inquirer-example.png\"\n        srcset=\"/static/1683074758696.817115529904/63868/inquirer-example.png 250w,\n/static/1683074758696.817115529904/0b533/inquirer-example.png 500w,\n/static/1683074758696.817115529904/91e7e/inquirer-example.png 692w\"\n        sizes=\"(max-width: 692px) 100vw, 692px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"흐름-정리하기\" style=\"position:relative;\"><a href=\"#%ED%9D%90%EB%A6%84-%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"흐름 정리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>흐름 정리하기</h3>\n<ol>\n<li>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로를 정의합니다.</li>\n<li>사용자로부터 <code class=\"language-text\">key</code>를 입력받습니다.\n<ol>\n<li>값을 입력하지 않거나, 이미 존재하는 <code class=\"language-text\">key</code> 라면 오류 메시지를 반환하고 다시 입력 받습니다.</li>\n<li><code class=\"language-text\">camelCase</code> 가 아니라면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>사용자로부터 <code class=\"language-text\">value</code> 를 입력받습니다.\n<ol>\n<li>값을 입력하지 않으면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가합니다.\n<ol>\n<li>입력받은 <code class=\"language-text\">value</code>를 4개 국어로 번역합니다.</li>\n<li>정의해두었던 <code class=\"language-text\">json</code>파일이 존재하는 폴더 경로를 이용해, 해당 폴더의 하위에 존재하는 모든 언어파\n일들을 가져옵니다. 없다면 오류 메시지를 반환합니다.</li>\n<li>찾은 각 <code class=\"language-text\">json</code> 파일의 문자열을 분석하고, JS 객체로 변환합니다.</li>\n<li>변환한 JS 객체에 전달 받은 <code class=\"language-text\">key</code> 와 번역된 <code class=\"language-text\">value</code>를 추가합니다.</li>\n<li>변경된 JS 객체를 다시 JSON 문자열로 변환해 각 언어 파일에 작성합니다.</li>\n</ol>\n</li>\n<li>결과를 터미널에 출력합니다.</li>\n</ol>\n<p>정리하고 보니 빠르게 스크립트를 구현할 수 있을 것 같네요. 바로 코드로 구현해보겠습니다.</p>\n<h3 id=\"번역할-국가별-언어-코드-및-언어별-json-파일이-존재하는-폴더-경로-정의하기\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%97%AD%ED%95%A0-%EA%B5%AD%EA%B0%80%EB%B3%84-%EC%96%B8%EC%96%B4-%EC%BD%94%EB%93%9C-%EB%B0%8F-%EC%96%B8%EC%96%B4%EB%B3%84-json-%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%A1%B4%EC%9E%AC%ED%95%98%EB%8A%94-%ED%8F%B4%EB%8D%94-%EA%B2%BD%EB%A1%9C-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0\" aria-label=\"번역할 국가별 언어 코드 및 언어별 json 파일이 존재하는 폴더 경로 정의하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로 정의하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 정의한 언어 코드를 이용해 번역을 진행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGE_CODE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ko'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 언어별 json 파일이 존재하는 폴더 경로를 정의합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGES_DIR_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span><span class=\"token function\">cwd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'libs'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'locales'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'languages'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"사용자로부터-key와-value를-입력받기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90%EB%A1%9C%EB%B6%80%ED%84%B0-key%EC%99%80-value%EB%A5%BC-%EC%9E%85%EB%A0%A5%EB%B0%9B%EA%B8%B0\" aria-label=\"사용자로부터 key와 value를 입력받기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용자로부터 <code class=\"language-text\">key</code>와 <code class=\"language-text\">value</code>를 입력받기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 각 json 파일에 전달된 키가 존재하는지 검증합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">keyExistsInLangFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> convertedLanguageCode <span class=\"token operator\">=</span> <span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n          chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">The key '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">' already exists in '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json'.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNil</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isEmptyString</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">isNil</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> value<span class=\"token operator\">?.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 사용자에게 key와 value 값을 입력하라는 메시지를 표시합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">promptTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> key <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token function\">keyExistsInLangFiles</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> inputKey <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'key'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation key in camelCase:'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">validate</span><span class=\"token operator\">:</span> validateCamelCase<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    key <span class=\"token operator\">=</span> inputKey<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation value:'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">validate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token string\">'value cannot be empty. Please enter again:'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">inquirer</code> 라이브러리를 활용해 입력받도록 합니다. <code class=\"language-text\">type</code> 속성은 프롬프트의 유형을 정의합니다. input\ntype은 사용자에게서 문자열을 입력 받습니다. 그리고 <code class=\"language-text\">validate</code> 속성을 통해 사용자의 input 값에 제약을\n걸어줍니다.</p>\n<h3 id=\"각-언어-파일에-key-value를-추가하기\" style=\"position:relative;\"><a href=\"#%EA%B0%81-%EC%96%B8%EC%96%B4-%ED%8C%8C%EC%9D%BC%EC%97%90-key-value%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"각 언어 파일에 key value를 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 입력 받은 값을 번역하고 번역된 값을 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translateText</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token punctuation\">,</span> targetLanguage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://translation.googleapis.com/language/translate/v2'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">q</span><span class=\"token operator\">:</span> text<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> targetLanguage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token constant\">GOOGLE_TRANSLATE_API_KEY</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>translations<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>translatedText<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 전달받은 언어 코드에 해당하는 json 언어 파일을 찾아서 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">findLanguageFile</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">languageCode</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// `recursive-readdir` 라이브러리에서 제공하는 함수입니다.</span>\n  <span class=\"token comment\">// 해당 하위 디렉터리의 모든 파일을 재귀적으로 나열합니다.</span>\n  <span class=\"token keyword\">const</span> files <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">recursive</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> files<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> path<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>languageFile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Language file for </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> not found.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> languageFile<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 각 언어 파일에 키와 번역 값을 추가합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> translatedValue <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">translateText</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">findLanguageFile</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    translations<span class=\"token punctuation\">[</span>languageCode<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> translations<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"전체-번역-프로세스-실행하기\" style=\"position:relative;\"><a href=\"#%EC%A0%84%EC%B2%B4-%EB%B2%88%EC%97%AD-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"전체 번역 프로세스 실행하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>전체 번역 프로세스 실행하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 전체 번역 프로세스를 실행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promptTranslation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">addTranslation</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token string\">'번역 결과: '</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>translations<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Translation added to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">translate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 구현한 스크립트를 실행해보겠습니다. 아래는 스크립트 실행 결과입니다.</p>\n<p><img src=\"/images/new-team-productivity/translate-teamB-script.gif\" alt=\"translate-teamB-script.gif\"></p>\n<ul>\n<li><code class=\"language-text\">npm run translate</code> 명령어를 실행합니다.</li>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역을 원하는 텍스트를 입력 후, 엔터를 누릅니다.</li>\n<li>번역한 결과가 각 <code class=\"language-text\">json</code> 파일의 마지막 라인에 자동으로 추가되며 포맷팅을 실행합니다.</li>\n</ul>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByUlEQVR42o2QS2/TQBSF/S9oXn6MXzPjedjjcZzEebpOXwlQIYpKu0KlbGGP2FRq1/0ViBViwZIfx3WMsmjTCuno6uja38ycY8hiH4lskpHjIlTM75iuaXs9q56NwG+13TTT8KkMIpnEMlNScIGJIJEICcO0NiSSIeG1p7DkW1EWBzgyCI+FykOmLC9CIfMI94jwMEc+QR52fQrTC6gfUnez2SxrY6PACLgKhG7ZwQvT37N8MC0nrNV1Wh1rq3bXfqBOzzFkolM9EFKptI8JMy0E6ploE89vQnZNBL8+loEpX+wfTOfVbLEsJgvdH8oki1UfZiQUGC5T6GY3HPFE6RwqaQRNYMoI5SCXyEikAWY7yRoWsa4OjvqDQumBjHWssjTVSZzAkfAJioHAT8LQZJaPgIHwEY/hZsokvDYfjplIoFJ4juX4TUMP4WFRLg9fzxbHSToejMp5eTKZHToubnct6KnRkzefrM/enV9dXX/+/uPn1293q1cX7y+vQyJbHfMZ7B98tHr75uzDx09ffv3+c3N7//L08vwCYPFf8HQ6X69Pq+U6y+ejcVVWK4iAPALPfp6sYa3KUCg3gJA2FLvXNkE763kM/wUP7og3R7wHKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"translate-slack-reaction.png\"\n        title=\"\"\n        src=\"/static/1692836624195.603146242730/00d43/translate-slack-reaction.png\"\n        srcset=\"/static/1692836624195.603146242730/63868/translate-slack-reaction.png 250w,\n/static/1692836624195.603146242730/0b533/translate-slack-reaction.png 500w,\n/static/1692836624195.603146242730/00d43/translate-slack-reaction.png 1000w,\n/static/1692836624195.603146242730/aa440/translate-slack-reaction.png 1500w,\n/static/1692836624195.603146242730/e8950/translate-slack-reaction.png 2000w,\n/static/1692836624195.603146242730/922e6/translate-slack-reaction.png 2140w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>작업 이후 좋은 반응과 함께 번거롭던 번역 작업이 편해졌다는 의견이 많았습니다. 여러 고민을 거쳐 만든\n보람이 있었죠. 이렇게 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있었습니다. 이제 번역 업\n무에서 발생하는 시간을 크게 줄일 수 있게 되었습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://nodejs.org/api/fs.html\">https://nodejs.org/api/fs.html</a></li>\n<li><a href=\"https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/\">https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/</a></li>\n</ul>",
      "%EC%A0%84%EC%B2%B4-%EB%B2%88%EC%97%AD-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0#전체 번역 프로세스 실행하기": "<h2 id=\"새로운-팀에-합류한-이후-했던-것-중-가장-비효율적인-업무\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%8C%80%EC%97%90-%ED%95%A9%EB%A5%98%ED%95%9C-%EC%9D%B4%ED%9B%84-%ED%96%88%EB%8D%98-%EA%B2%83-%EC%A4%91-%EA%B0%80%EC%9E%A5-%EB%B9%84%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%97%85%EB%AC%B4\" aria-label=\"새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무</h2>\n<h3 id=\"너무나도-번거로운-번역-작업\" style=\"position:relative;\"><a href=\"#%EB%84%88%EB%AC%B4%EB%82%98%EB%8F%84-%EB%B2%88%EA%B1%B0%EB%A1%9C%EC%9A%B4-%EB%B2%88%EC%97%AD-%EC%9E%91%EC%97%85\" aria-label=\"너무나도 번거로운 번역 작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>너무나도 번거로운 번역 작업</h3>\n<p>새로 합류한 팀의 프로젝트에서는 총 4개 국어(한국어, 영어, 일본어, 베트남어)를 지원해야 했습니다.\n<code class=\"language-text\">ko.lang.json</code> 또는 <code class=\"language-text\">en.lang.json</code> 이런식으로 이름을 짖고 <code class=\"language-text\">json</code> 파일 형식으로 관리하고 있었습니다.</p>\n<p>따로 번역 작업을 해주시는 분은 없고, 그냥 구글 번역기를 통해 얻은 값을 각 <code class=\"language-text\">json</code> 파일에 추가해서 다\n국어를 지원하고 있었죠.</p>\n<p>로직을 작성해나가며 하나하나 번역기를 돌리고 각 <code class=\"language-text\">json</code> 파일에 추가하는 작업은 보통 귀찮은 작업이 아\n니었습니다.</p>\n<h3 id=\"손수-작업의-한계\" style=\"position:relative;\"><a href=\"#%EC%86%90%EC%88%98-%EC%9E%91%EC%97%85%EC%9D%98-%ED%95%9C%EA%B3%84\" aria-label=\"손수 작업의 한계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>손수 작업의 한계</h3>\n<p>일일이 번역할 문구를 복사해 4개 국어로 번역하고, 번역된 문구를 다시 각각 복사해 4개의 <code class=\"language-text\">json</code> 파일에\n추가하는 과정이 필요합니다. 또한 여러 개발자가 작업하다보니 <code class=\"language-text\">key</code> 네이밍 문법도 정리가 안 되어 있었\n습니다. 어떤 것은 <code class=\"language-text\">camelCase</code>, 또 어떤 것은 <code class=\"language-text\">snake_case</code>로 되어 있었습니다. 워낙 바쁘다보면\n<code class=\"language-text\">en.lang.json</code> 파일에 한국어를 추가하는 실수를 범할 수도 있겠죠. 이 과정에서 많은 시간이 소모되고 실\n수를 하지 않는다는 보장이 없죠.</p>\n<p>이런 새로운 기능을 작업할때마다 반복되다 보니 어느 세월에 문구를 복사해서 변역하고 또 번역한 값을 복\n사해서 각 언어 파일에 키값과 함께 추가하고 로직은 언제 다 구현하지? 라는 마음이 들었습니다. 이 과정\n을 개선하기로 마음 먹었죠.</p>\n<h3 id=\"어차피-번역기를-사용해서-할거라면-스크립트를-작성해서-개선할-수-있지-않을까\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EC%B0%A8%ED%94%BC-%EB%B2%88%EC%97%AD%EA%B8%B0%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%ED%95%A0%EA%B1%B0%EB%9D%BC%EB%A9%B4-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%84%9C-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%A7%80-%EC%95%8A%EC%9D%84%EA%B9%8C\" aria-label=\"어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까?</h3>\n<p>구글 번역기를 사용하므로 google에서 제공하는 번역 API를 이용해 한 번에 4개의 언어로 번역해주고 파일\n에 자동으로 추가해주는 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있을 것 같았습니다.</p>\n<p>개발자가 번역할 문구와 키값을 입력하면 자동으로 4개 국어로 번역해주고 매칭되는 언어별 <code class=\"language-text\">json</code> 파일의\n마지막 줄에 추가해주는 방법이 좋을 것 같습니다. 또한 key 값도 입력받을 때 정해둔 네이밍 문법에 일치\n해야 하기 때문에 통일되는 이점도 동시에 따라 왔죠. 여기서 네이밍 문법은 애초에 정해져 있지 않았기 때\n문에 팀원분들께 미팅 요청을 드렸고 <code class=\"language-text\">camelCase</code>로 통일하기로 결정이 되었죠. 그리고 번역 값이 100프로\n정확할 순 없으니 번역 결과값을 받아 수정할 수 있도록 하면 더욱 좋겠죠.</p>\n<p>이제 생각한 것을 편하게 사용할 수 있도록 구현하면 되겠습니다.</p>\n<h2 id=\"모든-팀들이-편하게-사용하도록-웹-사이트로-만들자\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%A0-%ED%8C%80%EB%93%A4%EC%9D%B4-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8F%84%EB%A1%9D-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%9E%90\" aria-label=\"모든 팀들이 편하게 사용하도록 웹 사이트로 만들자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모든 팀들이 편하게 사용하도록 웹 사이트로 만들자</h2>\n<p>‘위 스크립트를 만들어도 어떻게 해야 팀원들이 쉽게 사용할 수 있을까?‘라는 고민이 들었습니다. 익숙한웹\n사이트에서 최대한 직관적이고 간단하게 구현해 각 팀별로 원하는 목적을 쉽게 달성할 수 있도록 구현하고\n싶었습니다. 다른 팀에서도 <code class=\"language-text\">json</code> 파일을 사용하진 않지만 구글 번역기를 이용해서 4개 국어를 지원하고\n있었기 때문에 이왕 만드는 거 다른 팀원분에게도 도움이 되고 싶었기 때문에 첫 진입 시, 팀을 선택하고\n각 팀별로 다른 화면을 보여주도록 플로우를 그렸죠.</p>\n<p>예로 A라는 팀에서는 <a href=\"https://locize.com/\">locize</a>라는 번역 관리 시스템을 사용해서 관리 중이었습니다.\nlocize를 사용하면 번역할 문구를 언어별로 locize에 붙여넣으면 됩니다. 따라서 <code class=\"language-text\">json</code> 파일을 사용하지않\n으므로 4개 국어로 번역하고 각 번역 값을 확인 후, 수정하고 복사할 수 있도록 하면 좋겠죠.</p>\n<p>제가 속해 있는 B 팀의 경우에는 번역한 값들을 각 언어별 <code class=\"language-text\">json</code> 파일에 key-value 형식으로 추가해줘야합\n니다. 따라서 key와 value를 입력받고 각 <code class=\"language-text\">json</code> 파일에 추가해주면 많이 편해질 겁니다.</p>\n<p>아래는 구현한 웹사이트에서 각 팀별로 번역 작업을 하는 1차 결과입니다.</p>\n<h3 id=\"teama\" style=\"position:relative;\"><a href=\"#teama\" aria-label=\"teama permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamA</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamA-web.gif\" alt=\"translate-teamA-web-example\"></p>\n<ul>\n<li>TeamA (<code class=\"language-text\">locize</code> 를 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamA를 선택합니다.</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다. (특수문자로만 이루어져서는 안 됩니다.)</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>복사하기 버튼을 눌러 클립보드에 복사하고 <code class=\"language-text\">locize</code> 에 붙여넣습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"teamb\" style=\"position:relative;\"><a href=\"#teamb\" aria-label=\"teamb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamB</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamB-web.gif\" alt=\"translate-teamB-web-example\"></p>\n<ul>\n<li>TeamB (<code class=\"language-text\">json</code> 파일을 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamB를 선택합니다.</li>\n<li>언어 파일이 위치한 폴더의 경로를 입력하지 않았었다면, 파일의 경로를 입력합니다.\n<ul>\n<li>입력한 경로에 <code class=\"language-text\">language.json</code> 파일이 존재하지 않는다면 저장되지 않습니다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">json</code> 파일에 추가할 텍스트를 입력합니다.\n<ul>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다.</li>\n</ul>\n</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>‘각 언어별 json 파일에 저장’ 버튼을 눌러 각 <code class=\"language-text\">json</code> 파일에 추가합니다.</li>\n</ul>\n</li>\n</ul>\n<p>일단 생각한대로 구현은 했습니다. <code class=\"language-text\">locize</code> 를 사용하는 TeamA의 경우에는 번역 작업이 편해진 것 같습니\n다. 하지만 <code class=\"language-text\">json</code> 파일을 사용하는 TeamB의 경우에는 번역 작업을 하려면 여전히 번거롭다고 느껴졌습니다\n. 번역 작업을 편하게 하기 위해 웹 사이트 주소를 알아야 하는 것은 물론, 팀을 선택하고 언어 파일 경로\n를 설정해야 했죠.</p>\n<h2 id=\"차라리-노드-스크립트로-만들어-더욱-편하게-사용하자\" style=\"position:relative;\"><a href=\"#%EC%B0%A8%EB%9D%BC%EB%A6%AC-%EB%85%B8%EB%93%9C-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%8D%94%EC%9A%B1-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90\" aria-label=\"차라리 노드 스크립트로 만들어 더욱 편하게 사용하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>차라리 노드 스크립트로 만들어 더욱 편하게 사용하자</h2>\n<p>언어 파일 경로를 설정하는 과정조차 없애고 싶었습니다. 그래서 TeamB의 경우에는 이 웹 사이트가 아닌,\n프로젝트에서 node script를 실행해 번역 작업을 더 간편하게 할 수 있게 방식을 변경하기로 결정했습니다.\n이렇게 하면 웹사이트의 주소를 알지 않아도 되고 필요한 기능만 명확히 수행할 것 같았습니다.</p>\n<p>간단하게 스크립트를 만들어 보겠습니다.</p>\n<p>먼저, 사용자에게서 터미널에서 key와 value를 입력받아야 합니다. 이 정보들을 입력받기 위해\n<a href=\"https://www.npmjs.com/package/inquirer\">inquirer.js</a> 라이브러리를 사용하겠습니다. <code class=\"language-text\">inquirer.js</code> 는\n터미널에서 다양한 UI로 사용자의 입력을 받거나, 출력해주는 라이브러리입니다. 아래 사진을 보시면 어떤\n느낌인지 감이 잡히실 겁니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 692px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAn0lEQVR42jWOwQqEIBCGe45tOwhmbLaupGmaQXSopMtSSNHB93+MHYL9DsPwzz/zT9J1XVmW1lrOuRCibVuttTFGKQUKNJRSxhiIwzDAtO/7PM9RxYlyyXVd4AshjOO4LMtxHNu2Qd333Tl3nue6rrAzTZP3/nsTY0SvN/6IpGkaQkhd19UNHBJ/4CMpJWRCFMYYIQSGoijmec6eaZY+fs09J+uMubsAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"inquirer-example\"\n        title=\"\"\n        src=\"/static/1683074758696.817115529904/91e7e/inquirer-example.png\"\n        srcset=\"/static/1683074758696.817115529904/63868/inquirer-example.png 250w,\n/static/1683074758696.817115529904/0b533/inquirer-example.png 500w,\n/static/1683074758696.817115529904/91e7e/inquirer-example.png 692w\"\n        sizes=\"(max-width: 692px) 100vw, 692px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"흐름-정리하기\" style=\"position:relative;\"><a href=\"#%ED%9D%90%EB%A6%84-%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"흐름 정리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>흐름 정리하기</h3>\n<ol>\n<li>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로를 정의합니다.</li>\n<li>사용자로부터 <code class=\"language-text\">key</code>를 입력받습니다.\n<ol>\n<li>값을 입력하지 않거나, 이미 존재하는 <code class=\"language-text\">key</code> 라면 오류 메시지를 반환하고 다시 입력 받습니다.</li>\n<li><code class=\"language-text\">camelCase</code> 가 아니라면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>사용자로부터 <code class=\"language-text\">value</code> 를 입력받습니다.\n<ol>\n<li>값을 입력하지 않으면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가합니다.\n<ol>\n<li>입력받은 <code class=\"language-text\">value</code>를 4개 국어로 번역합니다.</li>\n<li>정의해두었던 <code class=\"language-text\">json</code>파일이 존재하는 폴더 경로를 이용해, 해당 폴더의 하위에 존재하는 모든 언어파\n일들을 가져옵니다. 없다면 오류 메시지를 반환합니다.</li>\n<li>찾은 각 <code class=\"language-text\">json</code> 파일의 문자열을 분석하고, JS 객체로 변환합니다.</li>\n<li>변환한 JS 객체에 전달 받은 <code class=\"language-text\">key</code> 와 번역된 <code class=\"language-text\">value</code>를 추가합니다.</li>\n<li>변경된 JS 객체를 다시 JSON 문자열로 변환해 각 언어 파일에 작성합니다.</li>\n</ol>\n</li>\n<li>결과를 터미널에 출력합니다.</li>\n</ol>\n<p>정리하고 보니 빠르게 스크립트를 구현할 수 있을 것 같네요. 바로 코드로 구현해보겠습니다.</p>\n<h3 id=\"번역할-국가별-언어-코드-및-언어별-json-파일이-존재하는-폴더-경로-정의하기\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%97%AD%ED%95%A0-%EA%B5%AD%EA%B0%80%EB%B3%84-%EC%96%B8%EC%96%B4-%EC%BD%94%EB%93%9C-%EB%B0%8F-%EC%96%B8%EC%96%B4%EB%B3%84-json-%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%A1%B4%EC%9E%AC%ED%95%98%EB%8A%94-%ED%8F%B4%EB%8D%94-%EA%B2%BD%EB%A1%9C-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0\" aria-label=\"번역할 국가별 언어 코드 및 언어별 json 파일이 존재하는 폴더 경로 정의하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로 정의하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 정의한 언어 코드를 이용해 번역을 진행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGE_CODE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ko'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 언어별 json 파일이 존재하는 폴더 경로를 정의합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGES_DIR_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span><span class=\"token function\">cwd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'libs'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'locales'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'languages'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"사용자로부터-key와-value를-입력받기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90%EB%A1%9C%EB%B6%80%ED%84%B0-key%EC%99%80-value%EB%A5%BC-%EC%9E%85%EB%A0%A5%EB%B0%9B%EA%B8%B0\" aria-label=\"사용자로부터 key와 value를 입력받기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용자로부터 <code class=\"language-text\">key</code>와 <code class=\"language-text\">value</code>를 입력받기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 각 json 파일에 전달된 키가 존재하는지 검증합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">keyExistsInLangFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> convertedLanguageCode <span class=\"token operator\">=</span> <span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n          chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">The key '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">' already exists in '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json'.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNil</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isEmptyString</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">isNil</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> value<span class=\"token operator\">?.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 사용자에게 key와 value 값을 입력하라는 메시지를 표시합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">promptTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> key <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token function\">keyExistsInLangFiles</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> inputKey <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'key'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation key in camelCase:'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">validate</span><span class=\"token operator\">:</span> validateCamelCase<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    key <span class=\"token operator\">=</span> inputKey<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation value:'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">validate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token string\">'value cannot be empty. Please enter again:'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">inquirer</code> 라이브러리를 활용해 입력받도록 합니다. <code class=\"language-text\">type</code> 속성은 프롬프트의 유형을 정의합니다. input\ntype은 사용자에게서 문자열을 입력 받습니다. 그리고 <code class=\"language-text\">validate</code> 속성을 통해 사용자의 input 값에 제약을\n걸어줍니다.</p>\n<h3 id=\"각-언어-파일에-key-value를-추가하기\" style=\"position:relative;\"><a href=\"#%EA%B0%81-%EC%96%B8%EC%96%B4-%ED%8C%8C%EC%9D%BC%EC%97%90-key-value%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"각 언어 파일에 key value를 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 입력 받은 값을 번역하고 번역된 값을 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translateText</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token punctuation\">,</span> targetLanguage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://translation.googleapis.com/language/translate/v2'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">q</span><span class=\"token operator\">:</span> text<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> targetLanguage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token constant\">GOOGLE_TRANSLATE_API_KEY</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>translations<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>translatedText<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 전달받은 언어 코드에 해당하는 json 언어 파일을 찾아서 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">findLanguageFile</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">languageCode</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// `recursive-readdir` 라이브러리에서 제공하는 함수입니다.</span>\n  <span class=\"token comment\">// 해당 하위 디렉터리의 모든 파일을 재귀적으로 나열합니다.</span>\n  <span class=\"token keyword\">const</span> files <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">recursive</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> files<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> path<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>languageFile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Language file for </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> not found.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> languageFile<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 각 언어 파일에 키와 번역 값을 추가합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> translatedValue <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">translateText</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">findLanguageFile</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    translations<span class=\"token punctuation\">[</span>languageCode<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> translations<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"전체-번역-프로세스-실행하기\" style=\"position:relative;\"><a href=\"#%EC%A0%84%EC%B2%B4-%EB%B2%88%EC%97%AD-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"전체 번역 프로세스 실행하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>전체 번역 프로세스 실행하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 전체 번역 프로세스를 실행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promptTranslation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">addTranslation</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token string\">'번역 결과: '</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>translations<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Translation added to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">translate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 구현한 스크립트를 실행해보겠습니다. 아래는 스크립트 실행 결과입니다.</p>\n<p><img src=\"/images/new-team-productivity/translate-teamB-script.gif\" alt=\"translate-teamB-script.gif\"></p>\n<ul>\n<li><code class=\"language-text\">npm run translate</code> 명령어를 실행합니다.</li>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역을 원하는 텍스트를 입력 후, 엔터를 누릅니다.</li>\n<li>번역한 결과가 각 <code class=\"language-text\">json</code> 파일의 마지막 라인에 자동으로 추가되며 포맷팅을 실행합니다.</li>\n</ul>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByUlEQVR42o2QS2/TQBSF/S9oXn6MXzPjedjjcZzEebpOXwlQIYpKu0KlbGGP2FRq1/0ViBViwZIfx3WMsmjTCuno6uja38ycY8hiH4lskpHjIlTM75iuaXs9q56NwG+13TTT8KkMIpnEMlNScIGJIJEICcO0NiSSIeG1p7DkW1EWBzgyCI+FykOmLC9CIfMI94jwMEc+QR52fQrTC6gfUnez2SxrY6PACLgKhG7ZwQvT37N8MC0nrNV1Wh1rq3bXfqBOzzFkolM9EFKptI8JMy0E6ploE89vQnZNBL8+loEpX+wfTOfVbLEsJgvdH8oki1UfZiQUGC5T6GY3HPFE6RwqaQRNYMoI5SCXyEikAWY7yRoWsa4OjvqDQumBjHWssjTVSZzAkfAJioHAT8LQZJaPgIHwEY/hZsokvDYfjplIoFJ4juX4TUMP4WFRLg9fzxbHSToejMp5eTKZHToubnct6KnRkzefrM/enV9dXX/+/uPn1293q1cX7y+vQyJbHfMZ7B98tHr75uzDx09ffv3+c3N7//L08vwCYPFf8HQ6X69Pq+U6y+ejcVVWK4iAPALPfp6sYa3KUCg3gJA2FLvXNkE763kM/wUP7og3R7wHKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"translate-slack-reaction.png\"\n        title=\"\"\n        src=\"/static/1692836624195.603146242730/00d43/translate-slack-reaction.png\"\n        srcset=\"/static/1692836624195.603146242730/63868/translate-slack-reaction.png 250w,\n/static/1692836624195.603146242730/0b533/translate-slack-reaction.png 500w,\n/static/1692836624195.603146242730/00d43/translate-slack-reaction.png 1000w,\n/static/1692836624195.603146242730/aa440/translate-slack-reaction.png 1500w,\n/static/1692836624195.603146242730/e8950/translate-slack-reaction.png 2000w,\n/static/1692836624195.603146242730/922e6/translate-slack-reaction.png 2140w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>작업 이후 좋은 반응과 함께 번거롭던 번역 작업이 편해졌다는 의견이 많았습니다. 여러 고민을 거쳐 만든\n보람이 있었죠. 이렇게 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있었습니다. 이제 번역 업\n무에서 발생하는 시간을 크게 줄일 수 있게 되었습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://nodejs.org/api/fs.html\">https://nodejs.org/api/fs.html</a></li>\n<li><a href=\"https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/\">https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/</a></li>\n</ul>",
      "%EB%A7%88%EB%AC%B4%EB%A6%AC#마무리": "<h2 id=\"새로운-팀에-합류한-이후-했던-것-중-가장-비효율적인-업무\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%8C%80%EC%97%90-%ED%95%A9%EB%A5%98%ED%95%9C-%EC%9D%B4%ED%9B%84-%ED%96%88%EB%8D%98-%EA%B2%83-%EC%A4%91-%EA%B0%80%EC%9E%A5-%EB%B9%84%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%97%85%EB%AC%B4\" aria-label=\"새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무</h2>\n<h3 id=\"너무나도-번거로운-번역-작업\" style=\"position:relative;\"><a href=\"#%EB%84%88%EB%AC%B4%EB%82%98%EB%8F%84-%EB%B2%88%EA%B1%B0%EB%A1%9C%EC%9A%B4-%EB%B2%88%EC%97%AD-%EC%9E%91%EC%97%85\" aria-label=\"너무나도 번거로운 번역 작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>너무나도 번거로운 번역 작업</h3>\n<p>새로 합류한 팀의 프로젝트에서는 총 4개 국어(한국어, 영어, 일본어, 베트남어)를 지원해야 했습니다.\n<code class=\"language-text\">ko.lang.json</code> 또는 <code class=\"language-text\">en.lang.json</code> 이런식으로 이름을 짖고 <code class=\"language-text\">json</code> 파일 형식으로 관리하고 있었습니다.</p>\n<p>따로 번역 작업을 해주시는 분은 없고, 그냥 구글 번역기를 통해 얻은 값을 각 <code class=\"language-text\">json</code> 파일에 추가해서 다\n국어를 지원하고 있었죠.</p>\n<p>로직을 작성해나가며 하나하나 번역기를 돌리고 각 <code class=\"language-text\">json</code> 파일에 추가하는 작업은 보통 귀찮은 작업이 아\n니었습니다.</p>\n<h3 id=\"손수-작업의-한계\" style=\"position:relative;\"><a href=\"#%EC%86%90%EC%88%98-%EC%9E%91%EC%97%85%EC%9D%98-%ED%95%9C%EA%B3%84\" aria-label=\"손수 작업의 한계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>손수 작업의 한계</h3>\n<p>일일이 번역할 문구를 복사해 4개 국어로 번역하고, 번역된 문구를 다시 각각 복사해 4개의 <code class=\"language-text\">json</code> 파일에\n추가하는 과정이 필요합니다. 또한 여러 개발자가 작업하다보니 <code class=\"language-text\">key</code> 네이밍 문법도 정리가 안 되어 있었\n습니다. 어떤 것은 <code class=\"language-text\">camelCase</code>, 또 어떤 것은 <code class=\"language-text\">snake_case</code>로 되어 있었습니다. 워낙 바쁘다보면\n<code class=\"language-text\">en.lang.json</code> 파일에 한국어를 추가하는 실수를 범할 수도 있겠죠. 이 과정에서 많은 시간이 소모되고 실\n수를 하지 않는다는 보장이 없죠.</p>\n<p>이런 새로운 기능을 작업할때마다 반복되다 보니 어느 세월에 문구를 복사해서 변역하고 또 번역한 값을 복\n사해서 각 언어 파일에 키값과 함께 추가하고 로직은 언제 다 구현하지? 라는 마음이 들었습니다. 이 과정\n을 개선하기로 마음 먹었죠.</p>\n<h3 id=\"어차피-번역기를-사용해서-할거라면-스크립트를-작성해서-개선할-수-있지-않을까\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EC%B0%A8%ED%94%BC-%EB%B2%88%EC%97%AD%EA%B8%B0%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%ED%95%A0%EA%B1%B0%EB%9D%BC%EB%A9%B4-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%84%9C-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%A7%80-%EC%95%8A%EC%9D%84%EA%B9%8C\" aria-label=\"어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까?</h3>\n<p>구글 번역기를 사용하므로 google에서 제공하는 번역 API를 이용해 한 번에 4개의 언어로 번역해주고 파일\n에 자동으로 추가해주는 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있을 것 같았습니다.</p>\n<p>개발자가 번역할 문구와 키값을 입력하면 자동으로 4개 국어로 번역해주고 매칭되는 언어별 <code class=\"language-text\">json</code> 파일의\n마지막 줄에 추가해주는 방법이 좋을 것 같습니다. 또한 key 값도 입력받을 때 정해둔 네이밍 문법에 일치\n해야 하기 때문에 통일되는 이점도 동시에 따라 왔죠. 여기서 네이밍 문법은 애초에 정해져 있지 않았기 때\n문에 팀원분들께 미팅 요청을 드렸고 <code class=\"language-text\">camelCase</code>로 통일하기로 결정이 되었죠. 그리고 번역 값이 100프로\n정확할 순 없으니 번역 결과값을 받아 수정할 수 있도록 하면 더욱 좋겠죠.</p>\n<p>이제 생각한 것을 편하게 사용할 수 있도록 구현하면 되겠습니다.</p>\n<h2 id=\"모든-팀들이-편하게-사용하도록-웹-사이트로-만들자\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%A0-%ED%8C%80%EB%93%A4%EC%9D%B4-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8F%84%EB%A1%9D-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%9E%90\" aria-label=\"모든 팀들이 편하게 사용하도록 웹 사이트로 만들자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모든 팀들이 편하게 사용하도록 웹 사이트로 만들자</h2>\n<p>‘위 스크립트를 만들어도 어떻게 해야 팀원들이 쉽게 사용할 수 있을까?‘라는 고민이 들었습니다. 익숙한웹\n사이트에서 최대한 직관적이고 간단하게 구현해 각 팀별로 원하는 목적을 쉽게 달성할 수 있도록 구현하고\n싶었습니다. 다른 팀에서도 <code class=\"language-text\">json</code> 파일을 사용하진 않지만 구글 번역기를 이용해서 4개 국어를 지원하고\n있었기 때문에 이왕 만드는 거 다른 팀원분에게도 도움이 되고 싶었기 때문에 첫 진입 시, 팀을 선택하고\n각 팀별로 다른 화면을 보여주도록 플로우를 그렸죠.</p>\n<p>예로 A라는 팀에서는 <a href=\"https://locize.com/\">locize</a>라는 번역 관리 시스템을 사용해서 관리 중이었습니다.\nlocize를 사용하면 번역할 문구를 언어별로 locize에 붙여넣으면 됩니다. 따라서 <code class=\"language-text\">json</code> 파일을 사용하지않\n으므로 4개 국어로 번역하고 각 번역 값을 확인 후, 수정하고 복사할 수 있도록 하면 좋겠죠.</p>\n<p>제가 속해 있는 B 팀의 경우에는 번역한 값들을 각 언어별 <code class=\"language-text\">json</code> 파일에 key-value 형식으로 추가해줘야합\n니다. 따라서 key와 value를 입력받고 각 <code class=\"language-text\">json</code> 파일에 추가해주면 많이 편해질 겁니다.</p>\n<p>아래는 구현한 웹사이트에서 각 팀별로 번역 작업을 하는 1차 결과입니다.</p>\n<h3 id=\"teama\" style=\"position:relative;\"><a href=\"#teama\" aria-label=\"teama permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamA</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamA-web.gif\" alt=\"translate-teamA-web-example\"></p>\n<ul>\n<li>TeamA (<code class=\"language-text\">locize</code> 를 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamA를 선택합니다.</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다. (특수문자로만 이루어져서는 안 됩니다.)</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>복사하기 버튼을 눌러 클립보드에 복사하고 <code class=\"language-text\">locize</code> 에 붙여넣습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"teamb\" style=\"position:relative;\"><a href=\"#teamb\" aria-label=\"teamb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamB</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamB-web.gif\" alt=\"translate-teamB-web-example\"></p>\n<ul>\n<li>TeamB (<code class=\"language-text\">json</code> 파일을 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamB를 선택합니다.</li>\n<li>언어 파일이 위치한 폴더의 경로를 입력하지 않았었다면, 파일의 경로를 입력합니다.\n<ul>\n<li>입력한 경로에 <code class=\"language-text\">language.json</code> 파일이 존재하지 않는다면 저장되지 않습니다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">json</code> 파일에 추가할 텍스트를 입력합니다.\n<ul>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다.</li>\n</ul>\n</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>‘각 언어별 json 파일에 저장’ 버튼을 눌러 각 <code class=\"language-text\">json</code> 파일에 추가합니다.</li>\n</ul>\n</li>\n</ul>\n<p>일단 생각한대로 구현은 했습니다. <code class=\"language-text\">locize</code> 를 사용하는 TeamA의 경우에는 번역 작업이 편해진 것 같습니\n다. 하지만 <code class=\"language-text\">json</code> 파일을 사용하는 TeamB의 경우에는 번역 작업을 하려면 여전히 번거롭다고 느껴졌습니다\n. 번역 작업을 편하게 하기 위해 웹 사이트 주소를 알아야 하는 것은 물론, 팀을 선택하고 언어 파일 경로\n를 설정해야 했죠.</p>\n<h2 id=\"차라리-노드-스크립트로-만들어-더욱-편하게-사용하자\" style=\"position:relative;\"><a href=\"#%EC%B0%A8%EB%9D%BC%EB%A6%AC-%EB%85%B8%EB%93%9C-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%8D%94%EC%9A%B1-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90\" aria-label=\"차라리 노드 스크립트로 만들어 더욱 편하게 사용하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>차라리 노드 스크립트로 만들어 더욱 편하게 사용하자</h2>\n<p>언어 파일 경로를 설정하는 과정조차 없애고 싶었습니다. 그래서 TeamB의 경우에는 이 웹 사이트가 아닌,\n프로젝트에서 node script를 실행해 번역 작업을 더 간편하게 할 수 있게 방식을 변경하기로 결정했습니다.\n이렇게 하면 웹사이트의 주소를 알지 않아도 되고 필요한 기능만 명확히 수행할 것 같았습니다.</p>\n<p>간단하게 스크립트를 만들어 보겠습니다.</p>\n<p>먼저, 사용자에게서 터미널에서 key와 value를 입력받아야 합니다. 이 정보들을 입력받기 위해\n<a href=\"https://www.npmjs.com/package/inquirer\">inquirer.js</a> 라이브러리를 사용하겠습니다. <code class=\"language-text\">inquirer.js</code> 는\n터미널에서 다양한 UI로 사용자의 입력을 받거나, 출력해주는 라이브러리입니다. 아래 사진을 보시면 어떤\n느낌인지 감이 잡히실 겁니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 692px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAn0lEQVR42jWOwQqEIBCGe45tOwhmbLaupGmaQXSopMtSSNHB93+MHYL9DsPwzz/zT9J1XVmW1lrOuRCibVuttTFGKQUKNJRSxhiIwzDAtO/7PM9RxYlyyXVd4AshjOO4LMtxHNu2Qd333Tl3nue6rrAzTZP3/nsTY0SvN/6IpGkaQkhd19UNHBJ/4CMpJWRCFMYYIQSGoijmec6eaZY+fs09J+uMubsAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"inquirer-example\"\n        title=\"\"\n        src=\"/static/1683074758696.817115529904/91e7e/inquirer-example.png\"\n        srcset=\"/static/1683074758696.817115529904/63868/inquirer-example.png 250w,\n/static/1683074758696.817115529904/0b533/inquirer-example.png 500w,\n/static/1683074758696.817115529904/91e7e/inquirer-example.png 692w\"\n        sizes=\"(max-width: 692px) 100vw, 692px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"흐름-정리하기\" style=\"position:relative;\"><a href=\"#%ED%9D%90%EB%A6%84-%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"흐름 정리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>흐름 정리하기</h3>\n<ol>\n<li>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로를 정의합니다.</li>\n<li>사용자로부터 <code class=\"language-text\">key</code>를 입력받습니다.\n<ol>\n<li>값을 입력하지 않거나, 이미 존재하는 <code class=\"language-text\">key</code> 라면 오류 메시지를 반환하고 다시 입력 받습니다.</li>\n<li><code class=\"language-text\">camelCase</code> 가 아니라면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>사용자로부터 <code class=\"language-text\">value</code> 를 입력받습니다.\n<ol>\n<li>값을 입력하지 않으면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가합니다.\n<ol>\n<li>입력받은 <code class=\"language-text\">value</code>를 4개 국어로 번역합니다.</li>\n<li>정의해두었던 <code class=\"language-text\">json</code>파일이 존재하는 폴더 경로를 이용해, 해당 폴더의 하위에 존재하는 모든 언어파\n일들을 가져옵니다. 없다면 오류 메시지를 반환합니다.</li>\n<li>찾은 각 <code class=\"language-text\">json</code> 파일의 문자열을 분석하고, JS 객체로 변환합니다.</li>\n<li>변환한 JS 객체에 전달 받은 <code class=\"language-text\">key</code> 와 번역된 <code class=\"language-text\">value</code>를 추가합니다.</li>\n<li>변경된 JS 객체를 다시 JSON 문자열로 변환해 각 언어 파일에 작성합니다.</li>\n</ol>\n</li>\n<li>결과를 터미널에 출력합니다.</li>\n</ol>\n<p>정리하고 보니 빠르게 스크립트를 구현할 수 있을 것 같네요. 바로 코드로 구현해보겠습니다.</p>\n<h3 id=\"번역할-국가별-언어-코드-및-언어별-json-파일이-존재하는-폴더-경로-정의하기\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%97%AD%ED%95%A0-%EA%B5%AD%EA%B0%80%EB%B3%84-%EC%96%B8%EC%96%B4-%EC%BD%94%EB%93%9C-%EB%B0%8F-%EC%96%B8%EC%96%B4%EB%B3%84-json-%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%A1%B4%EC%9E%AC%ED%95%98%EB%8A%94-%ED%8F%B4%EB%8D%94-%EA%B2%BD%EB%A1%9C-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0\" aria-label=\"번역할 국가별 언어 코드 및 언어별 json 파일이 존재하는 폴더 경로 정의하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로 정의하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 정의한 언어 코드를 이용해 번역을 진행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGE_CODE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ko'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 언어별 json 파일이 존재하는 폴더 경로를 정의합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGES_DIR_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span><span class=\"token function\">cwd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'libs'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'locales'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'languages'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"사용자로부터-key와-value를-입력받기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90%EB%A1%9C%EB%B6%80%ED%84%B0-key%EC%99%80-value%EB%A5%BC-%EC%9E%85%EB%A0%A5%EB%B0%9B%EA%B8%B0\" aria-label=\"사용자로부터 key와 value를 입력받기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용자로부터 <code class=\"language-text\">key</code>와 <code class=\"language-text\">value</code>를 입력받기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 각 json 파일에 전달된 키가 존재하는지 검증합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">keyExistsInLangFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> convertedLanguageCode <span class=\"token operator\">=</span> <span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n          chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">The key '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">' already exists in '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json'.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNil</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isEmptyString</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">isNil</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> value<span class=\"token operator\">?.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 사용자에게 key와 value 값을 입력하라는 메시지를 표시합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">promptTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> key <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token function\">keyExistsInLangFiles</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> inputKey <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'key'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation key in camelCase:'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">validate</span><span class=\"token operator\">:</span> validateCamelCase<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    key <span class=\"token operator\">=</span> inputKey<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation value:'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">validate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token string\">'value cannot be empty. Please enter again:'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">inquirer</code> 라이브러리를 활용해 입력받도록 합니다. <code class=\"language-text\">type</code> 속성은 프롬프트의 유형을 정의합니다. input\ntype은 사용자에게서 문자열을 입력 받습니다. 그리고 <code class=\"language-text\">validate</code> 속성을 통해 사용자의 input 값에 제약을\n걸어줍니다.</p>\n<h3 id=\"각-언어-파일에-key-value를-추가하기\" style=\"position:relative;\"><a href=\"#%EA%B0%81-%EC%96%B8%EC%96%B4-%ED%8C%8C%EC%9D%BC%EC%97%90-key-value%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"각 언어 파일에 key value를 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 입력 받은 값을 번역하고 번역된 값을 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translateText</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token punctuation\">,</span> targetLanguage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://translation.googleapis.com/language/translate/v2'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">q</span><span class=\"token operator\">:</span> text<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> targetLanguage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token constant\">GOOGLE_TRANSLATE_API_KEY</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>translations<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>translatedText<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 전달받은 언어 코드에 해당하는 json 언어 파일을 찾아서 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">findLanguageFile</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">languageCode</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// `recursive-readdir` 라이브러리에서 제공하는 함수입니다.</span>\n  <span class=\"token comment\">// 해당 하위 디렉터리의 모든 파일을 재귀적으로 나열합니다.</span>\n  <span class=\"token keyword\">const</span> files <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">recursive</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> files<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> path<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>languageFile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Language file for </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> not found.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> languageFile<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 각 언어 파일에 키와 번역 값을 추가합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> translatedValue <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">translateText</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">findLanguageFile</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    translations<span class=\"token punctuation\">[</span>languageCode<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> translations<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"전체-번역-프로세스-실행하기\" style=\"position:relative;\"><a href=\"#%EC%A0%84%EC%B2%B4-%EB%B2%88%EC%97%AD-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"전체 번역 프로세스 실행하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>전체 번역 프로세스 실행하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 전체 번역 프로세스를 실행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promptTranslation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">addTranslation</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token string\">'번역 결과: '</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>translations<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Translation added to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">translate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 구현한 스크립트를 실행해보겠습니다. 아래는 스크립트 실행 결과입니다.</p>\n<p><img src=\"/images/new-team-productivity/translate-teamB-script.gif\" alt=\"translate-teamB-script.gif\"></p>\n<ul>\n<li><code class=\"language-text\">npm run translate</code> 명령어를 실행합니다.</li>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역을 원하는 텍스트를 입력 후, 엔터를 누릅니다.</li>\n<li>번역한 결과가 각 <code class=\"language-text\">json</code> 파일의 마지막 라인에 자동으로 추가되며 포맷팅을 실행합니다.</li>\n</ul>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByUlEQVR42o2QS2/TQBSF/S9oXn6MXzPjedjjcZzEebpOXwlQIYpKu0KlbGGP2FRq1/0ViBViwZIfx3WMsmjTCuno6uja38ycY8hiH4lskpHjIlTM75iuaXs9q56NwG+13TTT8KkMIpnEMlNScIGJIJEICcO0NiSSIeG1p7DkW1EWBzgyCI+FykOmLC9CIfMI94jwMEc+QR52fQrTC6gfUnez2SxrY6PACLgKhG7ZwQvT37N8MC0nrNV1Wh1rq3bXfqBOzzFkolM9EFKptI8JMy0E6ploE89vQnZNBL8+loEpX+wfTOfVbLEsJgvdH8oki1UfZiQUGC5T6GY3HPFE6RwqaQRNYMoI5SCXyEikAWY7yRoWsa4OjvqDQumBjHWssjTVSZzAkfAJioHAT8LQZJaPgIHwEY/hZsokvDYfjplIoFJ4juX4TUMP4WFRLg9fzxbHSToejMp5eTKZHToubnct6KnRkzefrM/enV9dXX/+/uPn1293q1cX7y+vQyJbHfMZ7B98tHr75uzDx09ffv3+c3N7//L08vwCYPFf8HQ6X69Pq+U6y+ejcVVWK4iAPALPfp6sYa3KUCg3gJA2FLvXNkE763kM/wUP7og3R7wHKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"translate-slack-reaction.png\"\n        title=\"\"\n        src=\"/static/1692836624195.603146242730/00d43/translate-slack-reaction.png\"\n        srcset=\"/static/1692836624195.603146242730/63868/translate-slack-reaction.png 250w,\n/static/1692836624195.603146242730/0b533/translate-slack-reaction.png 500w,\n/static/1692836624195.603146242730/00d43/translate-slack-reaction.png 1000w,\n/static/1692836624195.603146242730/aa440/translate-slack-reaction.png 1500w,\n/static/1692836624195.603146242730/e8950/translate-slack-reaction.png 2000w,\n/static/1692836624195.603146242730/922e6/translate-slack-reaction.png 2140w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>작업 이후 좋은 반응과 함께 번거롭던 번역 작업이 편해졌다는 의견이 많았습니다. 여러 고민을 거쳐 만든\n보람이 있었죠. 이렇게 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있었습니다. 이제 번역 업\n무에서 발생하는 시간을 크게 줄일 수 있게 되었습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://nodejs.org/api/fs.html\">https://nodejs.org/api/fs.html</a></li>\n<li><a href=\"https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/\">https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/</a></li>\n</ul>",
      "%EC%B0%B8%EA%B3%A0#참고": "<h2 id=\"새로운-팀에-합류한-이후-했던-것-중-가장-비효율적인-업무\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-%ED%8C%80%EC%97%90-%ED%95%A9%EB%A5%98%ED%95%9C-%EC%9D%B4%ED%9B%84-%ED%96%88%EB%8D%98-%EA%B2%83-%EC%A4%91-%EA%B0%80%EC%9E%A5-%EB%B9%84%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%97%85%EB%AC%B4\" aria-label=\"새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새로운 팀에 합류한 이후 했던 것 중 가장 비효율적인 업무</h2>\n<h3 id=\"너무나도-번거로운-번역-작업\" style=\"position:relative;\"><a href=\"#%EB%84%88%EB%AC%B4%EB%82%98%EB%8F%84-%EB%B2%88%EA%B1%B0%EB%A1%9C%EC%9A%B4-%EB%B2%88%EC%97%AD-%EC%9E%91%EC%97%85\" aria-label=\"너무나도 번거로운 번역 작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>너무나도 번거로운 번역 작업</h3>\n<p>새로 합류한 팀의 프로젝트에서는 총 4개 국어(한국어, 영어, 일본어, 베트남어)를 지원해야 했습니다.\n<code class=\"language-text\">ko.lang.json</code> 또는 <code class=\"language-text\">en.lang.json</code> 이런식으로 이름을 짖고 <code class=\"language-text\">json</code> 파일 형식으로 관리하고 있었습니다.</p>\n<p>따로 번역 작업을 해주시는 분은 없고, 그냥 구글 번역기를 통해 얻은 값을 각 <code class=\"language-text\">json</code> 파일에 추가해서 다\n국어를 지원하고 있었죠.</p>\n<p>로직을 작성해나가며 하나하나 번역기를 돌리고 각 <code class=\"language-text\">json</code> 파일에 추가하는 작업은 보통 귀찮은 작업이 아\n니었습니다.</p>\n<h3 id=\"손수-작업의-한계\" style=\"position:relative;\"><a href=\"#%EC%86%90%EC%88%98-%EC%9E%91%EC%97%85%EC%9D%98-%ED%95%9C%EA%B3%84\" aria-label=\"손수 작업의 한계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>손수 작업의 한계</h3>\n<p>일일이 번역할 문구를 복사해 4개 국어로 번역하고, 번역된 문구를 다시 각각 복사해 4개의 <code class=\"language-text\">json</code> 파일에\n추가하는 과정이 필요합니다. 또한 여러 개발자가 작업하다보니 <code class=\"language-text\">key</code> 네이밍 문법도 정리가 안 되어 있었\n습니다. 어떤 것은 <code class=\"language-text\">camelCase</code>, 또 어떤 것은 <code class=\"language-text\">snake_case</code>로 되어 있었습니다. 워낙 바쁘다보면\n<code class=\"language-text\">en.lang.json</code> 파일에 한국어를 추가하는 실수를 범할 수도 있겠죠. 이 과정에서 많은 시간이 소모되고 실\n수를 하지 않는다는 보장이 없죠.</p>\n<p>이런 새로운 기능을 작업할때마다 반복되다 보니 어느 세월에 문구를 복사해서 변역하고 또 번역한 값을 복\n사해서 각 언어 파일에 키값과 함께 추가하고 로직은 언제 다 구현하지? 라는 마음이 들었습니다. 이 과정\n을 개선하기로 마음 먹었죠.</p>\n<h3 id=\"어차피-번역기를-사용해서-할거라면-스크립트를-작성해서-개선할-수-있지-않을까\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EC%B0%A8%ED%94%BC-%EB%B2%88%EC%97%AD%EA%B8%B0%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%ED%95%A0%EA%B1%B0%EB%9D%BC%EB%A9%B4-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%84%9C-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%88%98-%EC%9E%88%EC%A7%80-%EC%95%8A%EC%9D%84%EA%B9%8C\" aria-label=\"어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어차피 번역기를 사용해서 할거라면 스크립트를 작성해서 개선할 수 있지 않을까?</h3>\n<p>구글 번역기를 사용하므로 google에서 제공하는 번역 API를 이용해 한 번에 4개의 언어로 번역해주고 파일\n에 자동으로 추가해주는 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있을 것 같았습니다.</p>\n<p>개발자가 번역할 문구와 키값을 입력하면 자동으로 4개 국어로 번역해주고 매칭되는 언어별 <code class=\"language-text\">json</code> 파일의\n마지막 줄에 추가해주는 방법이 좋을 것 같습니다. 또한 key 값도 입력받을 때 정해둔 네이밍 문법에 일치\n해야 하기 때문에 통일되는 이점도 동시에 따라 왔죠. 여기서 네이밍 문법은 애초에 정해져 있지 않았기 때\n문에 팀원분들께 미팅 요청을 드렸고 <code class=\"language-text\">camelCase</code>로 통일하기로 결정이 되었죠. 그리고 번역 값이 100프로\n정확할 순 없으니 번역 결과값을 받아 수정할 수 있도록 하면 더욱 좋겠죠.</p>\n<p>이제 생각한 것을 편하게 사용할 수 있도록 구현하면 되겠습니다.</p>\n<h2 id=\"모든-팀들이-편하게-사용하도록-웹-사이트로-만들자\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%A0-%ED%8C%80%EB%93%A4%EC%9D%B4-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8F%84%EB%A1%9D-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%9E%90\" aria-label=\"모든 팀들이 편하게 사용하도록 웹 사이트로 만들자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모든 팀들이 편하게 사용하도록 웹 사이트로 만들자</h2>\n<p>‘위 스크립트를 만들어도 어떻게 해야 팀원들이 쉽게 사용할 수 있을까?‘라는 고민이 들었습니다. 익숙한웹\n사이트에서 최대한 직관적이고 간단하게 구현해 각 팀별로 원하는 목적을 쉽게 달성할 수 있도록 구현하고\n싶었습니다. 다른 팀에서도 <code class=\"language-text\">json</code> 파일을 사용하진 않지만 구글 번역기를 이용해서 4개 국어를 지원하고\n있었기 때문에 이왕 만드는 거 다른 팀원분에게도 도움이 되고 싶었기 때문에 첫 진입 시, 팀을 선택하고\n각 팀별로 다른 화면을 보여주도록 플로우를 그렸죠.</p>\n<p>예로 A라는 팀에서는 <a href=\"https://locize.com/\">locize</a>라는 번역 관리 시스템을 사용해서 관리 중이었습니다.\nlocize를 사용하면 번역할 문구를 언어별로 locize에 붙여넣으면 됩니다. 따라서 <code class=\"language-text\">json</code> 파일을 사용하지않\n으므로 4개 국어로 번역하고 각 번역 값을 확인 후, 수정하고 복사할 수 있도록 하면 좋겠죠.</p>\n<p>제가 속해 있는 B 팀의 경우에는 번역한 값들을 각 언어별 <code class=\"language-text\">json</code> 파일에 key-value 형식으로 추가해줘야합\n니다. 따라서 key와 value를 입력받고 각 <code class=\"language-text\">json</code> 파일에 추가해주면 많이 편해질 겁니다.</p>\n<p>아래는 구현한 웹사이트에서 각 팀별로 번역 작업을 하는 1차 결과입니다.</p>\n<h3 id=\"teama\" style=\"position:relative;\"><a href=\"#teama\" aria-label=\"teama permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamA</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamA-web.gif\" alt=\"translate-teamA-web-example\"></p>\n<ul>\n<li>TeamA (<code class=\"language-text\">locize</code> 를 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamA를 선택합니다.</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다. (특수문자로만 이루어져서는 안 됩니다.)</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>복사하기 버튼을 눌러 클립보드에 복사하고 <code class=\"language-text\">locize</code> 에 붙여넣습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"teamb\" style=\"position:relative;\"><a href=\"#teamb\" aria-label=\"teamb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TeamB</h3>\n<p><img src=\"/images/new-team-productivity/translate-teamB-web.gif\" alt=\"translate-teamB-web-example\"></p>\n<ul>\n<li>TeamB (<code class=\"language-text\">json</code> 파일을 사용하는 팀)\n<ul>\n<li>첫 진입 시, TeamB를 선택합니다.</li>\n<li>언어 파일이 위치한 폴더의 경로를 입력하지 않았었다면, 파일의 경로를 입력합니다.\n<ul>\n<li>입력한 경로에 <code class=\"language-text\">language.json</code> 파일이 존재하지 않는다면 저장되지 않습니다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">json</code> 파일에 추가할 텍스트를 입력합니다.\n<ul>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역할 텍스트를 입력 후, 번역 실행 버튼을 누릅니다.</li>\n</ul>\n</li>\n<li>번역한 결과를 확인합니다.\n<ul>\n<li>결과를 수정하고 싶다면 <code class=\"language-text\">input</code>의 오른쪽에 있는 수정하기 아이콘을 눌러 수정한 뒤 저장합니다.</li>\n</ul>\n</li>\n<li>‘각 언어별 json 파일에 저장’ 버튼을 눌러 각 <code class=\"language-text\">json</code> 파일에 추가합니다.</li>\n</ul>\n</li>\n</ul>\n<p>일단 생각한대로 구현은 했습니다. <code class=\"language-text\">locize</code> 를 사용하는 TeamA의 경우에는 번역 작업이 편해진 것 같습니\n다. 하지만 <code class=\"language-text\">json</code> 파일을 사용하는 TeamB의 경우에는 번역 작업을 하려면 여전히 번거롭다고 느껴졌습니다\n. 번역 작업을 편하게 하기 위해 웹 사이트 주소를 알아야 하는 것은 물론, 팀을 선택하고 언어 파일 경로\n를 설정해야 했죠.</p>\n<h2 id=\"차라리-노드-스크립트로-만들어-더욱-편하게-사용하자\" style=\"position:relative;\"><a href=\"#%EC%B0%A8%EB%9D%BC%EB%A6%AC-%EB%85%B8%EB%93%9C-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%8D%94%EC%9A%B1-%ED%8E%B8%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90\" aria-label=\"차라리 노드 스크립트로 만들어 더욱 편하게 사용하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>차라리 노드 스크립트로 만들어 더욱 편하게 사용하자</h2>\n<p>언어 파일 경로를 설정하는 과정조차 없애고 싶었습니다. 그래서 TeamB의 경우에는 이 웹 사이트가 아닌,\n프로젝트에서 node script를 실행해 번역 작업을 더 간편하게 할 수 있게 방식을 변경하기로 결정했습니다.\n이렇게 하면 웹사이트의 주소를 알지 않아도 되고 필요한 기능만 명확히 수행할 것 같았습니다.</p>\n<p>간단하게 스크립트를 만들어 보겠습니다.</p>\n<p>먼저, 사용자에게서 터미널에서 key와 value를 입력받아야 합니다. 이 정보들을 입력받기 위해\n<a href=\"https://www.npmjs.com/package/inquirer\">inquirer.js</a> 라이브러리를 사용하겠습니다. <code class=\"language-text\">inquirer.js</code> 는\n터미널에서 다양한 UI로 사용자의 입력을 받거나, 출력해주는 라이브러리입니다. 아래 사진을 보시면 어떤\n느낌인지 감이 잡히실 겁니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 692px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAn0lEQVR42jWOwQqEIBCGe45tOwhmbLaupGmaQXSopMtSSNHB93+MHYL9DsPwzz/zT9J1XVmW1lrOuRCibVuttTFGKQUKNJRSxhiIwzDAtO/7PM9RxYlyyXVd4AshjOO4LMtxHNu2Qd333Tl3nue6rrAzTZP3/nsTY0SvN/6IpGkaQkhd19UNHBJ/4CMpJWRCFMYYIQSGoijmec6eaZY+fs09J+uMubsAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"inquirer-example\"\n        title=\"\"\n        src=\"/static/1683074758696.817115529904/91e7e/inquirer-example.png\"\n        srcset=\"/static/1683074758696.817115529904/63868/inquirer-example.png 250w,\n/static/1683074758696.817115529904/0b533/inquirer-example.png 500w,\n/static/1683074758696.817115529904/91e7e/inquirer-example.png 692w\"\n        sizes=\"(max-width: 692px) 100vw, 692px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"흐름-정리하기\" style=\"position:relative;\"><a href=\"#%ED%9D%90%EB%A6%84-%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"흐름 정리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>흐름 정리하기</h3>\n<ol>\n<li>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로를 정의합니다.</li>\n<li>사용자로부터 <code class=\"language-text\">key</code>를 입력받습니다.\n<ol>\n<li>값을 입력하지 않거나, 이미 존재하는 <code class=\"language-text\">key</code> 라면 오류 메시지를 반환하고 다시 입력 받습니다.</li>\n<li><code class=\"language-text\">camelCase</code> 가 아니라면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>사용자로부터 <code class=\"language-text\">value</code> 를 입력받습니다.\n<ol>\n<li>값을 입력하지 않으면 오류 메시지를 반환하고 다시 입력받습니다.</li>\n</ol>\n</li>\n<li>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가합니다.\n<ol>\n<li>입력받은 <code class=\"language-text\">value</code>를 4개 국어로 번역합니다.</li>\n<li>정의해두었던 <code class=\"language-text\">json</code>파일이 존재하는 폴더 경로를 이용해, 해당 폴더의 하위에 존재하는 모든 언어파\n일들을 가져옵니다. 없다면 오류 메시지를 반환합니다.</li>\n<li>찾은 각 <code class=\"language-text\">json</code> 파일의 문자열을 분석하고, JS 객체로 변환합니다.</li>\n<li>변환한 JS 객체에 전달 받은 <code class=\"language-text\">key</code> 와 번역된 <code class=\"language-text\">value</code>를 추가합니다.</li>\n<li>변경된 JS 객체를 다시 JSON 문자열로 변환해 각 언어 파일에 작성합니다.</li>\n</ol>\n</li>\n<li>결과를 터미널에 출력합니다.</li>\n</ol>\n<p>정리하고 보니 빠르게 스크립트를 구현할 수 있을 것 같네요. 바로 코드로 구현해보겠습니다.</p>\n<h3 id=\"번역할-국가별-언어-코드-및-언어별-json-파일이-존재하는-폴더-경로-정의하기\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%97%AD%ED%95%A0-%EA%B5%AD%EA%B0%80%EB%B3%84-%EC%96%B8%EC%96%B4-%EC%BD%94%EB%93%9C-%EB%B0%8F-%EC%96%B8%EC%96%B4%EB%B3%84-json-%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%A1%B4%EC%9E%AC%ED%95%98%EB%8A%94-%ED%8F%B4%EB%8D%94-%EA%B2%BD%EB%A1%9C-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0\" aria-label=\"번역할 국가별 언어 코드 및 언어별 json 파일이 존재하는 폴더 경로 정의하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번역할 국가별 <code class=\"language-text\">언어 코드</code> 및 언어별 <code class=\"language-text\">json</code> 파일이 존재하는 폴더 경로 정의하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 정의한 언어 코드를 이용해 번역을 진행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGE_CODE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ko'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 언어별 json 파일이 존재하는 폴더 경로를 정의합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">LANGUAGES_DIR_PATH</span> <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span><span class=\"token function\">cwd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'libs'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'locales'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'languages'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"사용자로부터-key와-value를-입력받기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90%EB%A1%9C%EB%B6%80%ED%84%B0-key%EC%99%80-value%EB%A5%BC-%EC%9E%85%EB%A0%A5%EB%B0%9B%EA%B8%B0\" aria-label=\"사용자로부터 key와 value를 입력받기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용자로부터 <code class=\"language-text\">key</code>와 <code class=\"language-text\">value</code>를 입력받기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 각 json 파일에 전달된 키가 존재하는지 검증합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">keyExistsInLangFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> convertedLanguageCode <span class=\"token operator\">=</span> <span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n          chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">The key '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">' already exists in '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>convertedLanguageCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json'.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isNil</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> value <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isEmptyString</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">isNil</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> value<span class=\"token operator\">?.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 사용자에게 key와 value 값을 입력하라는 메시지를 표시합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">promptTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> key <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token function\">keyExistsInLangFiles</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> inputKey <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'key'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation key in camelCase:'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">validate</span><span class=\"token operator\">:</span> validateCamelCase<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    key <span class=\"token operator\">=</span> inputKey<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> inquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Enter the translation value:'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">validate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isEmptyString</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token string\">'value cannot be empty. Please enter again:'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">inquirer</code> 라이브러리를 활용해 입력받도록 합니다. <code class=\"language-text\">type</code> 속성은 프롬프트의 유형을 정의합니다. input\ntype은 사용자에게서 문자열을 입력 받습니다. 그리고 <code class=\"language-text\">validate</code> 속성을 통해 사용자의 input 값에 제약을\n걸어줍니다.</p>\n<h3 id=\"각-언어-파일에-key-value를-추가하기\" style=\"position:relative;\"><a href=\"#%EA%B0%81-%EC%96%B8%EC%96%B4-%ED%8C%8C%EC%9D%BC%EC%97%90-key-value%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"각 언어 파일에 key value를 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>각 언어 파일에 <code class=\"language-text\">key-value</code>를 추가하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 입력 받은 값을 번역하고 번역된 값을 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translateText</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">text<span class=\"token punctuation\">,</span> targetLanguage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://translation.googleapis.com/language/translate/v2'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">q</span><span class=\"token operator\">:</span> text<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> targetLanguage<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token constant\">GOOGLE_TRANSLATE_API_KEY</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>translations<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>translatedText<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 전달받은 언어 코드에 해당하는 json 언어 파일을 찾아서 반환합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">findLanguageFile</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">languageCode</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// `recursive-readdir` 라이브러리에서 제공하는 함수입니다.</span>\n  <span class=\"token comment\">// 해당 하위 디렉터리의 모든 파일을 재귀적으로 나열합니다.</span>\n  <span class=\"token keyword\">const</span> files <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">recursive</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGES_DIR_PATH</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> files<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> path<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>languageFile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Language file for </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> not found.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> languageFile<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 각 언어 파일에 키와 번역 값을 추가합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addTranslation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> languageCode <span class=\"token keyword\">of</span> <span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> translatedValue <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">translateText</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageFile <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">findLanguageFile</span><span class=\"token punctuation\">(</span>languageCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> languageContent <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    languageContent<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span>languageFile<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>languageContent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    translations<span class=\"token punctuation\">[</span>languageCode<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> translatedValue<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> translations<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"전체-번역-프로세스-실행하기\" style=\"position:relative;\"><a href=\"#%EC%A0%84%EC%B2%B4-%EB%B2%88%EC%97%AD-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"전체 번역 프로세스 실행하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>전체 번역 프로세스 실행하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 전체 번역 프로세스를 실행합니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">translate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promptTranslation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> translations <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">addTranslation</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token string\">'번역 결과: '</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>translations<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n      chalk<span class=\"token punctuation\">.</span><span class=\"token function\">green</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Translation added to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">convertLanguageCode</span><span class=\"token punctuation\">(</span><span class=\"token constant\">LANGUAGE_CODE</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.lang.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">red</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">translate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 구현한 스크립트를 실행해보겠습니다. 아래는 스크립트 실행 결과입니다.</p>\n<p><img src=\"/images/new-team-productivity/translate-teamB-script.gif\" alt=\"translate-teamB-script.gif\"></p>\n<ul>\n<li><code class=\"language-text\">npm run translate</code> 명령어를 실행합니다.</li>\n<li>key를 입력합니다. (camelCase 형식이어야 하며, 특수문자로만 이루어져선 안 됩니다.)</li>\n<li>번역을 원하는 텍스트를 입력 후, 엔터를 누릅니다.</li>\n<li>번역한 결과가 각 <code class=\"language-text\">json</code> 파일의 마지막 라인에 자동으로 추가되며 포맷팅을 실행합니다.</li>\n</ul>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByUlEQVR42o2QS2/TQBSF/S9oXn6MXzPjedjjcZzEebpOXwlQIYpKu0KlbGGP2FRq1/0ViBViwZIfx3WMsmjTCuno6uja38ycY8hiH4lskpHjIlTM75iuaXs9q56NwG+13TTT8KkMIpnEMlNScIGJIJEICcO0NiSSIeG1p7DkW1EWBzgyCI+FykOmLC9CIfMI94jwMEc+QR52fQrTC6gfUnez2SxrY6PACLgKhG7ZwQvT37N8MC0nrNV1Wh1rq3bXfqBOzzFkolM9EFKptI8JMy0E6ploE89vQnZNBL8+loEpX+wfTOfVbLEsJgvdH8oki1UfZiQUGC5T6GY3HPFE6RwqaQRNYMoI5SCXyEikAWY7yRoWsa4OjvqDQumBjHWssjTVSZzAkfAJioHAT8LQZJaPgIHwEY/hZsokvDYfjplIoFJ4juX4TUMP4WFRLg9fzxbHSToejMp5eTKZHToubnct6KnRkzefrM/enV9dXX/+/uPn1293q1cX7y+vQyJbHfMZ7B98tHr75uzDx09ffv3+c3N7//L08vwCYPFf8HQ6X69Pq+U6y+ejcVVWK4iAPALPfp6sYa3KUCg3gJA2FLvXNkE763kM/wUP7og3R7wHKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"translate-slack-reaction.png\"\n        title=\"\"\n        src=\"/static/1692836624195.603146242730/00d43/translate-slack-reaction.png\"\n        srcset=\"/static/1692836624195.603146242730/63868/translate-slack-reaction.png 250w,\n/static/1692836624195.603146242730/0b533/translate-slack-reaction.png 500w,\n/static/1692836624195.603146242730/00d43/translate-slack-reaction.png 1000w,\n/static/1692836624195.603146242730/aa440/translate-slack-reaction.png 1500w,\n/static/1692836624195.603146242730/e8950/translate-slack-reaction.png 2000w,\n/static/1692836624195.603146242730/922e6/translate-slack-reaction.png 2140w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>작업 이후 좋은 반응과 함께 번거롭던 번역 작업이 편해졌다는 의견이 많았습니다. 여러 고민을 거쳐 만든\n보람이 있었죠. 이렇게 스크립트를 도입하여 번역 업무의 비효율성을 개선할 수 있었습니다. 이제 번역 업\n무에서 발생하는 시간을 크게 줄일 수 있게 되었습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://nodejs.org/api/fs.html\">https://nodejs.org/api/fs.html</a></li>\n<li><a href=\"https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/\">https://fe-developers.kakaoent.com/2022/220929-workflow-dispatch-with-inquirer-js/</a></li>\n</ul>"
    }
  }
]